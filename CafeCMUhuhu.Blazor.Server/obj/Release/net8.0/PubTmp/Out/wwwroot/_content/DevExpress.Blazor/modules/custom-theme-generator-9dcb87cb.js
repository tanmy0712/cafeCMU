import{g as e}from"./dom-utils-c35907a1.js";const t="dx-theme-marker",a="generic.light",n=`.${t} { font-family: "dx.${a}"; }`;class s{constructor(){this._dxtThemeMarkerLoaded=!1,this._customThemesCache={}}static getInstance(){return s.instance||(s.instance=new s),s.instance}async initializeWidget(e,t,a){return new(await this.getWidgetClass(t))(e,a)}async registerCustomTheme(e){if(!e)return;const t=e.name,n=JSON.stringify(e);if(this._customThemesCache[t]!==n){(await this.getVizModule()).registerTheme(e,a),this._customThemesCache[t]=n}}ensureDxtThemeMarkerExists(){if(this._dxtThemeMarkerLoaded||(this._dxtThemeMarkerLoaded=this.checkDxtThemeMarkerExists()),this._dxtThemeMarkerLoaded)return;const t=e();t&&(t.insertRule(n),this._dxtThemeMarkerLoaded=!0)}checkDxtThemeMarkerExists(){const e=document.createElement("div");e.className=t,window.document.body.appendChild(e);const a=window.getComputedStyle(e).fontFamily;return e.remove(),a.indexOf("dx.")>-1}async getVizModule(){const e=await this.ensureDxtModulesLoaded();return null==e?void 0:e.viz}async setLocalization(e){(await this.getVizModule()).localization.locale(e)}async ensureDxtModulesLoaded(){var e;return null!==(e=this._dxtModule)&&void 0!==e||(this._dxtModule=await this.loadDxtModules()),this._dxtModule}async loadDxtModules(){const e=await import("./devexpress-1990bef3.js");return this.ensureDxtThemeMarkerExists(),e}async getWidgetClass(e){const t=await this.getVizModule();return t[e]||await t[`${e}Loader`]()}}const r={dxBarGauge:"barGauge",dxBullet:"bullet",dxChart:"chart",dxFunnel:"funnel",dxCircularGauge:"gauge",dxLinearGauge:"gauge",dxVectorMap:"map",dxPieChart:"pie",dxPolarChart:"polar",dxRangeSelector:"rangeSelector",dxSankey:"sankey",dxSparklin:"sparkline",dxTreeMap:"treeMap"};function i(e,t,a,n){const s=r[t];if(!e||!s||!a)return null;null!=n||(n=`dx-${s}-blazor-theme`);const i=function(e,t){const a={},n=window.getComputedStyle(t);for(const[t,s]of Object.entries(e)){const e=n.getPropertyValue(s);if(!e)continue;o(t.split("."),e,a)}return a}(e,a);return Object.keys(i).length>0?{name:n,[s]:i}:null}function o(e,t,a){e.reduce(((a,n,s)=>{var r;return s===e.length-1?a[n]=t:null!==(r=a[n])&&void 0!==r?r:a[n]={}}),a)}export{s as W,i as g};
