/*! For license information please see dxw-html-editor-9cd522ed0507bf4d9844.js.LICENSE.txt */
(self.webpackChunkdevexpress_blazor_client=self.webpackChunkdevexpress_blazor_client||[]).push([[33],{1521:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n=new class{constructor(){this._converters={},this._converters={}}addConverter(e,t){this._converters[e]=t}getConverter(e){return this._converters[e]}}},4950:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>am});var n=i(7462),o=i(1521);o.Z.addConverter("delta",class{setQuillInstance(e){this.quillInstance=e}toHtml(){if(this.quillInstance)return this._isQuillEmpty()?"":this.quillInstance.getSemanticHTML(0,this.quillInstance.getLength()+1)}_isQuillEmpty(){const e=this.quillInstance.getContents();return 1===e.length()&&this._isDeltaEmpty(e)}_isDeltaEmpty(e){return e.reduce(((e,t)=>{let{insert:i}=t;return-1!==i.indexOf("\n")}))}});var r=i(9297),s=i(4417),a=i(9925),l=i(4096),c=i(3241),d=i(2343),h=i(7922),u=i(6206),p=i(5649),f=i(8214),_=i(9488),m=i(4343),g=i(5104),v=i(7224),b=i(1734),y=i(6694),C=i(418);const w=g.default.abstract,x=a.default.real(),S=g.default.inherit(function(){const e=(0,v.addNamespace)("scroll","dxScrollEmitter");return{ctor:function(t){this._element=t,this._locked=!1,this._proxiedScroll=e=>{this._disposed||this._scroll(e)},m.Z.on(this._element,e,this._proxiedScroll)},_scroll:w,check:function(e,t){this._locked&&t()},dispose:function(){this._disposed=!0,m.Z.off(this._element,e,this._proxiedScroll)}}}()),I=S.inherit({ctor:function(e,t){this.callBase(e),this._timeout=t},_scroll:function(){this._prepare(),this._forget()},_prepare:function(){this._timer&&this._clearTimer(),this._locked=!0},_clearTimer:function(){clearTimeout(this._timer),this._locked=!1,this._timer=null},_forget:function(){const e=this;this._timer=setTimeout((function(){e._clearTimer()}),this._timeout)},dispose:function(){this.callBase(),this._clearTimer()}}),k=I.inherit({ctor:function(e){this.callBase(e,400),this._lastWheelDirection=null},check:function(e,t){this._checkDirectionChanged(e),this.callBase(e,t)},_checkDirectionChanged:function(e){if(!(0,v.isDxMouseWheelEvent)(e))return void(this._lastWheelDirection=null);const t=e.shiftKey||!1,i=null!==this._lastWheelDirection&&t!==this._lastWheelDirection;this._lastWheelDirection=t,this._locked=this._locked&&!i}});let E=I.inherit({ctor:function(e){this.callBase(e,400)}});!function(){const{ios:e,android:t}=x;(e||t)&&(E=S.inherit({_scroll:function(){this._locked=!0;const e=this;(0,C.cancelAnimationFrame)(this._scrollFrame),this._scrollFrame=(0,C.requestAnimationFrame)((function(){e._locked=!1}))},check:function(e,t){(0,C.cancelAnimationFrame)(this._scrollFrame),(0,C.cancelAnimationFrame)(this._checkFrame);const i=this,n=this.callBase;this._checkFrame=(0,C.requestAnimationFrame)((function(){n.call(i,e,t),i._locked=!1}))},dispose:function(){this.callBase(),(0,C.cancelAnimationFrame)(this._scrollFrame),(0,C.cancelAnimationFrame)(this._checkFrame)}}))}();const O=b.default.inherit(function(){const e=Math.round(1e3/60);return{ctor:function(e){this.callBase.apply(this,arguments),this.direction="both",this._pointerLocker=new E(e),this._wheelLocker=new k(e)},validate:function(){return!0},configure:function(e){e.scrollTarget&&(this._pointerLocker.dispose(),this._wheelLocker.dispose(),this._pointerLocker=new E(e.scrollTarget),this._wheelLocker=new k(e.scrollTarget)),this.callBase(e)},_init:function(e){this._wheelLocker.check(e,function(){(0,v.isDxMouseWheelEvent)(e)&&this._accept(e)}.bind(this)),this._pointerLocker.check(e,function(){const t=this.isNative&&(0,v.isMouseEvent)(e);(0,v.isDxMouseWheelEvent)(e)||t||this._accept(e)}.bind(this)),this._fireEvent("dxscrollinit",e),this._prevEventData=(0,v.eventData)(e)},move:function(e){this.callBase.apply(this,arguments),e.isScrollingEvent=this.isNative||e.isScrollingEvent},_start:function(e){this._savedEventData=(0,v.eventData)(e),this._fireEvent("dxscrollstart",e),this._prevEventData=(0,v.eventData)(e)},_move:function(e){const t=(0,v.eventData)(e);this._fireEvent("dxscroll",e,{delta:(0,v.eventDelta)(this._prevEventData,t)}),(0,v.eventDelta)(this._savedEventData,t).time>200&&(this._savedEventData=this._prevEventData),this._prevEventData=(0,v.eventData)(e)},_end:function(t){const i=(0,v.eventDelta)(this._prevEventData,(0,v.eventData)(t));let n={x:0,y:0};if(!(0,v.isDxMouseWheelEvent)(t)&&i.time<100){const t=(0,v.eventDelta)(this._savedEventData,this._prevEventData),i=e/t.time;n={x:t.x*i,y:t.y*i}}this._fireEvent("dxscrollend",t,{velocity:n})},_stop:function(e){this._fireEvent("dxscrollstop",e)},cancel:function(e){this.callBase.apply(this,arguments),this._fireEvent("dxscrollcancel",e)},dispose:function(){this.callBase.apply(this,arguments),this._pointerLocker.dispose(),this._wheelLocker.dispose()},_clearSelection:function(){if(!this.isNative)return this.callBase.apply(this,arguments)},_toggleGestureCover:function(){if(!this.isNative)return this.callBase.apply(this,arguments)}}}());(0,y.Z)({emitter:O,events:["dxscrollinit","dxscrollstart","dxscroll","dxscrollend","dxscrollstop","dxscrollcancel"]});const T="dxscrollinit",D="dxscrollstart",B="dxscroll",A="dxscrollend",P="dxscrollstop",M="dxscrollcancel";var R=i(6819),$=i(9743),N=i(3544),V=i(8311),F=i(3575),Z=i(9186),H=i(3210),L=i(146),j=i(2678),z=i(54),W=i(402);const K=/^[\d\w.+_-]+@[\d\w._-]+\.[\w]+$/i,q="valid",U="invalid",G="pending";class Y{constructor(){this.NAME="base"}defaultMessage(e){return z.Z.getFormatter(`validation-${this.NAME}`)(e)}defaultFormattedMessage(e){return z.Z.getFormatter(`validation-${this.NAME}-formatted`)(e)}_isValueEmpty(e){return!X.required.validate(e,{})}validate(e,t){const i=Array.isArray(e)?e:[e];let n=!0;return i.length?i.every((e=>(n=this._validate(e,t),n))):n=this._validate(null,t),n}}class Q extends Y{constructor(){super(),this.NAME="custom"}validate(e,t){if(t.ignoreEmptyValue&&this._isValueEmpty(e))return!0;const{validator:i}=t,n=i&&(0,_.mf)(i.option)&&i.option("dataGetter"),o=(0,_.mf)(n)&&n(),r={value:e,validator:i,rule:t};return o&&(0,f.l)(r,o),t.validationCallback(r)}}const X={required:new class extends Y{constructor(){super(),this.NAME="required"}_validate(e,t){return!!(0,_.$K)(e)&&!1!==e&&(e=String(e),!t.trim&&(0,_.$K)(t.trim)||(e=e.trim()),""!==e)}},numeric:new class extends Y{constructor(){super(),this.NAME="numeric"}_validate(e,t){return!(!1===t.ignoreEmptyValue||!this._isValueEmpty(e))||(t.useCultureSettings&&(0,_.HD)(e)?!isNaN(W.Z.parse(e)):(0,_.kE)(e))}},range:new class extends Y{constructor(){super(),this.NAME="range"}_validate(e,t){if(!1!==t.ignoreEmptyValue&&this._isValueEmpty(e))return!0;const i=X.numeric.validate(e,t),n=(0,_.$K)(e)&&""!==e,o=i?parseFloat(e):n&&e.valueOf(),{min:r}=t,{max:s}=t;if(!i&&!(0,_.J_)(e)&&!n)return!1;if((0,_.$K)(r))return(0,_.$K)(s)?o>=r&&o<=s:o>=r;if((0,_.$K)(s))return o<=s;throw H.default.Error("E0101")}},stringLength:new class extends Y{constructor(){super(),this.NAME="stringLength"}_validate(e,t){return e=String(e??""),!t.trim&&(0,_.$K)(t.trim)||(e=e.trim()),!(!t.ignoreEmptyValue||!this._isValueEmpty(e))||X.range.validate(e.length,(0,f.l)({},t))}},custom:new Q,async:new class extends Q{constructor(){super(),this.NAME="async"}validate(e,t){if((0,_.$K)(t.reevaluate)||(0,f.l)(t,{reevaluate:!0}),t.ignoreEmptyValue&&this._isValueEmpty(e))return!0;const{validator:i}=t,n=i&&(0,_.mf)(i.option)&&i.option("dataGetter"),o=(0,_.mf)(n)&&n(),r={value:e,validator:i,rule:t};o&&(0,f.l)(r,o);const s=t.validationCallback(r);if(!(0,_.tI)(s))throw H.default.Error("E0103");return this._getWrappedPromise((0,p.p4)(s).promise())}_getWrappedPromise(e){const t=(0,p.BH)();return e.then((e=>{t.resolve(e)}),(e=>{const i={isValid:!1};(0,_.$K)(e)&&((0,_.HD)(e)?i.message=e:(0,_.Kn)(e)&&(0,_.$K)(e.message)&&(0,_.HD)(e.message)&&(i.message=e.message)),t.resolve(i)})),t.promise()}},compare:new class extends Y{constructor(){super(),this.NAME="compare"}_validate(e,t){if(!t.comparisonTarget)throw H.default.Error("E0102");if(t.ignoreEmptyValue&&this._isValueEmpty(e))return!0;(0,f.l)(t,{reevaluate:!0});const i=t.comparisonTarget();switch(t.comparisonType||"=="){case"==":return e==i;case"!=":return e!=i;case"===":return e===i;case"!==":return e!==i;case">":return e>i;case">=":return e>=i;case"<":return e<i;case"<=":return e<=i}}},pattern:new class extends Y{constructor(){super(),this.NAME="pattern"}_validate(e,t){if(!1!==t.ignoreEmptyValue&&this._isValueEmpty(e))return!0;let{pattern:i}=t;return(0,_.HD)(i)&&(i=new RegExp(i)),i.test(e)}},email:new class extends Y{constructor(){super(),this.NAME="email"}_validate(e,t){return!(!1===t.ignoreEmptyValue||!this._isValueEmpty(e))||X.pattern.validate(e,(0,f.l)({},t,{pattern:K}))}}},J=g.default.inherit({ctor(e,t){this.group=e,this.validators=[],this._isRemovable=t,this._pendingValidators=[],this._onValidatorStatusChanged=this._onValidatorStatusChanged.bind(this),this._resetValidationInfo(),this._eventsStrategy=new L.m(this)},validate(){const e={isValid:!0,brokenRules:[],validators:[],status:q,complete:null};return this._unsubscribeFromAllChangeEvents(),this._pendingValidators=[],this._resetValidationInfo(),(0,j.each)(this.validators,((t,i)=>{const n=i.validate();e.isValid=e.isValid&&n.isValid,n.brokenRules&&(e.brokenRules=e.brokenRules.concat(n.brokenRules)),e.validators.push(i),n.status===G&&this._addPendingValidator(i),this._subscribeToChangeEvents(i)})),this._pendingValidators.length?e.status=G:(e.status=e.isValid?q:U,this._unsubscribeFromAllChangeEvents(),this._raiseValidatedEvent(e)),this._updateValidationInfo(e),(0,f.l)({},this._validationInfo.result)},_subscribeToChangeEvents(e){e.on("validating",this._onValidatorStatusChanged),e.on("validated",this._onValidatorStatusChanged)},_unsubscribeFromChangeEvents(e){e.off("validating",this._onValidatorStatusChanged),e.off("validated",this._onValidatorStatusChanged)},_unsubscribeFromAllChangeEvents(){(0,j.each)(this.validators,((e,t)=>{this._unsubscribeFromChangeEvents(t)}))},_updateValidationInfo(e){this._validationInfo.result=e,e.status===G&&(this._validationInfo.deferred||(this._validationInfo.deferred=(0,p.BH)(),this._validationInfo.result.complete=this._validationInfo.deferred.promise()))},_addPendingValidator(e){(0,u.grep)(this._pendingValidators,(t=>t===e))[0]||this._pendingValidators.push(e)},_removePendingValidator(e){const t=this._pendingValidators.indexOf(e);t>=0&&this._pendingValidators.splice(t,1)},_orderBrokenRules(e){let t=[];return(0,j.each)(this.validators,((i,n)=>{const o=(0,u.grep)(e,(e=>e.validator===n));o.length&&(t=t.concat(o))})),t},_updateBrokenRules(e){if(!this._validationInfo.result)return;let{brokenRules:t}=this._validationInfo.result;const i=(0,u.grep)(t,(t=>t.validator!==e.validator));e.brokenRules&&(t=i.concat(e.brokenRules)),this._validationInfo.result.brokenRules=this._orderBrokenRules(t)},_onValidatorStatusChanged(e){e.status!==G?this._resolveIfComplete(e):this._addPendingValidator(e.validator)},_resolveIfComplete(e){if(this._removePendingValidator(e.validator),this._updateBrokenRules(e),!this._pendingValidators.length){if(this._unsubscribeFromAllChangeEvents(),!this._validationInfo.result)return;this._validationInfo.result.status=0===this._validationInfo.result.brokenRules.length?q:U,this._validationInfo.result.isValid=this._validationInfo.result.status===q;const e=(0,f.l)({},this._validationInfo.result,{complete:null}),{deferred:t}=this._validationInfo;this._validationInfo.deferred=null,this._raiseValidatedEvent(e),t&&setTimeout((()=>{t.resolve(e)}))}},_raiseValidatedEvent(e){this._eventsStrategy.fireEvent("validated",[e])},_resetValidationInfo(){this._validationInfo={result:null,deferred:null}},_synchronizeValidationInfo(){this._validationInfo.result&&(this._validationInfo.result.validators=this.validators)},removeRegisteredValidator(e){const t=this.validators.indexOf(e);t>-1&&(this.validators.splice(t,1),this._synchronizeValidationInfo(),this._resolveIfComplete({validator:e}))},registerValidator(e){this.validators.includes(e)||(this.validators.push(e),this._synchronizeValidationInfo())},reset(){(0,j.each)(this.validators,((e,t)=>{t.reset()})),this._pendingValidators=[],this._resetValidationInfo()},on(e,t){return this._eventsStrategy.on(e,t),this},off(e,t){return this._eventsStrategy.off(e,t),this}}),ee={groups:[],getGroupConfig(e){const t=(0,u.grep)(this.groups,(t=>t.group===e));if(t.length)return t[0]},findGroup(e,t){var i;const n=(null===(i=e.data())||void 0===i||null===(i=i.dxComponents)||void 0===i?void 0:i.includes("dxValidationGroup"))&&e.dxValidationGroup("instance");if(n)return n;const o=e.parents(".dx-validationgroup").first();return o.length?o.dxValidationGroup("instance"):t},initGroups(){this.groups=[],this.addGroup(void 0,!1)},addGroup(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.getGroupConfig(e);return i||(i=new J(e,t),this.groups.push(i)),i},removeGroup(e){const t=this.getGroupConfig(e),i=this.groups.indexOf(t);return i>-1&&this.groups.splice(i,1),t},_setDefaultMessage(e){const{rule:t,validator:i,name:n}=e;(0,_.$K)(t.message)||(i.defaultFormattedMessage&&(0,_.$K)(n)?t.message=i.defaultFormattedMessage(n):t.message=i.defaultMessage())},_addBrokenRule(e){const{result:t,rule:i}=e;t.brokenRule||(t.brokenRule=i),t.brokenRules||(t.brokenRules=[]),t.brokenRules.push(i)},validate(e,t,i){var n;let o={name:i,value:e,brokenRule:null,brokenRules:null,isValid:!0,validationRules:t,pendingRules:null,status:q,complete:null};const r=null==t||null===(n=t[0])||void 0===n?void 0:n.validator,s=[];return(0,j.each)(t||[],((t,n)=>{const r=X[n.type];let a;if(!r)throw H.default.Error("E0100");return(0,_.$K)(n.isValid)&&n.value===e&&!n.reevaluate?!!n.isValid||(o.isValid=!1,this._addBrokenRule({result:o,rule:n}),!1):(n.value=e,"async"===n.type?(s.push({rule:n,ruleValidator:r}),!0):(a=r.validate(e,n),n.isValid=a,a||(o.isValid=!1,this._setDefaultMessage({rule:n,validator:r,name:i}),this._addBrokenRule({result:o,rule:n})),!!n.isValid&&void 0))})),o.isValid&&!o.brokenRules&&s.length&&(o=this._validateAsyncRules({value:e,items:s,result:o,name:i})),this._synchronizeGroupValidationInfo(r,o),o.status=o.pendingRules?G:o.isValid?q:U,o},_synchronizeGroupValidationInfo(e,t){if(!e)return;const i=ee.getGroupConfig(e._validationGroup);i._updateBrokenRules.call(i,{validator:e,brokenRules:t.brokenRules??[]})},_validateAsyncRules(e){let{result:t,value:i,items:n,name:o}=e;const r=[];return(0,j.each)(n,((e,n)=>{const s=n.ruleValidator.validate(i,n.rule);if((0,_.tI)(s)){t.pendingRules||(t.pendingRules=[]),t.pendingRules.push(n.rule);const e=s.then((e=>{const t=this._getPatchedRuleResult(e);return this._updateRuleConfig({rule:n.rule,ruleResult:t,validator:n.ruleValidator,name:o}),t}));r.push(e)}else this._updateRuleConfig({rule:n.rule,ruleResult:this._getPatchedRuleResult(s),validator:n.ruleValidator,name:o})})),r.length&&(t.complete=Promise.all(r).then((e=>this._getAsyncRulesResult({result:t,values:e})))),t},_updateRuleConfig(e){let{rule:t,ruleResult:i,validator:n,name:o}=e;t.isValid=i.isValid,i.isValid||((0,_.$K)(i.message)&&(0,_.HD)(i.message)&&i.message.length?t.message=i.message:this._setDefaultMessage({rule:t,validator:n,name:o}))},_getPatchedRuleResult(e){let t;return(0,_.Kn)(e)?(t=(0,f.l)({},e),(0,_.$K)(t.isValid)||(t.isValid=!0)):t={isValid:!(0,_.jn)(e)||e},t},_getAsyncRulesResult(e){let{values:t,result:i}=e;return(0,j.each)(t,((e,t)=>{if(!1===t.isValid){i.isValid=t.isValid;const n=i.pendingRules[e];this._addBrokenRule({result:i,rule:n})}})),i.pendingRules=null,i.complete=null,i.status=i.isValid?q:U,i},registerValidatorInGroup(e,t){const i=ee.addGroup(e);i.registerValidator.call(i,t)},removeRegisteredValidator(e,t){const i=ee.getGroupConfig(e);if(i){i.removeRegisteredValidator.call(i,t);const n=i.validators,o=i._isRemovable;0===n.length&&o&&this.removeGroup(e)}},initValidationOptions(e){const t={};return e&&["isValid","validationStatus","validationError","validationErrors"].forEach((i=>{i in e&&(0,f.l)(t,this.synchronizeValidationOptions({name:i,value:e[i]},e))})),t},synchronizeValidationOptions(e,t){let{name:i,value:n}=e;switch(i){case"validationStatus":{const e=n===q||n===G;return t.isValid!==e?{isValid:e}:{}}case"isValid":{const{validationStatus:e}=t;let i=e;return n&&e===U?i=q:n||e===U||(i=U),i!==e?{validationStatus:i}:{}}case"validationErrors":{const e=n&&n.length?n[0]:null;return t.validationError!==e?{validationError:e}:{}}case"validationError":{const{validationErrors:e}=t;if(!n&&e)return{validationErrors:null};if(n&&!e)return{validationErrors:[n]};if(n&&e&&n!==e[0])return e[0]=n,{validationErrors:e.slice()}}}return{}},validateGroup(e){const t=ee.getGroupConfig(e);if(!t)throw H.default.Error("E0110");return t.validate()},resetGroup(e){const t=ee.getGroupConfig(e);if(!t)throw H.default.Error("E0110");return t.reset()}};ee.initGroups();const te=ee,ie=te;var ne=i(4196),oe=i(741),re=i(7218),se=i(5125);const ae="dx-invalid-message",le=se.Z.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{integrationOptions:{},templatesRenderAsynchronously:!1,shading:!1,width:"auto",height:"auto",hideOnOutsideClick:!1,animation:null,visible:!0,propagateOutsideClick:!0,_checkParentVisibility:!1,rtlEnabled:!1,contentTemplate:this._renderInnerHtml,maxWidth:"100%",container:this.$element(),target:void 0,mode:"auto",validationErrors:void 0,preventScrollEvents:!1,positionSide:"top",boundary:void 0,offset:{h:0,v:0},contentId:void 0})},_init(){this.callBase(),this.updateMaxWidth(),this._updatePosition()},_initMarkup(){this.callBase(),this._ensureMessageNotEmpty(),this._updatePositionByTarget(),this._toggleModeClass(),this._updateContentId()},_updatePositionByTarget(){const{target:e}=this.option();this.option("position.of",e)},_ensureMessageNotEmpty(){this._textMarkup=this._getTextMarkup();const e=this.option("visible")&&this._textMarkup;this._toggleVisibilityClasses(e)},_toggleVisibilityClasses(e){e?(this.$element().addClass(ae),this.$wrapper().addClass(ae)):(this.$element().removeClass(ae),this.$wrapper().removeClass(ae))},_updateContentId(){const{container:e,contentId:t}=this.option(),i=t??(0,c.Z)(e).attr("aria-describedby");this.$content().addClass("dx-invalid-message-content").attr("id",i)},_renderInnerHtml(e){const t=e&&(0,c.Z)(e);null==t||t.html(this._textMarkup)},_getTextMarkup(){const e=this.option("validationErrors")??[];let t="";return e.forEach((e=>{t+=(t?"<br />":"")+(0,re.encodeHtml)((null==e?void 0:e.message)??"")})),t},_toggleModeClass(){const e=this.option("mode");this.$wrapper().toggleClass("dx-invalid-message-auto","auto"===e).toggleClass("dx-invalid-message-always","always"===e)},updateMaxWidth(){const e=this.option("target"),t=(0,oe.Y_)(e);let i="100%";t&&(i=Math.max(t,100)),this.option({maxWidth:i})},_getPositionsArray(e,t){switch(e){case"top":return[`${t} bottom`,`${t} top`];case"left":return["right","left"];case"right":return["left","right"];default:return[`${t} top`,`${t} bottom`]}},_updatePosition(){const{positionSide:e,rtlEnabled:t,offset:i,boundary:o}=this.option(),r=(0,ne.q)(t),s=this._getPositionsArray(e,r),a=(0,n.Z)({},i);this.$element().addClass(`dx-invalid-message-${e}`),t&&"left"!==e&&"right"!==e&&(a.h=-a.h),"top"===e&&(a.v=-a.v),"left"===e&&(a.h=-a.h),this.option("position",{offset:a,boundary:o,my:s[0],at:s[1],collision:"none flip"})},_optionChanged(e){const{name:t,value:i,previousValue:n}=e;switch(t){case"target":this._updatePositionByTarget(),this.updateMaxWidth(),this.callBase(e);break;case"boundary":this.option("position.boundary",i);break;case"mode":this._toggleModeClass(i);break;case"rtlEnabled":case"offset":case"positionSide":this.$element().removeClass(`dx-invalid-message-${n}`),this._updatePosition();break;case"container":this._updateContentId(),this.callBase(e);break;case"contentId":this._updateContentId();break;case"validationErrors":this._ensureMessageNotEmpty(),this._renderInnerHtml(this.$content());break;default:this.callBase(e)}}});(0,r.default)("dxValidationMessage",le);const ce=le;var de=i(8015);const he="dx-invalid-message-auto",ue="dx-validation-target",pe=["outlined","filled","underlined"],fe={validationMessageMode:"mode",validationMessagePosition:"positionSide",validationMessageOffset:"offset",validationBoundary:"boundary"},_e=de.default.inherit({ctor(){this.showValidationMessageTimeout=null,this.validationRequest=(0,h.Z)(),this.callBase.apply(this,arguments)},_createElement(e){this.callBase(e);const t=this.$element();t&&(0,N.aT)(t[0],ue,this)},_initOptions(e){this.callBase.apply(this,arguments),this.option(ie.initValidationOptions(e))},_init(){this._initialValue=this.option("value"),this.callBase(),this._options.cache("validationTooltipOptions",this.option("validationTooltipOptions")),this.$element().addClass("dx-show-invalid-badge")},_getDefaultOptions(){return(0,f.l)(this.callBase(),{value:null,name:"",onValueChanged:null,readOnly:!1,isValid:!0,validationError:null,validationErrors:null,validationStatus:"valid",validationMessageMode:"auto",validationMessagePosition:"bottom",validationBoundary:void 0,validationMessageOffset:{h:0,v:0},validationTooltipOptions:{},_showValidationMessage:!0,isDirty:!1})},_attachKeyboardEvents(){this.option("readOnly")||this.callBase()},_setOptionsByReference(){this.callBase(),(0,f.l)(this._optionsByReference,{validationError:!0})},_createValueChangeAction(){this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})},_suppressValueChangeAction(){this._valueChangeActionSuppressed=!0},_resumeValueChangeAction(){this._valueChangeActionSuppressed=!1},_initMarkup(){var e;this._toggleReadOnlyState(),this._setSubmitElementName(this.option("name")),this.callBase(),this._renderValidationState(),null===(e=this.option("_onMarkupRendered"))||void 0===e||e()},_raiseValueChangeAction(e,t){this._valueChangeAction||this._createValueChangeAction(),this._valueChangeAction(this._valueChangeArgs(e,t))},_valueChangeArgs(e,t){return{value:e,previousValue:t,event:this._valueChangeEventInstance}},_saveValueChangeEvent(e){this._valueChangeEventInstance=e},_focusInHandler(e){const t="auto"===this.option("validationMessageMode");if(this._canValueBeChangedByClick()&&t){var i;const e=null===(i=this._validationMessage)||void 0===i?void 0:i.$wrapper();null==e||e.removeClass(he),clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout((()=>null==e?void 0:e.addClass(he)),150)}return this.callBase(e)},_canValueBeChangedByClick:()=>!1,_getStylingModePrefix:()=>"dx-editor-",_renderStylingMode(){const e=this.option("stylingMode"),t=this._getStylingModePrefix(),i=pe.map((e=>t+e));i.forEach((e=>this.$element().removeClass(e)));let n=t+e;if(!i.includes(n)){const e=this._getDefaultOptions().stylingMode,i=this._convertRulesToOptions(this._defaultOptionsRules()).stylingMode;n=t+(i||e)}this.$element().addClass(n)},_getValidationErrors(){let e=this.option("validationErrors");return!e&&this.option("validationError")&&(e=[this.option("validationError")]),e},_disposeValidationMessage(){this._$validationMessage&&(this._$validationMessage.remove(),this.setAria("describedby",null),this._$validationMessage=void 0,this._validationMessage=void 0)},_toggleValidationClasses(e){this.$element().toggleClass("dx-invalid",e),this.setAria("invalid",e||void 0)},_renderValidationState(){const e=this.option("isValid")&&"invalid"!==this.option("validationStatus"),t=this._getValidationErrors(),i=this.$element();if(this._toggleValidationClasses(!e),(0,Z.hasWindow)()&&!1!==this.option("_showValidationMessage")&&(this._disposeValidationMessage(),!e&&t)){const{validationMessageMode:e,validationMessageOffset:n,validationBoundary:o,rtlEnabled:r}=this.option();this._$validationMessage=(0,c.Z)("<div>").appendTo(i);const s=`dx-${new V.Z}`;this.setAria("describedby",s),this._validationMessage=new ce(this._$validationMessage,(0,f.l)({validationErrors:t,rtlEnabled:r,target:this._getValidationMessageTarget(),visualContainer:i,mode:e,positionSide:this._getValidationMessagePosition(),offset:n,boundary:o,contentId:s},this._options.cache("validationTooltipOptions"))),this._bindInnerWidgetOptions(this._validationMessage,"validationTooltipOptions")}},_getValidationMessagePosition(){return this.option("validationMessagePosition")},_getValidationMessageTarget(){return this.$element()},_toggleReadOnlyState(){const e=this.option("readOnly");this._toggleBackspaceHandler(e),this.$element().toggleClass("dx-state-readonly",!!e),this._setAriaReadonly(e)},_setAriaReadonly(e){this.setAria("readonly",e||void 0)},_toggleBackspaceHandler(e){const t=this._keyboardEventBindingTarget(),i=(0,v.addNamespace)("keydown","editorReadOnly");m.Z.off(t,i),e&&m.Z.on(t,i,(e=>{"backspace"===(0,v.normalizeKeyName)(e)&&e.preventDefault()}))},_dispose(){const e=this.$element()[0];(0,N.aT)(e,ue,null),clearTimeout(this.showValidationMessageTimeout),this._disposeValidationMessage(),this.callBase()},_setSubmitElementName(e){const t=this._getSubmitElement();t&&(e.length>0?t.attr("name",e):t.removeAttr("name"))},_getSubmitElement:()=>null,_setValidationMessageOption(e){var t;let{name:i,value:n}=e;const o=fe[i]?fe[i]:i;null===(t=this._validationMessage)||void 0===t||t.option(o,n)},_hasActiveElement:u.noop,_optionChanged(e){var t;switch(e.name){case"onValueChanged":this._createValueChangeAction();break;case"readOnly":this._toggleReadOnlyState(),this._refreshFocusState();break;case"value":e.value!=e.previousValue&&(this.option("isDirty",this._initialValue!==e.value),this.validationRequest.fire({value:e.value,editor:this})),this._valueChangeActionSuppressed||(this._raiseValueChangeAction(e.value,e.previousValue),this._saveValueChangeEvent(void 0));break;case"width":this.callBase(e),null===(t=this._validationMessage)||void 0===t||t.updateMaxWidth();break;case"name":this._setSubmitElementName(e.value);break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(ie.synchronizeValidationOptions(e,this.option())),this._renderValidationState();break;case"validationBoundary":case"validationMessageMode":case"validationMessagePosition":case"validationMessageOffset":this._setValidationMessageOption(e);break;case"rtlEnabled":this._setValidationMessageOption(e),this.callBase(e);break;case"validationTooltipOptions":this._innerWidgetOptionChanged(this._validationMessage,e);break;case"_showValidationMessage":case"isDirty":break;default:this.callBase(e)}},_resetToInitialValue(){this.option("value",this._initialValue)},blur(){this._hasActiveElement()&&(0,F.resetActiveElement)()},clear(){const e=this._getDefaultOptions();this.option("value",e.value)},reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;arguments.length&&(this._initialValue=e),this._resetToInitialValue(),this.option("isDirty",!1),this.option("isValid",!0)}});_e.isEditor=e=>e instanceof _e;const me=_e;var ge=i(1898);var ve=i(1853),be=i.n(ve);function ye(){if(!be())throw ge.Z.Error("E1041","Quill");return be()}let Ce={};be()&&(Ce=be().import("attributors/style/align"),Ce.whitelist.push("left"));const we=Ce;let xe={};be()&&(xe=be().import("attributors/style/font"),xe.whitelist=null);const Se=xe;let Ie={};if(be()){const e=be().import("formats/image");Ie=class extends e{static create(e){const t=e&&e.src||e,i=super.create(t);if((0,_.Kn)(e)){const t=(t,n)=>{e[t]&&i.setAttribute(t,n)};t("alt",e.alt),t("width",e.width),t("height",e.height)}return i}static formats(e){const t=super.formats(e);return t.imageSrc=e.getAttribute("src"),t}formats(){const e=super.formats(),t=this.domNode.style.float;return t&&(e.float=t),e}format(e,t){"float"===e?this.domNode.style[e]=t:super.format(e,t)}static value(e){return{src:e.getAttribute("src"),width:e.getAttribute("width"),height:e.getAttribute("height"),alt:e.getAttribute("alt")}}},Ie.blotName="extendedImage"}const ke=Ie;let Ee={};if(be()){const e=be().import("formats/link");Ee=class t extends e{static create(e){const t=(null==e?void 0:e.href)??e,i=super.create(t);return(0,_.Kn)(e)&&(e.text&&(i.innerText=e.text),e.target||i.removeAttribute("target")),i}static formats(e){return{href:e.getAttribute("href"),target:e.getAttribute("target")}}formats(){const e=super.formats(),{href:i,target:n}=t.formats(this.domNode);return e.link=i,e.target=n,e}format(e,t){"link"===e&&(0,_.Kn)(t)?(t.text&&(this.domNode.innerText=t.text),t.target?this.domNode.setAttribute("target","_blank"):this.domNode.removeAttribute("target"),this.domNode.setAttribute("href",t.href)):super.format(e,t)}static value(e){return{href:e.getAttribute("href"),text:e.innerText,target:!!e.getAttribute("target")}}}}const Oe=Ee;let Te={};be()&&(Te=be().import("attributors/style/size"),Te.whitelist=null);const De=Te;var Be=i(9011);let Ae=class{};if(be()){const e=be().import("core/module");Ae=class extends e{constructor(e,t){super(e,t),this.editorInstance=t.editorInstance}saveValueChangeEvent(e){this.editorInstance._saveValueChangeEvent(e)}addCleanCallback(e){this.editorInstance.addCleanCallback(e)}handleOptionChangeValue(e){(0,_.Kn)(e)?Object.entries(e).forEach((e=>{let[t,i]=e;return this.option(t,i)})):(0,_.$K)(e)||null==this||this.clean()}}}const Pe=Ae;let Me=Pe;be()&&(Me=class extends Pe{constructor(e,t){super(e,t);const i=this.editorInstance.NAME;m.Z.on(this.quill.root,(0,v.addNamespace)("drop",i),this._dropHandler.bind(this)),m.Z.on(this.quill.root,(0,v.addNamespace)("paste",i),this._pasteHandler.bind(this))}_dropHandler(e){var t;const{dataTransfer:i}=e.originalEvent,n=null==i||null===(t=i.files)||void 0===t?void 0:t.length;this.saveValueChangeEvent(e),e.preventDefault(),n&&this._getImage(i.files,this._addImage.bind(this))}_pasteHandler(e){var t;const{clipboardData:i}=e.originalEvent;if(this.saveValueChangeEvent(e),!i)return;const n=null===(t=i.items)||void 0===t?void 0:t.length;!i.getData("text/html")&&n&&this._getImage(i.items,(e=>{Be.default.mozilla||this._addImage(e)}))}_isImage(e){return!!e.type.match(/^image\/(a?png|bmp|gif|p?jpe?g|svg|vnd\.microsoft\.icon|webp)/i)}_getImage(e,t){const i=(0,Z.getWindow)();(0,j.each)(e,((e,n)=>{if(!this._isImage(n))return;const o=new i.FileReader;o.onload=e=>{let{target:i}=e;t(i.result)};const r=n.getAsFile?n.getAsFile():n;r instanceof i.Blob&&o.readAsDataURL(r)}))}_addImage(e){const t=this.quill.getSelection(),i=t?t.index:this.quill.getLength();this.quill.insertEmbed(i,"extendedImage",e,"user")}});const Re=Me,$e=(0,v.addNamespace)("dxclick","dxHtmlEditorImageCursor");let Ne=Pe;be()&&(Ne=class extends Pe{constructor(e,t){super(e,t),this.addCleanCallback(this.clean.bind(this)),this._attachEvents()}_attachEvents(){m.Z.on(this.quill.root,$e,this._clickHandler.bind(this))}_detachEvents(){m.Z.off(this.quill.root,$e)}_clickHandler(e){this._isAllowedTarget(e.target)&&this._adjustSelection(e)}_isAllowedTarget(e){return this._isImage(e)}_isImage(e){return"IMG"===e.tagName.toUpperCase()}_adjustSelection(e){const t=this.quill.scroll.find(e.target);if(t){const e=t.offset(this.quill.scroll);this.quill.setSelection(e+1,0)}else this.quill.setSelection(0,0)}clean(){this._detachEvents()}});const Ve=Ne;var Fe=i(4094),Ze=i(2051),He=i(4969),Le=Array.isArray;function je(e){var t=typeof e;return"string"===t||"number"===t}function ze(e){return null==e}function We(e){return null===e||!1===e||!0===e||void 0===e}function Ke(e){return"function"==typeof e}function qe(e){return"string"==typeof e}function Ue(e){return null===e}function Ge(e,t){var i={};if(e)for(var n in e)i[n]=e[n];if(t)for(var o in t)i[o]=t[o];return i}function Ye(e){return!Ue(e)&&"object"==typeof e}var Qe={};function Xe(e){return e.substr(2).toLowerCase()}function Je(e,t){e.appendChild(t)}function et(e,t,i){Ue(i)?Je(e,t):e.insertBefore(t,i)}function tt(e,t){e.removeChild(t)}function it(e){for(var t=0;t<e.length;t++)e[t]()}function nt(e,t,i){var n=e.children;return 4&i?n.$LI:8192&i?2===e.childFlags?n:n[t?0:n.length-1]:n}function ot(e,t){for(var i;e;){if(2033&(i=e.flags))return e.dom;e=nt(e,t,i)}return null}function rt(e,t){do{var i=e.flags;if(2033&i)return void tt(t,e.dom);var n=e.children;if(4&i&&(e=n.$LI),8&i&&(e=n),8192&i){if(2!==e.childFlags){for(var o=0,r=n.length;o<r;++o)rt(n[o],t);return}e=n}}while(e)}function st(e,t,i){do{var n=e.flags;if(2033&n)return void et(t,e.dom,i);var o=e.children;if(4&n&&(e=o.$LI),8&n&&(e=o),8192&n){if(2!==e.childFlags){for(var r=0,s=o.length;r<s;++r)st(o[r],t,i);return}e=o}}while(e)}function at(e,t,i){return e.constructor.getDerivedStateFromProps?Ge(i,e.constructor.getDerivedStateFromProps(t,i)):i}var lt={v:!1},ct={componentComparator:null,createVNode:null,renderComplete:null};function dt(e,t){e.textContent=t}function ht(e,t){return Ye(e)&&e.event===t.event&&e.data===t.data}function ut(e,t){for(var i in t)void 0===e[i]&&(e[i]=t[i]);return e}function pt(e,t){return!!Ke(e)&&(e(t),!0)}var ft="$";function _t(e,t,i,n,o,r,s,a){this.childFlags=e,this.children=t,this.className=i,this.dom=null,this.flags=n,this.key=void 0===o?null:o,this.props=void 0===r?null:r,this.ref=void 0===s?null:s,this.type=a}function mt(e,t,i,n,o,r,s,a){var l=void 0===o?1:o,c=new _t(l,n,i,e,s,r,a,t);return ct.createVNode&&ct.createVNode(c),0===l&&St(c,c.children),c}function gt(e,t,i,n,o){e=function(e,t){return 12&e?e:t.prototype&&t.prototype.render?4:t.render?32776:8}(e,t);var r=new _t(1,null,null,e,n,function(e,t,i){var n=(32768&e?t.render:t).defaultProps;return ze(n)?i:ze(i)?Ge(n,null):ut(i,n)}(e,t,i),function(e,t,i){if(4&e)return i;var n=(32768&e?t.render:t).defaultHooks;return ze(n)?i:ze(i)?n:ut(i,n)}(e,t,o),t);return ct.createVNode&&ct.createVNode(r),r}function vt(e,t){return new _t(1,ze(e)||!0===e||!1===e?"":e,null,16,t,null,null,null)}function bt(e,t,i){var n=mt(8192,8192,null,e,t,null,i,null);switch(n.childFlags){case 1:n.children=wt(),n.childFlags=2;break;case 16:n.children=[vt(e)],n.childFlags=4}return n}function yt(e){var t=e.props;if(t){var i=e.flags;481&i&&(void 0!==t.children&&ze(e.children)&&St(e,t.children),void 0!==t.className&&(ze(e.className)&&(e.className=t.className||null),t.className=void 0)),void 0!==t.key&&(e.key=t.key,t.key=void 0),void 0!==t.ref&&(e.ref=8&i?Ge(e.ref,t.ref):t.ref,t.ref=void 0)}return e}function Ct(e){var t=-16385&e.flags,i=e.props;if(14&t&&!Ue(i)){var n=i;for(var o in i={},n)i[o]=n[o]}return 0==(8192&t)?new _t(e.childFlags,e.children,e.className,t,e.key,i,e.ref,e.type):function(e){var t=e.children,i=e.childFlags;return bt(2===i?Ct(t):t.map(Ct),i,e.key)}(e)}function wt(){return vt("",null)}function xt(e,t,i,n){for(var o=e.length;i<o;i++){var r=e[i];if(!We(r)){var s=n+ft+i;if(Le(r))xt(r,t,0,s);else{if(je(r))r=vt(r,s);else{var a=r.key,l=qe(a)&&a[0]===ft;(81920&r.flags||l)&&(r=Ct(r)),r.flags|=65536,l?a.substring(0,n.length)!==n&&(r.key=n+a):Ue(a)?r.key=s:r.key=n+a}t.push(r)}}}}function St(e,t){var i,n=1;if(We(t))i=t;else if(je(t))n=16,i=t;else if(Le(t)){for(var o=t.length,r=0;r<o;++r){var s=t[r];if(We(s)||Le(s)){i=i||t.slice(0,r),xt(t,i,r,"");break}if(je(s))(i=i||t.slice(0,r)).push(vt(s,ft+r));else{var a=s.key,l=(81920&s.flags)>0,c=Ue(a),d=qe(a)&&a[0]===ft;l||c||d?(i=i||t.slice(0,r),(l||d)&&(s=Ct(s)),(c||d)&&(s.key=ft+r),i.push(s)):i&&i.push(s),s.flags|=65536}}n=0===(i=i||t).length?1:8}else(i=t).flags|=65536,81920&t.flags&&(i=Ct(t)),n=2;return e.children=i,e.childFlags=n,e}function It(e){return We(e)||je(e)?vt(e,null):Le(e)?bt(e,0,null):16384&e.flags?Ct(e):e}var kt="http://www.w3.org/1999/xlink",Et="http://www.w3.org/XML/1998/namespace",Ot={"xlink:actuate":kt,"xlink:arcrole":kt,"xlink:href":kt,"xlink:role":kt,"xlink:show":kt,"xlink:title":kt,"xlink:type":kt,"xml:base":Et,"xml:lang":Et,"xml:space":Et};function Tt(e){return{onClick:e,onDblClick:e,onFocusIn:e,onFocusOut:e,onKeyDown:e,onKeyPress:e,onKeyUp:e,onMouseDown:e,onMouseMove:e,onMouseUp:e,onTouchEnd:e,onTouchMove:e,onTouchStart:e}}var Dt=Tt(0),Bt=Tt(null),At=Tt(!0);function Pt(e,t){var i=t.$EV;return i||(i=t.$EV=Tt(null)),i[e]||1==++Dt[e]&&(Bt[e]=function(e){var t="onClick"===e||"onDblClick"===e?function(e){return function(t){0===t.button?Rt(t,!0,e,Ft(t)):t.stopPropagation()}}(e):function(e){return function(t){Rt(t,!1,e,Ft(t))}}(e);return document.addEventListener(Xe(e),t),t}(e)),i}function Mt(e,t){var i=t.$EV;i&&i[e]&&(0==--Dt[e]&&(document.removeEventListener(Xe(e),Bt[e]),Bt[e]=null),i[e]=null)}function Rt(e,t,i,n){var o=function(e){return Ke(e.composedPath)?e.composedPath()[0]:e.target}(e);do{if(t&&o.disabled)return;var r=o.$EV;if(r){var s=r[i];if(s&&(n.dom=o,s.event?s.event(s.data,e):s(e),e.cancelBubble))return}o=o.parentNode}while(!Ue(o))}function $t(){this.cancelBubble=!0,this.immediatePropagationStopped||this.stopImmediatePropagation()}function Nt(){return this.defaultPrevented}function Vt(){return this.cancelBubble}function Ft(e){var t={dom:document};return e.isDefaultPrevented=Nt,e.isPropagationStopped=Vt,e.stopPropagation=$t,Object.defineProperty(e,"currentTarget",{configurable:!0,get:function(){return t.dom}}),t}function Zt(e,t,i){if(e[t]){var n=e[t];n.event?n.event(n.data,i):n(i)}else{var o=t.toLowerCase();e[o]&&e[o](i)}}function Ht(e,t){var i=function(i){var n=this.$V;if(n){var o=n.props||Qe,r=n.dom;if(qe(e))Zt(o,e,i);else for(var s=0;s<e.length;++s)Zt(o,e[s],i);if(Ke(t)){var a=this.$V,l=a.props||Qe;t(l,r,!1,a)}}};return Object.defineProperty(i,"wrapped",{configurable:!1,enumerable:!1,value:!0,writable:!1}),i}function Lt(e,t,i){var n="$"+t,o=e[n];if(o){if(o[1].wrapped)return;e.removeEventListener(o[0],o[1]),e[n]=null}Ke(i)&&(e.addEventListener(t,i),e[n]=[t,i])}function jt(e){return"checkbox"===e||"radio"===e}var zt=Ht("onInput",qt),Wt=Ht(["onClick","onChange"],qt);function Kt(e){e.stopPropagation()}function qt(e,t){var i=e.type,n=e.value,o=e.checked,r=e.multiple,s=e.defaultValue,a=!ze(n);i&&i!==t.type&&t.setAttribute("type",i),ze(r)||r===t.multiple||(t.multiple=r),ze(s)||a||(t.defaultValue=s+""),jt(i)?(a&&(t.value=n),ze(o)||(t.checked=o)):a&&t.value!==n?(t.defaultValue=n,t.value=n):ze(o)||(t.checked=o)}function Ut(e,t){if("option"===e.type)!function(e,t){var i=e.props||Qe,n=e.dom;n.value=i.value,i.value===t||Le(t)&&-1!==t.indexOf(i.value)?n.selected=!0:ze(t)&&ze(i.selected)||(n.selected=i.selected||!1)}(e,t);else{var i=e.children,n=e.flags;if(4&n)Ut(i.$LI,t);else if(8&n)Ut(i,t);else if(2===e.childFlags)Ut(i,t);else if(12&e.childFlags)for(var o=0,r=i.length;o<r;++o)Ut(i[o],t)}}Kt.wrapped=!0;var Gt=Ht("onChange",Yt);function Yt(e,t,i,n){var o=Boolean(e.multiple);ze(e.multiple)||o===t.multiple||(t.multiple=o);var r=e.selectedIndex;if(-1===r&&(t.selectedIndex=-1),1!==n.childFlags){var s=e.value;"number"==typeof r&&r>-1&&t.options[r]&&(s=t.options[r].value),i&&ze(s)&&(s=e.defaultValue),Ut(n,s)}}var Qt,Xt,Jt=Ht("onInput",ti),ei=Ht("onChange");function ti(e,t,i){var n=e.value,o=t.value;if(ze(n)){if(i){var r=e.defaultValue;ze(r)||r===o||(t.defaultValue=r,t.value=r)}}else o!==n&&(t.defaultValue=n,t.value=n)}function ii(e,t,i,n,o,r){64&e?qt(n,i):256&e?Yt(n,i,o,t):128&e&&ti(n,i,o),r&&(i.$V=t)}function ni(e){return e.type&&jt(e.type)?!ze(e.checked):!ze(e.value)}function oi(e){e&&!pt(e,null)&&e.current&&(e.current=null)}function ri(e,t,i){e&&(Ke(e)||void 0!==e.current)&&i.push((function(){pt(e,t)||void 0===e.current||(e.current=t)}))}function si(e,t){ai(e),rt(e,t)}function ai(e){var t,i=e.flags,n=e.children;if(481&i){t=e.ref;var o=e.props;oi(t);var r=e.childFlags;if(!Ue(o))for(var s=Object.keys(o),a=0,l=s.length;a<l;a++){var c=s[a];At[c]&&Mt(c,e.dom)}12&r?li(n):2===r&&ai(n)}else n&&(4&i?(Ke(n.componentWillUnmount)&&n.componentWillUnmount(),oi(e.ref),n.$UN=!0,ai(n.$LI)):8&i?(!ze(t=e.ref)&&Ke(t.onComponentWillUnmount)&&t.onComponentWillUnmount(ot(e,!0),e.props||Qe),ai(n)):1024&i?si(n,e.ref):8192&i&&12&e.childFlags&&li(n))}function li(e){for(var t=0,i=e.length;t<i;++t)ai(e[t])}function ci(e){e.textContent=""}function di(e,t,i){li(i),8192&t.flags?rt(t,e):ci(e)}function hi(e,t,i,n,o,r,s){switch(e){case"children":case"childrenType":case"className":case"defaultValue":case"key":case"multiple":case"ref":case"selectedIndex":break;case"autoFocus":n.autofocus=!!i;break;case"allowfullscreen":case"autoplay":case"capture":case"checked":case"controls":case"default":case"disabled":case"hidden":case"indeterminate":case"loop":case"muted":case"novalidate":case"open":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"selected":n[e]=!!i;break;case"defaultChecked":case"value":case"volume":if(r&&"value"===e)break;var a=ze(i)?"":i;n[e]!==a&&(n[e]=a);break;case"style":!function(e,t,i){if(ze(t))i.removeAttribute("style");else{var n,o,r=i.style;if(qe(t))r.cssText=t;else if(ze(e)||qe(e))for(n in t)o=t[n],r.setProperty(n,o);else{for(n in t)(o=t[n])!==e[n]&&r.setProperty(n,o);for(n in e)ze(t[n])&&r.removeProperty(n)}}}(t,i,n);break;case"dangerouslySetInnerHTML":!function(e,t,i,n){var o=e&&e.__html||"",r=t&&t.__html||"";o!==r&&(ze(r)||function(e,t){var i=document.createElement("i");return i.innerHTML=t,i.innerHTML===e.innerHTML}(n,r)||(Ue(i)||(12&i.childFlags?li(i.children):2===i.childFlags&&ai(i.children),i.children=null,i.childFlags=1),n.innerHTML=r))}(t,i,s,n);break;default:At[e]?function(e,t,i,n){if(Ke(i))Pt(e,n)[e]=i;else if(Ye(i)){if(ht(t,i))return;Pt(e,n)[e]=i}else Mt(e,n)}(e,t,i,n):111===e.charCodeAt(0)&&110===e.charCodeAt(1)?function(e,t,i,n){if(Ye(i)){if(ht(t,i))return;i=function(e){var t=e.event;return function(i){t(e.data,i)}}(i)}Lt(n,Xe(e),i)}(e,t,i,n):ze(i)?n.removeAttribute(e):o&&Ot[e]?n.setAttributeNS(Ot[e],e,i):n.setAttribute(e,i)}}function ui(e,t,i,n,o){var r=!1,s=(448&t)>0;for(var a in s&&(r=ni(i))&&function(e,t,i){64&e?function(e,t){jt(t.type)?(Lt(e,"change",Wt),Lt(e,"click",Kt)):Lt(e,"input",zt)}(t,i):256&e?function(e){Lt(e,"change",Gt)}(t):128&e&&function(e,t){Lt(e,"input",Jt),t.onChange&&Lt(e,"change",ei)}(t,i)}(t,n,i),i)hi(a,null,i[a],n,o,r,null);s&&ii(t,e,n,i,!0,r)}function pi(e,t,i){var n=It(e.render(t,e.state,i)),o=i;return Ke(e.getChildContext)&&(o=Ge(i,e.getChildContext())),e.$CX=o,n}function fi(e,t,i,n,o,r){var s=new t(i,n),a=s.$N=Boolean(t.getDerivedStateFromProps||s.getSnapshotBeforeUpdate);if(s.$SVG=o,s.$L=r,e.children=s,s.$BS=!1,s.context=n,s.props===Qe&&(s.props=i),a)s.state=at(s,i,s.state);else if(Ke(s.componentWillMount)){s.$BR=!0,s.componentWillMount();var l=s.$PS;if(!Ue(l)){var c=s.state;if(Ue(c))s.state=l;else for(var d in l)c[d]=l[d];s.$PS=null}s.$BR=!1}return s.$LI=pi(s,i,n),s}function _i(e,t){var i=e.props||Qe;return 32768&e.flags?e.type.render(i,e.ref,t):e.type(i,t)}function mi(e,t,i,n,o,r){var s=e.flags|=16384;481&s?vi(e,t,i,n,o,r):4&s?function(e,t,i,n,o,r){var s=fi(e,e.type,e.props||Qe,i,n,r);mi(s.$LI,t,s.$CX,n,o,r),yi(e.ref,s,r)}(e,t,i,n,o,r):8&s?(function(e,t,i,n,o,r){mi(e.children=It(_i(e,i)),t,i,n,o,r)}(e,t,i,n,o,r),Ci(e,r)):512&s||16&s?gi(e,t,o):8192&s?function(e,t,i,n,o,r){var s=e.children,a=e.childFlags;12&a&&0===s.length&&(a=e.childFlags=2,s=e.children=wt()),2===a?mi(s,i,t,n,o,r):bi(s,i,t,n,o,r)}(e,i,t,n,o,r):1024&s&&function(e,t,i,n,o){mi(e.children,e.ref,t,!1,null,o);var r=wt();gi(r,i,n),e.dom=r.dom}(e,i,t,o,r)}function gi(e,t,i){var n=e.dom=document.createTextNode(e.children);Ue(t)||et(t,n,i)}function vi(e,t,i,n,o,r){var s=e.flags,a=e.props,l=e.className,c=e.childFlags,d=e.dom=function(e,t){return t?document.createElementNS("http://www.w3.org/2000/svg",e):document.createElement(e)}(e.type,n=n||(32&s)>0),h=e.children;if(ze(l)||""===l||(n?d.setAttribute("class",l):d.className=l),16===c)dt(d,h);else if(1!==c){var u=n&&"foreignObject"!==e.type;2===c?(16384&h.flags&&(e.children=h=Ct(h)),mi(h,d,i,u,null,r)):8!==c&&4!==c||bi(h,d,i,u,null,r)}Ue(t)||et(t,d,o),Ue(a)||ui(e,s,a,d,n),ri(e.ref,d,r)}function bi(e,t,i,n,o,r){for(var s=0;s<e.length;++s){var a=e[s];16384&a.flags&&(e[s]=a=Ct(a)),mi(a,t,i,n,o,r)}}function yi(e,t,i){ri(e,t,i),Ke(t.componentDidMount)&&i.push(function(e){return function(){e.componentDidMount()}}(t))}function Ci(e,t){var i=e.ref;ze(i)||(pt(i.onComponentWillMount,e.props||Qe),Ke(i.onComponentDidMount)&&t.push(function(e,t){return function(){e.onComponentDidMount(ot(t,!0),t.props||Qe)}}(i,e)))}function wi(e,t,i,n,o,r,s){var a=t.flags|=16384;e.flags!==a||e.type!==t.type||e.key!==t.key||2048&a?16384&e.flags?function(e,t,i,n,o,r){ai(e),0!=(t.flags&e.flags&2033)?(mi(t,null,n,o,null,r),function(e,t,i){e.replaceChild(t,i)}(i,t.dom,e.dom)):(mi(t,i,n,o,ot(e,!0),r),rt(e,i))}(e,t,i,n,o,s):mi(t,i,n,o,r,s):481&a?function(e,t,i,n,o,r){var s,a=t.dom=e.dom,l=e.props,c=t.props,d=!1,h=!1;if(n=n||(32&o)>0,l!==c){var u=l||Qe;if((s=c||Qe)!==Qe)for(var p in(d=(448&o)>0)&&(h=ni(s)),s){var f=u[p],_=s[p];f!==_&&hi(p,f,_,a,n,h,e)}if(u!==Qe)for(var m in u)ze(s[m])&&!ze(u[m])&&hi(m,u[m],null,a,n,h,e)}var g=t.children,v=t.className;e.className!==v&&(ze(v)?a.removeAttribute("class"):n?a.setAttribute("class",v):a.className=v),4096&o?function(e,t){e.textContent!==t&&(e.textContent=t)}(a,g):xi(e.childFlags,t.childFlags,e.children,g,a,i,n&&"foreignObject"!==t.type,null,e,r),d&&ii(o,t,a,s,!1,h);var b=t.ref,y=e.ref;y!==b&&(oi(y),ri(b,a,r))}(e,t,n,o,a,s):4&a?function(e,t,i,n,o,r,s){var a=t.children=e.children;if(!Ue(a)){a.$L=s;var l=t.props||Qe,c=t.ref,d=e.ref,h=a.state;if(!a.$N){if(Ke(a.componentWillReceiveProps)){if(a.$BR=!0,a.componentWillReceiveProps(l,n),a.$UN)return;a.$BR=!1}Ue(a.$PS)||(h=Ge(h,a.$PS),a.$PS=null)}Si(a,h,l,i,n,o,!1,r,s),d!==c&&(oi(d),ri(c,a,s))}}(e,t,i,n,o,r,s):8&a?function(e,t,i,n,o,r,s){var a=!0,l=t.props||Qe,c=t.ref,d=e.props,h=!ze(c),u=e.children;if(h&&Ke(c.onComponentShouldUpdate)&&(a=c.onComponentShouldUpdate(d,l)),!1!==a){h&&Ke(c.onComponentWillUpdate)&&c.onComponentWillUpdate(d,l);var p=It(_i(t,n));wi(u,p,i,n,o,r,s),t.children=p,h&&Ke(c.onComponentDidUpdate)&&c.onComponentDidUpdate(d,l)}else t.children=u}(e,t,i,n,o,r,s):16&a?function(e,t){var i=t.children,n=t.dom=e.dom;i!==e.children&&(n.nodeValue=i)}(e,t):512&a?t.dom=e.dom:8192&a?function(e,t,i,n,o,r){var s=e.children,a=t.children,l=e.childFlags,c=t.childFlags,d=null;12&c&&0===a.length&&(c=t.childFlags=2,a=t.children=wt());var h=0!=(2&c);if(12&l){var u=s.length;(8&l&&8&c||h||!h&&a.length>u)&&(d=ot(s[u-1],!1).nextSibling)}xi(l,c,s,a,i,n,o,d,e,r)}(e,t,i,n,o,s):function(e,t,i,n){var o=e.ref,r=t.ref,s=t.children;if(xi(e.childFlags,t.childFlags,e.children,s,o,i,!1,null,e,n),t.dom=e.dom,o!==r&&!We(s)){var a=s.dom;tt(o,a),Je(r,a)}}(e,t,n,s)}function xi(e,t,i,n,o,r,s,a,l,c){switch(e){case 2:switch(t){case 2:wi(i,n,o,r,s,a,c);break;case 1:si(i,o);break;case 16:ai(i),dt(o,n);break;default:!function(e,t,i,n,o,r){ai(e),bi(t,i,n,o,ot(e,!0),r),rt(e,i)}(i,n,o,r,s,c)}break;case 1:switch(t){case 2:mi(n,o,r,s,a,c);break;case 1:break;case 16:dt(o,n);break;default:bi(n,o,r,s,a,c)}break;case 16:switch(t){case 16:!function(e,t,i){e!==t&&(""!==e?i.firstChild.nodeValue=t:dt(i,t))}(i,n,o);break;case 2:ci(o),mi(n,o,r,s,a,c);break;case 1:ci(o);break;default:ci(o),bi(n,o,r,s,a,c)}break;default:switch(t){case 16:li(i),dt(o,n);break;case 2:di(o,l,i),mi(n,o,r,s,a,c);break;case 1:di(o,l,i);break;default:var d=0|i.length,h=0|n.length;0===d?h>0&&bi(n,o,r,s,a,c):0===h?di(o,l,i):8===t&&8===e?function(e,t,i,n,o,r,s,a,l,c){var d,h,u=r-1,p=s-1,f=0,_=e[f],m=t[f];e:{for(;_.key===m.key;){if(16384&m.flags&&(t[f]=m=Ct(m)),wi(_,m,i,n,o,a,c),e[f]=m,++f>u||f>p)break e;_=e[f],m=t[f]}for(_=e[u],m=t[p];_.key===m.key;){if(16384&m.flags&&(t[p]=m=Ct(m)),wi(_,m,i,n,o,a,c),e[u]=m,p--,f>--u||f>p)break e;_=e[u],m=t[p]}}if(f>u){if(f<=p)for(h=(d=p+1)<s?ot(t[d],!0):a;f<=p;)16384&(m=t[f]).flags&&(t[f]=m=Ct(m)),++f,mi(m,i,n,o,h,c)}else if(f>p)for(;f<=u;)si(e[f++],i);else!function(e,t,i,n,o,r,s,a,l,c,d,h,u){var p,f,_,m=0,g=a,v=a,b=r-a+1,y=s-a+1,C=new Int32Array(y+1),w=b===n,x=!1,S=0,I=0;if(o<4||(b|y)<32)for(m=g;m<=r;++m)if(p=e[m],I<y){for(a=v;a<=s;a++)if(f=t[a],p.key===f.key){if(C[a-v]=m+1,w)for(w=!1;g<m;)si(e[g++],l);S>a?x=!0:S=a,16384&f.flags&&(t[a]=f=Ct(f)),wi(p,f,l,i,c,d,u),++I;break}!w&&a>s&&si(p,l)}else w||si(p,l);else{var k={};for(m=v;m<=s;++m)k[t[m].key]=m;for(m=g;m<=r;++m)if(p=e[m],I<y)if(void 0!==(a=k[p.key])){if(w)for(w=!1;m>g;)si(e[g++],l);C[a-v]=m+1,S>a?x=!0:S=a,16384&(f=t[a]).flags&&(t[a]=f=Ct(f)),wi(p,f,l,i,c,d,u),++I}else w||si(p,l);else w||si(p,l)}if(w)di(l,h,e),bi(t,l,i,c,d,u);else if(x){var E=function(e){var t=0,i=0,n=0,o=0,r=0,s=0,a=0,l=e.length;for(l>Ii&&(Ii=l,Qt=new Int32Array(l),Xt=new Int32Array(l));i<l;++i)if(0!==(t=e[i])){if(e[n=Qt[o]]<t){Xt[i]=n,Qt[++o]=i;continue}for(r=0,s=o;r<s;)e[Qt[a=r+s>>1]]<t?r=a+1:s=a;t<e[Qt[r]]&&(r>0&&(Xt[i]=Qt[r-1]),Qt[r]=i)}r=o+1;var c=new Int32Array(r);for(s=Qt[r-1];r-- >0;)c[r]=s,s=Xt[s],Qt[r]=0;return c}(C);for(a=E.length-1,m=y-1;m>=0;m--)0===C[m]?(16384&(f=t[S=m+v]).flags&&(t[S]=f=Ct(f)),mi(f,l,i,c,(_=S+1)<o?ot(t[_],!0):d,u)):a<0||m!==E[a]?st(f=t[S=m+v],l,(_=S+1)<o?ot(t[_],!0):d):a--}else if(I!==y)for(m=y-1;m>=0;m--)0===C[m]&&(16384&(f=t[S=m+v]).flags&&(t[S]=f=Ct(f)),mi(f,l,i,c,(_=S+1)<o?ot(t[_],!0):d,u))}(e,t,n,r,s,u,p,f,i,o,a,l,c)}(i,n,o,r,s,d,h,a,l,c):function(e,t,i,n,o,r,s,a,l){for(var c,d,h=r>s?s:r,u=0;u<h;++u)c=t[u],d=e[u],16384&c.flags&&(c=t[u]=Ct(c)),wi(d,c,i,n,o,a,l),e[u]=c;if(r<s)for(u=h;u<s;++u)16384&(c=t[u]).flags&&(c=t[u]=Ct(c)),mi(c,i,n,o,a,l);else if(r>s)for(u=h;u<r;++u)si(e[u],i)}(i,n,o,r,s,d,h,a,c)}}}function Si(e,t,i,n,o,r,s,a,l){var c=e.state,d=e.props,h=Boolean(e.$N),u=Ke(e.shouldComponentUpdate);if(h&&(t=at(e,i,t!==c?Ge(c,t):t)),s||!u||u&&e.shouldComponentUpdate(i,t,o)){!h&&Ke(e.componentWillUpdate)&&e.componentWillUpdate(i,t,o),e.props=i,e.state=t,e.context=o;var p=null,f=pi(e,i,o);h&&Ke(e.getSnapshotBeforeUpdate)&&(p=e.getSnapshotBeforeUpdate(d,c)),wi(e.$LI,f,n,e.$CX,r,a,l),e.$LI=f,Ke(e.componentDidUpdate)&&function(e,t,i,n,o){o.push((function(){e.componentDidUpdate(t,i,n)}))}(e,d,c,p,l)}else e.props=i,e.state=t,e.context=o}var Ii=0;function ki(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=Qe),function(e,t,i,n){var o=[],r=t.$V;lt.v=!0,ze(r)?ze(e)||(16384&e.flags&&(e=Ct(e)),mi(e,t,n,!1,null,o),t.$V=e,r=e):ze(e)?(si(r,t),t.$V=null):(16384&e.flags&&(e=Ct(e)),wi(r,e,t,n,!1,null,o),r=t.$V=e),it(o),lt.v=!1,Ke(i)&&i(),Ke(ct.renderComplete)&&ct.renderComplete(r,t)}(e,t,i,n)}"undefined"!=typeof document&&window.Node&&(Node.prototype.$EV=null,Node.prototype.$V=null);var Ei=[],Oi="undefined"!=typeof Promise?Promise.resolve().then.bind(Promise.resolve()):function(e){window.setTimeout(e,0)},Ti=!1;function Di(e,t,i,n){var o=e.$PS;if(Ke(t)&&(t=t(o?Ge(e.state,o):e.state,e.props,e.context)),ze(o))e.$PS=t;else for(var r in t)o[r]=t[r];if(e.$BR)Ke(i)&&e.$L.push(i.bind(e));else{if(!lt.v&&0===Ei.length)return Pi(e,n),void(Ke(i)&&i.call(e));if(-1===Ei.indexOf(e)&&Ei.push(e),n&&(e.$F=!0),Ti||(Ti=!0,Oi(Ai)),Ke(i)){var s=e.$QU;s||(s=e.$QU=[]),s.push(i)}}}function Bi(e){for(var t=e.$QU,i=0;i<t.length;++i)t[i].call(e);e.$QU=null}function Ai(){var e;for(Ti=!1;e=Ei.shift();)if(!e.$UN){var t=e.$F;e.$F=!1,Pi(e,t),e.$QU&&Bi(e)}}function Pi(e,t){if(t||!e.$BR){var i=e.$PS;e.$PS=null;var n=[];lt.v=!0,Si(e,Ge(e.state,i),e.props,ot(e.$LI,!0).parentNode,e.context,e.$SVG,t,null,n),it(n),lt.v=!1}else e.state=e.$PS,e.$PS=null}var Mi=function(e,t){this.state=null,this.$BR=!1,this.$BS=!0,this.$PS=null,this.$LI=null,this.$UN=!1,this.$CX=null,this.$QU=null,this.$N=!1,this.$L=null,this.$SVG=!1,this.$F=!1,this.props=e||Qe,this.context=t||Qe};Mi.prototype.forceUpdate=function(e){this.$UN||Di(this,{},e,!0)},Mi.prototype.setState=function(e,t){this.$UN||this.$BS||Di(this,e,t,!1)},Mi.prototype.render=function(e,t,i){return null};var Ri=i(6209);const $i={lockCount:0,lock(){this.lockCount++},callbacks:[],callEffects(){if(this.lockCount--,this.lockCount<0)throw new Error("Unexpected Effect Call");if(0===this.lockCount){const e=this.callbacks;this.callbacks=[],e.forEach((e=>e()))}}},Ni=(e,t)=>{if(!(e instanceof Object&&t instanceof Object))return e===t;const i=Object.keys(e),n=Object.keys(t);return i.length===n.length&&!i.some((i=>e[i]!==t[i]))};class Vi extends Mi{constructor(){super(...arguments),this._pendingContext=this.context}componentWillReceiveProps(e,t){this._pendingContext=null!=t?t:{}}shouldComponentUpdate(e,t){return!Ni(this.props,e)||!Ni(this.state,t)||!Ni(this.context,this._pendingContext)}}class Fi extends Vi{constructor(){super(...arguments),this._effects=[]}createEffects(){return[]}updateEffects(){}componentWillMount(){$i.lock()}componentWillUpdate(e,t,i){$i.lock()}componentDidMount(){$i.callbacks.push((()=>{this._effects=this.createEffects()})),$i.callEffects()}componentDidUpdate(){$i.callbacks.push((()=>this.updateEffects())),$i.callEffects()}destroyEffects(){this._effects.forEach((e=>e.dispose()))}componentWillUnmount(){this.destroyEffects()}}class Zi extends Fi{constructor(){super(...arguments),this.vDomElement=null}vDomUpdateClasses(){const e=this.vDomElement,t=e.className.length?e.className.split(" "):[],i=t.filter((t=>e.dxClasses.previous.indexOf(t)<0)),n=e.dxClasses.previous.filter((e=>t.indexOf(e)<0));i.forEach((t=>{const i=e.dxClasses.removed.indexOf(t);i>-1?e.dxClasses.removed.splice(i,1):e.dxClasses.added.push(t)})),n.forEach((t=>{const i=e.dxClasses.added.indexOf(t);i>-1?e.dxClasses.added.splice(i,1):e.dxClasses.removed.push(t)}))}componentDidMount(){const e=ot(this.$LI,!0);this.vDomElement=e,super.componentDidMount(),e.dxClasses=e.dxClasses||{removed:[],added:[],previous:[]},e.dxClasses.previous=(null==e?void 0:e.className.length)?e.className.split(" "):[]}componentDidUpdate(){super.componentDidUpdate();const e=this.vDomElement;null!==e&&(e.dxClasses.added.forEach((t=>e.classList.add(t))),e.dxClasses.removed.forEach((t=>e.classList.remove(t))),e.dxClasses.previous=e.className.length?e.className.split(" "):[])}shouldComponentUpdate(e,t){const i=super.shouldComponentUpdate(e,t);return i&&this.vDomUpdateClasses(),i}}let Hi=0;class Li{constructor(e,t){this.dependency=t,this.effect=e,this.destroy=e()}update(e){const t=this.dependency;e&&(this.dependency=e),e&&!e.some(((e,i)=>t[i]!==e))||(this.dispose(),this.destroy=this.effect())}dispose(){this.destroy&&this.destroy()}}const ji=()=>new Li((()=>{Ai()}),[]),zi="a runtime error occured! Use Inferno in development environment to find the error.";function Wi(e){return null===e}function Ki(e,t,i,n,o,r){const s=e.childFlags,a=e.children,l=e.props,c=e.flags;if(1!==s){if(2===s)Wi(i)?mi(a,t,n,o,null,r):i=(i=Ui(a,t,i,n,o,r))?i.nextSibling:null;else if(16===s)Wi(i)?t.appendChild(document.createTextNode(a)):1!==t.childNodes.length||3!==i.nodeType?t.textContent=a:i.nodeValue!==a&&(i.nodeValue=a),i=null;else if(12&s){let e=!1;for(let s=0,l=a.length;s<l;++s){const l=a[s];Wi(i)||e&&(16&l.flags)>0?mi(l,t,n,o,i,r):i=(i=Ui(l,t,i,n,o,r))?i.nextSibling:null,e=(16&l.flags)>0}}if(0==(8192&c)){let e=null;for(;i;)e=i.nextSibling,t.removeChild(i),i=e}}else Wi(t.firstChild)||function(e,t){return Boolean(t&&t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html&&function(e,t){const i=document.createElement("i");return i.innerHTML=t,i.innerHTML===e.innerHTML}(e,t.dangerouslySetInnerHTML.__html))}(t,l)||(t.textContent="",448&c&&(t.defaultValue=""))}function qi(e,t,i){if(3!==i.nodeType)t.replaceChild(e.dom=document.createTextNode(e.children),i);else{const t=e.children;i.nodeValue!==t&&(i.nodeValue=t),e.dom=i}return e.dom}function Ui(e,t,i,n,o,r){const s=e.flags|=16384;return 14&s?function(e,t,i,n,o,r,s){const a=e.type,l=e.ref,c=e.props||Qe;let d;if(r){const r=fi(e,a,c,n,o,s);d=Ui(r.$LI,t,i,r.$CX,o,s),yi(l,r,s)}else{const r=It(_i(e,n));d=Ui(r,t,i,n,o,s),e.children=r,Ci(e,s)}return d}(e,t,i,n,o,(4&s)>0,r):481&s?function(e,t,i,n,o,r){const s=e.props,a=e.className,l=e.flags,c=e.ref;return o=o||(32&l)>0,1!==i.nodeType?(vi(e,null,n,o,null,r),t.replaceChild(e.dom,i)):(e.dom=i,Ki(e,i,i.firstChild,n,o,r),Wi(s)||ui(e,l,s,i,o),null==a?""!==i.className&&i.removeAttribute("class"):o?i.setAttribute("class",a):i.className=a,ri(c,i,r)),e.dom}(e,t,i,n,o,r):16&s?qi(e,t,i):512&s?e.dom=i:8192&s?function(e,t,i,n,o,r){const s=e.children;return 2===e.childFlags?(qi(s,t,i),s.dom):(Ki(e,t,i,n,o,r),function(e){let t,i;for(;e;){if(t=e.flags,2033&t)return e.dom;i=e.children,e=8192&t?2===e.childFlags?i:i[i.length-1]:4&t?i.$LI:i}return null}(s[s.length-1]))}(e,t,i,n,o,r):(function(e){throw e||(e=zi),new Error(`Inferno Error: ${e}`)}(),null)}function Gi(e){return null==e}function Yi(e){return void 0===e}var Qi={onComponentDidMount:1,onComponentDidUpdate:1,onComponentShouldUpdate:1,onComponentWillMount:1,onComponentWillUnmount:1,onComponentWillUpdate:1};function Xi(e,t,i){var n,o,r=arguments,s=null,a=null,l=null,c=0,d=arguments.length-2;if(1===d)n=i;else if(d>1)for(n=[];d-- >0;)n[d]=r[d+2];if("string"!=typeof e){if(c=2,Yi(n)||(t||(t={}),t.children=n),!Gi(t))for(var h in o={},t)"key"===h?a=t.key:"ref"===h?s=t.ref:1===Qi[h]?(s||(s={}),s[h]=t[h]):o[h]=t[h];return gt(c,e,o,a,s)}if(c=function(e){switch(e){case"svg":return 32;case"input":return 64;case"select":return 256;case"textarea":return 128;case"$F":return 8192;default:return 1}}(e),!Gi(t))for(var u in o={},t)"className"===u||"class"===u?l=t[u]:"key"===u?a=t.key:"children"===u&&Yi(n)?n=t.children:"ref"===u?s=t.ref:("contenteditable"===u&&(c|=4096),o[u]=t[u]);return 8192&c?bt(1===d?[n]:n,0,a):mt(c,e,l,n,0,o,a,s)}const Ji=new Set(["animationIterationCount","borderImageOutset","borderImageSlice","border-imageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","fillOpacity","flex","flexGrow","flexNegative","flexOrder","flexPositive","flexShrink","floodOpacity","fontWeight","gridColumn","gridRow","lineClamp","lineHeight","opacity","order","orphans","stopOpacity","strokeDasharray","strokeDashoffset","strokeMiterlimit","strokeOpacity","strokeWidth","tabSize","widows","zIndex","zoom"]),en=/[A-Z]/g;function tn(e){if(e instanceof Object)return Object.entries(e).reduce(((e,[t,i])=>{var n;return e[(n=t,n.replace(en,"-$&").toLowerCase())]=(e=>"number"==typeof e||!Number.isNaN(Number(e)))(i)?((e,t)=>Ji.has(e)?t:`${t}px`)(t,i):i,e}),{})}var nn=i(224);const on=e=>{const{parentNode:t}=e;if(t){const i=e.nextSibling;(0,N.nK)(e),t.$V=e.$V,ki(null,t),t.insertBefore(e,i),e.innerHTML="",delete t.$V}delete e.$V},rn=(0,nn.Z)({createElement:(e,t)=>Xi(e,t),remove:on,onAfterRender:()=>{$i.callEffects()},onPreRender:()=>{$i.lock()},render:(e,t,i,n)=>{if(n)ki(Xi(e,t),i);else{const{parentNode:n}=i,o=null==i?void 0:i.nextSibling,r=Fe.Z.createElement("div");r.appendChild(i);const s=Fe.Z.createDocumentFragment().appendChild(r);!!i.$V&&on(i),function(e,t,i){let n=t.firstChild;if(Wi(n))ki(e,t,i);else{const i=[];for(null!==(o=e)&&!1!==o&&!0!==o&&void 0!==o&&(n=Ui(e,t,n,{},!1,i));n&&(n=n.nextSibling);)t.removeChild(n);if(i.length>0){let e;for(;void 0!==(e=i.shift());)e()}}var o;t.$V=e}(Xi(e,t),s),i.$V=s.$V,n&&n.insertBefore(i,o)}}});var sn=i(1623),an=i(3366);const ln=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((i=>e[i]===t[i])),cn=["isEqual"];class dn extends Fi{constructor(e){super(e),this.renderTemplate=this.renderTemplate.bind(this)}renderTemplate(){const e=ot(this.$LI,!0);if(null==e||!e.parentNode)return()=>{};const t=e.parentNode,i=(0,c.Z)(t),o=i.contents().toArray(),r=function(e,t){const{data:i,index:o}=e.model??{data:{}};i&&Object.keys(i).forEach((e=>{i[e]&&Fe.Z.isNode(i[e])&&(i[e]=(0,l.uD)((0,c.Z)(i[e])))}));const r=e.template.render((0,n.Z)({container:t,transclude:e.transclude},{renovated:e.renovated},e.transclude?{}:{model:i},!e.transclude&&Number.isFinite(o)?{index:o}:{}));return void 0===r?[]:r.toArray?r.toArray():[(0,c.Z)(r).get(0)]}(this.props,(0,l.uD)(i));return(0,F.replaceWith)((0,c.Z)(e),(0,c.Z)(r)),()=>{const i=(0,c.Z)(t).contents().toArray();var n;n=o,i.forEach((e=>{!n.find((t=>e===t))&&e.parentNode&&(0,c.Z)(e).remove()})),t.appendChild(e)}}shouldComponentUpdate(e){const{model:t,template:i}=this.props,{isEqual:n,model:o,template:r}=e,s=n??ln;if(i!==r)return!0;if(!(0,_.$K)(t)||!(0,_.$K)(o))return t!==o;const{data:a,index:l}=t,{data:c,index:d}=o;return l!==d||!s(a,c)}createEffects(){return[new Li(this.renderTemplate,[this.props.template,this.props.model])]}updateEffects(){this._effects[0].update([this.props.template,this.props.model])}componentWillUnmount(){}render(){return null}}var hn=i(9922);function un(e){return Array.isArray(e)?[...e]:(0,n.Z)({},e)}function pn(e,t,i){const n=i.length>0&&t&&e!==t?un(t):un(e),o=i[0];return i.length>1?n[o]=pn(e[o],null==t?void 0:t[o],i.slice(1)):o&&((0,_.PO)(e[o])?n[o]=un(e[o]):n[o]=e[o]),n}function fn(e,t,i,n){const o=t[i],r=e[i],s=e;(0,_.PO)(o)||i!==n&&Array.isArray(o)?s[i]=pn(o,r,(0,hn.Zw)(n).slice(1)):s[i]=o}var _n=i(8530),mn=i(8141);const gn=(e,t)=>i=>{Object.prototype.hasOwnProperty.call(e,i)&&void 0===e[i]&&(e[i]=t(i))};class vn extends sn.default{get _propsInfo(){return{allowNull:[],twoWay:[],elements:[],templates:[],props:[]}}constructor(e,t){super(e,t),this._shouldRaiseContentReady=!1,this.validateKeyDownHandler()}validateKeyDownHandler(){const e=this.getSupportedKeyNames().length>0,t="function"==typeof this._viewComponent.prototype.keyDown;if(e&&!t)throw Error("Component's declaration must have 'keyDown' method.")}get viewRef(){var e;return null===(e=this._viewRef)||void 0===e?void 0:e.current}_checkContentReadyOption(e){const t=this._getContentReadyOptions().reduce(((e,t)=>(e[t]=!0,e)),{});return this._checkContentReadyOption=e=>!!t[e],this._checkContentReadyOption(e)}_getContentReadyOptions(){return["rtlEnabled"]}_fireContentReady(){this._actionsMap.onContentReady({})}_getDefaultOptions(){const e=this._getViewComponentDefaultProps();return(0,f.l)(!0,super._getDefaultOptions(),e,this._propsInfo.twoWay.reduce(((t,i)=>{let[o,r,s]=i;return(0,n.Z)({},t,{[o]:e[r],[s]:e=>this.option(o,e)})}),{}),this._propsInfo.templates.reduce(((e,t)=>(0,n.Z)({},e,{[t]:null})),{}))}_getUnwrappedOption(){const e={};return Object.keys(this.option()).forEach((t=>{e[t]=this.option(t)})),e}_initializeComponent(){var e;super._initializeComponent(),null===(e=this._templateManager)||void 0===e||e.addDefaultTemplates(this.getDefaultTemplates());const t=this._getUnwrappedOption();this._props=this._optionsWithDefaultTemplates(t),this._propsInfo.templates.forEach((e=>{this._componentTemplates[e]=this._createTemplateComponent(this._props[e])})),Object.keys(this._getActionConfigsFull()).forEach((e=>this._addAction(e))),this._viewRef={current:null},this.defaultKeyHandlers=this._createDefaultKeyHandlers()}_initMarkup(){const e=this.getProps();this._renderWrapper(e)}_renderWrapper(e){const t=this.$element()[0];this._isNodeReplaced||rn.onPreRender(),rn.render(this._viewComponent,e,t,this._isNodeReplaced),this._isNodeReplaced||(this._isNodeReplaced=!0,rn.onAfterRender(),this._shouldRaiseContentReady=!0),this._shouldRaiseContentReady&&(this._fireContentReady(),this._shouldRaiseContentReady=!1)}_silent(e,t){this._options.silent(e,t)}_render(){}_removeWidget(){rn.remove(this.$element()[0])}_dispose(){this._removeWidget(),super._dispose()}get elementAttr(){const e=this.$element()[0];if(!this._elementAttr){const{attributes:t}=e,i=Array.from(t).filter((e=>{var i;return!this._propsInfo.templates.includes(e.name)&&(null===(i=t[e.name])||void 0===i?void 0:i.specified)})).reduce(((t,i)=>{let{name:n,value:o}=i;const r=t,s=n in e;return r[n]=""===o&&s?e[n]:o,r}),{});this._elementAttr=i,this._storedClasses=e.getAttribute("class")||""}const t=e.style,i={};for(let e=0;e<t.length;e+=1)i[t[e]]=t.getPropertyValue(t[e]);return this._elementAttr.style=i,this._elementAttr.class=this._storedClasses,this._elementAttr}_getAdditionalActionConfigs(){return{onContentReady:{excludeValidators:["disabled","readOnly"]}}}_getAdditionalProps(){return[]}_patchOptionValues(e){const{allowNull:t,elements:i,props:n,twoWay:o}=this._propsInfo,r=this._getViewComponentDefaultProps(),s=Object.keys(r),a=this._getDefaultOptions(),{children:l,onKeyboardHandled:c,ref:d}=e,h={ref:d,children:l,onKeyDown:c?(e,t)=>{c(t)}:void 0};return[...n,...this._getAdditionalProps()].forEach((t=>{Object.prototype.hasOwnProperty.call(e,t)&&(h[t]=e[t])})),t.forEach(gn(h,(()=>null))),s.forEach(gn(h,(e=>a[e]))),o.forEach((e=>{let[t,i]=e;gn(h,(()=>a[i]))(t)})),i.forEach((e=>{if(e in h){const t=h[e];(0,_.ZU)(t)&&(h[e]=this._patchElementParam(t))}})),h}getSupportedKeyNames(){return[]}prepareStyleProp(e){return"string"==typeof e.style?(0,n.Z)({},e,{style:{},cssText:e.style}):e}getProps(){const{elementAttr:e}=this.option(),t=this._patchOptionValues((0,n.Z)({},this._props,{ref:this._viewRef,children:this._extractDefaultSlot(),aria:this._aria}));return this._propsInfo.templates.forEach((e=>{t[e]=this._componentTemplates[e]})),this.prepareStyleProp((0,n.Z)({},t,this.elementAttr,e,{className:[...(this.elementAttr.class??"").split(" "),...((null==e?void 0:e.class)??"").split(" ")].filter(((e,t,i)=>e&&i.indexOf(e)===t)).join(" ").trim(),class:""},this._actionsMap))}_getActionConfigs(){return{}}_getActionConfigsFull(){return(0,n.Z)({},this._getActionConfigs(),this._getAdditionalActionConfigs())}getDefaultTemplates(){const e=Object.values(this._templatesInfo),t={};return e.forEach((e=>{t[e]="dx-renovation-template-mock"})),t}get _templatesInfo(){return{}}_optionsWithDefaultTemplates(e){const t=Object.entries(this._templatesInfo).reduce(((t,i)=>{let[o,r]=i;return(0,n.Z)({},t,{[o]:e[o]??r})}),{});return(0,n.Z)({},e,t)}_init(){super._init(),this.customKeyHandlers={},this._actionsMap={},this._aria={},this._componentTemplates={}}_createDefaultKeyHandlers(){const e={};return this.getSupportedKeyNames().forEach((t=>{e[t]=e=>this.viewRef.keyDown(Ri.Z.createKeyDownOptions(e))})),e}_addAction(e,t){let i=t;if(!i){const t=this._createActionByOption(e,this._getActionConfigsFull()[e]);i=e=>(Object.keys(e).forEach((t=>{(0,_.$K)(e[t])&&Fe.Z.isNode(e[t])&&(e[t]=(0,l.uD)((0,c.Z)(e[t])))})),t(e))}this._actionsMap[e]=i}_optionChanged(e){const{fullName:t,name:i,previousValue:n,value:o}=e;fn(this._props,this.option(),i,t),this._propsInfo.templates.includes(i)&&o!==n&&(this._componentTemplates[i]=this._createTemplateComponent(o)),i&&this._getActionConfigsFull()[i]&&this._addAction(i),this._shouldRaiseContentReady=this._shouldRaiseContentReady||this._checkContentReadyOption(t),super._optionChanged(e),this._invalidate()}_extractDefaultSlot(){return this.option("_hasAnonymousTemplateContent")?rn.createElement(dn,{template:this._getTemplate(this._templateManager.anonymousTemplateName),transclude:!0,renovated:!0}):null}_createTemplateComponent(e){if(!e)return;const t=this._getTemplate(e);return(0,_.HD)(t)&&"dx-renovation-template-mock"===t?void 0:e=>rn.createElement(dn,function(e,t){const i={template:t,model:(0,n.Z)({},e)},o=e.data??{},{isEqual:r}=o,s=(0,an.Z)(o,cn);return r&&(i.model.data=s,i.isEqual=r),i}(e,t))}_wrapKeyDownHandler(e){return t=>{const{keyName:i,originalEvent:n,which:o}=t,r=this.customKeyHandlers,s=r[i]||r[o];return void 0===s||s.bind(this)(n,t)?null==e?void 0:e(n,t):(n.cancel=!0,n)}}_toPublicElement(e){return(0,l.uD)((0,c.Z)(e))}_patchElementParam(e){try{const t=(0,c.Z)(e),i=null==t?void 0:t.get(0);return null!=i&&i.nodeType?i:e}catch(t){return e}}repaint(){this._isNodeReplaced=!1,this._shouldRaiseContentReady=!0,this._removeWidget(),this._refresh()}_supportedKeys(){return(0,n.Z)({},this.defaultKeyHandlers,this.customKeyHandlers)}registerKeyHandler(e,t){this.customKeyHandlers[e]=t}setAria(e,t){this._aria[e]=t,this._initMarkup()}_getViewComponentDefaultProps(){return this._viewComponent.defaultProps||{}}}vn.IS_RENOVATED_WIDGET=!1;const bn=vn;vn.IS_RENOVATED_WIDGET=!0;const yn=e=>!(!e||"string"!=typeof e)&&(/^\s*<svg[^>]*>(.|\r?\n)*?<\/svg>\s*$/i.test(e)?"svg":/data:.*base64|\.|[^<\s]\/{1,1}/.test(e)?"image":/^[\w-_]+$/.test(e)?"dxIcon":!!/^\s?([\w-_:]\s?)+$/.test(e)&&"fontIcon"),Cn=e=>{switch(yn(e)){case"image":return(0,c.Z)("<img>").attr("src",e).addClass("dx-icon");case"fontIcon":return(0,c.Z)("<i>").addClass(`dx-icon ${e}`);case"dxIcon":return(0,c.Z)("<i>").addClass(`dx-icon dx-icon-${e}`);case"svg":return(0,c.Z)("<i>").addClass("dx-icon dx-svg-icon").append(e);default:return null}};class wn extends bn{get _validationGroupConfig(){return ie.getGroupConfig(this._findGroup())}getDefaultTemplateNames(){return["content"]}getSupportedKeyNames(){return["space","enter"]}getProps(){const e=super.getProps();return e.onClick=e=>{let{event:t}=e;this._clickAction({event:t,validationGroup:this._validationGroupConfig})},"svg"===yn(e.icon)&&(e.iconTemplate=this._createTemplateComponent((()=>e.icon))),e}get _templatesInfo(){return{template:"content"}}_toggleActiveState(e,t){const i=this.viewRef;t?i.activate():i.deactivate()}_getSubmitAction(){let e=!0,t="valid";return this._createAction((i=>{let{event:n,submitInput:o}=i;if(e){const i=this._validationGroupConfig;if(void 0!==i&&""!==i){const n=i.validate();t=n.status,"pending"===n.status&&(e=!1,this.option("disabled",!0),n.complete.then((i=>{let{status:n}=i;this.option("disabled",!1),t=n,"valid"===t&&o.click(),e=!0})))}}"valid"!==t&&n.preventDefault(),n.stopPropagation()}))}_initializeComponent(){super._initializeComponent(),this._addAction("onSubmit",this._getSubmitAction()),this._clickAction=this._createClickAction()}_initMarkup(){super._initMarkup();const e=this.$element().find(".dx-button-content").first(),t=e.children().filter(".dx-template-wrapper"),i=e.children().filter(".dx-button-submit-input");t.length&&(t.addClass("dx-button-content"),t.append(i),e.replaceWith(t))}_patchOptionValues(e){return super._patchOptionValues((0,n.Z)({},e,{templateData:e._templateData}))}_findGroup(){const e=this.$element(),t=this.option("validationGroup");return void 0!==t&&""!==t?t:ie.findGroup(e,this._modelByElement(e))}_createClickAction(){return this._createActionByOption("onClick",{excludeValidators:["readOnly"]})}_optionChanged(e){"onClick"===e.name&&(this._clickAction=this._createClickAction()),super._optionChanged(e)}}var xn=i(1950),Sn=i(5650),In=i(2151);function kn(e){return Object.keys(e).filter((t=>e[t])).join(" ")}var En=i(2753);const On=["iconTemplate","position","source"];class Tn extends Vi{constructor(e){super(e),this.state={}}get sourceType(){return yn(this.props.source)}get cssClass(){return"left"!==this.props.position?"dx-icon-right":""}get iconClassName(){const e={"dx-icon":!0,[this.cssClass]:!!this.cssClass},{source:t}=this.props;return"dxIcon"===this.sourceType?kn((0,n.Z)({},e,{[`dx-icon-${t}`]:!0})):"fontIcon"===this.sourceType?kn((0,n.Z)({},e,{[String(t)]:!!t})):"image"===this.sourceType?kn(e):"svg"===this.sourceType?kn((0,n.Z)({},e,{"dx-svg-icon":!0})):""}get restAttributes(){const e=this.props;return(0,an.Z)(e,On)}render(){const e=this.props;return(e=>{let{iconClassName:t,props:{iconTemplate:i,source:n},sourceType:o}=e;return bt(["dxIcon"===o&&mt(1,"i",t),"fontIcon"===o&&mt(1,"i",t),"image"===o&&mt(1,"img",t,null,1,{alt:"",src:n}),i&&mt(1,"i",t,i({}),0)],0)})({props:(0,n.Z)({},e,{iconTemplate:(t=e.iconTemplate,t&&(t.defaultProps?e=>yt(gt(2,t,(0,n.Z)({},e))):t))}),sourceType:this.sourceType,cssClass:this.cssClass,iconClassName:this.iconClassName,restAttributes:this.restAttributes});var t}}Tn.defaultProps={position:"left",source:""};const Dn="dx-inkripple-showing",Bn="dx-inkripple-hiding",An=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{useHoldAnimation:t,waveSizeCoefficient:i,isCentered:n,wavesNumber:o}=e;return{waveSizeCoefficient:i||2,isCentered:n||!1,wavesNumber:o||1,durations:Vn(t??!0)}},Pn=function(e){const t=An(e);return{showWave:$n.bind(this,t),hideWave:Zn.bind(this,t)}},Mn=function(e,t){const i=function(e){let t=e.children(".dx-inkripple");return 0===t.length&&(t=(0,c.Z)("<div>").addClass("dx-inkripple").appendTo(e)),t}((0,c.Z)(e)),n=i.children(".dx-inkripple-wave").toArray();for(let e=n.length;e<t;e++){const e=(0,c.Z)("<div>").appendTo(i).addClass("dx-inkripple-wave");n.push(e[0])}return(0,c.Z)(n)},Rn=function(e,t){const i=(0,c.Z)(t.element),n=(0,oe.Y_)(i),o=(0,oe.zp)(i),r=parseInt(Math.sqrt(n*n+o*o)),s=Math.min(4e3,parseInt(r*e.waveSizeCoefficient));let a,l;if(e.isCentered)a=(n-s)/2,l=(o-s)/2;else{const e=t.event,n=i.offset();a=e.pageX-n.left-s/2,l=e.pageY-n.top-s/2}return{left:a,top:l,height:s,width:s}};function $n(e,t){const i=Mn(t.element,e.wavesNumber).eq(t.wave||0);e.hidingTimeout&&clearTimeout(e.hidingTimeout),Fn(i),i.css(Rn(e,t)),e.showingTimeout=setTimeout(Nn.bind(this,e,i),0)}function Nn(e,t){const i=e.durations.showingScale+"ms";t.addClass(Dn).css("transitionDuration",i)}function Vn(e){return{showingScale:e?1e3:300,hidingScale:300,hidingOpacity:300}}function Fn(e){e.removeClass(Bn).css("transitionDuration","")}function Zn(e,t){e.showingTimeout&&clearTimeout(e.showingTimeout);const i=Mn(t.element,t.wavesNumber).eq(t.wave||0),n=e.durations,o=n.hidingScale+"ms, "+n.hidingOpacity+"ms";i.addClass(Bn).removeClass(Dn).css("transitionDuration",o);const r=Math.max(n.hidingScale,n.hidingOpacity);e.hidingTimeout=setTimeout(Fn.bind(this,i),r)}const Hn=["config"],Ln={config:Object.freeze({})};class jn extends Vi{constructor(e){super(e),this.state={},this.__getterCache={},this.hideWave=this.hideWave.bind(this),this.showWave=this.showWave.bind(this)}get getConfig(){return void 0!==this.__getterCache.getConfig?this.__getterCache.getConfig:this.__getterCache.getConfig=(()=>{const{config:e}=this.props;return An(e)})()}get restAttributes(){const e=this.props;return(0,an.Z)(e,Hn)}hideWave(e){Zn(this.getConfig,e)}showWave(e){$n(this.getConfig,e)}componentWillUpdate(e,t,i){this.props.config!==e.config&&(this.__getterCache.getConfig=void 0)}render(){const e=this.props;return t={props:(0,n.Z)({},e),getConfig:this.getConfig,restAttributes:this.restAttributes},yt(mt(1,"div","dx-inkripple",null,1,(0,n.Z)({},t.restAttributes)));var t}}function zn(e){return(t,i,n,o)=>{const r=o?(0,v.addNamespace)(e,o):e;if(i)return m.Z.on(t,r,n,i),()=>{m.Z.off(t,r,i)}}}jn.defaultProps=Ln,zn(He.name),zn("scroll"),zn(T),zn(D),zn(B),zn(A),zn(P),zn(M),zn($.Z.down),zn($.Z.up),zn($.Z.move),zn("mouseenter"),zn("mouseleave"),zn("keydown");const Wn=zn("dxactive"),Kn=zn("dxinactive"),qn=zn("dxhoverstart"),Un=zn("dxhoverend"),Gn=zn("focusin"),Yn=zn("focusout");var Qn=i(9731);const Xn={className:"",activeStateEnabled:!1,disabled:!1,focusStateEnabled:!1,hoverStateEnabled:!1,tabIndex:0,visible:!0},Jn=function(e){const t=Hi++;return{id:t,defaultValue:e,Provider:class extends Mi{getChildContext(){return Object.assign(Object.assign({},this.context),{[t]:this.props.value||e})}render(){return this.props.children}}}}(void 0),eo=["children","rtlEnabled"];class to extends Vi{constructor(e){super(e),this.state={},this.__getterCache={}}getChildContext(){return(0,n.Z)({},this.context,{[Jn.id]:this.config||Jn.defaultValue})}get config(){return void 0!==this.__getterCache.config?this.__getterCache.config:this.__getterCache.config=(()=>({rtlEnabled:this.props.rtlEnabled}))()}get restAttributes(){const e=this.props;return(0,an.Z)(e,eo)}componentWillUpdate(e,t,i){this.props.rtlEnabled!==e.rtlEnabled&&(this.__getterCache.config=void 0)}render(){const e=this.props;return[(0,n.Z)({},e),this.config,this.restAttributes][0].children}}to.defaultProps={};var io=i(7581);const no=["_feedbackHideTimeout","_feedbackShowTimeout","accessKey","activeStateEnabled","activeStateUnit","addWidgetClass","aria","children","className","classes","cssText","disabled","focusStateEnabled","height","hint","hoverStateEnabled","name","onActive","onClick","onDimensionChanged","onFocusIn","onFocusOut","onHoverEnd","onHoverStart","onInactive","onKeyDown","onRootElementRendered","onVisibilityChange","rootElementRef","rtlEnabled","tabIndex","visible","width"],oo=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Xn),Object.getOwnPropertyDescriptors({_feedbackHideTimeout:400,_feedbackShowTimeout:30,cssText:"",aria:Object.freeze({}),classes:"",name:"",addWidgetClass:!0})));class ro extends Zi{get config(){return this.context[Jn.id]?this.context[Jn.id]:Jn.defaultValue}constructor(e){super(e),this.widgetElementRef={current:null},this.state={active:!1,focused:!1,hovered:!1},this.setRootElementRef=this.setRootElementRef.bind(this),this.activeEffect=this.activeEffect.bind(this),this.inactiveEffect=this.inactiveEffect.bind(this),this.clickEffect=this.clickEffect.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.focusInEffect=this.focusInEffect.bind(this),this.focusOutEffect=this.focusOutEffect.bind(this),this.hoverStartEffect=this.hoverStartEffect.bind(this),this.hoverEndEffect=this.hoverEndEffect.bind(this),this.keyboardEffect=this.keyboardEffect.bind(this),this.resizeEffect=this.resizeEffect.bind(this),this.windowResizeEffect=this.windowResizeEffect.bind(this),this.visibilityEffect=this.visibilityEffect.bind(this),this.checkDeprecation=this.checkDeprecation.bind(this),this.applyCssTextEffect=this.applyCssTextEffect.bind(this)}createEffects(){return[new Li(this.setRootElementRef,[]),new Li(this.activeEffect,[this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),new Li(this.inactiveEffect,[this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),new Li(this.clickEffect,[this.props.disabled,this.props.name,this.props.onClick]),new Li(this.focusInEffect,[this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),new Li(this.focusOutEffect,[this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),new Li(this.hoverStartEffect,[this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),new Li(this.hoverEndEffect,[this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),new Li(this.keyboardEffect,[this.props.focusStateEnabled,this.props.onKeyDown]),new Li(this.resizeEffect,[this.props.name,this.props.onDimensionChanged]),new Li(this.windowResizeEffect,[this.props.onDimensionChanged]),new Li(this.visibilityEffect,[this.props.name,this.props.onVisibilityChange]),new Li(this.checkDeprecation,[this.props.height,this.props.width]),new Li(this.applyCssTextEffect,[this.props.cssText]),ji()]}updateEffects(){var e,t,i,n,o,r,s,a,l,c,d,h,u;null===(e=this._effects[1])||void 0===e||e.update([this.props._feedbackShowTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.disabled,this.props.onActive]),null===(t=this._effects[2])||void 0===t||t.update([this.props._feedbackHideTimeout,this.props.activeStateEnabled,this.props.activeStateUnit,this.props.onInactive,this.state.active]),null===(i=this._effects[3])||void 0===i||i.update([this.props.disabled,this.props.name,this.props.onClick]),null===(n=this._effects[4])||void 0===n||n.update([this.props.disabled,this.props.focusStateEnabled,this.props.name,this.props.onFocusIn]),null===(o=this._effects[5])||void 0===o||o.update([this.props.focusStateEnabled,this.props.name,this.props.onFocusOut,this.state.focused]),null===(r=this._effects[6])||void 0===r||r.update([this.props.activeStateUnit,this.props.disabled,this.props.hoverStateEnabled,this.props.onHoverStart,this.state.active]),null===(s=this._effects[7])||void 0===s||s.update([this.props.activeStateUnit,this.props.hoverStateEnabled,this.props.onHoverEnd,this.state.hovered]),null===(a=this._effects[8])||void 0===a||a.update([this.props.focusStateEnabled,this.props.onKeyDown]),null===(l=this._effects[9])||void 0===l||l.update([this.props.name,this.props.onDimensionChanged]),null===(c=this._effects[10])||void 0===c||c.update([this.props.onDimensionChanged]),null===(d=this._effects[11])||void 0===d||d.update([this.props.name,this.props.onVisibilityChange]),null===(h=this._effects[12])||void 0===h||h.update([this.props.height,this.props.width]),null===(u=this._effects[13])||void 0===u||u.update([this.props.cssText])}setRootElementRef(){const{onRootElementRendered:e,rootElementRef:t}=this.props;t&&(t.current=this.widgetElementRef.current),null==e||e(this.widgetElementRef.current)}activeEffect(){const{_feedbackShowTimeout:e,activeStateEnabled:t,activeStateUnit:i,disabled:n,onActive:o}=this.props,r=i;if(t&&!n)return Wn(this.widgetElementRef.current,(e=>{this.setState((e=>({active:!0}))),null==o||o(e)}),{timeout:e,selector:r},"UIFeedback")}inactiveEffect(){const{_feedbackHideTimeout:e,activeStateEnabled:t,activeStateUnit:i,onInactive:n}=this.props,o=i;if(t)return Kn(this.widgetElementRef.current,(e=>{this.state.active&&(this.setState((e=>({active:!1}))),null==n||n(e))}),{timeout:e,selector:o},"UIFeedback")}clickEffect(){const{disabled:e,name:t,onClick:i}=this.props,n=t;if(i&&!e)return In.wt.on(this.widgetElementRef.current,i,{namespace:n}),()=>In.wt.off(this.widgetElementRef.current,{namespace:n})}focusInEffect(){const{disabled:e,focusStateEnabled:t,name:i,onFocusIn:n}=this.props,o=`${i}Focus`;if(t&&!e)return Gn(this.widgetElementRef.current,(e=>{e.isDefaultPrevented()||(this.setState((e=>({focused:!0}))),null==n||n(e))}),null,o)}focusOutEffect(){const{focusStateEnabled:e,name:t,onFocusOut:i}=this.props,n=`${t}Focus`;if(e)return Yn(this.widgetElementRef.current,(e=>{!e.isDefaultPrevented()&&this.state.focused&&(this.setState((e=>({focused:!1}))),null==i||i(e))}),null,n)}hoverStartEffect(){const{activeStateUnit:e,disabled:t,hoverStateEnabled:i,onHoverStart:n}=this.props,o=e;if(i&&!t)return qn(this.widgetElementRef.current,(e=>{!this.state.active&&this.setState((e=>({hovered:!0}))),null==n||n(e)}),{selector:o},"UIFeedback")}hoverEndEffect(){const{activeStateUnit:e,hoverStateEnabled:t,onHoverEnd:i}=this.props,n=e;if(t)return Un(this.widgetElementRef.current,(e=>{this.state.hovered&&(this.setState((e=>({hovered:!1}))),null==i||i(e))}),{selector:n},"UIFeedback")}keyboardEffect(){const{focusStateEnabled:e,onKeyDown:t}=this.props;if(e&&t){const e=In.dG.on(this.widgetElementRef.current,this.widgetElementRef.current,(e=>t(e)));return()=>In.dG.off(e)}}resizeEffect(){const e=`${this.props.name}VisibilityChange`,{onDimensionChanged:t}=this.props;if(t)return In.SI.on(this.widgetElementRef.current,t,{namespace:e}),()=>In.SI.off(this.widgetElementRef.current,{namespace:e})}windowResizeEffect(){const{onDimensionChanged:e}=this.props;if(e)return io.default.add(e),()=>{io.default.remove(e)}}visibilityEffect(){const{name:e,onVisibilityChange:t}=this.props,i=`${e}VisibilityChange`;if(t)return In.WD.on(this.widgetElementRef.current,(()=>t(!0)),(()=>t(!1)),{namespace:i}),()=>In.WD.off(this.widgetElementRef.current,{namespace:i})}checkDeprecation(){const{height:e,width:t}=this.props;(0,_.mf)(t)&&H.default.log("W0017","width"),(0,_.mf)(e)&&H.default.log("W0017","height")}applyCssTextEffect(){const{cssText:e}=this.props;""!==e&&(this.widgetElementRef.current.style.cssText=e)}get shouldRenderConfigProvider(){const{rtlEnabled:e}=this.props;return function(e,t){const i=(0,_.$K)(e),n=(0,_.$K)((0,s.default)().rtlEnabled)&&!i&&!(0,_.$K)(null==t?void 0:t.rtlEnabled);return i&&e!==(null==t?void 0:t.rtlEnabled)||n}(e,this.config)}get rtlEnabled(){const{rtlEnabled:e}=this.props;return t=e,i=this.config,void 0!==t?t:void 0!==(null==i?void 0:i.rtlEnabled)?i.rtlEnabled:(0,s.default)().rtlEnabled;var t,i}get attributes(){const{aria:e,disabled:t,focusStateEnabled:i,visible:o}=this.props,r=i&&!t&&this.props.accessKey;return(0,n.Z)({},(0,f.l)({},r&&{accessKey:r}),(s=(0,n.Z)({},e,{disabled:t,hidden:!o}),Object.keys(s).reduce(((e,t)=>s[t]?(0,n.Z)({},e,{["role"===t||"id"===t?t:`aria-${t}`]:String(s[t])}):e),{})),(0,f.l)({},this.restAttributes));var s}get styles(){const{height:e,width:t}=this.props,i=this.restAttributes.style||{},o=(0,Qn.bh)("width",(0,_.mf)(t)?t():t),r=(0,Qn.bh)("height",(0,_.mf)(e)?e():e);return(0,n.Z)({},i,{height:r??i.height,width:o??i.width})}get cssClasses(){const{activeStateEnabled:e,addWidgetClass:t,className:i,classes:n,disabled:o,focusStateEnabled:r,hoverStateEnabled:s,onVisibilityChange:a,visible:l}=this.props,c=!!r&&!o,d=!!s&&!o,h=!!e&&!o;return kn({"dx-widget":!!t,[String(n)]:!!n,[String(i)]:!!i,"dx-state-disabled":!!o,"dx-state-invisible":!l,"dx-state-focused":!!this.state.focused&&c,"dx-state-active":!!this.state.active&&h,"dx-state-hover":!!this.state.hovered&&d&&!this.state.active,"dx-rtl":!!this.rtlEnabled,"dx-visibility-change-handler":!!a})}get tabIndex(){const{disabled:e,focusStateEnabled:t,tabIndex:i}=this.props;return t&&!e?i:void 0}get restAttributes(){const e=this.props;return(0,an.Z)(e,no)}focus(){In.T_.trigger(this.widgetElementRef.current)}blur(){const e=Fe.Z.getActiveElement(this.widgetElementRef.current);this.widgetElementRef.current===e&&e.blur()}activate(){this.setState((e=>({active:!0})))}deactivate(){this.setState((e=>({active:!1})))}render(){const e=this.props;return(e=>{const t=yt(mt(1,"div",e.cssClasses,e.props.children,0,(0,n.Z)({},e.attributes,{tabIndex:e.tabIndex,title:e.props.hint,style:tn(e.styles)}),null,e.widgetElementRef));return e.shouldRenderConfigProvider?gt(2,to,{rtlEnabled:e.rtlEnabled,children:t}):t})({props:(0,n.Z)({},e),active:this.state.active,focused:this.state.focused,hovered:this.state.hovered,widgetElementRef:this.widgetElementRef,config:this.config,shouldRenderConfigProvider:this.shouldRenderConfigProvider,rtlEnabled:this.rtlEnabled,attributes:this.attributes,styles:this.styles,cssClasses:this.cssClasses,tabIndex:this.tabIndex,restAttributes:this.restAttributes})}}ro.defaultProps=oo;const so=["accessKey","activeStateEnabled","children","className","disabled","focusStateEnabled","height","hint","hoverStateEnabled","icon","iconPosition","iconTemplate","onClick","onKeyDown","onSubmit","pressed","rtlEnabled","stylingMode","tabIndex","template","templateData","text","type","useInkRipple","useSubmitBehavior","visible","width"],ao=["outlined","text","contained"],lo=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Xn),Object.getOwnPropertyDescriptors({activeStateEnabled:!0,hoverStateEnabled:!0,icon:"",iconPosition:"left",stylingMode:"contained",text:"",type:"normal",useInkRipple:!1,useSubmitBehavior:!1,templateData:Object.freeze({})}))),co=(0,xn.J3)([{device:()=>"desktop"===a.default.real().deviceType&&!a.default.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>(0,Sn.x2)((0,Sn.Vk)()),options:{useInkRipple:!0}}]),ho=e=>e&&(e.defaultProps?t=>yt(gt(2,e,(0,n.Z)({},t))):e);class uo extends Zi{constructor(e){super(e),this.state={},this.contentRef={current:null},this.inkRippleRef={current:null},this.submitInputRef={current:null},this.widgetRef={current:null},this.__getterCache={},this.focus=this.focus.bind(this),this.activate=this.activate.bind(this),this.deactivate=this.deactivate.bind(this),this.submitEffect=this.submitEffect.bind(this),this.onActive=this.onActive.bind(this),this.onInactive=this.onInactive.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this),this.emitClickEvent=this.emitClickEvent.bind(this)}createEffects(){return[new Li(this.submitEffect,[this.props.onSubmit,this.props.useSubmitBehavior]),ji()]}updateEffects(){var e;null===(e=this._effects[0])||void 0===e||e.update([this.props.onSubmit,this.props.useSubmitBehavior])}submitEffect(){const{onSubmit:e,useSubmitBehavior:t}=this.props;if(t&&e)return In.V4.on(this.submitInputRef.current,(t=>e({event:t,submitInput:this.submitInputRef.current})),{namespace:"UIFeedback"}),()=>In.V4.off(this.submitInputRef.current,{namespace:"UIFeedback"})}onActive(e){const{useInkRipple:t}=this.props;t&&this.inkRippleRef.current.showWave({element:this.contentRef.current,event:e})}onInactive(e){const{useInkRipple:t}=this.props;t&&this.inkRippleRef.current.hideWave({element:this.contentRef.current,event:e})}onWidgetClick(e){const{onClick:t,useSubmitBehavior:i}=this.props;null==t||t({event:e}),i&&this.submitInputRef.current.click()}keyDown(e){const{onKeyDown:t}=this.props,{keyName:i,originalEvent:n,which:o}=e,r=null==t?void 0:t(e);if(null!=r&&r.cancel)return r;"space"!==i&&"space"!==o&&"enter"!==i&&"enter"!==o||(n.preventDefault(),this.emitClickEvent())}emitClickEvent(){this.contentRef.current.click()}get aria(){const{icon:e,text:t}=this.props;let i=t??"";if(!t&&e)switch(yn(e)){case"image":{const t=/^(?!(?:https?:\/\/)|(?:ftp:\/\/)|(?:www\.))[^\s]+$/;i=!e.includes("base64")&&t.test(e)?e.replace(/.+\/([^.]+)\..+$/,"$1"):"";break}case"dxIcon":i=z.Z.format((0,En.camelize)(e,!0))||e;break;case"fontIcon":i=e;break;case"svg":var o;i=(null===(o=/<title>(.*?)<\/title>/.exec(e))||void 0===o?void 0:o[1])??""}return(0,n.Z)({role:"button"},i?{label:i}:{})}get cssClasses(){return(e=>{const{icon:t,iconPosition:i,stylingMode:n,text:o,type:r}=e;return kn({"dx-button":!0,[`dx-button-mode-${n&&ao.includes(n)?n:"contained"}`]:!0,[`dx-button-${r??"normal"}`]:!0,"dx-button-has-text":!!o,"dx-button-has-icon":!!t,"dx-button-icon-right":"left"!==i})})(this.props)}get iconSource(){const{icon:e}=this.props;return e??""}get inkRippleConfig(){return void 0!==this.__getterCache.inkRippleConfig?this.__getterCache.inkRippleConfig:this.__getterCache.inkRippleConfig=(()=>{const{icon:e,text:t}=this.props;return!t&&e?{isCentered:!0,useHoldAnimation:!1,waveSizeCoefficient:1}:{}})()}get buttonTemplateData(){const{icon:e,templateData:t,text:i}=this.props;return(0,n.Z)({icon:e,text:i},t)}get restAttributes(){const e=this.props;return(0,an.Z)(e,so)}focus(){this.widgetRef.current.focus()}activate(){this.widgetRef.current.activate()}deactivate(){this.widgetRef.current.deactivate()}componentWillUpdate(e,t,i){super.componentWillUpdate(),this.props.icon===e.icon&&this.props.text===e.text||(this.__getterCache.inkRippleConfig=void 0)}render(){const e=this.props;return(e=>{const{children:t,iconPosition:i,iconTemplate:o,template:r,text:s}=e.props,a=!e.props.template&&!t&&""!==s,l="left"===i,c=!e.props.template&&!t&&(e.iconSource||e.props.iconTemplate)&&gt(2,Tn,{source:e.iconSource,position:i,iconTemplate:o});return yt(gt(2,ro,(0,n.Z)({accessKey:e.props.accessKey,activeStateEnabled:e.props.activeStateEnabled,aria:e.aria,className:e.props.className,classes:e.cssClasses,disabled:e.props.disabled,focusStateEnabled:e.props.focusStateEnabled,height:e.props.height,hint:e.props.hint,hoverStateEnabled:e.props.hoverStateEnabled,onActive:e.onActive,onClick:e.onWidgetClick,onInactive:e.onInactive,onKeyDown:e.keyDown,rtlEnabled:e.props.rtlEnabled,tabIndex:e.props.tabIndex,visible:e.props.visible,width:e.props.width},e.restAttributes,{children:mt(1,"div","dx-button-content",[e.props.template&&r({data:e.buttonTemplateData}),!e.props.template&&t,l&&c,a&&mt(1,"span","dx-button-text",s,0),!l&&c,e.props.useSubmitBehavior&&mt(64,"input","dx-button-submit-input",null,1,{type:"submit",tabIndex:-1},null,e.submitInputRef),e.props.useInkRipple&&gt(2,jn,{config:e.inkRippleConfig},null,e.inkRippleRef)],0,null,null,e.contentRef)}),null,e.widgetRef))})({props:(0,n.Z)({},e,{template:ho(e.template),iconTemplate:ho(e.iconTemplate)}),contentRef:this.contentRef,submitInputRef:this.submitInputRef,inkRippleRef:this.inkRippleRef,widgetRef:this.widgetRef,onActive:this.onActive,onInactive:this.onInactive,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,emitClickEvent:this.emitClickEvent,aria:this.aria,cssClasses:this.cssClasses,iconSource:this.iconSource,inkRippleConfig:this.inkRippleConfig,buttonTemplateData:this.buttonTemplateData,restAttributes:this.restAttributes})}}uo.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(lo),Object.getOwnPropertyDescriptors((0,n.Z)({},(0,xn.wt)(co)))));const po=[];class fo extends wn{getProps(){const e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}focus(){var e;return null===(e=this.viewRef)||void 0===e?void 0:e.focus(...arguments)}activate(){var e;return null===(e=this.viewRef)||void 0===e?void 0:e.activate(...arguments)}deactivate(){var e;return null===(e=this.viewRef)||void 0===e?void 0:e.deactivate(...arguments)}_getActionConfigs(){return{onClick:{excludeValidators:["readOnly"]},onSubmit:{}}}get _propsInfo(){return{twoWay:[],allowNull:[],elements:["onSubmit"],templates:["template","iconTemplate"],props:["activeStateEnabled","hoverStateEnabled","icon","iconPosition","onClick","onSubmit","pressed","stylingMode","template","iconTemplate","text","type","useInkRipple","useSubmitBehavior","templateData","className","accessKey","disabled","focusStateEnabled","height","hint","onKeyDown","rtlEnabled","tabIndex","visible","width"]}}get _viewComponent(){return uo}}(0,r.default)("dxButton",fo),fo.defaultOptions=function(e){po.push(e),uo.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(uo.defaultProps),Object.getOwnPropertyDescriptors((0,xn.wt)(co)),Object.getOwnPropertyDescriptors((0,xn.wt)(po))))};const _o=fo;var mo=i(8868);const go=me.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{min:0,max:100,value:0})},_initMarkup(){this.$element().addClass("dx-trackbar"),this._renderWrapper(),this._renderContainer(),this._renderRange(),this._renderValue(),this._setRangeStyles(),this.callBase()},_render(){this.callBase(),this._setRangeStyles(this._rangeStylesConfig())},_renderWrapper(){this._$wrapper=(0,c.Z)("<div>").addClass("dx-trackbar-wrapper").appendTo(this.$element())},_renderContainer(){this._$bar=(0,c.Z)("<div>").addClass("dx-trackbar-container").appendTo(this._$wrapper)},_renderRange(){this._$range=(0,c.Z)("<div>").addClass("dx-trackbar-range").appendTo(this._$bar)},_renderValue(){const e=this.option("value"),t=this.option("min"),i=this.option("max");if(t>i)return;if(e<t)return this.option("value",t),void(this._currentRatio=0);if(e>i)return this.option("value",i),void(this._currentRatio=1);const n=t===i?0:(e-t)/(i-t);!this._needPreventAnimation&&this._setRangeStyles({width:100*n+"%"}),this.setAria({valuemin:this.option("min"),valuemax:i,valuenow:e}),this._currentRatio=n},_rangeStylesConfig(){return{width:100*this._currentRatio+"%"}},_setRangeStyles(e){mo.default.stop(this._$range),e?!this._needPreventAnimation&&(0,Z.hasWindow)()&&mo.default.animate(this._$range,{type:"custom",duration:100,to:e}):this._$range.css({width:0})},_optionChanged(e){switch(e.name){case"value":this._renderValue(),this.callBase(e);break;case"max":case"min":this._renderValue();break;default:this.callBase(e)}},_dispose(){mo.default.stop(this._$range),this.callBase()}});(0,r.default)("dxTrackBar",go);const vo="dx-progressbar-animating-segment",bo=go.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{value:0,statusFormat:e=>`Progress: ${Math.round(100*e)}%`,showStatus:!0,onComplete:null,activeStateEnabled:!1,statusPosition:"bottom left",_animatingSegmentCount:0})},_defaultOptionsRules(){return this.callBase().concat([{device:e=>"android"===e.platform,options:{_animatingSegmentCount:2}}])},_initMarkup(){this._renderStatus(),this._createCompleteAction(),this.callBase(),this.$element().addClass("dx-progressbar"),this._$wrapper.addClass("dx-progressbar-wrapper"),this._$bar.addClass("dx-progressbar-container"),this.setAria("role","progressbar"),(0,c.Z)("<div>").addClass("dx-progressbar-range-container").appendTo(this._$wrapper).append(this._$bar),this._$range.addClass("dx-progressbar-range"),this._toggleStatus(this.option("showStatus"))},_useTemplates:()=>!1,_createCompleteAction(){this._completeAction=this._createActionByOption("onComplete")},_renderStatus(){this._$status=(0,c.Z)("<div>").addClass("dx-progressbar-status")},_renderIndeterminateState(){this._$segmentContainer=(0,c.Z)("<div>").addClass("dx-progressbar-animating-container");const e=this.option("_animatingSegmentCount");for(let t=0;t<e;t++)(0,c.Z)("<div>").addClass(vo).addClass(`${vo}-${t+1}`).appendTo(this._$segmentContainer);this._$segmentContainer.appendTo(this._$wrapper)},_toggleStatus(e){const t=this.option("statusPosition").split(" ");e?"top"===t[0]||"left"===t[0]?this._$status.prependTo(this._$wrapper):this._$status.appendTo(this._$wrapper):this._$status.detach(),this._togglePositionClass()},_togglePositionClass(){const e=this.option("statusPosition").split(" ");this._$wrapper.removeClass("dx-position-top-left dx-position-top-right dx-position-bottom-left dx-position-bottom-right dx-position-left dx-position-right");let t=`dx-position-${e[0]}`;e[1]&&(t+=`-${e[1]}`),this._$wrapper.addClass(t)},_toggleIndeterminateState(e){e?(this._renderIndeterminateState(),this._$bar.toggle(!1)):(this._$bar.toggle(!0),this._$segmentContainer.remove(),delete this._$segmentContainer)},_renderValue(){const e=this.option("value"),t=this.option("max");e||0===e?(this._$segmentContainer&&this._toggleIndeterminateState(!1),e===t&&this._completeAction(),this.callBase(),this._setStatus()):this._toggleIndeterminateState(!0)},_setStatus(){let e=this.option("statusFormat");e=(0,_.mf)(e)?e.bind(this):function(e){return e};const t=e(this._currentRatio,this.option("value"));this._$status.text(t)},_dispose(){this._$status.remove(),this.callBase()},_optionChanged(e){switch(e.name){case"statusFormat":this._setStatus();break;case"showStatus":this._toggleStatus(e.value);break;case"statusPosition":this._toggleStatus(this.option("showStatus"));break;case"onComplete":this._createCompleteAction();break;case"_animatingSegmentCount":break;default:this.callBase(e)}}});(0,r.default)("dxProgressBar",bo);const yo=bo,Co=de.default,wo=me,xo=(0,Z.getWindow)(),So=()=>!!xo.FormData;class Io extends wo{_supportedKeys(){const e=e=>{e.preventDefault();const t=this._selectButton.$element();m.Z.trigger(t,He.name)};return(0,f.l)(super._supportedKeys(),{space:e,enter:e})}_setOptionsByReference(){super._setOptionsByReference(),(0,f.l)(this._optionsByReference,{value:!0})}_getDefaultOptions(){return(0,f.l)(super._getDefaultOptions(),{chunkSize:0,value:[],selectButtonText:z.Z.format("dxFileUploader-selectFile"),uploadButtonText:z.Z.format("dxFileUploader-upload"),labelText:z.Z.format("dxFileUploader-dropFile"),name:"files[]",multiple:!1,accept:"",uploadUrl:"/",allowCanceling:!0,showFileList:!0,progress:0,dialogTrigger:void 0,dropZone:void 0,readyToUploadMessage:z.Z.format("dxFileUploader-readyToUpload"),uploadedMessage:z.Z.format("dxFileUploader-uploaded"),uploadFailedMessage:z.Z.format("dxFileUploader-uploadFailedMessage"),uploadAbortedMessage:z.Z.format("dxFileUploader-uploadAbortedMessage"),uploadMode:"instantly",uploadMethod:"POST",uploadHeaders:{},uploadCustomData:{},onBeforeSend:null,onUploadStarted:null,onUploaded:null,onFilesUploaded:null,onProgress:null,onUploadError:null,onUploadAborted:null,onDropZoneEnter:null,onDropZoneLeave:null,allowedFileExtensions:[],maxFileSize:0,minFileSize:0,inputAttr:{},invalidFileExtensionMessage:z.Z.format("dxFileUploader-invalidFileExtension"),invalidMaxFileSizeMessage:z.Z.format("dxFileUploader-invalidMaxFileSize"),invalidMinFileSizeMessage:z.Z.format("dxFileUploader-invalidMinFileSize"),extendSelection:!0,validationMessageMode:"always",uploadFile:null,uploadChunk:null,abortUpload:null,validationMessageOffset:{h:0,v:0},hoverStateEnabled:!0,useNativeInputClick:!1,useDragOver:!0,nativeDropSupported:!0,_uploadButtonType:"normal",_buttonStylingMode:"contained"})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>"desktop"===a.default.real().deviceType&&!a.default.isSimulator(),options:{focusStateEnabled:!0}},{device:[{platform:"android"}],options:{validationMessageOffset:{v:0}}},{device:()=>"desktop"!==a.default.real().deviceType,options:{useDragOver:!1}},{device:()=>!So(),options:{uploadMode:"useForm"}},{device:()=>"desktop"!==a.default.real().deviceType,options:{nativeDropSupported:!1}},{device:()=>(0,Sn.x2)(),options:{_uploadButtonType:"default"}},{device:()=>(0,Sn.dC)(),options:{_buttonStylingMode:"text"}}])}_initOptions(e){const t="labelText"in e;super._initOptions(e),t||this._shouldDragOverBeRendered()||this.option("labelText","")}_init(){super._init(),this._initFileInput(),this._initLabel(),this._setUploadStrategy(),this._createFiles(),this._createBeforeSendAction(),this._createUploadStartedAction(),this._createUploadedAction(),this._createFilesUploadedAction(),this._createProgressAction(),this._createUploadErrorAction(),this._createUploadAbortedAction(),this._createDropZoneEnterAction(),this._createDropZoneLeaveAction()}_setUploadStrategy(){if(this.option("chunkSize")>0){const e=this.option("uploadChunk");this._uploadStrategy=e&&(0,_.mf)(e)?new Do(this):new To(this)}else{const e=this.option("uploadFile");this._uploadStrategy=e&&(0,_.mf)(e)?new Po(this):new Ao(this)}}_initFileInput(){this._isCustomClickEvent=!1;const{multiple:e,accept:t,hint:i}=this.option();this._$fileInput||(this._$fileInput=(0,c.Z)("<input>").attr("type","file"),m.Z.on(this._$fileInput,"change",this._inputChangeHandler.bind(this)),m.Z.on(this._$fileInput,"click",(e=>(e.stopPropagation(),this._resetInputValue(),this.option("useNativeInputClick")||this._isCustomClickEvent))));const n={multiple:e,accept:t,tabIndex:-1};(0,_.$K)(i)&&(n.title=i),this._$fileInput.prop(n)}_inputChangeHandler(){if(this._doPreventInputChange)return;const e=this._$fileInput.val().replace(/^.*\\/,""),t=this._$fileInput.prop("files");if(t&&!t.length&&"useForm"!==this.option("uploadMode"))return;const i=t?this._getFiles(t):[{name:e}];this._changeValue(i),"instantly"===this.option("uploadMode")&&this._uploadFiles()}_shouldFileListBeExtended(){return"useForm"!==this.option("uploadMode")&&this.option("extendSelection")&&this.option("multiple")}_changeValue(e){const t=this._shouldFileListBeExtended()?this.option("value").slice():[];this.option("value",t.concat(e))}_getFiles(e){const t=[];return(0,j.each)(e,((e,i)=>t.push(i))),t}_getFile(e){const t=(0,_.kE)(e)?this.option("value")[e]:e;return this._files.filter((e=>e.value===t))[0]}_initLabel(){this._$inputLabel||(this._$inputLabel=(0,c.Z)("<div>")),this._updateInputLabelText()}_updateInputLabelText(){const e=this._isInteractionDisabled()?"":this.option("labelText");this._$inputLabel.text(e)}_focusTarget(){return this.$element().find(".dx-fileuploader-button")}_getSubmitElement(){return this._$fileInput}_initMarkup(){super._initMarkup(),this.$element().addClass("dx-fileuploader"),this._renderWrapper(),this._renderInputWrapper(),this._renderSelectButton(),this._renderInputContainer(),this._renderUploadButton(),this._preventRecreatingFiles=!0,this._activeDropZone=null}_render(){this._preventRecreatingFiles=!1,this._attachDragEventHandlers(this._$inputWrapper),this._attachDragEventHandlers(this.option("dropZone")),this._renderFiles(),super._render()}_createFileProgressBar(e){e.progressBar=this._createProgressBar(e.value.size),e.progressBar.$element().appendTo(e.$file),this._initStatusMessage(e),this._ensureCancelButtonInitialized(e)}_setStatusMessage(e,t){setTimeout((()=>{this.option("showFileList")&&e.$statusMessage&&(e.$statusMessage.text(t),e.$statusMessage.css("display",""),e.progressBar.$element().remove())}),400)}_getUploadAbortedStatusMessage(){return"instantly"===this.option("uploadMode")?this.option("uploadAbortedMessage"):this.option("readyToUploadMessage")}_createFiles(){const e=this.option("value");!this._files||0!==(null==e?void 0:e.length)&&this._shouldFileListBeExtended()||(this._preventFilesUploading(this._files),this._files=null),this._files||(this._files=[]),(0,j.each)(null==e?void 0:e.slice(this._files.length),((e,t)=>{const i=this._createFile(t);this._validateFile(i),this._files.push(i)}))}_preventFilesUploading(e){e.forEach((e=>this._uploadStrategy.abortUpload(e)))}_validateFile(e){e.isValidFileExtension=this._validateFileExtension(e),e.isValidMinSize=this._validateMinFileSize(e),e.isValidMaxSize=this._validateMaxFileSize(e)}_validateFileExtension(e){const t=this.option("allowedFileExtensions"),i=this.option("accept"),n=this._getAllowedFileTypes(i),o=e.value.name.substring(e.value.name.lastIndexOf(".")).toLowerCase();if(0!==(null==i?void 0:i.length)&&!this._isFileTypeAllowed(e.value,n))return!1;if(0===(null==t?void 0:t.length))return!0;for(let e=0;e<t.length;e++)if(o===t[e].toLowerCase())return!0;return!1}_validateMaxFileSize(e){const t=e.value.size,i=this.option("maxFileSize");return!(i>0)||t<=i}_validateMinFileSize(e){const t=e.value.size,i=this.option("minFileSize");return!(i>0)||t>=i}_createBeforeSendAction(){this._beforeSendAction=this._createActionByOption("onBeforeSend",{excludeValidators:["readOnly"]})}_createUploadStartedAction(){this._uploadStartedAction=this._createActionByOption("onUploadStarted",{excludeValidators:["readOnly"]})}_createUploadedAction(){this._uploadedAction=this._createActionByOption("onUploaded",{excludeValidators:["readOnly"]})}_createFilesUploadedAction(){this._filesUploadedAction=this._createActionByOption("onFilesUploaded",{excludeValidators:["readOnly"]})}_createProgressAction(){this._progressAction=this._createActionByOption("onProgress",{excludeValidators:["readOnly"]})}_createUploadAbortedAction(){this._uploadAbortedAction=this._createActionByOption("onUploadAborted",{excludeValidators:["readOnly"]})}_createUploadErrorAction(){this._uploadErrorAction=this._createActionByOption("onUploadError",{excludeValidators:["readOnly"]})}_createDropZoneEnterAction(){this._dropZoneEnterAction=this._createActionByOption("onDropZoneEnter")}_createDropZoneLeaveAction(){this._dropZoneLeaveAction=this._createActionByOption("onDropZoneLeave")}_createFile(e){return{value:e,loadedSize:0,onProgress:(0,h.Z)(),onAbort:(0,h.Z)(),onLoad:(0,h.Z)(),onError:(0,h.Z)(),onLoadStart:(0,h.Z)(),isValidFileExtension:!0,isValidMaxSize:!0,isValidMinSize:!0,isValid(){return this.isValidFileExtension&&this.isValidMaxSize&&this.isValidMinSize},isInitialized:!1}}_resetFileState(e){e.isAborted=!1,e.uploadStarted=!1,e.isStartLoad=!1,e.loadedSize=0,e.chunksData=void 0,e.request=void 0}_renderFiles(){var e;const t=this.option("value");this._$filesContainer?this._shouldFileListBeExtended()&&0!==(null==t?void 0:t.length)||this._$filesContainer.empty():this._$filesContainer=(0,c.Z)("<div>").addClass("dx-fileuploader-files-container").appendTo(this._$content);const i=this.option("showFileList");i&&(0,j.each)(this._files,((e,t)=>{t.$file||this._renderFile(t)})),this.$element().toggleClass("dx-fileuploader-show-file-list",i),this._toggleFileUploaderEmptyClassName(),this._updateFileNameMaxWidth(),null===(e=this._validationMessage)||void 0===e||e.repaint()}_renderFile(e){const{value:t}=e,i=(0,c.Z)("<div>").addClass("dx-fileuploader-file-container").appendTo(this._$filesContainer);this._renderFileButtons(e,i),e.$file=(0,c.Z)("<div>").addClass("dx-fileuploader-file").appendTo(i);const n=(0,c.Z)("<div>").addClass("dx-fileuploader-file-info").appendTo(e.$file);e.$statusMessage=(0,c.Z)("<div>").addClass("dx-fileuploader-file-status-message").appendTo(e.$file),(0,c.Z)("<div>").addClass("dx-fileuploader-file-name").text(t.name).appendTo(n),(0,_.$K)(t.size)&&(0,c.Z)("<div>").addClass("dx-fileuploader-file-size").text(this._getFileSize(t.size)).appendTo(n),e.isValid()?e.$statusMessage.text(this.option("readyToUploadMessage")):(e.isValidFileExtension||e.$statusMessage.append(this._createValidationElement("invalidFileExtensionMessage")),e.isValidMaxSize||e.$statusMessage.append(this._createValidationElement("invalidMaxFileSizeMessage")),e.isValidMinSize||e.$statusMessage.append(this._createValidationElement("invalidMinFileSizeMessage")),i.addClass("dx-fileuploader-invalid"))}_createValidationElement(e){return(0,c.Z)("<span>").text(this.option(e))}_updateFileNameMaxWidth(){const e=this.option("allowCanceling")&&"useForm"!==this.option("uploadMode")?1:0,t="useButtons"===this.option("uploadMode")?1:0,i=(0,oe.dz)(this._$filesContainer.find(".dx-fileuploader-file-container").first())||(0,oe.dz)(this._$filesContainer),n=this._$filesContainer.find(".dx-fileuploader-button-container").eq(0),o=(0,oe.dz)(n)*(e+t),r=this._$filesContainer.find(".dx-fileuploader-file-size").eq(0),s=r.text();r.text("1000 Mb");const a=(0,oe.dz)(r);r.text(s),this._$filesContainer.find(".dx-fileuploader-file-name").css("maxWidth",i-o-a)}_renderFileButtons(e,t){const i=this._getCancelButton(e);i&&t.append(i);const n=this._getUploadButton(e);n&&t.append(n)}_getCancelButton(e){if("useForm"===this.option("uploadMode"))return null;const{allowCanceling:t,readOnly:i,hoverStateEnabled:n,_buttonStylingMode:o}=this.option();return e.cancelButton=this._createComponent((0,c.Z)("<div>").addClass("dx-fileuploader-button dx-fileuploader-cancel-button"),_o,{onClick:()=>this._removeFile(e),icon:"close",visible:t,disabled:i,integrationOptions:{},hoverStateEnabled:n,stylingMode:o}),(0,c.Z)("<div>").addClass("dx-fileuploader-button-container").append(e.cancelButton.$element())}_getUploadButton(e){if(!e.isValid()||"useButtons"!==this.option("uploadMode"))return null;const{hoverStateEnabled:t,_buttonStylingMode:i}=this.option();return e.uploadButton=this._createComponent((0,c.Z)("<div>").addClass("dx-fileuploader-button dx-fileuploader-upload-button"),_o,{onClick:()=>this._uploadFile(e),icon:"upload",hoverStateEnabled:t,stylingMode:i}),e.onLoadStart.add((()=>e.uploadButton.option({visible:!1,disabled:!0}))),e.onAbort.add((()=>e.uploadButton.option({visible:!0,disabled:!1}))),(0,c.Z)("<div>").addClass("dx-fileuploader-button-container").append(e.uploadButton.$element())}_removeFile(e){var t;null===(t=e.$file)||void 0===t||t.parent().remove(),this._files.splice(this._files.indexOf(e),1);const i=this.option("value").slice();i.splice(i.indexOf(e.value),1),this._preventRecreatingFiles=!0,this.option("value",i),this._preventRecreatingFiles=!1,this._toggleFileUploaderEmptyClassName(),this._resetInputValue(!0)}removeFile(e){if("useForm"===this.option("uploadMode")||!(0,_.$K)(e))return;const t=this._getFile(e);t&&(t.uploadStarted&&this._preventFilesUploading([t]),this._removeFile(t))}_toggleFileUploaderEmptyClassName(){this.$element().toggleClass("dx-fileuploader-empty",!this._files.length||this._hasInvalidFile(this._files))}_hasInvalidFile(e){for(let t=0;t<e.length;t++)if(!e[t].isValid())return!0;return!1}_getFileSize(e){let t=0;const i=[z.Z.format("dxFileUploader-bytes"),z.Z.format("dxFileUploader-kb"),z.Z.format("dxFileUploader-Mb"),z.Z.format("dxFileUploader-Gb")],n=i.length-1;for(;t<n&&e>=1024;)e/=1024,t++;return`${Math.round(e)} ${i[t]}`}_renderSelectButton(){const e=(0,c.Z)("<div>").addClass("dx-fileuploader-button").appendTo(this._$inputWrapper);this._selectButton=this._createComponent(e,_o,{text:this.option("selectButtonText"),focusStateEnabled:!1,integrationOptions:{},disabled:this.option("readOnly"),hoverStateEnabled:this.option("hoverStateEnabled")}),this._selectFileDialogHandler=this._selectButtonClickHandler.bind(this),"desktop"===a.default.real().deviceType?this._selectButton.option("onClick",this._selectFileDialogHandler):this._attachSelectFileDialogHandler(this._selectButton.$element()),this._attachSelectFileDialogHandler(this.option("dialogTrigger"))}_selectButtonClickHandler(){if(!this.option("useNativeInputClick")){if(this._isInteractionDisabled())return!1;this._isCustomClickEvent=!0,m.Z.trigger(this._$fileInput,"click"),this._isCustomClickEvent=!1}}_attachSelectFileDialogHandler(e){(0,_.$K)(e)&&(this._detachSelectFileDialogHandler(e),m.Z.on((0,c.Z)(e),"click",this._selectFileDialogHandler))}_detachSelectFileDialogHandler(e){(0,_.$K)(e)&&m.Z.off((0,c.Z)(e),"click",this._selectFileDialogHandler)}_renderUploadButton(){if("useButtons"!==this.option("uploadMode"))return;const e=(0,c.Z)("<div>").addClass("dx-fileuploader-button").addClass("dx-fileuploader-upload-button").appendTo(this._$content);this._uploadButton=this._createComponent(e,_o,{text:this.option("uploadButtonText"),onClick:this._uploadButtonClickHandler.bind(this),type:this.option("_uploadButtonType"),integrationOptions:{},hoverStateEnabled:this.option("hoverStateEnabled")})}_uploadButtonClickHandler(){this._uploadFiles()}_shouldDragOverBeRendered(){return!this.option("readOnly")&&("useForm"!==this.option("uploadMode")||this.option("nativeDropSupported"))}_isInteractionDisabled(){return this.option("readOnly")||this.option("disabled")}_renderInputContainer(){this._$inputContainer=(0,c.Z)("<div>").addClass("dx-fileuploader-input-container").appendTo(this._$inputWrapper),this._$fileInput.addClass("dx-fileuploader-input"),this._renderInput();const e=`dx-fileuploader-input-label-${new V.Z}`;this._$inputLabel.attr("id",e).addClass("dx-fileuploader-input-label").appendTo(this._$inputContainer),this.setAria("labelledby",e,this._$fileInput)}_renderInput(){this.option("useNativeInputClick")?this._selectButton.option("template",this._selectButtonInputTemplate.bind(this)):(this._$fileInput.appendTo(this._$inputContainer),this._selectButton.option("template","content")),this._applyInputAttributes(this.option("inputAttr"))}_selectButtonInputTemplate(e,t){const i=(0,c.Z)(t),n=(0,c.Z)("<span>").addClass("dx-button-text").text(e.text);return i.append(n).append(this._$fileInput),i}_renderInputWrapper(){this._$inputWrapper=(0,c.Z)("<div>").addClass("dx-fileuploader-input-wrapper").appendTo(this._$content)}_detachDragEventHandlers(e){(0,_.$K)(e)&&m.Z.off((0,c.Z)(e),(0,v.addNamespace)("",this.NAME))}_attachDragEventHandlers(e){const t=e!==this._$inputWrapper;(0,_.$K)(e)&&this._shouldDragOverBeRendered()&&(this._detachDragEventHandlers(e),e=(0,c.Z)(e),m.Z.on(e,(0,v.addNamespace)("dragenter",this.NAME),this._dragEnterHandler.bind(this,t)),m.Z.on(e,(0,v.addNamespace)("dragover",this.NAME),this._dragOverHandler.bind(this,t)),m.Z.on(e,(0,v.addNamespace)("dragleave",this.NAME),this._dragLeaveHandler.bind(this,t)),m.Z.on(e,(0,v.addNamespace)("drop",this.NAME),this._dropHandler.bind(this,t)))}_applyInputAttributes(e){this._$fileInput.attr(e)}_useInputForDrop(){return this.option("nativeDropSupported")&&"useForm"===this.option("uploadMode")}_getDropZoneElement(e,t){let i=e?Array.from((0,c.Z)(this.option("dropZone"))):[this._$inputWrapper];return i=i.map((e=>(0,c.Z)(e).get(0))),i[i.indexOf(t.currentTarget)]}_dragEnterHandler(e,t){if(this.option("disabled"))return!1;this._useInputForDrop()||t.preventDefault();const i=this._getDropZoneElement(e,t);(0,_.$K)(i)&&this._shouldRaiseDragOver(t,i)&&(this._activeDropZone=i,this._tryToggleDropZoneActive(!0,e,t))}_shouldRaiseDragOver(e,t){return null===this._activeDropZone&&this.isMouseOverElement(e,t,!1)&&e.originalEvent.dataTransfer.types.find((e=>"Files"===e))}_dragOverHandler(e,t){if(this._useInputForDrop()||t.preventDefault(),t.originalEvent.dataTransfer.dropEffect="copy",!e){const e=this._getDropZoneElement(!1,t);this._shouldRaiseDragOver(t,e)&&this._dragEnterHandler(!1,t),this._shouldRaiseDragLeave(t,!1)&&this._dragLeaveHandler(!1,t)}}_dragLeaveHandler(e,t){this._useInputForDrop()||t.preventDefault(),this._shouldRaiseDragLeave(t,e)&&(this._tryToggleDropZoneActive(!1,e,t),this._activeDropZone=null)}_shouldRaiseDragLeave(e,t){return null!==this._activeDropZone&&!this.isMouseOverElement(e,this._activeDropZone,!t,-1)}_tryToggleDropZoneActive(e,t,i){const n=e?"addClass":"removeClass";this[e?"_dropZoneEnterAction":"_dropZoneLeaveAction"]({event:i,dropZoneElement:this._activeDropZone}),t||this.$element()[n]("dx-fileuploader-dragover")}_dropHandler(e,t){if(this._activeDropZone=null,e||this.$element().removeClass("dx-fileuploader-dragover"),this._useInputForDrop()||e&&this._isInteractionDisabled())return;t.preventDefault();const i=t.originalEvent.dataTransfer.files,n=this._getFiles(i);!this.option("multiple")&&n.length>1||0===n.length||(this._changeValue(n),"instantly"===this.option("uploadMode")&&this._uploadFiles())}_areAllFilesLoaded(){return this._files.every((e=>!e.isValid()||e._isError||e._isLoaded||e.isAborted))}_handleAllFilesUploaded(){this._recalculateProgress(),this._areAllFilesLoaded()&&this._filesUploadedAction()}_getAllowedFileTypes(e){return e.length?e.split(",").map((e=>e.trim())):[]}_isFileTypeAllowed(e,t){for(let i=0,n=t.length;i<n;i++){let n=t[i];if("."===n[0]){if(n=n.replace(".","\\."),e.name.match(new RegExp(`${n}$`,"i")))return!0}else if(n=n.replace(new RegExp("\\*","g"),""),e.type.match(new RegExp(n,"i")))return!0}return!1}_renderWrapper(){const e=(0,c.Z)("<div>").addClass("dx-fileuploader-wrapper").appendTo(this.$element()),t=(0,c.Z)("<div>").addClass("dx-fileuploader-container").appendTo(e);this._$content=(0,c.Z)("<div>").addClass("dx-fileuploader-content").appendTo(t)}_clean(){this._$fileInput.detach(),delete this._$filesContainer,this._detachSelectFileDialogHandler(this.option("dialogTrigger")),this._detachDragEventHandlers(this.option("dropZone")),this._files&&this._files.forEach((e=>{e.$file=null,e.$statusMessage=null})),super._clean()}abortUpload(e){if("useForm"!==this.option("uploadMode"))if((0,_.$K)(e)){const t=this._getFile(e);t&&this._preventFilesUploading([t])}else this._preventFilesUploading(this._files)}upload(e){if("useForm"!==this.option("uploadMode"))if((0,_.$K)(e)){const t=this._getFile(e);t&&So()&&this._uploadFile(t)}else this._uploadFiles()}_uploadFiles(){So()&&(0,j.each)(this._files,((e,t)=>this._uploadFile(t)))}_uploadFile(e){this._uploadStrategy.upload(e)}_updateProgressBar(e,t){e.progressBar&&e.progressBar.option({value:t.loaded,showStatus:!0}),this._progressAction({file:e.value,segmentSize:t.currentSegmentSize,bytesLoaded:t.loaded,bytesTotal:t.total,event:t.event,request:e.request})}_updateTotalProgress(e,t){let i=0;(0,_.$K)(e)&&(this._files.length>0&&this._areAllFilesLoaded()&&0===e&&0===t?i=this._getProgressValue(1):e&&(i=this._getProgressValue(t/e))),this.option("progress",i),this._setLoadedSize(t)}_getProgressValue(e){return Math.floor(100*e)}_initStatusMessage(e){e.$statusMessage.css("display","none")}_ensureCancelButtonInitialized(e){if(e.isInitialized)return;e.cancelButton.option("onClick",(()=>{this._preventFilesUploading([e]),this._removeFile(e)}));const t=()=>{setTimeout((()=>{e.cancelButton.option({visible:!1})}),400)};e.onLoad.add(t),e.onError.add(t)}_createProgressBar(e){return this._createComponent((0,c.Z)("<div>"),yo,{value:void 0,min:0,max:e,statusFormat:e=>`${this._getProgressValue(e)}%`,showStatus:!1,statusPosition:"right"})}_getTotalFilesSize(){return this._totalFilesSize||(this._totalFilesSize=0,(0,j.each)(this._files,((e,t)=>{this._totalFilesSize+=t.value.size}))),this._totalFilesSize}_getTotalLoadedFilesSize(){return this._totalLoadedFilesSize||(this._totalLoadedFilesSize=0,(0,j.each)(this._files,((e,t)=>{this._totalLoadedFilesSize+=t.loadedSize}))),this._totalLoadedFilesSize}_setLoadedSize(e){this._totalLoadedFilesSize=e}_recalculateProgress(){this._totalFilesSize=0,this._totalLoadedFilesSize=0,this._updateTotalProgress(this._getTotalFilesSize(),this._getTotalLoadedFilesSize())}isMouseOverElement(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(!t)return!1;const o=i?parseFloat(xo.getComputedStyle(t,":before").height):0,r=i?parseFloat(xo.getComputedStyle(t,":after").height):0,s=(0,oe.os)(t).left,a=(0,oe.os)(t).top+o,l=t.offsetWidth,c=t.offsetHeight-o-r,d=this._getEventX(e),h=this._getEventY(e);return d+n>=s&&d-n<s+l&&h+n>=a&&h-n<a+c}_getEventX(e){return(0,v.isTouchEvent)(e)?this._getTouchEventX(e):e.clientX+this._getDocumentScrollLeft()}_getEventY(e){return(0,v.isTouchEvent)(e)?this._getTouchEventY(e):e.clientY+this._getDocumentScrollTop()}_getTouchEventX(e){let t=null;return e.changedTouches.length>0?t=e.changedTouches:e.targetTouches.length>0&&(t=e.targetTouches),t?t[0].pageX:0}_getTouchEventY(e){let t=null;return e.changedTouches.length>0?t=e.changedTouches:e.targetTouches.length>0&&(t=e.targetTouches),t?t[0].pageY:0}_getDocumentScrollTop(){const e=Fe.Z.getDocument();return e.documentElement.scrollTop||e.body.scrollTop}_getDocumentScrollLeft(){const e=Fe.Z.getDocument();return e.documentElement.scrollLeft||e.body.scrollLeft}_updateReadOnlyState(){const e=this.option("readOnly");this._selectButton.option("disabled",e),this._files.forEach((t=>{var i;return null===(i=t.cancelButton)||void 0===i?void 0:i.option("disabled",e)})),this._updateInputLabelText(),this._attachDragEventHandlers(this._$inputWrapper)}_updateHoverState(){var e,t;const i=this.option("hoverStateEnabled");null===(e=this._selectButton)||void 0===e||e.option("hoverStateEnabled",i),null===(t=this._uploadButton)||void 0===t||t.option("hoverStateEnabled",i),this._files.forEach((e=>{var t,n;null===(t=e.uploadButton)||void 0===t||t.option("hoverStateEnabled",i),null===(n=e.cancelButton)||void 0===n||n.option("hoverStateEnabled",i)}))}_optionChanged(e){const{name:t,value:i,previousValue:n}=e;switch(t){case"height":case"width":this._updateFileNameMaxWidth(),super._optionChanged(e);break;case"value":!i.length&&this._$fileInput.val(""),this._preventRecreatingFiles||(this._createFiles(),this._renderFiles()),this._recalculateProgress(),super._optionChanged(e);break;case"name":case"hint":this._initFileInput(),super._optionChanged(e);break;case"accept":this._initFileInput();break;case"multiple":this._initFileInput(),e.value||this.clear();break;case"readOnly":this._updateReadOnlyState(),super._optionChanged(e);break;case"disabled":this._updateInputLabelText(),super._optionChanged(e);break;case"selectButtonText":this._selectButton.option("text",i);break;case"uploadButtonText":this._uploadButton&&this._uploadButton.option("text",i);break;case"_uploadButtonType":this._uploadButton&&this._uploadButton.option("type",i);break;case"_buttonStylingMode":this._files.forEach((e=>{var t,n;null===(t=e.uploadButton)||void 0===t||t.option("stylingMode",i),null===(n=e.cancelButton)||void 0===n||n.option("stylingMode",i)}));break;case"dialogTrigger":this._detachSelectFileDialogHandler(n),this._attachSelectFileDialogHandler(i);break;case"dropZone":this._detachDragEventHandlers(n),this._attachDragEventHandlers(i);break;case"maxFileSize":case"minFileSize":case"allowedFileExtensions":case"invalidFileExtensionMessage":case"invalidMaxFileSizeMessage":case"invalidMinFileSizeMessage":case"readyToUploadMessage":case"uploadedMessage":case"uploadFailedMessage":case"uploadAbortedMessage":case"nativeDropSupported":this._invalidate();break;case"labelText":this._updateInputLabelText();break;case"showFileList":this._preventRecreatingFiles||this._renderFiles();break;case"uploadFile":case"uploadChunk":case"chunkSize":this._setUploadStrategy();break;case"abortUpload":case"uploadUrl":case"progress":case"uploadMethod":case"uploadHeaders":case"uploadCustomData":case"extendSelection":break;case"hoverStateEnabled":this._updateHoverState(),super._optionChanged(e);break;case"allowCanceling":case"uploadMode":this.clear(),this._invalidate();break;case"onBeforeSend":this._createBeforeSendAction();break;case"onUploadStarted":this._createUploadStartedAction();break;case"onUploaded":this._createUploadedAction();break;case"onFilesUploaded":this._createFilesUploadedAction();break;case"onProgress":this._createProgressAction();break;case"onUploadError":this._createUploadErrorAction();break;case"onUploadAborted":this._createUploadAbortedAction();break;case"onDropZoneEnter":this._createDropZoneEnterAction();break;case"onDropZoneLeave":this._createDropZoneLeaveAction();break;case"useNativeInputClick":this._renderInput();break;case"useDragOver":this._attachDragEventHandlers(this._$inputWrapper);break;case"inputAttr":this._applyInputAttributes(this.option(t));break;default:super._optionChanged(e)}}_resetInputValue(e){("useForm"!==this.option("uploadMode")||e)&&(this._doPreventInputChange=!0,this._$fileInput.val(""),this._doPreventInputChange=!1)}clear(){this.option("value",[])}}class ko{constructor(e,t){this.file=e,this.chunkSize=t,this.index=0}read(){if(!this.file)return null;const e=this.createBlobResult(this.file,this.index,this.chunkSize);return e.isCompleted&&(this.file=null),this.index++,e}createBlobResult(e,t,i){const n=t*i;return{blob:this.sliceFile(e,n,i),index:t,isCompleted:n+i>=e.size}}sliceFile(e,t,i){return e.slice?e.slice(t,t+i):e.webkitSlice?e.webkitSlice(t,t+i):null}}class Eo{constructor(e){this.fileUploader=e}upload(e){e.isInitialized&&e.isAborted&&this.fileUploader._resetFileState(e),e.isValid()&&!e.uploadStarted&&(this._prepareFileBeforeUpload(e),this._uploadCore(e))}abortUpload(e){if(!(e._isError||e._isLoaded||e.isAborted)&&e.uploadStarted&&(e.isAborted=!0,e.request&&e.request.abort(),this._isCustomCallback("abortUpload"))){const t=this.fileUploader.option("abortUpload"),i=this._createUploadArgument(e);let n=null;try{const o=t(e.value,i);n=(0,p.p4)(o)}catch(e){n=(0,p.BH)().reject(e).promise()}n.done((()=>e.onAbort.fire())).fail((t=>this._handleFileError(e,t)))}}_beforeSend(e,t){const i=this._createUploadArgument(t);this.fileUploader._beforeSendAction({request:e,file:t.value,uploadInfo:i}),t.request=e}_createUploadArgument(e){}_uploadCore(e){}_isCustomCallback(e){const t=this.fileUploader.option(e);return t&&(0,_.mf)(t)}_handleProgress(e,t){e._isError||(e._isProgressStarted=!0,this._handleProgressCore(e,t))}_handleProgressCore(e,t){}_handleFileError(e,t){e._isError=!0,e.onError.fire(t)}_prepareFileBeforeUpload(e){var t;e.$file&&(null===(t=e.progressBar)||void 0===t||t.dispose(),this.fileUploader._createFileProgressBar(e)),e.isInitialized||(e.onLoadStart.add(this._onUploadStarted.bind(this,e)),e.onLoad.add(this._onLoadedHandler.bind(this,e)),e.onError.add(this._onErrorHandler.bind(this,e)),e.onAbort.add(this._onAbortHandler.bind(this,e)),e.onProgress.add(this._onProgressHandler.bind(this,e)),e.isInitialized=!0)}_shouldHandleError(e,t){return(this._isStatusError(t.status)||!e._isProgressStarted)&&!e.isAborted}_isStatusError(e){return e>=400&&e<500||e>=500&&e<600}_onUploadStarted(e,t){e.uploadStarted=!0,this.fileUploader._uploadStartedAction({file:e.value,event:t,request:e.request})}_onAbortHandler(e,t){const i={file:e.value,event:t,request:e.request,message:this.fileUploader._getUploadAbortedStatusMessage()};this.fileUploader._uploadAbortedAction(i),this.fileUploader._setStatusMessage(e,i.message),this.fileUploader._handleAllFilesUploaded()}_onErrorHandler(e,t){const i={file:e.value,event:void 0,request:e.request,error:t,message:this.fileUploader.option("uploadFailedMessage")};this.fileUploader._uploadErrorAction(i),this.fileUploader._setStatusMessage(e,i.message),this.fileUploader._handleAllFilesUploaded()}_onLoadedHandler(e,t){const i={file:e.value,event:t,request:e.request,message:this.fileUploader.option("uploadedMessage")};e._isLoaded=!0,this.fileUploader._uploadedAction(i),this.fileUploader._setStatusMessage(e,i.message),this.fileUploader._handleAllFilesUploaded()}_onProgressHandler(e,t){if(e){const i=this.fileUploader._getTotalFilesSize(),n=this.fileUploader._getTotalLoadedFilesSize(),o=Math.min(t.loaded,e.value.size),r=o-e.loadedSize;e.loadedSize=o,this.fileUploader._updateTotalProgress(i,n+r),this.fileUploader._updateProgressBar(e,this._getLoadedData(o,t.total,r,t))}}_getLoadedData(e,t,i,n){return{loaded:e,total:t,currentSegmentSize:i}}_extendFormData(e){const t=this.fileUploader.option("uploadCustomData");for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(0,_.$K)(t[i])&&e.append(i,t[i])}}class Oo extends Eo{constructor(e){super(e),this.chunkSize=this.fileUploader.option("chunkSize")}_uploadCore(e){const t=e.value,i={name:t.name,loadedBytes:0,type:t.type,blobReader:new ko(t,this.chunkSize),guid:new V.Z,fileSize:t.size,count:this._getFileChunksCount(t),customData:{}};e.chunksData=i,this._sendChunk(e,i)}_getFileChunksCount(e){return 0===e.size?1:Math.ceil(e.size/this.chunkSize)}_sendChunk(e,t){const i=t.blobReader.read();t.currentChunk=i,i&&this._sendChunkCore(e,t,i).done((()=>{e.isAborted||(t.loadedBytes+=i.blob.size,e.onProgress.fire({loaded:t.loadedBytes,total:e.value.size}),i.isCompleted&&e.onLoad.fire(),setTimeout((()=>this._sendChunk(e,t))))})).fail((t=>{this._shouldHandleError(e,t)&&this._handleFileError(e,t)}))}_sendChunkCore(e,t,i){}_tryRaiseStartLoad(e){e.isStartLoad||(e.isStartLoad=!0,e.onLoadStart.fire())}_getEvent(e){return null}_createUploadArgument(e){return this._createChunksInfo(e.chunksData)}_createChunksInfo(e){return{bytesUploaded:e.loadedBytes,chunkCount:e.count,customData:e.customData,chunkBlob:e.currentChunk.blob,chunkIndex:e.currentChunk.index}}}class To extends Oo{_sendChunkCore(e,t,i){return Ze.default.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:t=>this._beforeSend(t,e),upload:{onprogress:t=>this._handleProgress(e,t),onloadstart:()=>this._tryRaiseStartLoad(e),onabort:()=>e.onAbort.fire()},data:this._createFormData({fileName:t.name,blobName:this.fileUploader.option("name"),blob:i.blob,index:i.index,count:t.count,type:t.type,guid:t.guid,size:t.fileSize})})}_createFormData(e){const t=new xo.FormData;return t.append(e.blobName,e.blob),t.append("chunkMetadata",JSON.stringify({FileName:e.fileName,Index:e.index,TotalCount:e.count,FileSize:e.size,FileType:e.type,FileGuid:e.guid})),this._extendFormData(t),t}}class Do extends Oo{_sendChunkCore(e,t){this._tryRaiseStartLoad(e);const i=this._createChunksInfo(t),n=this.fileUploader.option("uploadChunk");try{const t=n(e.value,i);return(0,p.p4)(t)}catch(e){return(0,p.BH)().reject(e).promise()}}_shouldHandleError(e,t){return!0}}class Bo extends Eo{_uploadCore(e){e.loadedSize=0,this._uploadFile(e).done((()=>{e.isAborted||e.onLoad.fire()})).fail((t=>{this._shouldHandleError(e,t)&&this._handleFileError(e,t)}))}_uploadFile(e){}_handleProgressCore(e,t){e.onProgress.fire(t)}_getLoadedData(e,t,i,n){const o=super._getLoadedData(e,t,i,n);return o.event=n,o}}class Ao extends Bo{_uploadFile(e){return Ze.default.sendRequest({url:this.fileUploader.option("uploadUrl"),method:this.fileUploader.option("uploadMethod"),headers:this.fileUploader.option("uploadHeaders"),beforeSend:t=>this._beforeSend(t,e),upload:{onprogress:t=>this._handleProgress(e,t),onloadstart:()=>e.onLoadStart.fire(),onabort:()=>e.onAbort.fire()},data:this._createFormData(this.fileUploader.option("name"),e.value)})}_createFormData(e,t){const i=new xo.FormData;return i.append(e,t,t.name),this._extendFormData(i),i}}class Po extends Bo{_uploadFile(e){e.onLoadStart.fire();const t=t=>{const i={loaded:t,total:e.value.size};this._handleProgress(e,i)},i=this.fileUploader.option("uploadFile");try{const n=i(e.value,t);return(0,p.p4)(n)}catch(e){return(0,p.BH)().reject(e).promise()}}_shouldHandleError(e,t){return!0}}(0,r.default)("dxFileUploader",Io);const Mo=Io;var Ro=i(8692),$o=i(5924);class No extends Ro.S{constructor(e,t,i,n){super(),this._render=e,this._fields=t,this._fieldsMap=n||{},this._watchMethod=i}_renderCore(e){const t=(0,c.Z)(e.container),i=function(e,t,i,n,o){let r;const s=((e,t,i)=>t((()=>e),i))(e,t,(function(e){r&&r(),(0,_.pt)(e)?o(e):r=function(e,t,i,n,o){const r={},s=i.slice(),a=i.map((function(i){const a=n[i];return t(a?()=>a(e):()=>e[i],(function(e){if(r[i]=e,s.length){const e=s.indexOf(i);e>=0&&s.splice(e,1)}s.length||o(r)}))}));return function(){a.forEach((e=>e()))}}(e,t,i,n,o)}));return function(){r&&r(),s&&s()}}(e.model,this._watchMethod,this._fields,this._fieldsMap,(i=>{t.empty(),this._render(t,i,e.model)}));return m.Z.on(t,$o.x,i),t.contents()}}var Vo=i(5206),Fo=i(9659),Zo=i(3250);class Ho{constructor(e){this.options=e,this._setOption("disabledItemKeys",[]),this._clearItemKeys()}_clearItemKeys(){this._setOption("addedItemKeys",[]),this._setOption("removedItemKeys",[]),this._setOption("removedItems",[]),this._setOption("addedItems",[])}validate(){}_setOption(e,t){this.options[e]=t}onSelectionChanged(){const{addedItemKeys:e}=this.options,{removedItemKeys:t}=this.options,{addedItems:i}=this.options,{removedItems:n}=this.options,{selectedItems:o}=this.options,{selectedItemKeys:r}=this.options,s=this.options.onSelectionChanged||u.noop;this._clearItemKeys(),s({selectedItems:o,selectedItemKeys:r,addedItemKeys:e,removedItemKeys:t,addedItems:i,removedItems:n})}equalKeys(e,t){return this.options.equalByReference&&(0,_.Kn)(e)&&(0,_.Kn)(t)?e===t:(0,u.equalByValue)(e,t)}getSelectableItems(e){return e.filter((e=>!(null!=e&&e.disabled)))}_clearSelection(e,t,i,n){return e=e||[],e=Array.isArray(e)?e:[e],this.validate(),this.selectedItemKeys(e,t,i,n)}_removeTemplateProperty(e){return Array.isArray(e)?e.map((e=>this._removeTemplateProperty(e))):((0,_.Kn)(e)&&delete e.template,e)}_loadFilteredData(e,t,i,n){const o=encodeURI(JSON.stringify(this._removeTemplateProperty(e))).length,r=this.options.maxFilterLengthInRequest&&o>this.options.maxFilterLengthInRequest,s=(0,p.BH)(),a={filter:r?void 0:e,select:r?this.options.dataFields():i||this.options.dataFields()};return e&&0===e.length?s.resolve([]):this.options.load(a).done((i=>{let o=(0,_.PO)(i)?i.data:i;t&&!n?o=o.filter(t):r&&(o=(0,Zo.Z)(o).filter(e).toArray()),s.resolve(o)})).fail(s.reject.bind(s)),s}updateSelectedItemKeyHash(e){for(let t=0;t<e.length;t++){const i=(0,u.getKeyHash)(e[t]);(0,_.Kn)(i)||(this.options.keyHashIndices[i]=this.options.keyHashIndices[i]||[],this.options.keyHashIndices[i].push(t))}}_isAnyItemSelected(e){for(let t=0;t<e.length;t++)if(this.options.isItemSelected(e[t]))return;return!1}_getFullSelectAllState(){const e=this.options.plainItems(),t=this.options.filter();let i=this.options.ignoreDisabledItems?this.options.selectedItems:this.options.selectedItems.filter((e=>!(null!=e&&e.disabled)));t&&(i=(0,Zo.Z)(i).filter(t).toArray());const n=i.length,o=e.length-this.getSelectableItems(e).length;return n?n>=this.options.totalCount()-o||void 0:this._isAnyItemSelected(e)}_getVisibleSelectAllState(){const e=this.getSelectableItems(this.options.plainItems());let t=!1,i=!1;for(let n=0;n<e.length;n++){const o=e[n],r=this.options.getItemData(o),s=this.options.keyOf(r);this.options.isSelectableItem(o)&&(this.isItemKeySelected(s)?t=!0:i=!0)}return!!t&&(!i||void 0)}}class Lo extends Ho{getSelectedItems(){return this._loadFilteredData(this.options.selectionFilter)}getSelectedItemKeys(){const e=(0,p.BH)(),t=this,i=this.options.key(),n=(0,_.HD)(i)?[i]:i;return this._loadFilteredData(this.options.selectionFilter,null,n).done((i=>{const n=i.map((e=>t.options.keyOf(e)));e.resolve(n)})).fail(e.reject),e.promise()}selectedItemKeys(e,t,i,n){if(n){const e=this.options.filter();!e||JSON.stringify(e)===JSON.stringify(this.options.selectionFilter)&&i?this._setOption("selectionFilter",i?[]:null):this._addSelectionFilter(i,e,n)}else{t||this._setOption("selectionFilter",[]);for(let o=0;o<e.length;o++)i?this.removeSelectedItem(e[o]):this.addSelectedItem(e[o],n,!t)}return this.onSelectionChanged(),(0,p.BH)().resolve()}setSelectedItems(e){this._setOption("selectionFilter",null);for(let t=0;t<e.length;t++)this.addSelectedItem(e[t])}isItemDataSelected(e){return this.isItemKeySelected(e)}isItemKeySelected(e){const{selectionFilter:t,sensitivity:i}=this.options;if(!t)return!0;const n={langParams:{collatorOptions:{sensitivity:i}}};return!!(0,Zo.Z)([e],n).filter(t).toArray().length}_getKeyExpr(){const e=this.options.key();return Array.isArray(e)&&1===e.length?e[0]:e}_normalizeKey(e){const t=this.options.key();return Array.isArray(t)&&1===t.length?e[t[0]]:e}_getFilterByKey(e){const t=this._getKeyExpr();let i=[t,"=",this._normalizeKey(e)];if(Array.isArray(t)){i=[];for(let n=0;n<t.length;n++)i.push([t[n],"=",e[t[n]]]),n!==t.length-1&&i.push("and")}return i}addSelectedItem(e,t,i){const n=this._getFilterByKey(e);this._addSelectionFilter(!1,n,t,i)}removeSelectedItem(e){const t=this._getFilterByKey(e);this._addSelectionFilter(!0,t)}validate(){const{key:e}=this.options;if(e&&void 0===e())throw ge.Z.Error("E1042","Deferred selection")}_findSubFilter(e,t){if(!e)return-1;const i=JSON.stringify(t);for(let t=0;t<e.length;t++){const n=e[t];if(n&&JSON.stringify(n)===i)return t}return-1}_isLastSubFilter(e,t){return!(!e||!t||this._findSubFilter(e,t)!==e.length-1&&0!==this._findSubFilter([e],t))}_addFilterOperator(e,t){return e.length>1&&(0,_.HD)(e[1])&&e[1]!==t&&(e=[e]),e.length&&e.push(t),e}_denormalizeFilter(e){return e&&(0,_.HD)(e[0])&&(e=[e]),e}_isOnlyNegativeFiltersLeft(e){return e.every(((e,t)=>t%2==0?Array.isArray(e)&&"!"===e[0]:"and"===e))}_addSelectionFilter(e,t,i,n){var o;const r=this,s=e?["!",t]:t,a=e?"and":"or";let l=!0,c=r.options.selectionFilter||[];if(c=r._denormalizeFilter(c),null!==(o=c)&&void 0!==o&&o.length&&!n){const n=r._removeSameFilter(c,t,e,i),o=r._removeSameFilter(c,t,!e);e&&(-1!==n||-1!==o)&&this._isOnlyNegativeFiltersLeft(c)&&(c=[]);const s=this._isKeyFilter(t)&&this._hasKeyFiltersOnlyStartingFromIndex(c,o);l=t.length&&!s}l&&(c=r._addFilterOperator(c,a),c.push(s)),c=r._normalizeFilter(c),r._setOption("selectionFilter",e||c.length?c:null)}_normalizeFilter(e){return e&&1===e.length&&(e=e[0]),e}_removeFilterByIndex(e,t,i){const n=e[1];t>0?e.splice(t-1,2):e.splice(t,2),i&&"and"===n&&e.splice(0,e.length)}_isSimpleKeyFilter(e,t){return 3===e.length&&e[0]===t&&"="===e[1]}_isKeyFilter(e){if(2===e.length&&"!"===e[0])return this._isKeyFilter(e[1]);const t=this._getKeyExpr();if(Array.isArray(t)){if(e.length!==2*t.length-1)return!1;for(let i=0;i<t.length;i++){if(i>0&&"and"!==e[2*i-1])return!1;if(!this._isSimpleKeyFilter(e[2*i],t[i]))return!1}return!0}return this._isSimpleKeyFilter(e,t)}_hasKeyFiltersOnlyStartingFromIndex(e,t){if(t>=0){for(let i=t;i<e.length;i++)if("string"!=typeof e[i]&&!this._isKeyFilter(e[i]))return!1;return!0}return!1}_removeSameFilter(e,t,i,n){if(t=i?["!",t]:t,JSON.stringify(t)===JSON.stringify(e))return e.splice(0,e.length),0;const o=this._findSubFilter(e,t);if(o>=0)return this._removeFilterByIndex(e,o,n),o;for(let i=0;i<e.length;i++)if(Array.isArray(e[i])&&e[i].length>2){const o=this._removeSameFilter(e[i],t,!1,n);if(o>=0)return e[i].length?1===e[i].length&&(e[i]=e[i][0]):this._removeFilterByIndex(e,i,n),o}return-1}getSelectAllState(){const e=this.options.filter();let{selectionFilter:t}=this.options;return!t||!!t.length&&(e&&e.length?(t=this._denormalizeFilter(t),!!this._isLastSubFilter(t,e)||!this._isLastSubFilter(t,["!",e])&&void 0):void 0)}loadSelectedItemsWithFilter(){const e=this.options.filter(),{selectionFilter:t}=this.options,i=e?[e,"and",t]:t;return this._loadFilteredData(i)}}var jo=i(555);const zo=function(e,t){const i=t(e);if((0,_.Kn)(i))try{return JSON.stringify(i)}catch(e){return i}return i},Wo=function(e,t,i,n){return t[i[zo(e,n)]]},Ko=function(e,t){let i;this.getLocalFilter=function(e,t,i,n){return t=void 0===t?u.equalByValue:t,r.bind(this,t,e,i,n)},this.getExpr=function(i){if(!i)return;let n;return e.forEach((function(e,o){let r;n=n||[],o>0&&n.push(t?"and":"or"),r=(0,_.HD)(i)?s(i,e):function(e,i){const n=[];for(let o=0,r=e.length;o<r;o++){const r=e[o],a=(0,hn.vb)(r),l=s(r,i&&a(i));if(!l)break;o>0&&n.push(t?"or":"and"),n.push(l)}return n}(i,e),n.push(r)})),n&&1===n.length&&(n=n[0]),n},this.getCombinedFilter=function(e,i){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=this.getExpr(e);let r=o;return(n||t)&&i&&(o?(r=[],r.push(o),r.push(i)):r=i),r};const n=function(t,n){if(!i){i={};const r=o(e,t,n);for(let e=0;e<r.length;e++)i[(0,u.getKeyHash)(r[e])]=!0}return i},o=function(e,t,i){return Array.isArray(i)?e.map((e=>t(e))):e};function r(i,o,r,s,a){const l=o(a);let c,d;if(!r&&(c=(0,u.getKeyHash)(l),!(0,_.Kn)(c)))return n(o,s)[c]?!t:!!t;for(d=0;d<e.length;d++)if(i(e[d],l))return!t;return!!t}function s(e,i){if(void 0!==i)return[e,t?"<>":"=",i]}};class qo extends Ho{constructor(e){super(e),this._initSelectedItemKeyHash()}_initSelectedItemKeyHash(){this._setOption("keyHashIndices",this.options.equalByReference?null:{})}getSelectedItemKeys(){return this.options.selectedItemKeys.slice(0)}getSelectedItems(){return this.options.selectedItems.slice(0)}_preserveSelectionUpdate(e,t){const{keyOf:i}=this.options;let n,o,r;if(!i)return;const s=t&&e.length>1&&!this.options.equalByReference;for(s&&(n={}),r=0;r<e.length;r++){const s=e[r],a=i(s);t?(o=this.removeSelectedItem(a,n,null==s?void 0:s.disabled),n&&o>=0&&(n[o]=!0)):this.addSelectedItem(a,s)}s&&this._batchRemoveSelectedItems(n)}_batchRemoveSelectedItems(e){const t=this.options.selectedItemKeys.slice(0),i=this.options.selectedItems.slice(0);this.options.selectedItemKeys.length=0,this.options.selectedItems.length=0;for(let n=0;n<t.length;n++)e[n]||(this.options.selectedItemKeys.push(t[n]),this.options.selectedItems.push(i[n]));this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_loadSelectedItemsCore(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=(0,p.BH)();const s=this.options.key();if(!e.length&&!i)return r.resolve([]),r;if(i&&t&&!n)return r.resolve(this.getSelectedItems()),r;const a=new Ko(e,i),l=a.getCombinedFilter(s,n,o);let c=[];if(t){const{selectedItems:t}=this.options;c=l&&e.length!==t.length?(0,Zo.Z)(t).filter(l).toArray():t.slice(0)}let d=c.length?c:this.options.plainItems(!0).filter(this.options.isSelectableItem).map(this.options.getItemData);const h=a.getLocalFilter(this.options.keyOf,this.equalKeys.bind(this),this.options.equalByReference,s);return d=d.filter(h),c.length||!i&&d.length===e.length?r.resolve(d):r=this._loadFilteredData(l,h,null,i),r}_replaceSelectionUpdate(e){const t=[],{keyOf:i}=this.options;if(i){for(let n=0;n<e.length;n++){const o=i(e[n]);t.push(o)}this.setSelectedItems(t,e)}}_warnOnIncorrectKeys(e){const{allowNullValue:t}=this.options;for(let i=0;i<e.length;i++){const n=e[i];t&&null===n||this.isItemKeySelected(n)||ge.Z.log("W1002",n)}}_isMultiSelectEnabled(){const{mode:e}=this.options;return"all"===e||"multiple"===e}_requestInProgress(){var e;return"pending"===(null===(e=this._lastLoadDeferred)||void 0===e?void 0:e.state())}_concatRequestsItems(e,t,i,n){let o;const r=t?e:[];return o=n||(0,jo.R1)(e,this.options.selectedItemKeys),{addedItems:i.added.concat(o),removedItems:i.removed.concat(r),keys:e}}_collectLastRequestData(e,t,i,n){const o=t&&i,r={added:[],removed:[]},s=this._isMultiSelectEnabled();let a=s?this._lastRequestData:{};return s&&(this._shouldMergeWithLastRequest&&(o?(this._lastLoadDeferred.reject(),a={}):function(e,t){if(e.length!==t.length)return!1;for(let i=0;i<t.length;i++)if(e[i]!==t[i])return!1;return!0}(e,this.options.selectedItemKeys)||(r.added=a.addedItems,r.removed=a.removedItems,t||this._lastLoadDeferred.reject())),a=this._concatRequestsItems(e,t,r,this._shouldMergeWithLastRequest?void 0:n)),a}_updateKeysByLastRequestData(e,t,i){let n=e;var o,r;return this._isMultiSelectEnabled()&&this._shouldMergeWithLastRequest&&!t&&!i&&(n=(0,jo.R1)(e.concat(null===(o=this._lastRequestData)||void 0===o?void 0:o.addedItems),null===(r=this._lastRequestData)||void 0===r?void 0:r.removedItems),n=(0,jo.rZ)(n)),n}_loadSelectedItems(e,t,i,n){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const r=this,s=(0,p.BH)(),a=r.options.filter();return this._shouldMergeWithLastRequest=this._requestInProgress(),this._lastRequestData=this._collectLastRequestData(e,t,i,n),(0,p.gx)(r._lastLoadDeferred).always((()=>{const n=r._updateKeysByLastRequestData(e,t,i);r._shouldMergeWithLastRequest=!1,r._loadSelectedItemsCore(n,t,i,a,o).done(s.resolve).fail(s.reject)})),r._lastLoadDeferred=s,s}selectedItemKeys(e,t,i,n,o){let r=arguments.length>5&&void 0!==arguments[5]&&arguments[5];const s=this,a=s._loadSelectedItems(e,i,n,o,r);return a.done((e=>{t?s._preserveSelectionUpdate(e,i):s._replaceSelectionUpdate(e),s.onSelectionChanged()})),a}addSelectedItem(e,t){if((0,_.$K)(t)&&!this.options.ignoreDisabledItems&&t.disabled)return void(-1===this.options.disabledItemKeys.indexOf(e)&&this.options.disabledItemKeys.push(e));const i=this._getKeyHash(e);-1===this._indexOfSelectedItemKey(i)&&(!(0,_.Kn)(i)&&this.options.keyHashIndices&&(this.options.keyHashIndices[i]=[this.options.selectedItemKeys.length]),this.options.selectedItemKeys.push(e),this.options.addedItemKeys.push(e),this.options.addedItems.push(t),this.options.selectedItems.push(t))}_getSelectedIndexByKey(e,t){const{selectedItemKeys:i}=this.options;for(let n=0;n<i.length;n++)if((!t||!t[n])&&this.equalKeys(i[n],e))return n;return-1}_getSelectedIndexByHash(e,t){let i=this.options.keyHashIndices[e];return i&&i.length>1&&t&&(i=i.filter((e=>!t[e]))),i&&i[0]>=0?i[0]:-1}_indexOfSelectedItemKey(e,t){let i;return i=this.options.equalByReference?this.options.selectedItemKeys.indexOf(e):(0,_.Kn)(e)?this._getSelectedIndexByKey(e,t):this._getSelectedIndexByHash(e,t),i}_shiftSelectedKeyIndices(e){for(let t=e;t<this.options.selectedItemKeys.length;t++){const i=this.options.selectedItemKeys[t],n=(0,u.getKeyHash)(i),o=this.options.keyHashIndices[n];if(o)for(let t=0;t<o.length;t++)o[t]>e&&o[t]--}}removeSelectedItem(e,t,i){if(!this.options.ignoreDisabledItems&&i)return;const n=this._getKeyHash(e),o=!!t,r=this._indexOfSelectedItemKey(n,t);if(r<0)return r;if(this.options.removedItemKeys.push(e),this.options.removedItems.push(this.options.selectedItems[r]),o)return r;if(this.options.selectedItemKeys.splice(r,1),this.options.selectedItems.splice(r,1),(0,_.Kn)(n)||!this.options.keyHashIndices)return r;const s=this.options.keyHashIndices[n];return s?(s.shift(),s.length||delete this.options.keyHashIndices[n],this._shiftSelectedKeyIndices(r),r):r}_updateAddedItemKeys(e,t){for(let i=0;i<e.length;i++)this.isItemKeySelected(e[i])||(this.options.addedItemKeys.push(e[i]),this.options.addedItems.push(t[i]))}_updateRemovedItemKeys(e,t,i){for(let e=0;e<t.length;e++)this.isItemKeySelected(t[e])||(this.options.removedItemKeys.push(t[e]),this.options.removedItems.push(i[e]))}_isItemSelectionInProgress(e,t){return!!(t&&this._lastRequestData&&this._requestInProgress())&&(this._lastRequestData.addedItems??[]).includes(e)}_getKeyHash(e){return this.options.equalByReference?e:(0,u.getKeyHash)(e)}setSelectedItems(e,t){this._updateAddedItemKeys(e,t);const i=this.options.selectedItemKeys,n=this.options.selectedItems;this.options.equalByReference||(this._initSelectedItemKeyHash(),this.updateSelectedItemKeyHash(e)),this._setOption("selectedItemKeys",e),this._setOption("selectedItems",t),this._updateRemovedItemKeys(e,i,n)}isItemDataSelected(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i=this.options.keyOf(e);return this.isItemKeySelected(i,t)}isItemKeySelected(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this._isItemSelectionInProgress(e,t.checkPending);if(!i){const t=this._getKeyHash(e);i=-1!==this._indexOfSelectedItemKey(t)}return i}getSelectAllState(e){return e?this._getVisibleSelectAllState():this._getFullSelectAllState()}loadSelectedItemsWithFilter(){const e=this.options.key(),t=this.getSelectedItemKeys(),i=this.options.filter();if(!t.length)return(0,p.BH)().resolve([]);const n=new Ko(t).getCombinedFilter(e,i,!0);return this._loadFilteredData(n)}}class Uo{constructor(e){this.options=(0,f.l)(this._getDefaultOptions(),e,{selectedItemKeys:e.selectedKeys||[]}),this._selectionStrategy=this.options.deferred?new Lo(this.options):new qo(this.options),this._focusedItemIndex=-1,this.options.equalByReference||this._selectionStrategy.updateSelectedItemKeyHash(this.options.selectedItemKeys)}_getDefaultOptions(){return{allowNullValue:!1,deferred:!1,equalByReference:!1,mode:"multiple",selectedItems:[],selectionFilter:[],maxFilterLengthInRequest:0,onSelectionChanged:u.noop,key:u.noop,keyOf:e=>e,load:()=>(0,p.BH)().resolve([]),totalCount:()=>-1,isSelectableItem:()=>!0,isItemSelected:()=>!1,getItemData:e=>e,dataFields:u.noop,filter:u.noop}}validate(){this._selectionStrategy.validate()}getSelectedItemKeys(){return this._selectionStrategy.getSelectedItemKeys()}getSelectedItems(){return this._selectionStrategy.getSelectedItems()}selectionFilter(e){if(void 0===e)return this.options.selectionFilter;const t=this.options.selectionFilter!==e&&JSON.stringify(this.options.selectionFilter)!==JSON.stringify(e);this.options.selectionFilter=e,t&&this.onSelectionChanged()}setSelection(e,t){return this.selectedItemKeys(e,!1,!1,!1,t)}select(e){return this.selectedItemKeys(e,!0)}deselect(e){return this.selectedItemKeys(e,!0,!0)}selectedItemKeys(e,t,i,n,o){return e=e??[],e=Array.isArray(e)?e:[e],this.validate(),this._selectionStrategy.selectedItemKeys(e,t,i,n,o)}clearSelection(){return this.selectedItemKeys([])}_addSelectedItem(e,t){this._selectionStrategy.addSelectedItem(t,e)}_removeSelectedItem(e){this._selectionStrategy.removeSelectedItem(e)}_setSelectedItems(e,t){this._selectionStrategy.setSelectedItems(e,t)}onSelectionChanged(){this._selectionStrategy.onSelectionChanged()}changeItemSelection(e,t,i){var n,o;let r;const s=this.options.plainItems(),a=s[e];let l;const{isVirtualPaging:c}=this.options,d=null===(n=(o=this.options).allowLoadByRange)||void 0===n?void 0:n.call(o),{alwaysSelectByShift:h}=this.options;let u,f=!1,m=!1;const g=e=>e>=0&&!s.filter((t=>t.loadIndex===e)).length;if(c&&(0,_.$K)(a)&&(d&&(u=a.loadIndex-e,e=a.loadIndex),f=g(this._focusedItemIndex),(0,_.$K)(this._shiftFocusedItemIndex)&&(m=g(this._shiftFocusedItemIndex))),!this.isSelectable()||!this.isDataItem(a))return!1;const v=this.options.getItemData(a),b=this.options.keyOf(v);let y=(t=t||{}).shift;if(!1===h&&y&&(y=!1!==d||!f&&!m),y&&"multiple"===this.options.mode&&this._focusedItemIndex>=0)d&&(f||m)?(r=e!==this._shiftFocusedItemIndex||this._focusedItemIndex!==this._shiftFocusedItemIndex,r&&(l=this.changeItemSelectionWhenShiftKeyInVirtualPaging(e))):r=this.changeItemSelectionWhenShiftKeyPressed(e,s,u);else if(t.control){if(this._resetItemSelectionWhenShiftKeyPressed(),!i){const e=this._selectionStrategy.isItemDataSelected(v);"single"===this.options.mode&&this.clearSelectedItems(),e?this._removeSelectedItem(b):this._addSelectedItem(v,b)}r=!0}else{this._resetItemSelectionWhenShiftKeyPressed();const e=this._selectionStrategy.equalKeys(this.options.selectedItemKeys[0],b);1===this.options.selectedItemKeys.length&&e||(this._setSelectedItems([b],[v]),r=!0)}return r?((0,p.gx)(l).done((()=>{this._focusedItemIndex=e,!i&&this.onSelectionChanged()})),!0):void 0}isDataItem(e){return this.options.isSelectableItem(e)}isSelectable(){return"single"===this.options.mode||"multiple"===this.options.mode}isItemDataSelected(e){return this._selectionStrategy.isItemDataSelected(e,{checkPending:!0})}isItemSelected(e,t){return this._selectionStrategy.isItemKeySelected(e,t)}_resetItemSelectionWhenShiftKeyPressed(){delete this._shiftFocusedItemIndex}_resetFocusedItemIndex(){this._focusedItemIndex=-1}changeItemSelectionWhenShiftKeyInVirtualPaging(e){const t=this.options.getLoadOptions(e,this._focusedItemIndex,this._shiftFocusedItemIndex),i=(0,p.BH)(),n=t.skip;return this.options.load(t).done((t=>{this.changeItemSelectionWhenShiftKeyPressed(e,t,n),i.resolve()})),i.promise()}changeItemSelectionWhenShiftKeyPressed(e,t,i){let n,o=!1;const r=(0,_.$K)(i);let s=r?this._focusedItemIndex-i:this._focusedItemIndex;const{keyOf:a}=this.options,l=t[s],c=this.options.getItemData(l),d=a(c),h=l&&this.isItemDataSelected(c);let u,p,f,m;if((0,_.$K)(this._shiftFocusedItemIndex)||(this._shiftFocusedItemIndex=this._focusedItemIndex),this._shiftFocusedItemIndex!==this._focusedItemIndex)for(n=this._focusedItemIndex<this._shiftFocusedItemIndex?1:-1,f=r?this._focusedItemIndex-i:this._focusedItemIndex,m=r?this._shiftFocusedItemIndex-i:this._shiftFocusedItemIndex,s=f;s!==m;s+=n)(r||this.isDataItem(t[s]))&&(p=a(this.options.getItemData(t[s])),this._removeSelectedItem(p),o=!0);if(e!==this._shiftFocusedItemIndex)for(n=e<this._shiftFocusedItemIndex?1:-1,f=r?e-i:e,m=r?this._shiftFocusedItemIndex-i:this._shiftFocusedItemIndex,s=f;s!==m;s+=n)(r||this.isDataItem(t[s]))&&(u=this.options.getItemData(t[s]),p=a(u),this._addSelectedItem(u,p),o=!0);return!r&&!this.isDataItem(l)||h||(this._addSelectedItem(c,d),o=!0),o}clearSelectedItems(){this._setSelectedItems([],[])}selectAll(e){return this._resetFocusedItemIndex(),e?this._onePageSelectAll(!1):this.selectedItemKeys([],!0,!1,!0)}deselectAll(e){return this._resetFocusedItemIndex(),e?this._onePageSelectAll(!0):this.selectedItemKeys([],!0,!0,!0)}_onePageSelectAll(e){const t=this._selectionStrategy.getSelectableItems(this.options.plainItems());for(let i=0;i<t.length;i++){const n=t[i];if(this.isDataItem(n)){const t=this.options.getItemData(n),i=this.options.keyOf(t),o=this.isItemSelected(i);o||e||this._addSelectedItem(t,i),o&&e&&this._removeSelectedItem(i)}}return this.onSelectionChanged(),(0,p.BH)().resolve()}getSelectAllState(e){return this._selectionStrategy.getSelectAllState(e)}loadSelectedItemsWithFilter(){return this._selectionStrategy.loadSelectedItemsWithFilter()}}var Go=i(7331),Yo=i(8805),Qo=i(660),Xo=i(5971),Jo=i(8240),er=i(4321);const tr=Math.abs,ir=er.Z.inherit({start:function(e){this._startEventData=(0,v.eventData)(e),this._startTimer(e)},_startTimer:function(e){const t="timeout"in this?this.timeout:750;this._holdTimer=setTimeout(function(){this._requestAccept(e),this._fireEvent("dxhold",e,{target:e.target}),this._forgetAccept()}.bind(this),t)},move:function(e){this._touchWasMoved(e)&&this._cancel(e)},_touchWasMoved:function(e){const t=(0,v.eventDelta)(this._startEventData,(0,v.eventData)(e));return tr(t.x)>5||tr(t.y)>5},end:function(){this._stopTimer()},_stopTimer:function(){clearTimeout(this._holdTimer)},cancel:function(){this._stopTimer()},dispose:function(){this._stopTimer()}});(0,y.Z)({emitter:ir,bubble:!0,events:["dxhold"]});const nr="dxhold",or=(0,v.addNamespace)("contextmenu","dxContexMenu"),rr=(0,v.addNamespace)(nr,"dxContexMenu"),sr=g.default.inherit({setup:function(e){const t=(0,c.Z)(e);m.Z.on(t,or,this._contextMenuHandler.bind(this)),(Xo.touch||a.default.isSimulator())&&m.Z.on(t,rr,this._holdHandler.bind(this))},_holdHandler:function(e){(0,v.isMouseEvent)(e)&&!a.default.isSimulator()||this._fireContextMenu(e)},_contextMenuHandler:function(e){this._fireContextMenu(e)},_fireContextMenu:function(e){return(0,v.fireEvent)({type:"dxcontextmenu",originalEvent:e})},teardown:function(e){m.Z.off(e,".dxContexMenu")}});(0,Jo.Z)("dxcontextmenu",new sr);const ar="dxcontextmenu";var lr=i(3400),cr=i(8083);const dr=g.default.inherit({ctor(e,t,i){this._$element=e,this._options=t,this._rawData=i,(0,cr.nf)(e,this,this._dispose),this._render()},_render(){const e=(0,c.Z)("<div>").addClass("dx-item-content-placeholder");this._$element.append(e),this._watchers=[],this._renderWatchers()},_renderWatchers(){this._startWatcher("disabled",this._renderDisabled.bind(this)),this._startWatcher("visible",this._renderVisible.bind(this))},_startWatcher(e,t){const i=this._rawData,n=this._options.fieldGetter(e),o=function(e,t,i){const n=function(){let e;return function(t){e!==t&&(i(t,e),e=t)}}();return{dispose:e(t,n),force(){n(t())}}}(this._options.watchMethod(),(()=>n(i)),((e,i)=>{this._dirty=!0,t(e,i)}));this._watchers.push(o)},setDataField(){if(this._dirty=!1,(0,j.each)(this._watchers,((e,t)=>{t.force()})),this._dirty)return!0},_renderDisabled(e,t){this._$element.toggleClass("dx-state-disabled",!!e),this._$element.attr("aria-disabled",!!e),this._updateOwnerFocus(e)},_updateOwnerFocus(e){const t=this._options.owner;t&&e&&t._resetItemFocus(this._$element)},_renderVisible(e,t){this._$element.toggleClass("dx-state-invisible",void 0!==e&&!e)},_dispose(){(0,j.each)(this._watchers,((e,t)=>{t.dispose()}))}});dr.getInstance=function(e){return(0,cr.Bt)(e,this)};const hr=dr,ur="dx-item",pr=/^([^.]+\[\d+\]\.)+([\w.]+)$/,fr=de.default.inherit({_activeStateUnit:`.${ur}`,_supportedKeys(){const e=function(e,t){(0,v.isCommandKeyPressed)(t)||(t.preventDefault(),t.stopPropagation(),this._moveFocus(e,t))};return(0,f.l)(this.callBase(),{space:function(e){e.preventDefault(),this._enterKeyHandler(e)},enter:this._enterKeyHandler,leftArrow:e.bind(this,"left"),rightArrow:e.bind(this,"right"),upArrow:e.bind(this,"up"),downArrow:e.bind(this,"down"),pageUp:e.bind(this,"up"),pageDown:e.bind(this,"down"),home:e.bind(this,"first"),end:e.bind(this,"last")})},_enterKeyHandler(e){const t=(0,c.Z)(this.option("focusedElement"));if(!t.length)return;const i=this._getItemData(t);null!=i&&i.onClick&&this._itemEventHandlerByHandler(t,i.onClick,{event:e}),this._itemClickHandler((0,f.l)({},e,{target:t.get(0),currentTarget:t.get(0)}))},_getDefaultOptions(){return(0,f.l)(this.callBase(),{selectOnFocus:!1,loopItemFocus:!0,items:[],itemTemplate:"item",onItemRendered:null,onItemClick:null,onItemHold:null,itemHoldTimeout:750,onItemContextMenu:null,onFocusedItemChanged:null,noDataText:z.Z.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,dataSource:null,_dataController:null,_itemAttributes:{},itemTemplateProperty:"template",focusOnSelectedItem:!0,focusedElement:null,displayExpr:void 0,disabledExpr:e=>e?e.disabled:void 0,visibleExpr:e=>e?e.visible:void 0})},_init(){this._compileDisplayGetter(),this._initDataController(),this.callBase(),this._cleanRenderedItems(),this._refreshDataSource()},_compileDisplayGetter(){const e=this.option("displayExpr");this._displayGetter=e?(0,hn.vb)(this.option("displayExpr")):void 0},_initTemplates(){this._initItemsFromMarkup(),this._initDefaultItemTemplate(),this.callBase()},_getAnonymousTemplateName:()=>"item",_initDefaultItemTemplate(){const e=this._getFieldsMap();this._templateManager.addDefaultTemplates({item:new No(((t,i)=>{(0,_.PO)(i)?this._prepareDefaultItemTemplate(i,t):(e&&(0,_.mf)(e.text)&&(i=e.text(i)),t.text(String((0,u.ensureDefined)(i,""))))}),this._getBindableFields(),this.option("integrationOptions.watchMethod"),e)})},_getBindableFields:()=>["text","html"],_getFieldsMap(){if(this._displayGetter)return{text:this._displayGetter}},_prepareDefaultItemTemplate(e,t){(0,_.$K)(e.text)&&t.text(e.text),(0,_.$K)(e.html)&&t.html(e.html)},_initItemsFromMarkup(){const e=(0,Yo.hK)(this.$element(),"dxItem");if(!e.length||this.option("items").length)return;const t=e.map((e=>{let{element:t,options:i}=e;return/\S/.test(t.innerHTML)&&!i.template?i.template=this._prepareItemTemplate(t):(0,c.Z)(t).remove(),i}));this.option("items",t)},_prepareItemTemplate(e){const t="tmpl-"+new V.Z,i=(0,c.Z)(e).detach().clone().removeAttr("data-options").addClass("dx-template-wrapper");return this._saveTemplate(t,i),t},_dataSourceOptions:()=>({paginate:!1}),_cleanRenderedItems(){this._renderedItemsCount=0},_focusTarget(){return this.$element()},_focusInHandler(e){if(this.callBase.apply(this,arguments),!this._isFocusTarget(e.target))return;const t=(0,c.Z)(this.option("focusedElement"));if(t.length)this._setFocusedItem(t);else{const e=this._getActiveItem();e.length&&this.option("focusedElement",(0,l.uD)(e))}},_focusOutHandler(){this.callBase.apply(this,arguments);const e=(0,c.Z)(this.option("focusedElement"));this._updateFocusedItemState(e,!1)},_findActiveTarget(e){return e.find(this._activeStateUnit)},_getActiveItem(e){const t=(0,c.Z)(this.option("focusedElement"));if(t.length)return t;let i=this.option("focusOnSelectedItem")?this.option("selectedIndex"):0;const n=this._getActiveElement(),o=n.length-1;return i<0&&(i=e?o:0),n.eq(i)},_moveFocus(e){const t=this._getAvailableItems();let i;switch(e){case"pageup":case"up":i=this._prevItem(t);break;case"pagedown":case"down":i=this._nextItem(t);break;case"right":i=this.option("rtlEnabled")?this._prevItem(t):this._nextItem(t);break;case"left":i=this.option("rtlEnabled")?this._nextItem(t):this._prevItem(t);break;case"first":i=t.first();break;case"last":i=t.last();break;default:return!1}0!==i.length&&this.option("focusedElement",(0,l.uD)(i))},_getVisibleItems(e){return(e=e||this._itemElements()).filter(":visible")},_getAvailableItems(e){return this._getVisibleItems(e)},_prevItem(e){const t=this._getActiveItem(),i=e.index(t),n=e.last();let o=(0,c.Z)(e[i-1]);const r=this.option("loopItemFocus");return 0===o.length&&r&&(o=n),o},_nextItem(e){const t=this._getActiveItem(!0),i=e.index(t),n=e.first();let o=(0,c.Z)(e[i+1]);const r=this.option("loopItemFocus");return 0===o.length&&r&&(o=n),o},_selectFocusedItem(e){this.selectItem(e)},_updateFocusedItemState(e,t,i){const n=(0,c.Z)(e);n.length&&(this._refreshActiveDescendant(),this._refreshItemId(n,i),this._toggleFocusClass(t,n)),this._updateParentActiveDescendant()},_refreshActiveDescendant(e){this.setAria("activedescendant",(0,_.$K)(this.option("focusedElement"))?this.getFocusedItemId():null,e)},_refreshItemId(e,t){!t&&this.option("focusedElement")?this.setAria("id",this.getFocusedItemId(),e):this.setAria("id",null,e)},_isDisabled:e=>e&&"true"===(0,c.Z)(e).attr("aria-disabled"),_setFocusedItem(e){if(!e||!e.length)return;this._updateFocusedItemState(e,!0),this.onFocusedItemChanged(this.getFocusedItemId());const{selectOnFocus:t}=this.option(),i=this._isDisabled(e);t&&!i&&this._selectFocusedItem(e)},_findItemElementByItem(e){let t=(0,c.Z)();const i=this;return this.itemElements().each((function(){const n=(0,c.Z)(this);if(n.data(i._itemDataKey())===e)return t=n,!1})),t},_getIndexByItem(e){return this.option("items").indexOf(e)},_itemOptionChanged(e,t,i,n){const o=this._findItemElementByItem(e);o.length&&(this.constructor.ItemClass.getInstance(o).setDataField(t,i)||this._refreshItem(o,e),"disabled"===t&&i&&this._resetItemFocus(o))},_resetItemFocus(e){e.is(this.option("focusedElement"))&&this.option("focusedElement",null)},_refreshItem(e){const t=this._getItemData(e),i=e.data(this._itemIndexKey());this._renderItem(this._renderedItemsCount+i,t,null,e)},_updateParentActiveDescendant:u.noop,_optionChanged(e){if("items"===e.name){const t=e.fullName.match(pr);if(t&&t.length){const i=t[t.length-1],n=e.fullName.replace(`.${i}`,""),o=this.option(n);return void this._itemOptionChanged(o,i,e.value,e.previousValue)}}switch(e.name){case"items":case"_itemAttributes":case"itemTemplateProperty":case"useItemTextAsTitle":this._cleanRenderedItems(),this._invalidate();break;case"dataSource":this._refreshDataSource(),this._renderEmptyMessage();break;case"noDataText":case"encodeNoDataText":this._renderEmptyMessage();break;case"itemTemplate":case"visibleExpr":case"disabledExpr":this._invalidate();break;case"onItemRendered":this._createItemRenderAction();break;case"onItemClick":case"selectOnFocus":case"loopItemFocus":case"focusOnSelectedItem":break;case"onItemHold":case"itemHoldTimeout":this._attachHoldEvent();break;case"onItemContextMenu":this._attachContextMenuEvent();break;case"onFocusedItemChanged":this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged");break;case"focusedElement":this._updateFocusedItemState(e.previousValue,!1,!0),this._setFocusedItem((0,c.Z)(e.value));break;case"displayExpr":this._compileDisplayGetter(),this._initDefaultItemTemplate(),this._invalidate();break;default:this.callBase(e)}},_invalidate(){return this.option("focusedElement",null),this.callBase.apply(this,arguments)},_loadNextPage(){return this._expectNextPageLoading(),this._dataController.loadNextPage()},_expectNextPageLoading(){this._startIndexForAppendedItems=0},_expectLastItemLoading(){this._startIndexForAppendedItems=-1},_forgetNextPageLoading(){this._startIndexForAppendedItems=null},_dataSourceChangedHandler(e){const t=this.option("items");this._initialized&&t&&this._shouldAppendItems()?(this._renderedItemsCount=t.length,this._isLastPage()&&-1===this._startIndexForAppendedItems||(this.option().items=t.concat(e.slice(this._startIndexForAppendedItems))),this._forgetNextPageLoading(),this._refreshContent()):this.option("items",e.slice())},_refreshContent(){this._prepareContent(),this._renderContent()},_dataSourceLoadErrorHandler(){this._forgetNextPageLoading(),this.option("items",this.option("items"))},_shouldAppendItems(){return null!=this._startIndexForAppendedItems&&this._allowDynamicItemsAppend()},_allowDynamicItemsAppend:()=>!1,_clean(){this._cleanFocusState(),this._cleanItemContainer(),this._inkRipple&&delete this._inkRipple,this._resetActiveState()},_cleanItemContainer(){(0,c.Z)(this._itemContainer()).empty()},_dispose(){this.callBase(),clearTimeout(this._itemFocusTimeout)},_refresh(){this._cleanRenderedItems(),this.callBase.apply(this,arguments)},_itemContainer(){return this.$element()},_itemClass:()=>ur,_itemContentClass(){return this._itemClass()+"-content"},_selectedItemClass:()=>"dx-item-selected",_itemResponseWaitClass:()=>"dx-item-response-wait",_itemSelector(){return`.${this._itemClass()}`},_itemDataKey:()=>"dxItemData",_itemIndexKey:()=>"dxItemIndex",_itemElements(){return this._itemContainer().find(this._itemSelector())},_initMarkup(){this.callBase(),this.onFocusedItemChanged=this._createActionByOption("onFocusedItemChanged"),this.$element().addClass("dx-collection"),this._prepareContent()},_prepareContent:(0,u.deferRenderer)((function(){this._renderContentImpl()})),_renderContent(){this._fireContentReadyAction()},_render(){this.callBase(),this._attachClickEvent(),this._attachHoldEvent(),this._attachContextMenuEvent()},_getPointerEvent:()=>$.Z.down,_attachClickEvent(){const e=this._itemSelector(),t=this._getPointerEvent(),i=(0,v.addNamespace)(He.name,this.NAME),n=(0,v.addNamespace)(t,this.NAME),o=new Go.Z((e=>{const{event:t}=e;this._itemPointerDownHandler(t)}));m.Z.off(this._itemContainer(),i,e),m.Z.off(this._itemContainer(),n,e),m.Z.on(this._itemContainer(),i,e,(e=>this._itemClickHandler(e))),m.Z.on(this._itemContainer(),n,e,(e=>{o.execute({element:(0,c.Z)(e.target),event:e})}))},_itemClickHandler(e,t,i){this._itemDXEventHandler(e,"onItemClick",t,i)},_itemPointerDownHandler(e){this.option("focusStateEnabled")&&(this._itemFocusHandler=function(){if(clearTimeout(this._itemFocusTimeout),this._itemFocusHandler=null,e.isDefaultPrevented())return;const t=(0,c.Z)(e.target),i=t.closest(this._itemElements()),n=this._closestFocusable(t);i.length&&this._isFocusTarget(null==n?void 0:n.get(0))&&this.option("focusedElement",(0,l.uD)(i))}.bind(this),this._itemFocusTimeout=setTimeout(this._forcePointerDownFocus.bind(this)))},_closestFocusable(e){if(e.is(lr.KW))return e;for(e=e.parent();e.length&&!Fe.Z.isDocument(e.get(0))&&!Fe.Z.isDocumentFragment(e.get(0));){if(e.is(lr.KW))return e;e=e.parent()}},_forcePointerDownFocus(){this._itemFocusHandler&&this._itemFocusHandler()},_updateFocusState(){this.callBase.apply(this,arguments),this._forcePointerDownFocus()},_attachHoldEvent(){const e=this._itemContainer(),t=this._itemSelector(),i=(0,v.addNamespace)(nr,this.NAME);m.Z.off(e,i,t),m.Z.on(e,i,t,{timeout:this._getHoldTimeout()},this._itemHoldHandler.bind(this))},_getHoldTimeout(){return this.option("itemHoldTimeout")},_shouldFireHoldEvent(){return this.hasActionSubscription("onItemHold")},_itemHoldHandler(e){this._shouldFireHoldEvent()?this._itemDXEventHandler(e,"onItemHold"):e.cancel=!0},_attachContextMenuEvent(){const e=this._itemContainer(),t=this._itemSelector(),i=(0,v.addNamespace)(ar,this.NAME);m.Z.off(e,i,t),m.Z.on(e,i,t,this._itemContextMenuHandler.bind(this))},_shouldFireContextMenuEvent(){return this.hasActionSubscription("onItemContextMenu")},_itemContextMenuHandler(e){this._shouldFireContextMenuEvent()?this._itemDXEventHandler(e,"onItemContextMenu"):e.cancel=!0},_renderContentImpl(){const e=this.option("items")||[];this._renderedItemsCount?this._renderItems(e.slice(this._renderedItemsCount)):this._renderItems(e)},_renderItems(e){e.length&&(0,j.each)(e,((e,t)=>{this._renderItem(this._renderedItemsCount+e,t)})),this._renderEmptyMessage()},_getItemsContainer(){return this._itemContainer()},_setAttributes(e){const t=(0,n.Z)({},this.option("_itemAttributes")),{class:i}=t;if(i){const n=e.get(0).className;t.class=[n,i].join(" ")}e.attr(t)},_renderItem(e,t,i,n){const o=(null==e?void 0:e.item)??e;i=i||this._getItemsContainer();const r=this._renderItemFrame(o,t,i,n);this._setElementData(r,t,o),this._setAttributes(r),this._attachItemClickEvent(t,r);const s=this._getItemContent(r),a=this._renderItemContent({index:o,itemData:t,container:(0,l.uD)(s),contentClass:this._itemContentClass(),defaultTemplateName:this.option("itemTemplate")}),c=this;return(0,p.gx)(a).done((i=>{c._postprocessRenderItem({itemElement:r,itemContent:i,itemData:t,itemIndex:o}),c._executeItemRenderAction(e,t,(0,l.uD)(r))})),r},_getItemContent(e){const t=e.find(".dx-item-content-placeholder");return t.removeClass("dx-item-content-placeholder"),t},_attachItemClickEvent(e,t){e&&e.onClick&&m.Z.on(t,He.name,(i=>{this._itemEventHandlerByHandler(t,e.onClick,{event:i})}))},_renderItemContent(e){const t=this._getItemTemplateName(e),i=this._getTemplate(t);this._addItemContentClasses(e);const n=(0,c.Z)(this._createItemByTemplate(i,e));return n.hasClass("dx-template-wrapper")?this._renderItemContentByNode(e,n):e.container},_renderItemContentByNode(e,t){return(0,c.Z)(e.container).replaceWith(t),e.container=(0,l.uD)(t),this._addItemContentClasses(e),t},_addItemContentClasses(e){const t=[ur+"-content",e.contentClass];(0,c.Z)(e.container).addClass(t.join(" "))},_appendItemToContainer(e,t,i){t.appendTo(e)},_renderItemFrame(e,t,i,n){const o=(0,c.Z)("<div>");if(new this.constructor.ItemClass(o,this._itemOptions(),t||{}),n&&n.length?n.replaceWith(o):this._appendItemToContainer.call(this,i,o,e),this.option("useItemTextAsTitle")){const e=this._displayGetter?this._displayGetter(t):t;o.attr("title",e)}return o},_itemOptions(){const e=this;return{watchMethod:()=>e.option("integrationOptions.watchMethod"),owner:e,fieldGetter(t){const i=e.option(`${t}Expr`);return(0,hn.vb)(i)}}},_postprocessRenderItem:u.noop,_executeItemRenderAction(e,t,i){this._getItemRenderAction()({itemElement:i,itemIndex:e,itemData:t})},_setElementData(e,t,i){e.addClass([ur,this._itemClass()].join(" ")).data(this._itemDataKey(),t).data(this._itemIndexKey(),i)},_createItemRenderAction(){return this._itemRenderAction=this._createActionByOption("onItemRendered",{element:this.element(),excludeValidators:["disabled","readOnly"],category:"rendering"})},_getItemRenderAction(){return this._itemRenderAction||this._createItemRenderAction()},_getItemTemplateName(e){const t=e.itemData,i=e.templateProperty||this.option("itemTemplateProperty");return t&&t[i]||e.defaultTemplateName},_createItemByTemplate(e,t){return e.render({model:t.itemData,container:t.container,index:t.index,onRendered:this._onItemTemplateRendered(e,t)})},_onItemTemplateRendered:()=>u.noop,_emptyMessageContainer(){return this._itemContainer()},_renderEmptyMessage(e){e=e||this.option("items");const t=this.option("noDataText"),i=!t||e&&e.length||this._dataController.isLoading();i&&this._$noData&&(this._$noData.remove(),this._$noData=null,this.setAria("label",void 0)),i||(this._$noData=this._$noData||(0,c.Z)("<div>").addClass("dx-empty-message"),this._$noData.appendTo(this._emptyMessageContainer()),this.option("encodeNoDataText")?this._$noData.text(t):this._$noData.html(t)),this.$element().toggleClass("dx-empty-collection",!i)},_itemDXEventHandler(e,t,i,n){this._itemEventHandler(e.target,t,(0,f.l)(i,{event:e}),n)},_itemEventHandler(e,t,i,n){const o=this._createActionByOption(t,(0,f.l)({validatingTargetName:"itemElement"},n));return this._itemEventHandlerImpl(e,o,i)},_itemEventHandlerByHandler(e,t,i,n){const o=this._createAction(t,(0,f.l)({validatingTargetName:"itemElement"},n));return this._itemEventHandlerImpl(e,o,i)},_itemEventHandlerImpl(e,t,i){const n=this._closestItemElement((0,c.Z)(e)),o=(0,f.l)({},i);return t((0,f.l)(i,this._extendActionArgs(n),o))},_extendActionArgs(e){return{itemElement:(0,l.uD)(e),itemIndex:this._itemElements().index(e),itemData:this._getItemData(e)}},_closestItemElement(e){return(0,c.Z)(e).closest(this._itemSelector())},_getItemData(e){return(0,c.Z)(e).data(this._itemDataKey())},_getSummaryItemsSize(e,t,i){let n=0;return t&&(0,j.each)(t,((t,o)=>{"width"===e?n+=(0,oe.Y_)(o,i||!1):"height"===e&&(n+=(0,oe.zp)(o,i||!1))})),n},getFocusedItemId(){return this._focusedItemId||(this._focusedItemId=`dx-${new V.Z}`),this._focusedItemId},itemElements(){return this._itemElements()},itemsContainer(){return this._itemContainer()}}).include(Qo.Z);fr.ItemClass=hr;const _r=fr,{abstract:mr}=g.default,gr=g.default.inherit({ctor(e){this._collectionWidget=e},getIndexByItemData:mr,getItemDataByIndex:mr,getKeysByItems:mr,getItemsByKeys:mr,itemsGetter:mr,getKeyByIndex(e){const t=this._denormalizeItemIndex(e);return this.getKeysByItems([this.getItemDataByIndex(t)])[0]},_equalKeys(e,t){return this._collectionWidget._isKeySpecified()?(0,u.equalByValue)(e,t):e===t},beginCache(){this._cache={}},endCache(){this._cache=null},getIndexByKey:mr,getNormalizedIndex(e){return this._isNormalizedItemIndex(e)?e:this._isItemIndex(e)?this._normalizeItemIndex(e):this._isNode(e)?this._getNormalizedItemIndex(e):this._normalizeItemIndex(this.getIndexByItemData(e))},getIndex(e){return this._isNormalizedItemIndex(e)?this._denormalizeItemIndex(e):this._isItemIndex(e)?e:this._isNode(e)?this._denormalizeItemIndex(this._getNormalizedItemIndex(e)):this.getIndexByItemData(e)},getItemElement(e){if(this._isNormalizedItemIndex(e))return this._getItemByNormalizedIndex(e);if(this._isItemIndex(e))return this._getItemByNormalizedIndex(this._normalizeItemIndex(e));if(this._isNode(e))return(0,c.Z)(e);const t=this._normalizeItemIndex(this.getIndexByItemData(e));return this._getItemByNormalizedIndex(t)},_isNode:e=>Fe.Z.isNode(e&&(0,_.ZU)(e)?e.get(0):e),deleteItemAtIndex:mr,itemPlacementFunc(e,t){return this._itemsFromSameParent(e,t)&&e<t?"after":"before"},moveItemAtIndexToIndex:mr,_isNormalizedItemIndex:e=>"number"==typeof e&&Math.round(e)===e,_isItemIndex:mr,_getNormalizedItemIndex:mr,_normalizeItemIndex:mr,_denormalizeItemIndex:mr,_getItemByNormalizedIndex:mr,_itemsFromSameParent:mr}).inherit({_getPlainItems(){return this._collectionWidget.option("items")||[]},getIndexByItemData(e){const t=this._collectionWidget.keyOf.bind(this._collectionWidget);return t?this.getIndexByKey(t(e)):this._getPlainItems().indexOf(e)},getItemDataByIndex(e){return this._getPlainItems()[e]},deleteItemAtIndex(e){this._getPlainItems().splice(e,1)},itemsGetter(){return this._getPlainItems()},getKeysByItems(e){const t=this._collectionWidget.keyOf.bind(this._collectionWidget);let i=e;if(t){i=[];for(let n=0;n<e.length;n++)i.push(t(e[n]))}return i},getIndexByKey(e){const t=this._cache,i=t&&t.keys||this.getKeysByItems(this._getPlainItems());if(t&&!t.keys&&(t.keys=i),"object"!=typeof e)return i.indexOf(e);for(let t=0,{length:n}=i;t<n;t++)if(this._equalKeys(e,i[t]))return t;return-1},getItemsByKeys:(e,t)=>(t||e).slice(),moveItemAtIndexToIndex(e,t){const i=this._getPlainItems(),n=i[e];i.splice(e,1),i.splice(t,0,n)},_isItemIndex:e=>"number"==typeof e&&Math.round(e)===e,_getNormalizedItemIndex(e){return this._collectionWidget._itemElements().index(e)},_normalizeItemIndex:e=>e,_denormalizeItemIndex:e=>e,_getItemByNormalizedIndex(e){return e>-1?this._collectionWidget._itemElements().eq(e):null},_itemsFromSameParent:()=>!0}),vr=gr,br=function(e){return-1!==e},yr=_r.inherit({_setOptionsByReference(){this.callBase(),(0,f.l)(this._optionsByReference,{selectedItem:!0})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{selectionMode:"none",selectionRequired:!1,selectByClick:!0,selectedItems:[],selectedItemKeys:[],maxFilterLengthInRequest:1500,keyExpr:null,selectedIndex:-1,selectedItem:null,onSelectionChanged:null,onItemReordered:null,onItemDeleting:null,onItemDeleted:null})},ctor(e,t){this._userOptions=t||{},this.callBase(e,t)},_init(){this._initEditStrategy(),this.callBase(),this._initKeyGetter(),this._initSelectionModule()},_initKeyGetter(){this._keyGetter=(0,hn.vb)(this.option("keyExpr"))},_getKeysByItems(e){return this._editStrategy.getKeysByItems(e)},_getItemsByKeys(e,t){return this._editStrategy.getItemsByKeys(e,t)},_getKeyByIndex(e){return this._editStrategy.getKeyByIndex(e)},_getIndexByKey(e){return this._editStrategy.getIndexByKey(e)},_getIndexByItemData(e){return this._editStrategy.getIndexByItemData(e)},_isKeySpecified(){return!!this._dataController.key()},_getCombinedFilter(){return this._dataController.filter()},key(){return this.option("keyExpr")?this.option("keyExpr"):this._dataController.key()},keyOf(e){let t=e;return this.option("keyExpr")?t=this._keyGetter(e):this._dataController.store()&&(t=this._dataController.keyOf(e)),t},_nullValueSelectionSupported:()=>!1,_initSelectionModule(){const e=this,{itemsGetter:t}=e._editStrategy;this._selection=new Uo({allowNullValue:this._nullValueSelectionSupported(),mode:this.option("selectionMode"),maxFilterLengthInRequest:this.option("maxFilterLengthInRequest"),equalByReference:!this._isKeySpecified(),onSelectionChanged(t){(t.addedItemKeys.length||t.removedItemKeys.length)&&(e.option("selectedItems",e._getItemsByKeys(t.selectedItemKeys,t.selectedItems)),e._updateSelectedItems(t))},filter:e._getCombinedFilter.bind(e),totalCount(){const t=e.option("items"),i=e._dataController.totalCount();return i>=0?i:e._getItemsCount(t)},key:e.key.bind(e),keyOf:e.keyOf.bind(e),load(t){var i;const n=e._dataController;return t.customQueryParams=null===(i=n.loadOptions())||void 0===i?void 0:i.customQueryParams,t.userData=n.userData(),n.store()?n.loadFromStore(t).done((t=>{if(e._disposed)return;const i=(0,Fo.r6)(t).data;n.applyMapFunction(i)})):(0,p.BH)().resolve(this.plainItems())},dataFields:()=>e._dataController.select(),plainItems:t.bind(e._editStrategy)})},_getItemsCount(e){return e.reduce(((e,t)=>e+(t.items?this._getItemsCount(t.items):1)),0)},_initEditStrategy(){const e=vr;this._editStrategy=new e(this)},_getSelectedItemIndices(e){const t=this,i=[];return e=e||this._selection.getSelectedItemKeys(),t._editStrategy.beginCache(),(0,j.each)(e,((e,n)=>{const o=t._getIndexByKey(n);br(o)&&i.push(o)})),t._editStrategy.endCache(),i},_initMarkup(){this._rendering=!0,this._dataController.isLoading()||this._syncSelectionOptions().done((()=>this._normalizeSelectedItems())),this.callBase()},_render(){this.callBase(),this._rendering=!1},_fireContentReadyAction(){this._rendering=!1,this._rendered=!0,this.callBase.apply(this,arguments)},_syncSelectionOptions(e){let t,i,n,o;switch(e=e||this._chooseSelectOption()){case"selectedIndex":t=this._editStrategy.getItemDataByIndex(this.option("selectedIndex")),(0,_.$K)(t)?(this._setOptionWithoutOptionChange("selectedItems",[t]),this._setOptionWithoutOptionChange("selectedItem",t),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([t]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedItem",null));break;case"selectedItems":if(o=this.option("selectedItems")||[],i=o.length?this._editStrategy.getIndexByItemData(o[0]):-1,this.option("selectionRequired")&&!br(i))return this._syncSelectionOptions("selectedIndex");this._setOptionWithoutOptionChange("selectedItem",o[0]),this._setOptionWithoutOptionChange("selectedIndex",i),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems(o));break;case"selectedItem":if(t=this.option("selectedItem"),i=this._editStrategy.getIndexByItemData(t),this.option("selectionRequired")&&!br(i))return this._syncSelectionOptions("selectedIndex");(0,_.$K)(t)?(this._setOptionWithoutOptionChange("selectedItems",[t]),this._setOptionWithoutOptionChange("selectedIndex",i),this._setOptionWithoutOptionChange("selectedItemKeys",this._editStrategy.getKeysByItems([t]))):(this._setOptionWithoutOptionChange("selectedItems",[]),this._setOptionWithoutOptionChange("selectedItemKeys",[]),this._setOptionWithoutOptionChange("selectedIndex",-1));break;case"selectedItemKeys":if(n=this.option("selectedItemKeys"),this.option("selectionRequired")){const e=this._getIndexByKey(n[0]);if(!br(e))return this._syncSelectionOptions("selectedIndex")}return this._selection.setSelection(n)}return(0,p.BH)().resolve().promise()},_chooseSelectOption(){let e="selectedIndex";const t=function(e){const t=this.option(e);return(0,_.$K)(t)&&t.length||e in this._userOptions}.bind(this);return t("selectedItems")?e="selectedItems":t("selectedItem")?e="selectedItem":t("selectedItemKeys")&&(e="selectedItemKeys"),e},_compareKeys(e,t){if(e.length!==t.length)return!1;for(let i=0;i<t.length;i++)if(e[i]!==t[i])return!1;return!0},_normalizeSelectedItems(){if("none"===this.option("selectionMode"))this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems");else if("single"===this.option("selectionMode")){const e=this.option("selectedItems");if(e.length>1||!e.length&&this.option("selectionRequired")&&this.option("items")&&this.option("items").length){const t=this._selection.getSelectedItems();let i=void 0===e[0]?t[0]:e[0];return void 0===i&&(i=this._editStrategy.itemsGetter()[0]),this.option("grouped")&&i&&i.items&&(i.items=[i.items[0]]),this._selection.setSelection(this._getKeysByItems([i])),this._setOptionWithoutOptionChange("selectedItems",[i]),this._syncSelectionOptions("selectedItems")}this._selection.setSelection(this._getKeysByItems(e))}else{const e=this._getKeysByItems(this.option("selectedItems")),t=this._selection.getSelectedItemKeys();this._compareKeys(t,e)||this._selection.setSelection(e)}return(0,p.BH)().resolve().promise()},_itemClickHandler(e){let t=(0,p.BH)().resolve();const{callBase:i}=this;this._createAction((e=>{t=this._itemSelectHandler(e.event)??t}),{validatingTargetName:"itemElement"})({itemElement:(0,c.Z)(e.currentTarget),event:e}),t.always((()=>{i.apply(this,arguments)}))},_itemSelectHandler(e){var t;let i;if(!this.option("selectByClick"))return;const n=e.currentTarget;return this.isItemSelected(n)?this.unselectItem(e.currentTarget):i=this.selectItem(e.currentTarget),null===(t=i)||void 0===t?void 0:t.promise()},_selectedItemElement(e){return this._itemElements().eq(e)},_postprocessRenderItem(e){if("none"!==this.option("selectionMode")){const t=(0,c.Z)(e.itemElement),i=this._editStrategy.getNormalizedIndex(t),n=this._isItemSelected(i);this._processSelectableItem(t,n)}},_processSelectableItem(e,t){e.toggleClass(this._selectedItemClass(),t),this._setAriaSelectionAttribute(e,String(t))},_updateSelectedItems(e){const t=this,{addedItemKeys:i}=e,{removedItemKeys:n}=e;if(t._rendered&&(i.length||n.length)){const o=t._selectionChangePromise;if(!t._rendering){const e=[];let o;const r=[];t._editStrategy.beginCache();for(let n=0;n<i.length;n++)o=t._getIndexByKey(i[n]),e.push(o),t._addSelection(o);for(let e=0;e<n.length;e++)o=t._getIndexByKey(n[e]),r.push(o),t._removeSelection(o);t._editStrategy.endCache(),t._updateSelection(e,r)}(0,p.gx)(o).done((()=>{t._fireSelectionChangeEvent(e.addedItems,e.removedItems)}))}},_fireSelectionChangeEvent(e,t){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:e,removedItems:t})},_updateSelection:u.noop,_setAriaSelectionAttribute(e,t){this.setAria("selected",t,e)},_removeSelection(e){const t=this._editStrategy.getItemElement(e);br(e)&&(this._processSelectableItem(t,!1),m.Z.triggerHandler(t,"stateChanged",!1))},_addSelection(e){const t=this._editStrategy.getItemElement(e);br(e)&&(this._processSelectableItem(t,!0),m.Z.triggerHandler(t,"stateChanged",!0))},_isItemSelected(e){const t=this._getKeyByIndex(e);return this._selection.isItemSelected(t,{checkPending:!0})},_optionChanged(e){switch(e.name){case"selectionMode":this._invalidate();break;case"dataSource":(!e.value||Array.isArray(e.value)&&!e.value.length)&&this.option("selectedItemKeys",[]),this.callBase(e);break;case"selectedIndex":case"selectedItem":case"selectedItems":case"selectedItemKeys":this._syncSelectionOptions(e.name).done((()=>this._normalizeSelectedItems()));break;case"keyExpr":this._initKeyGetter();break;case"selectionRequired":this._normalizeSelectedItems();break;case"selectByClick":case"onSelectionChanged":case"onItemDeleting":case"onItemDeleted":case"onItemReordered":case"maxFilterLengthInRequest":break;default:this.callBase(e)}},_clearSelectedItems(){this._setOptionWithoutOptionChange("selectedItems",[]),this._syncSelectionOptions("selectedItems")},_waitDeletingPrepare(e){if(e.data("dxItemDeleting"))return(0,p.BH)().resolve().promise();e.data("dxItemDeleting",!0);const t=(0,p.BH)(),i={cancel:!1},n=this._itemEventHandler(e,"onItemDeleting",i,{excludeValidators:["disabled","readOnly"]});return(0,p.gx)(n).always((function(o){const r=!n,s=!r&&"resolved"===n.state(),a=r||s&&!arguments.length||s&&o;(0,p.gx)((0,p.p4)(i.cancel)).always((()=>{e.data("dxItemDeleting",!1)})).done((e=>{a&&!e?t.resolve():t.reject()})).fail(t.reject)})),t.promise()},_deleteItemFromDS(e){const t=this._dataController,i=(0,p.BH)(),n=this.option("disabled"),o=t.store();if(!o)return(0,p.BH)().resolve().promise();if(!o.remove)throw ge.Z.Error("E1011");return this.option("disabled",!0),o.remove(t.keyOf(this._getItemData(e))).done((e=>{void 0!==e?i.resolve():i.reject()})).fail((()=>{i.reject()})),i.always((()=>{this.option("disabled",n)})),i},_tryRefreshLastPage(){const e=(0,p.BH)();return this._isLastPage()||this.option("grouped")?e.resolve():this._refreshLastPage().done((()=>{e.resolve()})),e.promise()},_refreshLastPage(){return this._expectLastItemLoading(),this._dataController.load()},_updateSelectionAfterDelete(e){const t=this._getKeyByIndex(e);this._selection.deselect([t])},_updateIndicesAfterIndex(e){const t=this._itemElements();for(let i=e+1;i<t.length;i++)(0,c.Z)(t[i]).data(this._itemIndexKey(),i-1)},_simulateOptionChange(e){const t=this.option(e);t instanceof Vo.o||this._optionChangedAction({name:e,fullName:e,value:t})},isItemSelected(e){return this._isItemSelected(this._editStrategy.getNormalizedIndex(e))},selectItem(e){if("none"===this.option("selectionMode"))return;const t=this._editStrategy.getNormalizedIndex(e);if(!br(t))return;const i=this._getKeyByIndex(t);if(this._selection.isItemSelected(i))return;if("single"===this.option("selectionMode"))return this._selection.setSelection([i]);const n=this.option("selectedItemKeys")||[];return this._selection.setSelection([...n,i],[i])},unselectItem(e){const t=this._editStrategy.getNormalizedIndex(e);if(!br(t))return;const i=this._selection.getSelectedItemKeys();if(this.option("selectionRequired")&&i.length<=1)return;const n=this._getKeyByIndex(t);this._selection.isItemSelected(n,{checkPending:!0})&&this._selection.deselect([n])},_deleteItemElementByIndex(e){this._updateSelectionAfterDelete(e),this._updateIndicesAfterIndex(e),this._editStrategy.deleteItemAtIndex(e)},_afterItemElementDeleted(e,t){const i=this._dataController.getDataSource()?"dataSource":"items";this._simulateOptionChange(i),this._itemEventHandler(e,"onItemDeleted",t,{beforeExecute(){e.remove()},excludeValidators:["disabled","readOnly"]}),this._renderEmptyMessage()},deleteItem(e){const t=this,i=(0,p.BH)(),n=this._editStrategy.getItemElement(e),o=this._editStrategy.getNormalizedIndex(e),r=this._itemResponseWaitClass();return br(o)?this._waitDeletingPrepare(n).done((()=>{n.addClass(r);const e=t._extendActionArgs(n);t._deleteItemFromDS(n).done((()=>{t._deleteItemElementByIndex(o),t._afterItemElementDeleted(n,e),t._tryRefreshLastPage().done((()=>{i.resolveWith(t)}))})).fail((()=>{n.removeClass(r),i.rejectWith(t)}))})).fail((()=>{i.rejectWith(t)})):i.rejectWith(t),i.promise()},reorderItem(e,t){const i=(0,p.BH)(),n=this,o=this._editStrategy,r=o.getItemElement(e),s=o.getItemElement(t),a=o.getNormalizedIndex(e),l=o.getNormalizedIndex(t),c=this._dataController.getDataSource()?"dataSource":"items";return br(a)&&br(l)&&a!==l?i.resolveWith(this):i.rejectWith(this),i.promise().done((function(){s[o.itemPlacementFunc(a,l)](r),o.moveItemAtIndexToIndex(a,l),this._updateIndicesAfterIndex(a),n.option("selectedItems",n._getItemsByKeys(n._selection.getSelectedItemKeys(),n._selection.getSelectedItems())),"items"===c&&n._simulateOptionChange(c),n._itemEventHandler(r,"onItemReordered",{fromIndex:o.getIndex(a),toIndex:o.getIndex(l)},{excludeValidators:["disabled","readOnly"]})}))}}),Cr=yr,wr=Cr,xr="dx-buttongroup-item-has-width",Sr={contained:"dx-buttongroup-mode-contained",outlined:"dx-buttongroup-mode-outlined",text:"dx-buttongroup-mode-text"},Ir=wr.inherit({_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new No(((e,t,i)=>{this._prepareItemStyles(e);const n=this.option("buttonTemplate");this._createComponent(e,_o,(0,f.l)({},i,t,this._getBasicButtonOptions(),{_templateData:this._hasCustomTemplate(n)?i:{},template:i.template||n}))}),["text","type","icon","disabled","visible","hint"],this.option("integrationOptions.watchMethod"))})},_getBasicButtonOptions(){return{focusStateEnabled:!1,onClick:null,hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode")}},_getDefaultOptions(){return(0,f.l)(this.callBase(),{itemTemplateProperty:null})},_hasCustomTemplate(e){return(0,_.mf)(e)||this.option("integrationOptions.templates")[e]},_selectedItemClass:()=>"dx-item-selected dx-state-selected",_prepareItemStyles(e){const t=e.data("dxItemIndex");0===t&&e.addClass("dx-buttongroup-first-item");const i=this.option("items");i&&t===i.length-1&&e.addClass("dx-buttongroup-last-item"),e.addClass("dx-shape-standard")},_renderItemContent(e){return e.container=(0,c.Z)(e.container).parent(),this.callBase(e)},_setAriaSelectionAttribute(e,t){this.setAria("pressed",t,e)},_renderItemContentByNode(e,t){return e.container=(0,c.Z)(e.container.children().first()),this.callBase(e,t)},_focusTarget(){return this.$element().parent()},_keyboardEventBindingTarget(){return this._focusTarget()},_refreshContent(){this._prepareContent(),this._renderContent()},_itemClass:()=>"dx-buttongroup-item",_itemSelectHandler(e){"single"===this.option("selectionMode")&&this.isItemSelected(e.currentTarget)||this.callBase(e)}}),kr=de.default.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{hoverStateEnabled:!0,focusStateEnabled:!0,selectionMode:"single",selectedItems:[],selectedItemKeys:[],stylingMode:"contained",keyExpr:"text",items:[],buttonTemplate:"content",onSelectionChanged:null,onItemClick:null})},_init(){this.callBase(),this._createItemClickAction()},_createItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initMarkup(){this.setAria("role","group"),this.$element().addClass("dx-buttongroup"),this._renderStylingMode(),this._renderButtons(),this._syncSelectionOptions(),this.callBase()},_renderStylingMode(){const{stylingMode:e}=this.option();for(const e in Sr)this.$element().removeClass(Sr[e]);this.$element().addClass(Sr[e]??Sr.contained)},_fireSelectionChangeEvent(e,t){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:e,removedItems:t})},_renderButtons(){const e=(0,c.Z)("<div>").addClass("dx-buttongroup-wrapper").appendTo(this.$element()),t=this.option("selectedItems"),i={selectionMode:this.option("selectionMode"),items:this.option("items"),keyExpr:this.option("keyExpr"),buttonTemplate:this.option("buttonTemplate"),scrollingEnabled:!1,selectedItemKeys:this.option("selectedItemKeys"),focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),activeStateEnabled:this.option("activeStateEnabled"),stylingMode:this.option("stylingMode"),accessKey:this.option("accessKey"),tabIndex:this.option("tabIndex"),noDataText:"",selectionRequired:!1,onItemRendered:e=>{const t=this.option("width");(0,_.$K)(t)&&(0,c.Z)(e.itemElement).addClass(xr)},onSelectionChanged:e=>{this._syncSelectionOptions(),this._fireSelectionChangeEvent(e.addedItems,e.removedItems)},onItemClick:e=>{this._itemClickAction(e)}};(0,_.$K)(t)&&t.length&&(i.selectedItems=t),this._buttonsCollection=this._createComponent(e,Ir,i)},_syncSelectionOptions(){this._setOptionWithoutOptionChange("selectedItems",this._buttonsCollection.option("selectedItems")),this._setOptionWithoutOptionChange("selectedItemKeys",this._buttonsCollection.option("selectedItemKeys"))},_optionChanged(e){switch(e.name){case"stylingMode":case"selectionMode":case"keyExpr":case"buttonTemplate":case"items":case"activeStateEnabled":case"focusStateEnabled":case"hoverStateEnabled":case"tabIndex":this._invalidate();break;case"selectedItemKeys":case"selectedItems":this._buttonsCollection.option(e.name,e.value);break;case"onItemClick":this._createItemClickAction();break;case"onSelectionChanged":break;case"width":this.callBase(e),this._buttonsCollection.itemElements().toggleClass(xr,!!e.value);break;default:this.callBase(e)}}});(0,r.default)("dxButtonGroup",kr);const Er=kr;var Or=i(3214),Tr=i(925),Dr=i(4965);class Br{constructor(e,t,i){this.instance=null,this.$container=null,this.$placeMarker=null,this.editor=t,this.name=e,this.options=i||{}}_addPlaceMarker(e){this.$placeMarker=(0,c.Z)("<div>").appendTo(e)}_addToContainer(e){const{$placeMarker:t,$container:i}=this;t?t.replaceWith(e):e.appendTo(i)}_attachEvents(e,t){throw"Not implemented"}_create(){throw"Not implemented"}_isRendered(){return!!this.instance}_isVisible(){const{editor:e,options:t}=this;return t.visible||!e.option("readOnly")}_isDisabled(){throw"Not implemented"}_shouldRender(){return this._isVisible()&&!this._isRendered()}dispose(){const{instance:e,$placeMarker:t}=this;e&&(e.dispose?e.dispose():e.remove(),this.instance=null),t&&t.remove()}render(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.$container;if(this.$container=e,this._isVisible()){const{instance:e,$element:t}=this._create();this.instance=e,this._attachEvents(e,t)}else this._addPlaceMarker(e)}update(){return this._shouldRender()&&this.render(),!!this.instance}}const Ar=$.Z.down;class Pr extends Br{_create(){const e=(0,c.Z)("<span>").addClass("dx-clear-button-area").append((0,c.Z)("<span>").addClass("dx-icon").addClass("dx-icon-clear"));return this._addToContainer(e),this.update(!0),{instance:e,$element:e}}_isVisible(){const{editor:e}=this;return e._isClearButtonVisible()}_attachEvents(e,t){const{editor:i}=this,n=i.NAME;m.Z.on(t,(0,v.addNamespace)(Ar,n),(e=>{e.preventDefault(),"mouse"!==e.pointerType&&i._clearValueHandler(e)})),m.Z.on(t,(0,v.addNamespace)(He.name,n),(e=>i._clearValueHandler(e)))}_legacyRender(e,t){e.toggleClass("dx-show-clear-button",t)}update(){!(arguments.length>0&&void 0!==arguments[0]&&arguments[0])&&super.update();const{editor:e,instance:t}=this,i=e.$element(),n=this._isVisible();t&&t.toggleClass("dx-state-invisible",!n),this._legacyRender(i,n)}}class Mr extends Br{_attachEvents(e,t){const{editor:i}=this;m.Z.on(t,mn.B,(()=>{i.$element().addClass("dx-custom-button-hovered")})),m.Z.on(t,mn.u,(()=>{i.$element().removeClass("dx-custom-button-hovered")})),m.Z.on(t,He.name,(e=>{e.stopPropagation()}))}_create(){const{editor:e}=this,t=(0,c.Z)("<div>");return this._addToContainer(t),{$element:t,instance:e._createComponent(t,_o,(0,f.l)({},this.options,{ignoreParentReadOnly:!0,disabled:this._isDisabled(),integrationOptions:this._prepareIntegrationOptions(e)}))}}_prepareIntegrationOptions(e){return(0,f.l)({},e.option("integrationOptions"),{skipTemplates:["content"]})}update(){const e=super.update();return this.instance&&this.instance.option("disabled",this._isDisabled()),e}_isVisible(){const{editor:e}=this;return e.option("visible")}_isDisabled(){return void 0!==this.options.disabled?this.instance?this.instance.option("disabled"):this.options.disabled:this.editor.option("readOnly")}}function Rr(e,t){if(-1!==e.indexOf(t))throw ge.Z.Error("E1055",t);e.push(t)}class $r{constructor(e,t){this.buttons=[],this.defaultButtonsInfo=t,this.editor=e}_compileButtonInfo(e){const t=[];return e.map((e=>{const i="string"==typeof e;var n;i||(n=e,(()=>{if(!n||"object"!=typeof n||Array.isArray(n))throw ge.Z.Error("E1053")})(),(()=>{if(!("name"in n))throw ge.Z.Error("E1054")})(),(()=>{const{name:e}=n;if("string"!=typeof e)throw ge.Z.Error("E1055")})(),(()=>{const{location:e}=n;"location"in n&&"after"!==e&&"before"!==e&&(n.location="after")})());const o=i||function(e,t){return!!t.find((t=>t.name===e))}(e.name,this.defaultButtonsInfo);if(o){const i=this.defaultButtonsInfo.find((t=>{let{name:i}=t;return i===e||i===e.name}));if(!i)throw ge.Z.Error("E1056",this.editor.NAME,e);return Rr(t,e),i}const{name:r}=e;return Rr(t,r),(0,f.l)(e,{Ctor:Mr})}))}_createButton(e){const{Ctor:t,options:i,name:n}=e,o=new t(n,this.editor,i);return this.buttons.push(o),o}_renderButtons(e,t,i){let n=null;return(e?this._compileButtonInfo(e):this.defaultButtonsInfo).forEach((e=>{const{location:o="after"}=e;o===i&&this._createButton(e).render((n=n??(0,c.Z)("<div>").addClass("dx-texteditor-buttons-container"),"before"===i?t.prepend(n):t.append(n),n))})),n}clean(){this.buttons.forEach((e=>e.dispose())),this.buttons=[]}getButton(e){const t=this.buttons.find((t=>{let{name:i}=t;return i===e}));return t&&t.instance}renderAfterButtons(e,t){return this._renderButtons(e,t,"after")}renderBeforeButtons(e,t){return this._renderButtons(e,t,"before")}updateButtons(e){this.buttons.forEach((t=>{e&&-1===e.indexOf(t.name)||t.update()}))}}const Nr=["KeyDown","KeyPress","KeyUp","Change","Cut","Copy","Paste","Input"],Vr=["tab","enter","shift","control","alt","escape","pageUp","pageDown","end","home","leftArrow","upArrow","rightArrow","downArrow"];let Fr=class{constructor(e){this.NAME="dxLabel",this._props=e,this._id=`dx-texteditor-label-${new V.Z}`,this._render(),this._toggleMarkupVisibility()}_isVisible(){return!!this._props.text&&"hidden"!==this._props.mode}_render(){this._$before=(0,c.Z)("<div>").addClass("dx-label-before"),this._$labelSpan=(0,c.Z)("<span>"),this._$label=(0,c.Z)("<div>").addClass("dx-label").append(this._$labelSpan),this._$after=(0,c.Z)("<div>").addClass("dx-label-after"),this._$root=(0,c.Z)("<div>").addClass("dx-texteditor-label").attr("id",this._id).append(this._$before).append(this._$label).append(this._$after),this._updateMark(),this._updateText(),this._updateBeforeWidth(),this._updateMaxWidth()}_toggleMarkupVisibility(){const e=this._isVisible();this._updateEditorBeforeButtonsClass(e),this._updateEditorLabelClass(e),e?this._$root.appendTo(this._props.$editor):this._$root.detach(),this._attachEvents()}_attachEvents(){const e=(0,v.addNamespace)(He.name,this.NAME),t=(0,v.addNamespace)(mn.B,this.NAME),i=(0,v.addNamespace)(_n.bB,this.NAME);m.Z.off(this._$labelSpan,e),m.Z.off(this._$labelSpan,t),m.Z.off(this._$labelSpan,i),this._isVisible()&&this._isOutsideMode()&&(m.Z.on(this._$labelSpan,e,(e=>{""===(0,Z.getWindow)().getSelection().toString()&&(this._props.onClickHandler(),e.preventDefault())})),m.Z.on(this._$labelSpan,t,(e=>{this._props.onHoverHandler(e)})),m.Z.on(this._$labelSpan,i,(e=>{this._props.onActiveHandler(e)})))}_updateEditorLabelClass(e){if(this._props.$editor.removeClass("dx-texteditor-with-floating-label").removeClass("dx-texteditor-label-outside").removeClass("dx-texteditor-with-label"),e){const e="floating"===this._props.mode?"dx-texteditor-with-floating-label":"dx-texteditor-with-label";this._props.$editor.addClass(e),this._isOutsideMode()&&this._props.$editor.addClass("dx-texteditor-label-outside")}}_isOutsideMode(){return"outside"===this._props.mode}_updateEditorBeforeButtonsClass(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible();if(this._props.$editor.removeClass("dx-texteditor-with-before-buttons"),e){const e=this._props.containsButtonsBefore?"dx-texteditor-with-before-buttons":"";this._props.$editor.addClass(e)}}_updateMark(){this._$labelSpan.attr("data-mark",this._props.mark)}_updateText(){this._$labelSpan.text(this._props.text)}_updateBeforeWidth(){if(this._isVisible()){const e=this._props.beforeWidth??this._props.getBeforeWidth();this._$before.css({width:e}),this._updateLabelTransform()}}_updateLabelTransform(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(this._$labelSpan.css("transform",""),this._isVisible()&&this._isOutsideMode()){const t=(this._props.rtlEnabled?1:-1)*((0,oe.dz)(this._$before)+e);this._$labelSpan.css("transform",`translateX(${t}px)`)}}_updateMaxWidth(){if(this._isVisible()&&!this._isOutsideMode()){const e=this._props.containerWidth??this._props.getContainerWidth();this._$label.css({maxWidth:e})}}$element(){return this._$root}isVisible(){return this._isVisible()}getId(){if(this._isVisible())return this._id}updateMode(e){this._props.mode=e,this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateText(e){this._props.text=e,this._updateText(),this._toggleMarkupVisibility(),this._updateBeforeWidth(),this._updateMaxWidth()}updateMark(e){this._props.mark=e,this._updateMark()}updateContainsButtonsBefore(e){this._props.containsButtonsBefore=e,this._updateEditorBeforeButtonsClass()}updateBeforeWidth(e){this._props.beforeWidth=e,this._updateBeforeWidth()}updateMaxWidth(e){this._props.containerWidth=e,this._updateMaxWidth()}};function Zr(e){if((0,_.$K)(e)&&!Array.isArray(e))throw ge.Z.Error("E1053")}const Hr=me.inherit({ctor(e,t){t&&Zr(t.buttons),this._buttonCollection=new $r(this,this._getDefaultButtons()),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._labelContainerElement=null,this.callBase.apply(this,arguments)},_getDefaultOptions(){return(0,f.l)(this.callBase(),{buttons:void 0,value:"",spellcheck:!1,showClearButton:!1,valueChangeEvent:"change",placeholder:"",inputAttr:{},onFocusIn:null,onFocusOut:null,onKeyDown:null,onKeyUp:null,onChange:null,onInput:null,onCut:null,onCopy:null,onPaste:null,onEnterKey:null,mode:"text",hoverStateEnabled:!0,focusStateEnabled:!0,text:void 0,displayValueFormatter:e=>(0,_.$K)(e)&&!1!==e?e:"",stylingMode:(0,s.default)().editorStylingMode||"outlined",showValidationMark:!0,label:"",labelMode:"static",labelMark:""})},_defaultOptionsRules(){return this.callBase().concat([{device(){const e=(0,Sn.Vk)();return(0,Sn.x2)(e)},options:{labelMode:"floating",stylingMode:(0,s.default)().editorStylingMode||"filled"}},{device(){const e=(0,Sn.Vk)();return(0,Sn.dC)(e)},options:{labelMode:"outside"}}])},_getDefaultButtons:()=>[{name:"clear",Ctor:Pr}],_isClearButtonVisible(){return this.option("showClearButton")&&!this.option("readOnly")},_input(){return this.$element().find(".dx-texteditor-input").first()},_isFocused(){return(0,lr.si)(this._input())||this.callBase()},_inputWrapper(){return this.$element()},_buttonsContainer(){return this._inputWrapper().find(".dx-texteditor-buttons-container").eq(0)},_isControlKey:e=>Vr.includes(e),_renderStylingMode(){this.callBase(),this._updateButtonsStyling(this.option("stylingMode"))},_initMarkup(){this.$element().addClass("dx-texteditor"),this._renderInput(),this._renderButtonContainers(),this._renderStylingMode(),this._renderInputType(),this._renderPlaceholder(),this._renderProps(),this.callBase(),this._renderValue(),this._renderLabel()},_render(){this.callBase(),this._refreshValueChangeEvent(),this._refreshEvents(),this._renderEnterKeyAction(),this._renderEmptinessEvent()},_renderInput(){this._$textEditorContainer=(0,c.Z)("<div>").addClass("dx-texteditor-container").appendTo(this.$element()),this._$textEditorInputContainer=(0,c.Z)("<div>").addClass("dx-texteditor-input-container").appendTo(this._$textEditorContainer),this._$textEditorInputContainer.append(this._createInput())},_getInputContainer(){return this._$textEditorInputContainer},_renderPendingIndicator(){this.$element().addClass("dx-validation-pending");const e=this._getInputContainer(),t=(0,c.Z)("<div>").addClass("dx-pending-indicator").appendTo(e);this._pendingIndicator=this._createComponent(t,Dr.Z)},_disposePendingIndicator(){this._pendingIndicator&&(this._pendingIndicator.dispose(),this._pendingIndicator.$element().remove(),this._pendingIndicator=null,this.$element().removeClass("dx-validation-pending"))},_renderValidationState(){this.callBase(),"pending"===this.option("validationStatus")?(!this._pendingIndicator&&this._renderPendingIndicator(),this._showValidMark=!1):("invalid"===this.option("validationStatus")&&(this._showValidMark=!1),this._showValidMark||!0!==this.option("showValidationMark")||(this._showValidMark="valid"===this.option("validationStatus")&&!!this._pendingIndicator),this._disposePendingIndicator()),this._toggleValidMark()},_getButtonsContainer(){return this._$textEditorContainer},_renderButtonContainers(){const e=this.option("buttons"),t=this._getButtonsContainer();this._$beforeButtonsContainer=this._buttonCollection.renderBeforeButtons(e,t),this._$afterButtonsContainer=this._buttonCollection.renderAfterButtons(e,t)},_cleanButtonContainers(){var e,t;null===(e=this._$beforeButtonsContainer)||void 0===e||e.remove(),null===(t=this._$afterButtonsContainer)||void 0===t||t.remove(),this._buttonCollection.clean()},_clean(){this._buttonCollection.clean(),this._disposePendingIndicator(),this._unobserveLabelContainerResize(),this._$beforeButtonsContainer=null,this._$afterButtonsContainer=null,this._$textEditorContainer=null,this.callBase()},_createInput(){const e=(0,c.Z)("<input>");return this._applyInputAttributes(e,this.option("inputAttr")),e},_setSubmitElementName(e){const t=this.option("inputAttr.name");return this.callBase(e||t||"")},_applyInputAttributes(e,t){const i=(0,f.l)(this._getDefaultAttributes(),t);e.attr(i).addClass("dx-texteditor-input"),this._setInputMinHeight(e)},_setInputMinHeight(e){e.css("minHeight",this.option("height")?"0":"")},_getPlaceholderAttr(){const{ios:e,mac:t}=a.default.real(),{placeholder:i}=this.option();return i||(e||t?" ":null)},_getDefaultAttributes(){return{autocomplete:"off",placeholder:this._getPlaceholderAttr()}},_updateButtons(e){this._buttonCollection.updateButtons(e)},_updateButtonsStyling(e){(0,j.each)(this.option("buttons"),((t,i)=>{let{options:n,name:o}=i;if(n&&!n.stylingMode&&this.option("visible")){const t=this.getButton(o);t.option&&t.option("stylingMode","underlined"===e?"text":"contained")}}))},_renderValue(){return this._renderInputValue().promise()},_renderInputValue(e){e=e??this.option("value");let t=this.option("text");const i=this.option("displayValue"),n=this.option("displayValueFormatter");return void 0!==i&&null!==e?t=n(i):(0,_.$K)(t)||(t=n(e)),this.option("text",t),this._input().val()!==((0,_.$K)(t)?t:"")?this._renderDisplayText(t):this._toggleEmptinessEventHandler(),(0,p.BH)().resolve()},_renderDisplayText(e){this._input().val(e),this._toggleEmptinessEventHandler()},_isValueValid(){if(this._input().length){const{validity:e}=this._input().get(0);if(e)return e.valid}return!0},_toggleEmptiness(e){this.$element().toggleClass("dx-texteditor-empty",e),this._togglePlaceholder(e)},_togglePlaceholder(e){this.$element().find(".dx-placeholder").eq(0).toggleClass("dx-state-invisible",!e)},_renderProps(){this._toggleReadOnlyState(),this._toggleSpellcheckState(),this._toggleTabIndex()},_toggleDisabledState(e){this.callBase.apply(this,arguments),this._input().prop("disabled",e)},_toggleTabIndex(){const e=this._input(),t=this.option("disabled"),i=this.option("focusStateEnabled");t||!i?e.attr("tabIndex",-1):e.removeAttr("tabIndex")},_toggleReadOnlyState(){this._input().prop("readOnly",this._readOnlyPropValue()),this.callBase()},_readOnlyPropValue(){return this.option("readOnly")},_toggleSpellcheckState(){this._input().prop("spellcheck",this.option("spellcheck"))},_unobserveLabelContainerResize(){this._labelContainerElement&&(Tr.Z.unobserve(this._labelContainerElement),this._labelContainerElement=null)},_getLabelContainer(){return this._input()},_getLabelContainerWidth(){return(0,oe.dz)(this._getLabelContainer())},_getLabelBeforeWidth(){return(this._$beforeButtonsContainer&&(0,oe.dz)(this._$beforeButtonsContainer))??0},_updateLabelWidth(){this._label.updateBeforeWidth(this._getLabelBeforeWidth()),this._label.updateMaxWidth(this._getLabelContainerWidth())},_getFieldElement(){return this._getLabelContainer()},_setFieldAria(e){var t;const i=this.option("inputAttr"),n=null==i?void 0:i["aria-label"],o=null===(t=this._label)||void 0===t?void 0:t.getId(),r=n?void 0:o;if(r||e){const e={labelledby:r,label:n};this.setAria(e,this._getFieldElement())}},_renderLabel(){this._unobserveLabelContainerResize(),this._labelContainerElement=(0,c.Z)(this._getLabelContainer()).get(0);const{label:e,labelMode:t,labelMark:i,rtlEnabled:n}=this.option(),o={onClickHandler:()=>{this.focus()},onHoverHandler:e=>{e.stopPropagation()},onActiveHandler:e=>{e.stopPropagation()},$editor:this.$element(),text:e,mark:i,mode:t,rtlEnabled:n,containsButtonsBefore:!!this._$beforeButtonsContainer,getContainerWidth:()=>this._getLabelContainerWidth(),getBeforeWidth:()=>this._getLabelBeforeWidth()};this._label=new Fr(o),this._setFieldAria(),this._labelContainerElement&&Tr.Z.observe(this._labelContainerElement,this._updateLabelWidth.bind(this))},_renderPlaceholder(){this._renderPlaceholderMarkup(),this._attachPlaceholderEvents()},_renderPlaceholderMarkup(){this._$placeholder&&(this._$placeholder.remove(),this._$placeholder=null);const e=this._input(),t=this.option("placeholder"),i={id:t?`dx-${new V.Z}`:void 0,"data-dx_placeholder":t},n=this._$placeholder=(0,c.Z)("<div>").attr(i);n.insertAfter(e),n.addClass("dx-placeholder")},_attachPlaceholderEvents(){const e=(0,v.addNamespace)($.Z.up,this.NAME);m.Z.on(this._$placeholder,e,(()=>{m.Z.trigger(this._input(),"focus")})),this._toggleEmptinessEventHandler()},_placeholder(){return this._$placeholder||(0,c.Z)()},_clearValueHandler(e){const t=this._input();e.stopPropagation(),this._saveValueChangeEvent(e),this._clearValue(),!this._isFocused()&&m.Z.trigger(t,"focus"),m.Z.trigger(t,"input")},_clearValue(){this.clear()},_renderEvents(){const e=this._input();(0,j.each)(Nr,((t,i)=>{if(this.hasActionSubscription(`on${i}`)){const t=this._createActionByOption(`on${i}`,{excludeValidators:["readOnly"]});m.Z.on(e,(0,v.addNamespace)(i.toLowerCase(),this.NAME),(e=>{this._disposed||t({event:e})}))}}))},_refreshEvents(){const e=this._input();(0,j.each)(Nr,((t,i)=>{m.Z.off(e,(0,v.addNamespace)(i.toLowerCase(),this.NAME))})),this._renderEvents()},_keyPressHandler(){this.option("text",this._input().val())},_keyDownHandler(e){const t=this._input(),i=e.ctrlKey&&"enter"===(0,v.normalizeKeyName)(e),n=t.val()!==this.option("value");i&&n&&m.Z.trigger(t,"change")},_getValueChangeEventOptionName:()=>"valueChangeEvent",_renderValueChangeEvent(){const e=(0,v.addNamespace)(this._renderValueEventName(),`${this.NAME}TextChange`),t=(0,v.addNamespace)(this.option(this._getValueChangeEventOptionName()),`${this.NAME}ValueChange`),i=(0,v.addNamespace)("keydown",`${this.NAME}TextChange`),n=this._input();m.Z.on(n,e,this._keyPressHandler.bind(this)),m.Z.on(n,t,this._valueChangeEventHandler.bind(this)),m.Z.on(n,i,this._keyDownHandler.bind(this))},_cleanValueChangeEvent(){const e=`.${this.NAME}ValueChange`,t=`.${this.NAME}TextChange`;m.Z.off(this._input(),e),m.Z.off(this._input(),t)},_refreshValueChangeEvent(){this._cleanValueChangeEvent(),this._renderValueChangeEvent()},_renderValueEventName:()=>"input change keypress",_focusTarget(){return this._input()},_focusEventTarget(){return this.element()},_isInput(e){return e===this._input().get(0)},_preventNestedFocusEvent(e){if(e.isDefaultPrevented())return!0;let t=this._isNestedTarget(e.relatedTarget);return"focusin"===e.type?t=t&&this._isNestedTarget(e.target)&&!this._isInput(e.target):t||this._toggleFocusClass(!1,this.$element()),t&&e.preventDefault(),t},_isNestedTarget(e){return!!this.$element().find(e).length},_focusClassTarget(){return this.$element()},_focusInHandler(e){this._preventNestedFocusEvent(e),this.callBase.apply(this,arguments)},_focusOutHandler(e){this._preventNestedFocusEvent(e),this.callBase.apply(this,arguments)},_toggleFocusClass(e,t){this.callBase(e,this._focusClassTarget(t))},_hasFocusClass(e){return this.callBase((0,c.Z)(e||this.$element()))},_renderEmptinessEvent(){const e=this._input();m.Z.on(e,"input blur",this._toggleEmptinessEventHandler.bind(this))},_toggleEmptinessEventHandler(){const e=this._input().val(),t=(""===e||null===e)&&this._isValueValid();this._toggleEmptiness(t)},_valueChangeEventHandler(e,t){this.option("readOnly")||(this._saveValueChangeEvent(e),this.option("value",arguments.length>1?t:this._input().val()),this._saveValueChangeEvent(void 0))},_renderEnterKeyAction(){this._enterKeyAction=this._createActionByOption("onEnterKey",{excludeValidators:["readOnly"]}),m.Z.off(this._input(),"keyup.onEnterKey.dxTextEditor"),m.Z.on(this._input(),"keyup.onEnterKey.dxTextEditor",this._enterKeyHandlerUp.bind(this))},_enterKeyHandlerUp(e){this._disposed||"enter"===(0,v.normalizeKeyName)(e)&&this._enterKeyAction({event:e})},_updateValue(){this._options.silent("text",null),this._renderValue()},_dispose(){this._enterKeyAction=void 0,this.callBase()},_getSubmitElement(){return this._input()},_hasActiveElement(){return this._input().is(Fe.Z.getActiveElement(this._input()[0]))},_optionChanged(e){const{name:t,fullName:i,value:n}=e,o=t.replace("on","");if(Nr.includes(o))this._refreshEvents();else switch(t){case"valueChangeEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onValueChanged":this._createValueChangeAction();break;case"focusStateEnabled":this.callBase(e),this._toggleTabIndex();break;case"spellcheck":this._toggleSpellcheckState();break;case"mode":this._renderInputType();break;case"onEnterKey":this._renderEnterKeyAction();break;case"placeholder":this._renderPlaceholder(),this._setFieldAria(!0),this._input().attr({placeholder:this._getPlaceholderAttr()});break;case"label":this._label.updateText(n),this._setFieldAria(!0);break;case"labelMark":this._label.updateMark(n);break;case"labelMode":this._label.updateMode(n),this._setFieldAria();break;case"width":this.callBase(e),this._label.updateMaxWidth(this._getLabelContainerWidth());break;case"readOnly":case"disabled":this._updateButtons(),this.callBase(e);break;case"showClearButton":this._updateButtons(["clear"]);break;case"text":case"showValidationMark":break;case"value":this._updateValue(),this.callBase(e);break;case"inputAttr":this._applyInputAttributes(this._input(),this.option(t));break;case"stylingMode":this._renderStylingMode(),this._updateLabelWidth();break;case"buttons":i===t&&Zr(n),this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")),this._updateLabelWidth(),this._label.updateContainsButtonsBefore(!!this._$beforeButtonsContainer);break;case"visible":this.callBase(e),n&&this.option("buttons")&&(this._cleanButtonContainers(),this._renderButtonContainers(),this._updateButtonsStyling(this.option("stylingMode")));break;case"displayValueFormatter":this._invalidate();break;default:this.callBase(e)}},_renderInputType(){this._setInputType(this.option("mode"))},_setInputType(e){const t=this._input();"search"===e&&(e="text");try{t.prop("type",e)}catch(e){t.prop("type","text")}},getButton(e){return this._buttonCollection.getButton(e)},focus(){m.Z.trigger(this._input(),"focus")},clear(){this._showValidMark&&(this._showValidMark=!1,this._renderValidationState());const e=this._getDefaultOptions();this.option("value")===e.value?(this._options.silent("text",""),this._renderValue()):this.option("value",e.value)},_resetToInitialValue(){this.option("value")===this._initialValue?(this._options.silent("text",this._initialValue),this._renderValue()):this.callBase(),this._disposePendingIndicator(),this._showValidMark=!1,this._toggleValidMark()},_toggleValidMark(){this.$element().toggleClass("dx-valid",!!this._showValidMark)},reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;arguments.length?this.callBase(e):this.callBase()},on(e,t){const i=this.callBase(e,t),n=e.charAt(0).toUpperCase()+e.substr(1);return Nr.includes(n)&&this._refreshEvents(),i}}),Lr=Hr;class jr{constructor(e){this._value=" ",(0,f.l)(this,e)}next(e){if(!arguments.length)return this._next;this._next=e}_prepareHandlingArgs(e,t){t=t||{};const i=Object.prototype.hasOwnProperty.call(e,"value")?"value":"text";return e[i]=t.str??e[i],e.start=t.start??e.start,e.length=t.length??e.length,e.index+=1,e}first(e){return e=e||0,this.next().first(e+1)}isAccepted(e){return!1}adjustedCaret(e,t,i){return t?this._adjustedForward(e,0,i):this._adjustedBackward(e,0,i)}_adjustedForward(e,t,i){}_adjustedBackward(e,t,i){}isValid(e){}reset(){}clear(e){}text(){}value(){}rawValue(){}handle(e){}}class zr extends jr{next(){}handle(){return 0}text(){return""}value(){return""}first(){return 0}rawValue(){return""}adjustedCaret(){return 0}isValid(){return!0}}class Wr extends jr{text(){return(" "!==this._value?this._value:this.maskChar)+this.next().text()}value(){return this._value+this.next().value()}rawValue(){return this._value+this.next().rawValue()}handle(e){const t=Object.prototype.hasOwnProperty.call(e,"value")?e.value:e.text;if(!t||!t.length||!e.length)return 0;if(e.start)return this.next().handle(this._prepareHandlingArgs(e,{start:e.start-1}));const i=t[0],n=t.substring(1);return this._tryAcceptChar(i,e),this._accepted()?this.next().handle(this._prepareHandlingArgs(e,{str:n,length:e.length-1}))+1:this.handle(this._prepareHandlingArgs(e,{str:n,length:e.length-1}))}clear(e){this._tryAcceptChar(" ",e),this.next().clear(this._prepareHandlingArgs(e))}reset(){this._accepted(!1),this.next().reset()}_tryAcceptChar(e,t){if(this._accepted(!1),!this._isAllowed(e,t))return;const i=" "===e?this.maskChar:e;t.fullText=t.fullText.substring(0,t.index)+i+t.fullText.substring(t.index+1),this._accepted(!0),this._value=e}_accepted(e){if(!arguments.length)return!!this._isAccepted;this._isAccepted=!!e}first(e){return" "===this._value?e||0:super.first(e)}_isAllowed(e,t){return" "===e||this._isValid(e,t)}_isValid(e,t){const{allowedChars:i}=this;return i instanceof RegExp?i.test(e):(0,_.mf)(i)?i(e,t.index,t.fullText):Array.isArray(i)?i.includes(e):i===e}isAccepted(e){return 0===e?this._accepted():this.next().isAccepted(e-1)}_adjustedForward(e,t,i){return t>=e?t:this.next()._adjustedForward(e,t+1,i)||t+1}_adjustedBackward(e,t){return t>=e-1?e:this.next()._adjustedBackward(e,t+1)||t+1}isValid(e){return this._isValid(this._value,e)&&this.next().isValid(this._prepareHandlingArgs(e))}}class Kr extends Wr{value(){return this.next().value()}handle(e){const t=Object.prototype.hasOwnProperty.call(e,"value"),i=t?e.value:e.text;if(!i.length||!e.length)return 0;if(e.start||t)return this.next().handle(this._prepareHandlingArgs(e,{start:e.start&&e.start-1}));const n=i[0],o=i.substring(1);this._tryAcceptChar(n);const r=this._isAllowed(n)?this._prepareHandlingArgs(e,{str:o,length:e.length-1}):e;return this.next().handle(r)+1}clear(e){this._accepted(!1),this.next().clear(this._prepareHandlingArgs(e))}_tryAcceptChar(e){this._accepted(this._isValid(e))}_isValid(e){return e===this.maskChar}first(e){return e=e||0,this.next().first(e+1)}_adjustedForward(e,t,i){return t>=e&&i===this.maskChar?t:e===t+1&&this._accepted()?e:this.next()._adjustedForward(e,t+1,i)}_adjustedBackward(e,t){return t>=e-1?0:this.next()._adjustedBackward(e,t+1)}isValid(e){return this.next().isValid(this._prepareHandlingArgs(e))}}const qr=["deleteContentBackward","deleteSoftLineBackward","deleteContent","deleteHardLineBackward"],Ur=["historyUndo","historyRedo"],Gr=["focusIn","focusOut","input","paste","cut","drop","beforeInput"];function Yr(e){return" ".repeat(e)}class Qr{constructor(e){this.editor=e}_editorOption(){return this.editor.option(...arguments)}_editorInput(){return this.editor._input()}_editorCaret(e){if(!e)return this.editor._caret();this.editor._caret(e)}_attachChangeEventHandler(){if(!this._editorOption("valueChangeEvent").split(" ").includes("change"))return;const e=this._editorInput(),t=(0,v.addNamespace)("blur beforedeactivate","dxMask");m.Z.on(e,t,(e=>{this.editor._changeHandler(e)}))}_beforeInputHandler(){this._previousText=this._editorOption("text"),this._prevCaret=this._editorCaret()}_inputHandler(e){const{originalEvent:t}=e;if(!t)return;const{inputType:i}=t;if(Ur.includes(i))this._handleHistoryInputEvent();else if(qr.includes(i))this._handleBackwardDeleteInputEvent();else{const e=this._editorCaret();if(!e.end)return;this._clearSelectedText(),this._autoFillHandler(t),this._editorCaret(e),this._handleInsertTextInputEvent(t.data)}this._editorOption("text")===this._previousText&&e.stopImmediatePropagation()}_handleHistoryInputEvent(){const e=this._editorCaret();this._updateEditorMask({start:e.start,length:e.end-e.start,text:""}),this._editorCaret(this._prevCaret)}_handleBackwardDeleteInputEvent(){this._clearSelectedText();const e=this._editorCaret();this.editor.setForwardDirection(),this.editor._adjustCaret(),this._editorCaret().start!==e.start&&(this.editor.setBackwardDirection(),this.editor._adjustCaret())}_clearSelectedText(){var e,t;const i=(null===(e=this._prevCaret)||void 0===e?void 0:e.end)-(null===(t=this._prevCaret)||void 0===t?void 0:t.start)||1,n=this._editorCaret();this._isAutoFill()||(this.editor.setBackwardDirection(),this._updateEditorMask({start:n.start,length:i,text:Yr(i)}))}_handleInsertTextInputEvent(e){var t;const i=e??"";this.editor.setForwardDirection(),this._updateEditorMask({start:(null===(t=this._prevCaret)||void 0===t?void 0:t.start)??0,length:i.length||1,text:i})||this._editorCaret(this._prevCaret)}_updateEditorMask(e){const t=e.text.length,i=this.editor._handleChain(e);if(this.editor._displayMask(),this.editor.isForwardDirection()){const{start:e,end:n}=this._editorCaret(),o=i-t;i>1&&1===t&&this._editorCaret({start:e+o,end:n+o}),this.editor._adjustCaret()}return!!i}_focusInHandler(){if(this.editor._showMaskPlaceholder(),this.editor.setForwardDirection(),!this.editor._isValueEmpty()&&this._editorOption("isValid"))this.editor._adjustCaret();else{const e=this.editor._maskRulesChain.first();this._caretTimeout=setTimeout((()=>{this._editorCaret({start:e,end:e})}),0)}}_focusOutHandler(e){this.editor._changeHandler(e),"onFocus"===this._editorOption("showMaskMode")&&this.editor._isValueEmpty()&&(this._editorOption("text",""),this.editor._renderDisplayText(""))}_delHandler(e){const{editor:t}=this;t._maskKeyHandler(e,(()=>{t._hasSelection()||t._handleKey(" ")}))}_cutHandler(e){const t=this._editorCaret(),i=this._editorInput().val().substring(t.start,t.end);this.editor._maskKeyHandler(e,(()=>(0,F.clipboardText)(e,i)))}_dropHandler(){this._clearDragTimer(),this._dragTimer=setTimeout((()=>{const e=this.editor._convertToValue(this._editorInput().val());this._editorOption("value",e)}))}_pasteHandler(e){const{editor:t}=this;if(this._editorOption("disabled"))return;const i=this._editorCaret();t._maskKeyHandler(e,(()=>{const n=(0,F.clipboardText)(e),o=t._maskRulesChain.text().substring(i.end),r=t._handleChain({text:n,start:i.start,length:n.length}),s=i.start+r;t._handleChain({text:o,start:s,length:o.length}),t._caret({start:s,end:s})}))}_autoFillHandler(e){const{editor:t}=this,i=this._editorInput().val();this._inputHandlerTimer=setTimeout((()=>{this._isAutoFill()&&(t._maskKeyHandler(e,(()=>{t._handleChain({text:i,start:0,length:i.length})})),t._validateMask())}))}_isAutoFill(){const e=this._editorInput();if(Be.default.webkit){const t=e.get(0);return(null==t?void 0:t.matches(":-webkit-autofill"))??!1}return!1}_clearDragTimer(){clearTimeout(this._dragTimer)}_clearTimers(){this._clearDragTimer(),clearTimeout(this._caretTimeout),clearTimeout(this._inputHandlerTimer)}getHandler(e){return t=>{var i;null===(i=this[`_${e}Handler`])||void 0===i||i.call(this,t)}}attachEvents(){const e=this._editorInput();Gr.forEach((t=>{const i=(0,v.addNamespace)(t.toLowerCase(),"dxMask");m.Z.on(e,i,this.getHandler(t))})),this._attachChangeEventHandler()}detachEvents(){this._clearTimers(),m.Z.off(this._editorInput(),".dxMask")}clean(){this._clearTimers()}}const{ios:Xr,mac:Jr}=a.default.real(),es=Xr||Jr,ts=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e=(0,c.Z)(e).get(0),!(0,_.$K)(t))return function(e){let t;try{t={start:e.selectionStart,end:e.selectionEnd}}catch(e){t={start:0,end:0}}return t}(e);!i&&es&&Fe.Z.getActiveElement(e)!==e||function(e,t){const i=Fe.Z.getBody();if(i.contains(e)||i.contains(e.getRootNode().host))try{e.selectionStart=t.start,e.selectionEnd=t.end}catch(e){}}(e,t)},is={0:/[0-9]/,9:/[0-9\s]/,"#":/[-+0-9\s]/,L:e=>os(e),l:e=>os(e)||rs(e),C:/\S/,c:/./,A:e=>os(e)||ns(e),a:e=>os(e)||ns(e)||rs(e)};function ns(e){return/[0-9]/.test(e)}function os(e){const t=e.charCodeAt();return t>64&&t<91||t>96&&t<123||t>127}function rs(e){return" "===e}const ss=Lr.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{mask:"",maskChar:"_",maskRules:{},maskInvalidMessage:z.Z.format("validation-mask"),useMaskedValue:!1,showMaskMode:"always"})},_supportedKeys(){const e=this,t={del:e._maskStrategy.getHandler("del"),enter:e._changeHandler},i=e.callBase();return(0,j.each)(t,((t,n)=>{const o=i[t];i[t]=function(t){e.option("mask")&&n.call(e,t),o&&o(t)}})),i},_getSubmitElement(){return this.option("mask")?this._$hiddenElement:this.callBase()},_init(){this.callBase(),this._initMaskStrategy()},_initMaskStrategy(){this._maskStrategy=new Qr(this)},_initMarkup(){this._renderHiddenElement(),this.callBase()},_attachMouseWheelEventHandlers(){if(this._onMouseWheel===u.noop)return;const e=this._input(),t=(0,v.addNamespace)(Or.u,this.NAME),i=this._createAction((t=>{const{event:i}=t;(0,lr.si)(e)&&!(0,v.isCommandKeyPressed)(i)&&(this._onMouseWheel(i),i.preventDefault(),i.stopPropagation())}));m.Z.off(e,t),m.Z.on(e,t,(e=>{i({event:e})}))},_onMouseWheel:u.noop,_useMaskBehavior(){return Boolean(this.option("mask"))},_attachDropEventHandler(){if(!this._useMaskBehavior())return;const e=(0,v.addNamespace)("drop",this.NAME),t=this._input();m.Z.off(t,e),m.Z.on(t,e,(e=>e.preventDefault()))},_render(){this._attachMouseWheelEventHandlers(),this._renderMask(),this.callBase(),this._attachDropEventHandler()},_renderHiddenElement(){this.option("mask")&&(this._$hiddenElement=(0,c.Z)("<input>").attr("type","hidden").appendTo(this._inputWrapper()))},_removeHiddenElement(){this._$hiddenElement&&this._$hiddenElement.remove()},_renderMask(){this.$element().removeClass("dx-texteditor-masked"),this._maskRulesChain=null,this._maskStrategy.detachEvents(),this.option("mask")&&(this.$element().addClass("dx-texteditor-masked"),this._maskStrategy.attachEvents(),this._parseMask(),this._renderMaskedValue())},_changeHandler(e){const t=this._input(),i=t.val();if(i===this._changedValue)return;this._changedValue=i;const n=(0,v.createEvent)(e,{type:"change"});m.Z.trigger(t,n)},_parseMask(){this._maskRules=(0,f.l)({},is,this.option("maskRules")),this._maskRulesChain=this._parseMaskRule(0)},_parseMaskRule(e){const t=this.option("mask");if(e>=t.length)return new zr;const i=t[e],n="\\"===i,o=n?new Kr({maskChar:t[e+1]}):this._getMaskRule(i);return o.next(this._parseMaskRule(e+1+n)),o},_getMaskRule(e){let t;return(0,j.each)(this._maskRules,((i,n)=>{if(i===e)return t={pattern:i,allowedChars:n},!1})),(0,_.$K)(t)?new Wr((0,f.l)({maskChar:this.option("maskChar")||" "},t)):new Kr({maskChar:e})},_renderMaskedValue(){if(!this._maskRulesChain)return;const e=this.option("value")||"";this._maskRulesChain.clear(this._normalizeChainArguments());const t={length:e.length};t[this._isMaskedValueMode()?"text":"value"]=e,this._handleChain(t),this._displayMask()},_replaceSelectedText:(e,t,i)=>void 0===i?e:e.slice(0,t.start)+i+e.slice(t.end),_isMaskedValueMode(){return this.option("useMaskedValue")},_displayMask(e){e=e||this._caret(),this._renderValue(),this._caret(e)},_isValueEmpty(){return(0,re.isEmpty)(this._value)},_shouldShowMask(){return"onFocus"!==this.option("showMaskMode")||(0,lr.si)(this._input())||!this._isValueEmpty()},_showMaskPlaceholder(){if(this._shouldShowMask()){const e=this._maskRulesChain.text();this.option("text",e),"onFocus"===this.option("showMaskMode")&&this._renderDisplayText(e)}},_renderValue(){if(this._maskRulesChain&&(this._showMaskPlaceholder(),this._$hiddenElement)){const e=this._maskRulesChain.value(),t=(0,re.isEmpty)(e)?"":this._getPreparedValue();this._$hiddenElement.val(t)}return this.callBase()},_getPreparedValue(){return this._convertToValue().replace(/\s+$/,"")},_valueChangeEventHandler(e){this._maskRulesChain?(this._saveValueChangeEvent(e),this.option("value",this._getPreparedValue())):this.callBase.apply(this,arguments)},_isControlKeyFired(e){return this._isControlKey((0,v.normalizeKeyName)(e))||(0,v.isCommandKeyPressed)(e)},_handleChain(e){const t=this._maskRulesChain.handle(this._normalizeChainArguments(e));return this._updateMaskInfo(),t},_normalizeChainArguments(e){return(e=e||{}).index=0,e.fullText=this._maskRulesChain.text(),e},_convertToValue(e){return this._isMaskedValueMode()?this._replaceMaskCharWithEmpty(e||this._textValue||""):e||this._value||""},_replaceMaskCharWithEmpty(e){return e.replace(new RegExp(this.option("maskChar"),"g")," ")},_maskKeyHandler(e,t){if(this.option("readOnly"))return;this.setForwardDirection(),e.preventDefault(),this._handleSelection();const i=this._input().val(),n=()=>{i!==this._input().val()&&m.Z.trigger(this._input(),"input")},o=t();o?o.then(n):(this.setForwardDirection(),this._adjustCaret(),this._displayMask(),this._maskRulesChain.reset(),n())},_handleKey(e,t){this._direction(t||"forward"),this._adjustCaret(e),this._handleKeyChain(e),this._moveCaret()},_handleSelection(){if(!this._hasSelection())return;const e=this._caret(),t=new Array(e.end-e.start+1).join(" ");this._handleKeyChain(t)},_handleKeyChain(e){const t=this._caret(),i=this.isForwardDirection()?t.start:t.start-1,n=this.isForwardDirection()?t.end:t.end-1,o=i===n?1:n-i;this._handleChain({text:e,start:i,length:o})},_tryMoveCaretBackward(){this.setBackwardDirection();const e=this._caret().start;return this._adjustCaret(),!e||e!==this._caret().start},_adjustCaret(e){const t=this._caret().start,i=this.isForwardDirection(),n=this._maskRulesChain.adjustedCaret(t,i,e);this._caret({start:n,end:n})},_moveCaret(){const e=this._caret().start,t=e+(this.isForwardDirection()?0:-1),i=this._maskRulesChain.isAccepted(t)?e+(this.isForwardDirection()?1:-1):e;this._caret({start:i,end:i})},_caret(e,t){const i=this._input();if(i.length)return arguments.length?void ts(i,e,t):ts(i)},_hasSelection(){const e=this._caret();return e.start!==e.end},_direction(e){if(!arguments.length)return this._typingDirection;this._typingDirection=e},setForwardDirection(){this._direction("forward")},setBackwardDirection(){this._direction("backward")},isForwardDirection(){return"forward"===this._direction()},_updateMaskInfo(){this._textValue=this._maskRulesChain.text(),this._value=this._maskRulesChain.value()},_clean(){this._maskStrategy&&this._maskStrategy.clean(),this.callBase()},_validateMask(){if(!this._maskRulesChain)return;const e=(0,re.isEmpty)(this.option("value"))||this._maskRulesChain.isValid(this._normalizeChainArguments());this.option({isValid:e,validationError:e?null:{editorSpecific:!0,message:this.option("maskInvalidMessage")}})},_updateHiddenElement(){this._removeHiddenElement(),this.option("mask")&&(this._input().removeAttr("name"),this._renderHiddenElement()),this._setSubmitElementName(this.option("name"))},_updateMaskOption(){this._updateHiddenElement(),this._renderMask(),this._validateMask(),this._refreshValueChangeEvent()},_processEmptyMask(e){if(e)return;const t=this.option("value");this.option({text:t,isValid:!0,validationError:null}),this.validationRequest.fire({value:t,editor:this}),this._renderValue()},_optionChanged(e){switch(e.name){case"mask":this._updateMaskOption(),this._processEmptyMask(e.value);break;case"maskChar":case"maskRules":case"useMaskedValue":this._updateMaskOption();break;case"value":this._renderMaskedValue(),this._validateMask(),this.callBase(e),this._changedValue=this._input().val();break;case"maskInvalidMessage":break;case"showMaskMode":this.option("text",""),this._renderValue();break;default:this.callBase(e)}},clear(){const{value:e}=this._getDefaultOptions();this.option("value")===e&&this._renderMaskedValue(),this.callBase()}}),as=ss;(0,r.default)("dxTextEditor",as);const ls=as,cs=(0,Z.getWindow)(),ds=["backspace","tab","enter","pageUp","pageDown","end","home","leftArrow","rightArrow","downArrow","upArrow","del"],hs=ls.inherit({ctor(e,t){t&&(this._showClearButton=t.showClearButton),this.callBase.apply(this,arguments)},_getDefaultOptions(){return(0,f.l)(this.callBase(),{value:"",mode:"text",maxLength:null})},_initMarkup(){this.$element().addClass("dx-textbox"),this.callBase(),this.setAria("role","textbox")},_renderInputType(){this.callBase(),this._renderSearchMode()},_useTemplates:()=>!1,_renderProps(){this.callBase(),this._toggleMaxLengthProp()},_toggleMaxLengthProp(){const e=this._getMaxLength();e&&e>0?this._input().attr("maxLength",e):this._input().removeAttr("maxLength")},_renderSearchMode(){const e=this._$element;"search"===this.option("mode")?(e.addClass("dx-searchbox"),this._renderSearchIcon(),void 0===this._showClearButton&&(this._showClearButton=this.option("showClearButton"),this.option("showClearButton",!0))):(e.removeClass("dx-searchbox"),this._$searchIcon&&this._$searchIcon.remove(),this.option("showClearButton",void 0===this._showClearButton?this.option("showClearButton"):this._showClearButton),delete this._showClearButton)},_renderSearchIcon(){const e=(0,c.Z)("<div>").addClass("dx-icon").addClass("dx-icon-search");e.prependTo(this._input().parent()),this._$searchIcon=e},_getLabelContainerWidth(){if(this._$searchIcon){const e=this._input().parent();return(0,oe.dz)(e)-this._getLabelBeforeWidth()}return this.callBase()},_getLabelBeforeWidth(){let e=this.callBase();return this._$searchIcon&&(e+=(0,oe.Y_)(this._$searchIcon)),e},_optionChanged(e){switch(e.name){case"maxLength":this._toggleMaxLengthProp();break;case"mode":this.callBase(e),this._updateLabelWidth();break;case"mask":this.callBase(e),this._toggleMaxLengthProp();break;default:this.callBase(e)}},_onKeyDownCutOffHandler(e){const t=this._getMaxLength();if(t&&!e.ctrlKey&&!this._hasSelection()){const i=(0,c.Z)(e.target),n=(0,v.normalizeKeyName)(e);return this._cutOffExtraChar(i),i.val().length<t||ds.includes(n)||""!==cs.getSelection().toString()}return!0},_onChangeCutOffHandler(e){const t=(0,c.Z)(e.target);this.option("maxLength")&&this._cutOffExtraChar(t)},_cutOffExtraChar(e){const t=this._getMaxLength(),i=e.val();t&&i.length>t&&e.val(i.substr(0,t))},_getMaxLength(){return this.option("mask")?null:this.option("maxLength")}});(0,r.default)("dxTextBox",hs);const us=hs,ps=["imageSrc","src"],fs="phone"===a.default.current().deviceType,_s="user";class ms{constructor(e,t){this.module=e,this.config=t??{},this.quill=this.module.quill,this.editorInstance=this.module.editorInstance}render(){this.editorInstance._formDialog&&(this.editorInstance._formDialog.beforeAddButtonAction=()=>this.getCurrentTab().upload()),this.tabPanelIndex=0,this.formData=this.getFormData(),this.isUpdating=this.isImageUpdating(),this.tabsModel=this.createTabsModel(this.config.tabs),this.tabs=this.createTabs(this.formData);const e=this.getFormConfig();this.updatePopupConfig(),this.updateAddButtonState(),this.editorInstance.showFormDialog(e).done(((e,t)=>{this.tabs[this.getActiveTabIndex()].strategy.pasteImage(e,t)})).always((()=>{this.resetDialogPopupOptions(),this.quill.focus()}))}getCurrentTab(){return this.tabs[this.tabPanelIndex]}updateAddButtonState(){const e=this.getCurrentTab().isDisableButton();this.setAddButtonDisabled(e)}setAddButtonDisabled(e){this.editorInstance.formDialogOption({"toolbarItems[0].options.disabled":e})}getActiveTabIndex(){return this.isUpdating?0:this.tabPanelIndex}getFormData(){return this.getUpdateDialogFormData(this.quill.getFormat())}getUpdateDialogFormData(e){const{imageSrc:t,src:i}=e,o=(0,an.Z)(e,ps);return(0,n.Z)({src:t??i},o)}createUrlTab(e){return new vs(this.module,{config:this.config,formData:e,isUpdating:this.isUpdating},(()=>this.updateAddButtonState()))}createFileTab(){return new bs(this.module,{config:this.config},(()=>this.updateAddButtonState()))}createTabsModel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return 0===e.length||this.isUpdating?["url"]:e.map((e=>"object"==typeof e?e.name:e))}createTabs(e){return this.tabsModel.map((t=>"url"===t?this.createUrlTab(e):this.createFileTab()))}isImageUpdating(){return Object.prototype.hasOwnProperty.call(this.module.quill.getFormat()??{},"imageSrc")}updatePopupConfig(){let e="dx-htmleditor-add-image-popup dx-formdialog";this.useTabbedItems()&&(e+=" dx-htmleditor-add-image-popup-with-tabs");const t=this.isUpdating?"dxHtmlEditor-dialogUpdateImageCaption":"dxHtmlEditor-dialogImageCaption",i=this.isUpdating?"dxHtmlEditor-dialogImageUpdateButton":"dxHtmlEditor-dialogImageAddButton";this.editorInstance.formDialogOption({title:z.Z.format(t),"toolbarItems[0].options.text":z.Z.format(i),wrapperAttr:{class:e}})}resetDialogPopupOptions(){this.editorInstance.formDialogOption({"toolbarItems[0].options.text":z.Z.format("OK"),"toolbarItems[0].options.visible":!0,"toolbarItems[0].options.disabled":!1,wrapperAttr:{class:"dx-formdialog"}})}useTabbedItems(){return this.tabsModel.length>1}getFormWidth(){return fs?"100%":493}getFormConfig(){return{formData:this.formData,width:this.getFormWidth(),labelLocation:"top",colCount:this.useTabbedItems()?1:11,items:this.getItemsConfig()}}getItemsConfig(){return this.useTabbedItems()?[{itemType:"tabbed",tabPanelOptions:{onSelectionChanged:e=>{this.tabPanelIndex=e.component.option("selectedIndex"),this.updateAddButtonState()}},tabs:(0,j.map)(this.tabs,(e=>({title:e.getTabName(),colCount:11,items:e.getItemsConfig()})))}]:this.tabs[0].getItemsConfig()}}class gs{constructor(e,t,i){let{config:n,formData:o,isUpdating:r}=t;this.module=e,this.config=n,this.formData=o,this.isUpdating=r,this.onFileSelected=i,this.strategy=this.createStrategy()}getItemsConfig(){return this.strategy.getItemsConfig()}createStrategy(){return this.isUpdating?new ws(this.module,this.config,this.formData):new Cs(this.module,this.config,this.onFileSelected)}isDisableButton(){return!1}upload(){return this.strategy.upload()}}class vs extends gs{getTabName(){return z.Z.format("dxHtmlEditor-dialogImageSpecifyUrl")}}class bs extends gs{getTabName(){return z.Z.format("dxHtmlEditor-dialogImageSelectFile")}createStrategy(){return new xs(this.module,this.config,this.onFileSelected)}isDisableButton(){return!this.strategy.isValid()}}class ys{constructor(e,t){this.module=e,this.config=t,this.editorInstance=e.editorInstance,this.quill=e.quill,this.selection=this.getQuillSelection()}getQuillSelection(){return this.quill.getSelection()??{index:this.quill.getLength(),length:0}}pasteImage(e,t){}isValid(){return!0}upload(){}}class Cs extends ys{constructor(e,t,i){super(e,t,i),this.shouldKeepAspectRatio=!0}pasteImage(e,t){this.module.saveValueChangeEvent(t),Ss(this.quill,this.selection.index,e)}keepAspectRatio(e,t){let{dependentEditor:i,e:n}=t;const o=parseInt(n.value),r=parseInt(n.previousValue),s=parseInt(i.option("value"));e.component.updateData(e.dataField,o),this.shouldKeepAspectRatio&&s&&r&&!this.preventRecalculating&&(this.preventRecalculating=!0,i.option("value",Math.round(o*s/parseInt(r)).toString())),this.preventRecalculating=!1}createKeepAspectRatioEditor(e,t,i){return this.editorInstance._createComponent(e,us,(0,f.l)(!0,t.editorOptions,{value:t.component.option("formData")[t.dataField],onEnterKey:t.component.option("onEditorEnterKey").bind(this.editorInstance._formDialog,t),onValueChanged:e=>{this.keepAspectRatio(t,{dependentEditor:this[`${i}Editor`],e})}}))}upload(){return this.editorInstance._formDialog._form.validate().isValid}getItemsConfig(){const e=(0,Sn.dC)()?"text":"outlined";return[{dataField:"src",colSpan:11,label:{text:z.Z.format("dxHtmlEditor-dialogImageUrlField")},validationRules:[{type:"required"},{type:"stringLength",min:1}]},{dataField:"width",colSpan:6,label:{text:z.Z.format("dxHtmlEditor-dialogImageWidthField")},template:t=>{const i=(0,c.Z)("<div>").addClass("dx-fix-ratio-container"),n=(0,c.Z)("<div>").appendTo(i);this.widthEditor=this.createKeepAspectRatioEditor(n,t,"height");const o=(0,c.Z)("<div>").appendTo(i);return this.editorInstance._createComponent(o,Er,{items:[{icon:"imgarlock",value:"keepRatio"}],hint:z.Z.format("dxHtmlEditor-dialogImageKeepAspectRatio"),focusStateEnabled:!1,keyExpr:"value",stylingMode:e,selectionMode:"multiple",selectedItemKeys:["keepRatio"],onSelectionChanged:e=>{this.shouldKeepAspectRatio=!!e.component.option("selectedItems").length}}),i}},{dataField:"height",colSpan:5,label:{text:z.Z.format("dxHtmlEditor-dialogImageHeightField")},template:e=>{const t=(0,c.Z)("<div>");return this.heightEditor=this.createKeepAspectRatioEditor(t,e,"width"),t}},{dataField:"alt",colSpan:11,label:{text:z.Z.format("dxHtmlEditor-dialogImageAltField")}}]}}class ws extends Cs{constructor(e,t,i,n){super(e,t,n),this.formData=i,this.modifyFormData()}modifyFormData(){const{imageSrc:e}=this.quill.getFormat(this.selection.index-1,1);e&&0!==this.selection.index||(this.selection={index:this.selection.index+1,length:0},this.quill.setSelection(this.selection.index,this.selection.length,"silent"));const t=this.quill.getLeaf(this.selection.index)[0].domNode;t&&(this.formData.width=this.formData.width??(0,oe.dz)((0,c.Z)(t)),this.formData.height=this.formData.height??(0,oe.Cr)((0,c.Z)(t)))}pasteImage(e,t){this.quill.deleteText(this.embedFormatIndex(),1,"silent"),this.selection.index-=1,super.pasteImage(e,t)}embedFormatIndex(){const e=this.selection??this.quill.getSelection();return e?e.length?e.index:e.index-1:this.quill.getLength()}}class xs extends ys{constructor(e,t,i){super(e,t,i),this.useBase64=!(0,_.$K)(this.config.fileUploadMode)||"base64"===this.config.fileUploadMode,this.isValidInternal=!1,this.onFileSelected=i,this.data=null}upload(){return this.useBase64?this.base64Upload(this.data):this.data.value.length&&this.data.component.upload(),!0}isValid(){return this.isValidInternal}onUploaded(e){Is(this.config.uploadDirectory,e.file.name,this.quill,this.selection.index)}base64Upload(e){this.quill.getModule("uploader").upload(this.selection,e.value,!0)}pasteImage(e,t){this.useBase64&&super.pasteImage(e,t)}isBase64Editable(){return"both"===this.config.fileUploadMode}validate(e){const t=e.component;this.isValidInternal=!t._files.some((e=>!e.isValid())),0===t._files.length&&(this.isValidInternal=!1)}getFileUploaderOptions(){const e={uploadUrl:this.config.uploadUrl,onValueChanged:e=>{this.validate(e),this.data=e,this.onFileSelected()},onUploaded:e=>this.onUploaded(e)};return(0,f.l)({},{value:[],name:"dx-htmleditor-image",accept:"image/*",uploadMode:"useButtons"},e,this.config.fileUploaderOptions)}getItemsConfig(){return[{itemType:"simple",dataField:"files",colSpan:11,label:{visible:!1},template:()=>{const e=(0,c.Z)("<div>");return this.module.editorInstance._createComponent(e,Mo,this.getFileUploaderOptions()),e}},{itemType:"simple",colSpan:11,label:{visible:!1},editorType:"dxCheckBox",editorOptions:{value:this.useBase64,visible:this.isBase64Editable(),text:z.Z.format("dxHtmlEditor-dialogImageEncodeToBase64"),onValueChanged:e=>{this.isBase64Editable()&&(this.useBase64=e.value)}}}]}}function Ss(e,t,i){e.insertEmbed(t,"extendedImage",i,_s),e.setSelection(t+1,0,_s)}function Is(e,t,i,n){if(e){const o=function(e){return"/"!==e[e.length-1]?`${e}/`:e}(e)+t;Ss(i,n,{src:o})}}const ks="dxHtmlEditorImageUpload";let Es=Pe;be()&&(Es=class extends Pe{constructor(e,t){super(e,t),this.options=t,this._quillContainer=this.editorInstance._getQuillContainer(),this.addCleanCallback(this.prepareCleanCallback()),this._handleServerUpload()}_handleServerUpload(){(0,_.$K)(this.options.fileUploadMode)&&"base64"!==this.options.fileUploadMode?this._enableDragAndDropUploading():this._disableDragAndDropUploading()}_getUploaderModule(){return this._uploaderModule||(this._uploaderModule=this.quill.getModule("uploader")),this._uploaderModule}_disableDragAndDropUploading(){var e;this._getUploaderModule().preventImageUploading(!1),this._detachEvents(),null===(e=this._fileUploader)||void 0===e||e.dispose()}_enableDragAndDropUploading(){this._initFileUploader(),this._getUploaderModule().preventImageUploading(!0),this._attachEvents()}_initFileUploader(){const e=(0,c.Z)("<div>").addClass("dx-htmleditor-hidden-content").appendTo(this._quillContainer),t=(0,f.l)({},{value:[],name:"dx-htmleditor-image",accept:"image/*",uploadMode:"useButtons"},{uploadUrl:this.options.uploadUrl,onUploaded:this._onUploaded.bind(this)},this.options.fileUploaderOptions);return this._fileUploader=this.editorInstance._createComponent(e,Mo,t),e}_onUploaded(e){const{index:t}=this.quill.getSelection()??{index:this.quill.getLength()};Is(this.options.uploadDirectory,e.file.name,this.quill,t)}_attachEvents(){m.Z.on(this.quill.root,(0,v.addNamespace)("drop",ks),this._dropHandler.bind(this)),m.Z.on(this.quill.root,(0,v.addNamespace)("paste",ks),this._pasteHandler.bind(this))}_detachEvents(){m.Z.off(this.quill.root,ks)}_dropHandler(e){this._handleInsertImages(e,"dataTransfer")}_pasteHandler(e){this._handleInsertImages(e,"clipboardData")}_handleInsertImages(e,t){this.saveValueChangeEvent(e);const i=Array.from(e.originalEvent[t].files||[]);i.length&&(e.preventDefault(),e.stopPropagation(),this._fileUploader.option("value",i),this._fileUploader.upload())}clean(){this._disableDragAndDropUploading()}prepareCleanCallback(){return()=>{this.clean()}}option(e,t){switch(e){case"imageUpload":this.handleOptionChangeValue(t);break;case"fileUploadMode":this.options.fileUploadMode=t,this._handleServerUpload();break;case"fileUploaderOptions":this._fileUploader.option(t)}}});const Os=Es;class Ts{constructor(){this._storage={}}set(e,t){let{editorKey:i,marker:n}=e;var o;(o=this._storage)[i]??(o[i]={}),this._storage[i][n]=t}get(e){var t,i;let{editorKey:n,marker:o}=e;return(0,_.$K)(n)?null===(i=this._storage[n])||void 0===i?void 0:i[o]:null===(t=Object.values(this._storage).at(-1))||void 0===t?void 0:t[o]}delete(e){let{editorKey:t,marker:i}=e;this._storage[t]&&(delete this._storage[t][i],(0,_.Qr)(this._storage[t])&&delete this._storage[t])}}let Ds={};if(be()){const e=be().import("blots/embed"),t="dx-mention";Ds=class t extends e{constructor(e,i){super(e,i),this.renderContent(this.contentNode,t.value(i))}static create(e){const t=super.create();return t.setAttribute("spellcheck",!1),t.dataset.marker=e.marker,t.dataset.mentionValue=e.value,t.dataset.id=e.id,t}static value(e){return{marker:e.dataset.marker,id:e.dataset.id,value:e.dataset.mentionValue}}renderContent(e,i){const n=t._templatesStorage.get({editorKey:i.keyInTemplateStorage,marker:i.marker});n?n.render({model:i,container:e}):this.baseContentRender(e,i)}baseContentRender(e,t){const i=(0,c.Z)("<span>").text(t.marker);(0,c.Z)(e).append(i).append(t.value)}static addTemplate(e,t){this._templatesStorage.set(e,t)}static removeTemplate(e){this._templatesStorage.delete(e)}},Ds.blotName="mention",Ds.tagName="span",Ds.className=t,Ds._templatesStorage=new Ts}const Bs=Ds;let As=("TextBox",class{constructor(){throw new Error("Module 'TextBox' not found")}static getInstance(){}});const Ps={_getDefaultOptions:function(){return(0,f.l)(this.callBase(),{searchMode:"",searchExpr:null,searchValue:"",searchEnabled:!1,searchEditorOptions:{}})},_initMarkup:function(){this._renderSearch(),this.callBase()},_renderSearch:function(){const e=this.$element(),t=this.option("searchEnabled"),i=this._addWidgetPrefix("search"),n=this._addWidgetPrefix("with-search");if(!t)return e.removeClass(n),void this._removeSearchBox();const o=this._getSearchEditorOptions();this._searchEditor?this._searchEditor.option(o):(e.addClass(n),this._$searchEditorElement=(0,c.Z)("<div>").addClass(i).prependTo(e),this._searchEditor=this._createComponent(this._$searchEditorElement,As,o))},_removeSearchBox:function(){this._$searchEditorElement&&this._$searchEditorElement.remove(),delete this._$searchEditorElement,delete this._searchEditor},_getSearchEditorOptions:function(){const e=this,t=e.option("searchEditorOptions"),i=z.Z.format("Search");return(0,f.l)({mode:"search",placeholder:i,tabIndex:e.option("tabIndex"),value:e.option("searchValue"),valueChangeEvent:"input",inputAttr:{"aria-label":i},onValueChanged:function(t){const i=e.option("searchTimeout");e._valueChangeDeferred=new p.BH,clearTimeout(e._valueChangeTimeout),e._valueChangeDeferred.done(function(){this.option("searchValue",t.value)}.bind(e)),t.event&&"input"===t.event.type&&i?e._valueChangeTimeout=setTimeout((function(){e._valueChangeDeferred.resolve()}),i):e._valueChangeDeferred.resolve()}},t)},_getAriaTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_focusTarget:function(){return this.option("searchEnabled")?this._itemContainer(!0):this.callBase()},_updateFocusState:function(e,t){this.option("searchEnabled")&&this._toggleFocusClass(t,this.$element()),this.callBase(e,t)},getOperationBySearchMode:function(e){return"equals"===e?"=":e},_optionChanged:function(e){switch(e.name){case"searchEnabled":case"searchEditorOptions":this._invalidate();break;case"searchExpr":case"searchMode":case"searchValue":if(!this._dataSource)return void ge.Z.log("W1009");"searchMode"===e.name?this._dataSource.searchOperation(this.getOperationBySearchMode(e.value)):this._dataSource[e.name](e.value),this._dataSource.load();break;case"searchTimeout":break;default:this.callBase(e)}},focus:function(){this.option("focusedElement")||!this.option("searchEnabled")?this.callBase():this._searchEditor&&this._searchEditor.focus()},_cleanAria:function(){const e=this.$element();this.setAria({role:null,activedescendant:null},e),e.attr("tabIndex",null)},_clean(){this.callBase(),this._cleanAria()},_refresh:function(){this._valueChangeDeferred&&this._valueChangeDeferred.resolve(),this.callBase()},setEditorClass:function(e){As=e}},Ms="dxswipestart",Rs="dxswipe",$s="dxswipeend",Ns={horizontal:{defaultItemSizeFunc:function(){return(0,oe.dz)(this.getElement())},getBounds:function(){return[this._maxLeftOffset,this._maxRightOffset]},calcOffsetRatio:function(e){return((0,v.eventData)(e).x-(this._savedEventData&&this._savedEventData.x||0))/this._itemSizeFunc().call(this,e)},isFastSwipe:function(e){const t=(0,v.eventData)(e);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(t.x-this._tickData.x)>=t.time-this._tickData.time}},vertical:{defaultItemSizeFunc:function(){return(0,oe.Cr)(this.getElement())},getBounds:function(){return[this._maxTopOffset,this._maxBottomOffset]},calcOffsetRatio:function(e){return((0,v.eventData)(e).y-(this._savedEventData&&this._savedEventData.y||0))/this._itemSizeFunc().call(this,e)},isFastSwipe:function(e){const t=(0,v.eventData)(e);return this.FAST_SWIPE_SPEED_LIMIT*Math.abs(t.y-this._tickData.y)>=t.time-this._tickData.time}}},Vs=b.default.inherit({TICK_INTERVAL:300,FAST_SWIPE_SPEED_LIMIT:10,ctor:function(e){this.callBase(e),this.direction="horizontal",this.elastic=!0},_getStrategy:function(){return Ns[this.direction]},_defaultItemSizeFunc:function(){return this._getStrategy().defaultItemSizeFunc.call(this)},_itemSizeFunc:function(){return this.itemSizeFunc||this._defaultItemSizeFunc},_init:function(e){this._tickData=(0,v.eventData)(e)},_start:function(e){this._savedEventData=(0,v.eventData)(e),(e=this._fireEvent("dxswipestart",e)).cancel||(this._maxLeftOffset=e.maxLeftOffset,this._maxRightOffset=e.maxRightOffset,this._maxTopOffset=e.maxTopOffset,this._maxBottomOffset=e.maxBottomOffset)},_move:function(e){const t=this._getStrategy(),i=(0,v.eventData)(e);let n=t.calcOffsetRatio.call(this,e);n=this._fitOffset(n,this.elastic),i.time-this._tickData.time>this.TICK_INTERVAL&&(this._tickData=i),this._fireEvent("dxswipe",e,{offset:n}),!1!==e.cancelable&&e.preventDefault()},_end:function(e){const t=this._getStrategy(),i=t.calcOffsetRatio.call(this,e),n=t.isFastSwipe.call(this,e);let o=i,r=this._calcTargetOffset(i,n);o=this._fitOffset(o,this.elastic),r=this._fitOffset(r,!1),this._fireEvent("dxswipeend",e,{offset:o,targetOffset:r})},_fitOffset:function(e,t){const i=this._getStrategy().getBounds.call(this);return e<-i[0]?t?(-2*i[0]+e)/3:-i[0]:e>i[1]?t?(2*i[1]+e)/3:i[1]:e},_calcTargetOffset:function(e,t){let i;return t?(i=Math.ceil(Math.abs(e)),e<0&&(i=-i)):i=Math.round(e),i}});function Fs(e,t){const i=(n=e)&&(0,Z.hasWindow)()?null===(o=(r=(0,Z.getWindow)()).getComputedStyle)||void 0===o?void 0:o.call(r,n):null;var n,o,r,s;return i&&(s=i[`margin${(0,En.titleize)(t)}`])?Number(s.replace("px","")):0}(0,y.Z)({emitter:Vs,events:["dxswipestart","dxswipe","dxswipeend"]});var Zs=i(6559),Hs=i(1413);const Ls=Cr.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{repaintChangesOnly:!1})},ctor(){var e;this.callBase.apply(this,arguments),this._customizeStoreLoadOptions=e=>{this._dataController.getDataSource()&&!this._dataController.isLoaded()&&(this._correctionIndex=0),this._correctionIndex&&e.storeLoadOptions&&(e.storeLoadOptions.skip+=this._correctionIndex)},null===(e=this._dataController)||void 0===e||e.on("customizeStoreLoadOptions",this._customizeStoreLoadOptions)},reload(){this._correctionIndex=0},_init(){this.callBase(),this._refreshItemsCache(),this._correctionIndex=0},_findItemElementByKey(e){let t=(0,c.Z)();const i=this.key();return this.itemElements().each(((n,o)=>{const r=(0,c.Z)(o),s=this._getItemData(r);if(i?(0,Hs.OI)(i,this.keyOf(s),e):this._isItemEquals(s,e))return t=r,!1})),t},_dataSourceChangedHandler(e,t){null!=t&&t.changes?this._modifyByChanges(t.changes):(this.callBase(e,t),this._refreshItemsCache())},_isItemEquals(e,t){e&&e.__dx_key__&&(e=e.data);try{return JSON.stringify(e)===JSON.stringify(t)}catch(i){return e===t}},_isItemStrictEquals(e,t){return this._isItemEquals(e,t)},_shouldAddNewGroup(e,t){let i=!1;return this.option("grouped")&&(e.length||(i=!0),(0,j.each)(e,((e,n)=>{"insert"===n.type&&(i=!0,(0,j.each)(t,((e,t)=>{if(void 0!==n.data.key&&n.data.key===t.key)return i=!1,!1})))}))),i},_partialRefresh(){if(this.option("repaintChangesOnly")){const e=e=>e&&void 0!==e.__dx_key__?e.__dx_key__:this.keyOf(e),t=function(e,t,i,n){const o={},r={};let s=0,a=0;const l=[];e.forEach((function(e,t){const n=zo(e,i);o[n]=t})),t.forEach((function(e,t){const n=zo(e,i);r[n]=t}));const c=Math.max(e.length,t.length);for(let d=0;d<c+s;d++){const c=t[d],h=d-s+a,u=e[h];if(!c||u&&!Wo(u,t,r,i))u&&(l.push({type:"remove",key:i(u),index:d,oldItem:u}),a++,d--);else{const t=zo(c,i),r=o[t],a=e[r];if(a){if(r!==h)return;n(a,c)||l.push({type:"update",data:c,key:i(c),index:d,oldItem:a})}else s++,l.push({type:"insert",data:c,index:d})}}return l}(this._itemsCache,this._editStrategy.itemsGetter(),e,this._isItemStrictEquals.bind(this));if(t&&this._itemsCache.length&&!this._shouldAddNewGroup(t,this._itemsCache))return this._modifyByChanges(t,!0),this._renderEmptyMessage(),!0;this._refreshItemsCache()}return!1},_refreshItemsCache(){if(this.option("repaintChangesOnly")){const e=this._editStrategy.itemsGetter();try{this._itemsCache=(0,f.l)(!0,[],e),this.key()||(this._itemsCache=this._itemsCache.map(((t,i)=>({__dx_key__:e[i],data:t}))))}catch(t){this._itemsCache=(0,f.l)([],e)}}},_dispose(){this._dataController.off("customizeStoreLoadOptions",this._customizeStoreLoadOptions),this.callBase()},_updateByChange(e,t,i,n){if(n)this._renderItem(i.index,i.data,null,this._findItemElementByKey(i.key));else{const n=t[(0,Zs.qk)(e,t,i.key)];n&&(0,Zs.Vx)(e,t,i.key,i.data).done((()=>{this._renderItem(t.indexOf(n),n,null,this._findItemElementByKey(i.key))}))}},_insertByChange(e,t,i,n){(0,p.gx)(n||(0,Zs.$T)(e,t,i.data,i.index)).done((()=>{this._beforeItemElementInserted(i),this._renderItem(i.index??t.length,i.data),this._afterItemElementInserted(),this._correctionIndex++}))},_updateSelectionAfterRemoveByChange(e){const t=this.option("selectedIndex");t>e?this.option("selectedIndex",t-1):t===e&&1===this.option("selectedItems").length?this.option("selectedItems",[]):this._normalizeSelectedItems()},_beforeItemElementInserted(e){const t=this.option("selectedIndex");e.index<=t&&this.option("selectedIndex",t+1)},_afterItemElementInserted:u.noop,_removeByChange(e,t,i,n){const o=n?i.index:(0,Zs.qk)(e,t,i.key);if(n?i.oldItem:t[o]){const e=this._findItemElementByKey(i.key),t=this._extendActionArgs(e);this._waitDeletingPrepare(e).done((()=>{n?(this._updateIndicesAfterIndex(o-1),this._afterItemElementDeleted(e,t),this._updateSelectionAfterRemoveByChange(o)):(this._deleteItemElementByIndex(o),this._afterItemElementDeleted(e,t))})),this._correctionIndex--}},_modifyByChanges(e,t){const i=this._editStrategy.itemsGetter(),n={key:this.key.bind(this),keyOf:this.keyOf.bind(this)},o=this._dataController,r=o.paginate(),s=o.group();(r||s)&&(e=e.filter((e=>"insert"!==e.type||void 0!==e.index))),e.forEach((e=>this[`_${e.type}ByChange`](n,i,e,t))),this._renderedItemsCount=i.length,this._refreshItemsCache(),this._fireContentReadyAction()},_appendItemToContainer(e,t,i){const n=e.children(this._itemSelector()).get(i);Fe.Z.insertElement(e.get(0),t.get(0),n)},_optionChanged(e){switch(e.name){case"items":this._partialRefresh(e.value)||this.callBase(e);break;case"dataSource":this.option("repaintChangesOnly")&&e.value||this.option("items",[]),this.callBase(e);break;case"repaintChangesOnly":break;default:this.callBase(e)}}}),js=Ls;var zs=i(3487),Ws=i(4497),Ks=i(2222);const qs="dxScrollbar",Us="horizontal",Gs="onScroll",Ys="onHover",Qs="always",Xs="never";let Js=null;const ea=de.default.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{direction:null,visible:!1,activeStateEnabled:!1,visibilityMode:Gs,containerSize:0,contentSize:0,expandable:!0,scaleRatio:1})},_init(){this.callBase(),this._isHovered=!1},_initMarkup(){this._renderThumb(),this.callBase()},_render(){this.callBase(),this._renderDirection(),this._update(),this._attachPointerDownHandler(),this.option("hoverStateEnabled",this._isHoverMode()),this.$element().toggleClass("dx-scrollbar-hoverable",this.option("hoverStateEnabled"))},_renderThumb(){this._$thumb=(0,c.Z)("<div>").addClass("dx-scrollable-scroll"),(0,c.Z)("<div>").addClass("dx-scrollable-scroll-content").appendTo(this._$thumb),this.$element().addClass("dx-scrollable-scrollbar").append(this._$thumb)},isThumb(e){return!!this.$element().find(e).length},_isHoverMode(){const e=this.option("visibilityMode");return(e===Ys||e===Qs)&&this.option("expandable")},_renderDirection(){const e=this.option("direction");this.$element().addClass(`dx-scrollbar-${e}`),this._dimension=e===Us?"width":"height",this._prop=e===Us?"left":"top"},_attachPointerDownHandler(){m.Z.on(this._$thumb,(0,v.addNamespace)($.Z.down,qs),this.feedbackOn.bind(this))},feedbackOn(e){null==e||e.preventDefault(),this.$element().addClass("dx-scrollable-scrollbar-active"),Js=this},feedbackOff(){this.$element().removeClass("dx-scrollable-scrollbar-active"),Js=null},cursorEnter(){this._isHovered=!0,this._needScrollbar()&&this.option("visible",!0)},cursorLeave(){this._isHovered=!1,this.option("visible",!1)},_renderDimensions(){this._$thumb.css({width:this.option("width"),height:this.option("height")})},_toggleVisibility(e){this.option("visibilityMode")===Gs&&this._$thumb.css("opacity"),e=this._adjustVisibility(e),this.option().visible=e,this._$thumb.toggleClass("dx-state-invisible",!e)},_adjustVisibility(e){if(this._baseContainerToContentRatio&&!this._needScrollbar())return!1;switch(this.option("visibilityMode")){case Gs:break;case Ys:e=e||!!this._isHovered;break;case Xs:e=!1;break;case Qs:e=!0}return e},moveTo(e){if(this._isHidden())return;(0,_.PO)(e)&&(e=e[this._prop]||0);const t={};t[this._prop]=this._calculateScrollBarPosition(e),(0,Ws.pB)(this._$thumb,t)},_calculateScrollBarPosition(e){return-e*this._thumbRatio},_update(){const e=Math.round(this.option("containerSize")),t=Math.round(this.option("contentSize"));let i=Math.round(this.option("baseContainerSize")),n=Math.round(this.option("baseContentSize"));isNaN(i)&&(i=e,n=t),this._baseContainerToContentRatio=n?i/n:i,this._realContainerToContentRatio=t?e/t:e;const o=Math.round(Math.max(Math.round(e*this._realContainerToContentRatio),15));this._thumbRatio=(e-o)/(this.option("scaleRatio")*(t-e)),this.option(this._dimension,o/this.option("scaleRatio")),this.$element().css("display",this._needScrollbar()?"":"none")},_isHidden(){return this.option("visibilityMode")===Xs},_needScrollbar(){return!this._isHidden()&&this._baseContainerToContentRatio<1},containerToContentRatio(){return this._realContainerToContentRatio},_normalizeSize(e){return(0,_.PO)(e)?e[this._dimension]||0:e},_clean(){this.callBase(),this===Js&&(Js=null),m.Z.off(this._$thumb,`.${qs}`)},_optionChanged(e){if(!this._isHidden())switch(e.name){case"containerSize":case"contentSize":this.option()[e.name]=this._normalizeSize(e.value),this._update();break;case"baseContentSize":case"baseContainerSize":case"scaleRatio":this._update();break;case"visibilityMode":case"direction":this._invalidate();break;default:this.callBase.apply(this,arguments)}},update:(0,u.deferRenderer)((function(){this._adjustVisibility()&&this.option("visible",!0)}))});Ks.default.add((()=>{m.Z.subscribeGlobal(Fe.Z.getDocument(),(0,v.addNamespace)($.Z.up,qs),(()=>{Js&&Js.feedbackOff()}))}));const ta=ea,ia="dxNativeScrollable",na="vertical",oa="horizontal",ra=g.default.inherit({ctor(e){this._init(e)},_init(e){this._component=e,this._$element=e.$element(),this._$container=(0,c.Z)(e.container()),this._$content=e.$content(),this._direction=e.option("direction"),this._useSimulatedScrollbar=e.option("useSimulatedScrollbar"),this.option=e.option.bind(e),this._createActionByOption=e._createActionByOption.bind(e),this._isLocked=e._isLocked.bind(e),this._isDirection=e._isDirection.bind(e),this._allowedDirection=e._allowedDirection.bind(e),this._getMaxOffset=e._getMaxOffset.bind(e),this._isRtlNativeStrategy=e._isRtlNativeStrategy.bind(e)},render(){const e=a.default.real().platform;this._$element.addClass("dx-scrollable-native").addClass(`dx-scrollable-native-${e}`).toggleClass("dx-scrollable-scrollbars-hidden",!this._isScrollbarVisible()),this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._renderScrollbars()},updateRtlPosition(e){e&&this.option("rtlEnabled")&&this._isScrollbarVisible()&&this._useSimulatedScrollbar&&this._moveScrollbars()},_renderScrollbars(){this._scrollbars={},this._hideScrollbarTimeout=0,this._$element.addClass("dx-scrollable-scrollbar-simulated"),this._renderScrollbar(na),this._renderScrollbar(oa)},_renderScrollbar(e){this._isDirection(e)&&(this._scrollbars[e]=new ta((0,c.Z)("<div>").appendTo(this._$element),{direction:e,expandable:this._component.option("scrollByThumb")}))},handleInit:u.noop,handleStart:u.noop,handleMove(e){this._isLocked()?e.cancel=!0:this._allowedDirection()&&(e.originalEvent.isScrollingEvent=!0)},handleEnd:u.noop,handleCancel:u.noop,handleStop:u.noop,_eachScrollbar(e){e=e.bind(this),(0,j.each)(this._scrollbars||{},((t,i)=>{e(i,t)}))},createActions(){this._scrollAction=this._createActionByOption("onScroll"),this._updateAction=this._createActionByOption("onUpdated")},_createActionArgs(){const{left:e,top:t}=this.location();return{event:this._eventForUserAction,scrollOffset:this._getScrollOffset(),reachedLeft:this._isRtlNativeStrategy()?this._isReachedRight(-e):this._isReachedLeft(e),reachedRight:this._isRtlNativeStrategy()?this._isReachedLeft(-Math.abs(e)):this._isReachedRight(e),reachedTop:this._isDirection(na)?Math.round(t)>=0:void 0,reachedBottom:this._isDirection(na)?Math.round(Math.abs(t)-this._getMaxOffset().top)>=0:void 0}},_getScrollOffset(){const{top:e,left:t}=this.location();return{top:-e,left:this._normalizeOffsetLeft(-t)}},_normalizeOffsetLeft(e){return this._isRtlNativeStrategy()?this._getMaxOffset().left+e:e},_isReachedLeft(e){return this._isDirection(oa)?Math.round(e)>=0:void 0},_isReachedRight(e){return this._isDirection(oa)?Math.round(Math.abs(e)-this._getMaxOffset().left)>=0:void 0},_isScrollbarVisible(){const{showScrollbar:e}=this.option();return"never"!==e&&!1!==e},handleScroll(e){this._eventForUserAction=e,this._moveScrollbars(),this._scrollAction(this._createActionArgs())},_moveScrollbars(){const{top:e,left:t}=this._getScrollOffset();this._eachScrollbar((i=>{i.moveTo({top:-e,left:-t}),i.option("visible",!0)})),this._hideScrollbars()},_hideScrollbars(){clearTimeout(this._hideScrollbarTimeout),this._hideScrollbarTimeout=setTimeout((()=>{this._eachScrollbar((e=>{e.option("visible",!1)}))}),500)},location(){return{left:-this._$container.scrollLeft(),top:-this._$container.scrollTop()}},disabledChanged:u.noop,update(){this._update(),this._updateAction(this._createActionArgs())},_update(){this._updateDimensions(),this._updateScrollbars()},_updateDimensions(){this._containerSize={height:(0,oe.Cr)(this._$container),width:(0,oe.dz)(this._$container)},this._componentContentSize={height:(0,oe.Cr)(this._component.$content()),width:(0,oe.dz)(this._component.$content())},this._contentSize={height:(0,oe.Cr)(this._$content),width:(0,oe.dz)(this._$content)}},_updateScrollbars(){this._eachScrollbar((function(e,t){const i=t===na?"height":"width";e.option({containerSize:this._containerSize[i],contentSize:this._componentContentSize[i]}),e.update()}))},_allowedDirections(){return{vertical:this._isDirection(na)&&this._contentSize.height>this._containerSize.height,horizontal:this._isDirection(oa)&&this._contentSize.width>this._containerSize.width}},dispose(){const{className:e}=this._$element.get(0),t=new RegExp("dx-scrollable-native\\S*","g");t.test(e)&&this._$element.removeClass(e.match(t).join(" ")),m.Z.off(this._$element,`.${ia}`),m.Z.off(this._$container,`.${ia}`),this._removeScrollbars(),clearTimeout(this._hideScrollbarTimeout)},_removeScrollbars(){this._eachScrollbar((e=>{e.$element().remove()}))},scrollBy(e){const t=this.location();this._$container.scrollTop(Math.round(-t.top-e.top)),this._$container.scrollLeft(Math.round(-t.left-e.left))},validate(e){return!(this.option("disabled")||(0,v.isDxMouseWheelEvent)(e)&&this._isScrolledInMaxDirection(e)||!this._allowedDirection())},_isScrolledInMaxDirection(e){const t=this._$container.get(0);let i;return i=e.delta>0?e.shiftKey?!t.scrollLeft:!t.scrollTop:e.shiftKey?t.scrollLeft>=this._getMaxOffset().left:t.scrollTop>=this._getMaxOffset().top,i},getDirection(){return this._allowedDirection()}}),sa=ra,aa=sa.inherit({_init(e){this.callBase(e),this._$topPocket=e._$topPocket,this._$pullDown=e._$pullDown,this._$refreshingText=e._$refreshingText,this._$scrollViewContent=(0,c.Z)(e.content()),this._$container=(0,c.Z)(e.container()),this._initCallbacks()},_initCallbacks(){this.pullDownCallbacks=(0,h.Z)(),this.releaseCallbacks=(0,h.Z)(),this.reachBottomCallbacks=(0,h.Z)()},render(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown(){const e=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-image"),t=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),i=new Dr.Z((0,c.Z)("<div>")).$element(),n=this._$pullDownText=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=(0,c.Z)("<div>").text(this.option("pullingDownText")).appendTo(n),this._$pulledDownText=(0,c.Z)("<div>").text(this.option("pulledDownText")).appendTo(n),this._$refreshingText=(0,c.Z)("<div>").text(this.option("refreshingText")).appendTo(n),this._$pullDown.empty().append(e).append(t.append(i)).append(n)},_releaseState(){this._state=0,this._refreshPullDownText()},_refreshPullDownText(){const e=this,t=[{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}];(0,j.each)(t,((t,i)=>{const n=e._state===i.visibleState?"addClass":"removeClass";i.element[n]("dx-scrollview-pull-down-text-visible")}))},update(){this.callBase(),this._setTopPocketOffset()},_updateDimensions(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const e=this._$scrollViewContent.get(0),t=this._$container.get(0);this._bottomBoundary=Math.max(e.clientHeight-t.clientHeight,0)},_allowedDirections(){const e=this.callBase();return e.vertical=e.vertical||this._pullDownEnabled,e},_setTopPocketOffset(){this._$topPocket.css({top:-this._topPocketSize})},handleEnd(){this.callBase(),this._complete()},handleStop(){this.callBase(),this._complete()},_complete(){1===this._state&&(this._setPullDownOffset(this._topPocketSize),clearTimeout(this._pullDownRefreshTimeout),this._pullDownRefreshTimeout=setTimeout((()=>{this._pullDownRefreshing()}),400))},_setPullDownOffset(e){(0,Ws.pB)(this._$topPocket,{top:e}),(0,Ws.pB)(this._$scrollViewContent,{top:e})},handleScroll(e){if(this.callBase(e),2===this._state)return;const t=this.location().top,i=(this._location||0)-t;this._location=t,this._isPullDown()?this._pullDownReady():i>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()},_isPullDown(){return this._pullDownEnabled&&this._location>=this._topPocketSize},_isReachBottom(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom(){3!==this._state&&(this._state=3,this.reachBottomCallbacks.fire())},_pullDownReady(){1!==this._state&&(this._state=1,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())},_stateReleased(){0!==this._state&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._releaseState())},_pullDownRefreshing(){2!==this._state&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())},pullDownEnable(e){e&&(this._updateDimensions(),this._setTopPocketOffset()),this._pullDownEnabled=e},reachBottomEnable(e){this._reachBottomEnabled=e},pendingRelease(){this._state=1},release(){const e=(0,p.BH)();return this._updateDimensions(),clearTimeout(this._releaseTimeout),3===this._state&&(this._state=0),this._releaseTimeout=setTimeout((()=>{this._setPullDownOffset(0),this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),e.resolve()}),400),e.promise()},dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),la=aa,ca=sa.inherit({_init(e){this.callBase(e),this._$topPocket=e._$topPocket,this._$pullDown=e._$pullDown,this._$scrollViewContent=(0,c.Z)(e.content()),this._$container=(0,c.Z)(e.container()),this._initCallbacks(),this._location=0},_initCallbacks(){this.pullDownCallbacks=(0,h.Z)(),this.releaseCallbacks=(0,h.Z)(),this.reachBottomCallbacks=(0,h.Z)()},render(){this.callBase(),this._renderPullDown(),this._releaseState()},_renderPullDown(){const e=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),t=new Dr.Z((0,c.Z)("<div>")).$element();this._$icon=(0,c.Z)("<div>").addClass("dx-icon-pulldown"),this._$pullDown.empty().append(this._$icon).append(e.append(t))},_releaseState(){this._state=0,this._releasePullDown(),this._updateDimensions()},_releasePullDown(){this._$pullDown.css({opacity:0})},_updateDimensions(){this.callBase(),this._topPocketSize=this._$topPocket.get(0).clientHeight;const e=this._$scrollViewContent.get(0),t=this._$container.get(0);this._bottomBoundary=Math.max(e.clientHeight-t.clientHeight,0)},_allowedDirections(){const e=this.callBase();return e.vertical=e.vertical||this._pullDownEnabled,e},handleInit(e){this.callBase(e),0===this._state&&0===this._location&&(this._startClientY=(0,v.eventData)(e.originalEvent).y,this._state=4)},handleMove(e){this.callBase(e),this._deltaY=(0,v.eventData)(e.originalEvent).y-this._startClientY,4===this._state&&(this._pullDownEnabled&&this._deltaY>0?this._state=5:this._complete()),5===this._state&&(e.preventDefault(),this._movePullDown())},_movePullDown(){const e=this._getPullDownHeight(),t=Math.min(3*e,this._deltaY+this._getPullDownStartPosition()),i=180*t/e/3;this._$pullDown.css({opacity:1}).toggleClass("dx-scrollview-pull-down-refreshing",t<e),(0,Ws.pB)(this._$pullDown,{top:t}),this._$icon.css({transform:`rotate(${i}deg)`})},_isPullDown(){return this._pullDownEnabled&&5===this._state&&this._deltaY>=this._getPullDownHeight()-this._getPullDownStartPosition()},_getPullDownHeight(){return Math.round(.05*(0,oe.zp)(this._$element))},_getPullDownStartPosition(){return-Math.round(1.5*(0,oe.zp)(this._$pullDown))},handleEnd(){this._isPullDown()&&this._pullDownRefreshing(),this._complete()},handleStop(){this._complete()},_complete(){4!==this._state&&5!==this._state||this._releaseState()},handleScroll(e){if(this.callBase(e),2===this._state)return;const t=this.location().top,i=this._location-t;this._location=t,i>0&&this._isReachBottom()?this._reachBottom():this._stateReleased()},_isReachBottom(){return this._reachBottomEnabled&&Math.round(this._bottomBoundary+Math.floor(this._location))<=1},_reachBottom(){this.reachBottomCallbacks.fire()},_stateReleased(){0!==this._state&&(this._$pullDown.removeClass("dx-scrollview-pull-down-loading"),this._releaseState())},_pullDownRefreshing(){this._state=2,this._pullDownRefreshHandler()},_pullDownRefreshHandler(){this._refreshPullDown(),this.pullDownCallbacks.fire()},_refreshPullDown(){this._$pullDown.addClass("dx-scrollview-pull-down-loading"),(0,Ws.pB)(this._$pullDown,{top:this._getPullDownHeight()})},pullDownEnable(e){this._$topPocket.toggle(e),this._pullDownEnabled=e},reachBottomEnable(e){this._reachBottomEnabled=e},pendingRelease(){this._state=1},release(){const e=(0,p.BH)();return this._updateDimensions(),clearTimeout(this._releaseTimeout),this._releaseTimeout=setTimeout((()=>{this._stateReleased(),this.releaseCallbacks.fire(),this._updateAction(),e.resolve()}),800),e.promise()},dispose(){clearTimeout(this._pullDownRefreshTimeout),clearTimeout(this._releaseTimeout),this.callBase()}}),{abstract:da}=g.default,ha=g.default.inherit({ctor(){this._finished=!0,this._stopped=!1,this._proxiedStepCore=this._stepCore.bind(this)},start(){this._stopped=!1,this._finished=!1,this._stepCore()},stop(){this._stopped=!0,(0,C.cancelAnimationFrame)(this._stepAnimationFrame)},_stepCore(){if(this._isStopped())this._stop();else{if(this._isFinished())return this._finished=!0,void this._complete();this._step(),this._stepAnimationFrame=(0,C.requestAnimationFrame)(this._proxiedStepCore)}},_step:da,_isFinished:u.noop,_stop:u.noop,_complete:u.noop,_isStopped(){return this._stopped},inProgress(){return!(this._stopped||this._finished)}}),ua="dxSimulatedScrollable",pa=`${ua}Cursor`,fa=`${ua}Keyboard`,_a="vertical",ma="horizontal",ga=(1-.92**(400/Math.round(1e3/60)))/(1-.92),va=ha.inherit({ctor(e){this.callBase(),this.scroller=e},VELOCITY_LIMIT:1,_isFinished(){return Math.abs(this.scroller._velocity)<=this.VELOCITY_LIMIT},_step(){this.scroller._scrollStep(this.scroller._velocity),this.scroller._velocity*=this._acceleration()},_acceleration(){return this.scroller._inBounds()?.92:.5},_complete(){this.scroller._scrollComplete()}}),ba=va.inherit({VELOCITY_LIMIT:.2,_isFinished(){return this.scroller._crossBoundOnNextStep()||this.callBase()},_acceleration:()=>.92,_complete(){this.scroller._move(this.scroller._bounceLocation),this.callBase()}}),ya=g.default.inherit({ctor(e){this._initOptions(e),this._initAnimators(),this._initScrollbar()},_initOptions(e){this._location=0,this._topReached=!1,this._bottomReached=!1,this._axis=e.direction===ma?"x":"y",this._prop=e.direction===ma?"left":"top",this._dimension=e.direction===ma?"width":"height",this._scrollProp=e.direction===ma?"scrollLeft":"scrollTop",(0,j.each)(e,((e,t)=>{this[`_${e}`]=t}))},_initAnimators(){this._inertiaAnimator=new va(this),this._bounceAnimator=new ba(this)},_initScrollbar(){this._scrollbar=new ta((0,c.Z)("<div>").appendTo(this._$container),{direction:this._direction,visible:this._scrollByThumb,visibilityMode:this._visibilityModeNormalize(this._scrollbarVisible),expandable:this._scrollByThumb}),this._$scrollbar=this._scrollbar.$element()},_visibilityModeNormalize:e=>!0===e?"onScroll":!1===e?"never":e,_scrollStep(e){const t=this._location;this._location+=e,this._suppressBounce(),this._move(),Math.abs(t-this._location)<1||m.Z.triggerHandler(this._$container,{type:"scroll"})},_suppressBounce(){this._bounceEnabled||this._inBounds(this._location)||(this._velocity=0,this._location=this._boundLocation())},_boundLocation(e){return e=void 0!==e?e:this._location,Math.max(Math.min(e,this._maxOffset),this._minOffset)},_move(e){this._location=void 0!==e?e*this._getScaleRatio():this._location,this._moveContent(),this._moveScrollbar()},_moveContent(){const e=this._location;this._$container[this._scrollProp](-e/this._getScaleRatio()),this._moveContentByTranslator(e)},_getScaleRatio(){if((0,Z.hasWindow)()&&!this._scaleRatio){const e=this._$element.get(0),t=this._getRealDimension(e,this._dimension),i=this._getBaseDimension(e,this._dimension);this._scaleRatio=Math.round(t/i*100)/100}return this._scaleRatio||1},_getRealDimension:(e,t)=>Math.round((0,ne.l)(e)[t]),_getBaseDimension:(e,t)=>e[`offset${(0,En.titleize)(t)}`],_moveContentByTranslator(e){let t;const i=-this._maxScrollPropValue;if(t=e>0?e:e<=i?e-i:e%1,this._translateOffset===t)return;const n={};n[this._prop]=t,this._translateOffset=t,0!==t?(0,Ws.pB)(this._$content,n):(0,Ws.Kx)(this._$content)},_moveScrollbar(){this._scrollbar.moveTo(this._location)},_scrollComplete(){this._inBounds()&&(this._hideScrollbar(),this._completeDeferred&&this._completeDeferred.resolve()),this._scrollToBounds()},_scrollToBounds(){this._inBounds()||(this._bounceAction(),this._setupBounce(),this._bounceAnimator.start())},_setupBounce(){const e=(this._bounceLocation=this._boundLocation())-this._location;this._velocity=e/ga},_inBounds(e){return e=void 0!==e?e:this._location,this._boundLocation(e)===e},_crossBoundOnNextStep(){const e=this._location,t=e+this._velocity;return e<this._minOffset&&t>=this._minOffset||e>this._maxOffset&&t<=this._maxOffset},_initHandler(e){this._stopScrolling(),this._prepareThumbScrolling(e)},_stopScrolling:(0,u.deferRenderer)((function(){this._hideScrollbar(),this._inertiaAnimator.stop(),this._bounceAnimator.stop()})),_prepareThumbScrolling(e){if((0,v.isDxMouseWheelEvent)(e.originalEvent))return;const t=(0,c.Z)(e.originalEvent.target),i=this._isScrollbar(t);i&&this._moveToMouseLocation(e),this._thumbScrolling=i||this._isThumb(t),this._crossThumbScrolling=!this._thumbScrolling&&this._isAnyThumbScrolling(t),this._thumbScrolling&&this._scrollbar.feedbackOn()},_isThumbScrollingHandler(e){return this._isThumb(e)},_moveToMouseLocation(e){const t=e[`page${this._axis.toUpperCase()}`]-this._$element.offset()[this._prop],i=this._location+t/this._containerToContentRatio()-(0,oe.Cr)(this._$container)/2;this._scrollStep(-Math.round(i))},_startHandler(){this._showScrollbar()},_moveHandler(e){this._crossThumbScrolling||(this._thumbScrolling&&(e[this._axis]=-Math.round(e[this._axis]/this._containerToContentRatio())),this._scrollBy(e))},_scrollBy(e){e=e[this._axis],this._inBounds()||(e*=.5),this._scrollStep(e)},_scrollByHandler(e){this._scrollBy(e),this._scrollComplete()},_containerToContentRatio(){return this._scrollbar.containerToContentRatio()},_endHandler(e){return this._completeDeferred=(0,p.BH)(),this._velocity=e[this._axis],this._inertiaHandler(),this._resetThumbScrolling(),this._completeDeferred.promise()},_inertiaHandler(){this._suppressInertia(),this._inertiaAnimator.start()},_suppressInertia(){this._inertiaEnabled&&!this._thumbScrolling||(this._velocity=0)},_resetThumbScrolling(){this._thumbScrolling=!1,this._crossThumbScrolling=!1},_stopHandler(){this._thumbScrolling&&this._scrollComplete(),this._resetThumbScrolling(),this._scrollToBounds()},_disposeHandler(){this._stopScrolling(),this._$scrollbar.remove()},_updateHandler(){this._update(),this._moveToBounds()},_update(){return this._stopScrolling(),(0,u.deferUpdate)((()=>{this._resetScaleRatio(),this._updateLocation(),this._updateBounds(),this._updateScrollbar(),(0,u.deferRender)((()=>{this._moveScrollbar(),this._scrollbar.update()}))}))},_resetScaleRatio(){this._scaleRatio=null},_updateLocation(){this._location=((0,Ws.jt)(this._$content)[this._prop]-this._$container[this._scrollProp]())*this._getScaleRatio()},_updateBounds(){this._maxOffset=this._getMaxOffset(),this._minOffset=this._getMinOffset()},_getMaxOffset:()=>0,_getMinOffset(){return this._maxScrollPropValue=Math.max(this._contentSize()-this._containerSize(),0),-this._maxScrollPropValue},_updateScrollbar:(0,u.deferUpdater)((function(){const e=this._containerSize(),t=this._contentSize(),i=this._getBaseDimension(this._$container.get(0),this._dimension),n=this._getBaseDimension(this._$content.get(0),this._dimension);(0,u.deferRender)((()=>{this._scrollbar.option({containerSize:e,contentSize:t,baseContainerSize:i,baseContentSize:n,scaleRatio:this._getScaleRatio()})}))})),_moveToBounds:(0,u.deferRenderer)((0,u.deferUpdater)((0,u.deferRenderer)((function(){const e=this._boundLocation(),t=e!==this._location;this._location=e,this._move(),t&&this._scrollAction()})))),_createActionsHandler(e){this._scrollAction=e.scroll,this._bounceAction=e.bounce},_showScrollbar(){this._scrollbar.option("visible",!0)},_hideScrollbar(){this._scrollbar.option("visible",!1)},_containerSize(){return this._getRealDimension(this._$container.get(0),this._dimension)},_contentSize(){const e="hidden"===this._$content.css(`overflow${this._axis.toUpperCase()}`);let t=this._getRealDimension(this._$content.get(0),this._dimension);if(!e){const e=this._$content[0][`scroll${(0,En.titleize)(this._dimension)}`]*this._getScaleRatio();t=Math.max(e,t)}return t},_validateEvent(e){const t=(0,c.Z)(e.originalEvent.target);return this._isThumb(t)||this._isScrollbar(t)},_isThumb(e){return this._scrollByThumb&&this._scrollbar.isThumb(e)},_isScrollbar(e){return this._scrollByThumb&&e&&e.is(this._$scrollbar)},_reachedMin(){return Math.round(this._location-this._minOffset)<=0},_reachedMax(){return Math.round(this._location-this._maxOffset)>=0},_cursorEnterHandler(){this._resetScaleRatio(),this._updateScrollbar(),this._scrollbar.cursorEnter()},_cursorLeaveHandler(){this._scrollbar.cursorLeave()},dispose:u.noop});let Ca,wa;const xa=g.default.inherit({ctor(e){this._init(e)},_init(e){this._component=e,this._$element=e.$element(),this._$container=(0,c.Z)(e.container()),this._$wrapper=e._$wrapper,this._$content=e.$content(),this.option=e.option.bind(e),this._createActionByOption=e._createActionByOption.bind(e),this._isLocked=e._isLocked.bind(e),this._isDirection=e._isDirection.bind(e),this._allowedDirection=e._allowedDirection.bind(e),this._getMaxOffset=e._getMaxOffset.bind(e)},render(){this._$element.addClass("dx-scrollable-simulated"),this._createScrollers(),this.option("useKeyboard")&&this._$container.prop("tabIndex",0),this._attachKeyboardHandler(),this._attachCursorHandlers()},_createScrollers(){this._scrollers={},this._isDirection(ma)&&this._createScroller(ma),this._isDirection(_a)&&this._createScroller(_a),this._$element.toggleClass("dx-scrollable-scrollbars-alwaysvisible","always"===this.option("showScrollbar"))},_createScroller(e){this._scrollers[e]=new ya(this._scrollerOptions(e))},_scrollerOptions(e){return{direction:e,$content:this._$content,$container:this._$container,$wrapper:this._$wrapper,$element:this._$element,scrollByThumb:this.option("scrollByThumb"),scrollbarVisible:this.option("showScrollbar"),bounceEnabled:this.option("bounceEnabled"),inertiaEnabled:this.option("inertiaEnabled"),isAnyThumbScrolling:this._isAnyThumbScrolling.bind(this)}},_applyScaleRatio(e){for(const t in this._scrollers){const i=this._getPropByDirection(t);if((0,_.$K)(e[i])){const n=this._scrollers[t];e[i]*=n._getScaleRatio()}}return e},_isAnyThumbScrolling(e){let t=!1;return this._eventHandler("isThumbScrolling",e).done(((e,i)=>{t=e||i})),t},handleInit(e){this._suppressDirections(e),this._eventForUserAction=e,this._eventHandler("init",e)},_suppressDirections(e){(0,v.isDxMouseWheelEvent)(e.originalEvent)?this._prepareDirections(!0):(this._prepareDirections(),this._eachScroller((function(t,i){const n=(0,c.Z)(e.originalEvent.target),o=t._validateEvent(e)||this.option("scrollByContent")&&this._isContent(n);this._validDirections[i]=o})))},_isContent(e){return!!e.closest(this._$element).length},_prepareDirections(e){e=e||!1,this._validDirections={},this._validDirections[ma]=e,this._validDirections[_a]=e},_eachScroller(e){e=e.bind(this),(0,j.each)(this._scrollers,((t,i)=>{e(i,t)}))},handleStart(e){this._eventForUserAction=e,this._eventHandler("start").done(this._startAction)},_saveActive(){wa=this},_resetActive(){wa===this&&(wa=null)},handleMove(e){if(this._isLocked())return e.cancel=!0,void this._resetActive();this._saveActive(),e.preventDefault&&e.preventDefault(),this._adjustDistance(e,e.delta),this._eventForUserAction=e,this._eventHandler("move",e.delta)},_adjustDistance(e,t){t.x*=this._validDirections[ma],t.y*=this._validDirections[_a];const i=this._tryGetDevicePixelRatio();i&&(0,v.isDxMouseWheelEvent)(e.originalEvent)&&(t.x=Math.round(t.x/i*100)/100,t.y=Math.round(t.y/i*100)/100)},_tryGetDevicePixelRatio(){if((0,Z.hasWindow)())return(0,Z.getWindow)().devicePixelRatio},handleEnd(e){return this._resetActive(),this._refreshCursorState(e.originalEvent&&e.originalEvent.target),this._adjustDistance(e,e.velocity),this._eventForUserAction=e,this._eventHandler("end",e.velocity).done(this._endAction)},handleCancel(e){return this._resetActive(),this._eventForUserAction=e,this._eventHandler("end",{x:0,y:0})},handleStop(){this._resetActive(),this._eventHandler("stop")},handleScroll(){this._updateRtlConfig(),this._scrollAction()},_attachKeyboardHandler(){m.Z.off(this._$element,`.${fa}`),!this.option("disabled")&&this.option("useKeyboard")&&m.Z.on(this._$element,(0,v.addNamespace)("keydown",fa),this._keyDownHandler.bind(this))},_keyDownHandler(e){if(clearTimeout(this._updateHandlerTimeout),this._updateHandlerTimeout=setTimeout((()=>{"tab"===(0,v.normalizeKeyName)(e)&&this._eachScroller((e=>{e._updateHandler()}))})),!this._$container.is(Fe.Z.getActiveElement(this._$container.get(0))))return;let t=!0;switch((0,v.normalizeKeyName)(e)){case"downArrow":this._scrollByLine({y:1});break;case"upArrow":this._scrollByLine({y:-1});break;case"rightArrow":this._scrollByLine({x:1});break;case"leftArrow":this._scrollByLine({x:-1});break;case"pageDown":this._scrollByPage(1);break;case"pageUp":this._scrollByPage(-1);break;case"home":this._scrollToHome();break;case"end":this._scrollToEnd();break;default:t=!1}t&&(e.stopPropagation(),e.preventDefault())},_scrollByLine(e){const t=this._tryGetDevicePixelRatio();let i=40;t&&(i=Math.abs(i/t*100)/100),this.scrollBy({top:(e.y||0)*-i,left:(e.x||0)*-i})},_scrollByPage(e){const t=this._wheelProp(),i={},n="width"===this._dimensionByProp(t)?oe.dz:oe.Cr;i[t]=e*-n(this._$container),this.scrollBy(i)},_dimensionByProp:e=>"left"===e?"width":"height",_getPropByDirection:e=>e===ma?"left":"top",_scrollToHome(){const e={};e[this._wheelProp()]=0,this._component.scrollTo(e)},_scrollToEnd(){const e=this._wheelProp(),t={},i="width"===this._dimensionByProp(e)?oe.dz:oe.Cr;t[e]=i(this._$content)-i(this._$container),this._component.scrollTo(t)},createActions(){this._startAction=this._createActionHandler("onStart"),this._endAction=this._createActionHandler("onEnd"),this._updateAction=this._createActionHandler("onUpdated"),this._createScrollerActions()},_createScrollerActions(){this._scrollAction=this._createActionHandler("onScroll"),this._bounceAction=this._createActionHandler("onBounce"),this._eventHandler("createActions",{scroll:this._scrollAction,bounce:this._bounceAction})},_createActionHandler(e){const t=this._createActionByOption(e);return()=>{t((0,f.l)(this._createActionArgs(),arguments))}},_createActionArgs(){const{horizontal:e,vertical:t}=this._scrollers,i=this._getScrollOffset();return this._scrollOffset={top:t&&i.top,left:e&&i.left},{event:this._eventForUserAction,scrollOffset:this._scrollOffset,reachedLeft:e&&e._reachedMax(),reachedRight:e&&e._reachedMin(),reachedTop:t&&t._reachedMax(),reachedBottom:t&&t._reachedMin()}},_getScrollOffset(){return{top:-this.location().top,left:-this.location().left}},_eventHandler(e){const t=[].slice.call(arguments).slice(1),i=(0,j.map)(this._scrollers,(i=>i[`_${e}Handler`].apply(i,t)));return p.gx.apply(c.Z,i).promise()},location(){const e=(0,Ws.jt)(this._$content);return e.top-=this._$container.scrollTop(),e.left-=this._$container.scrollLeft(),e},disabledChanged(){this._attachCursorHandlers()},_attachCursorHandlers(){m.Z.off(this._$element,`.${pa}`),!this.option("disabled")&&this._isHoverMode()&&(m.Z.on(this._$element,(0,v.addNamespace)("mouseenter",pa),this._cursorEnterHandler.bind(this)),m.Z.on(this._$element,(0,v.addNamespace)("mouseleave",pa),this._cursorLeaveHandler.bind(this)))},_isHoverMode(){return"onHover"===this.option("showScrollbar")},_cursorEnterHandler(e){(e=e||{}).originalEvent=e.originalEvent||{},wa||e.originalEvent._hoverHandled||(Ca&&Ca._cursorLeaveHandler(),Ca=this,this._eventHandler("cursorEnter"),e.originalEvent._hoverHandled=!0)},_cursorLeaveHandler(e){Ca===this&&wa!==Ca&&(this._eventHandler("cursorLeave"),Ca=null,this._refreshCursorState(e&&e.relatedTarget))},_refreshCursorState(e){if(!this._isHoverMode()&&(!e||wa))return;const t=(0,c.Z)(e).closest(".dx-scrollable-simulated:not(.dx-state-disabled)"),i=t.length&&t.data("dxScrollableStrategy");Ca&&Ca!==i&&Ca._cursorLeaveHandler(),i&&i._cursorEnterHandler()},update(){const e=this._eventHandler("update").done(this._updateAction);return(0,p.gx)(e,(0,u.deferUpdate)((()=>{const e=this._allowedDirections();return(0,u.deferRender)((()=>{let t=e.vertical?"pan-x":"";t=e.horizontal?"pan-y":t,t=e.vertical&&e.horizontal?"none":t,this._$container.css("touchAction",t)})),(0,p.gx)().promise()})))},_allowedDirections(){const e=this.option("bounceEnabled"),t=this._scrollers[_a],i=this._scrollers[ma];return{vertical:t&&(t._minOffset<0||e),horizontal:i&&(i._minOffset<0||e)}},_updateBounds(){this._scrollers[ma]&&this._scrollers[ma]._updateBounds()},_isHorizontalAndRtlEnabled(){return this.option("rtlEnabled")&&this.option("direction")!==_a},updateRtlPosition(e){if(e&&(this._rtlConfig={scrollRight:0,clientWidth:this._$container.get(0).clientWidth,windowPixelRatio:this._getWindowDevicePixelRatio()}),this._updateBounds(),this._isHorizontalAndRtlEnabled()){let e=this._getMaxOffset().left-this._rtlConfig.scrollRight;e<=0&&(e=0,this._rtlConfig.scrollRight=this._getMaxOffset().left),this._getScrollOffset().left!==e&&(this._rtlConfig.skipUpdating=!0,this._component.scrollTo({left:e}),this._rtlConfig.skipUpdating=!1)}},_updateRtlConfig(){if(this._isHorizontalAndRtlEnabled()&&!this._rtlConfig.skipUpdating){const{clientWidth:e,scrollLeft:t}=this._$container.get(0),i=this._getWindowDevicePixelRatio();this._rtlConfig.windowPixelRatio===i&&this._rtlConfig.clientWidth===e&&(this._rtlConfig.scrollRight=this._getMaxOffset().left-t),this._rtlConfig.clientWidth=e,this._rtlConfig.windowPixelRatio=i}},_getWindowDevicePixelRatio:()=>(0,Z.hasWindow)()?(0,Z.getWindow)().devicePixelRatio:1,scrollBy(e){const t=this._scrollers[_a],i=this._scrollers[ma];t&&(e.top=t._boundLocation(e.top+t._location)-t._location),i&&(e.left=i._boundLocation(e.left+i._location)-i._location),this._prepareDirections(!0),this._startAction(),this._eventHandler("scrollBy",{x:e.left,y:e.top}),this._endAction(),this._updateRtlConfig()},validate(e){return(!(0,v.isDxMouseWheelEvent)(e)||!(0,v.isCommandKeyPressed)(e))&&!this.option("disabled")&&(!!this.option("bounceEnabled")||((0,v.isDxMouseWheelEvent)(e)?this._validateWheel(e):this._validateMove(e)))},_validateWheel(e){const t=this._scrollers[this._wheelDirection(e)],i=t._reachedMin(),n=t._reachedMax(),o=!i||!n,r=!i&&!n,s=i&&e.delta>0,a=n&&e.delta<0;let l=o&&(r||s||a);return l=l||void 0!==this._validateWheelTimer,l&&(clearTimeout(this._validateWheelTimer),this._validateWheelTimer=setTimeout((()=>{this._validateWheelTimer=void 0}),500)),l},_validateMove(e){return!(!this.option("scrollByContent")&&!(0,c.Z)(e.target).closest(".dx-scrollable-scrollbar").length)&&this._allowedDirection()},getDirection(e){return(0,v.isDxMouseWheelEvent)(e)?this._wheelDirection(e):this._allowedDirection()},_wheelProp(){return this._wheelDirection()===ma?"left":"top"},_wheelDirection(e){switch(this.option("direction")){case ma:return ma;case _a:return _a;default:return e&&e.shiftKey?ma:_a}},dispose(){this._resetActive(),Ca===this&&(Ca=null),this._eventHandler("dispose"),this._detachEventHandlers(),this._$element.removeClass("dx-scrollable-simulated"),this._eventForUserAction=null,clearTimeout(this._validateWheelTimer),clearTimeout(this._updateHandlerTimeout)},_detachEventHandlers(){m.Z.off(this._$element,`.${pa}`),m.Z.off(this._$container,`.${fa}`)}}),Sa=Math,Ia=ya.inherit({ctor(){this._topPocketSize=0,this._bottomPocketSize=0,this.callBase.apply(this,arguments),this._initCallbacks(),this._releaseState()},_releaseState(){this._state=0,this._refreshPullDownText()},_refreshPullDownText(){const e=this,t=[{element:this._$pullingDownText,visibleState:0},{element:this._$pulledDownText,visibleState:1},{element:this._$refreshingText,visibleState:2}];(0,j.each)(t,((t,i)=>{const n=e._state===i.visibleState?"addClass":"removeClass";i.element[n]("dx-scrollview-pull-down-text-visible")}))},_initCallbacks(){this.pullDownCallbacks=(0,h.Z)(),this.releaseCallbacks=(0,h.Z)(),this.reachBottomCallbacks=(0,h.Z)()},_updateBounds(){if("horizontal"!==this._direction){this._topPocketSize=this._$topPocket.get(0).clientHeight,this._bottomPocketSize=this._$bottomPocket.get(0).clientHeight;const e=this._$container.get(0),t=this._$content.get(0);this._bottomBoundary=Math.max(t.clientHeight-this._bottomPocketSize-e.clientHeight,0)}this.callBase()},_updateScrollbar(){this._scrollbar.option({containerSize:this._containerSize(),contentSize:this._contentSize()-this._topPocketSize-this._bottomPocketSize,scaleRatio:this._getScaleRatio()})},_moveContent(){this.callBase(),this._isPullDown()?this._pullDownReady():this._isReachBottom()?this._reachBottomReady():0!==this._state&&this._stateReleased()},_moveScrollbar(){this._scrollbar.moveTo(this._topPocketSize+this._location)},_isPullDown(){return this._pullDownEnabled&&this._location>=0},_isReachBottom(){const e=this._$container.get(0);return this._reachBottomEnabled&&Math.round(this._bottomBoundary-Math.ceil(e.scrollTop))<=1},_scrollComplete(){this._inBounds()&&1===this._state?this._pullDownRefreshing():this._inBounds()&&3===this._state?this._reachBottomLoading():this.callBase()},_reachBottomReady(){3!==this._state&&(this._state=3,this._minOffset=this._getMinOffset())},_getMaxOffset(){return-this._topPocketSize},_getMinOffset(){return Sa.min(this.callBase(),-this._topPocketSize)},_reachBottomLoading(){this.reachBottomCallbacks.fire()},_pullDownReady(){1!==this._state&&(this._state=1,this._maxOffset=0,this._$pullDown.addClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText())},_stateReleased(){0!==this._state&&(this._releaseState(),this._updateBounds(),this._$pullDown.removeClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this.releaseCallbacks.fire())},_pullDownRefreshing(){2!==this._state&&(this._state=2,this._$pullDown.addClass("dx-scrollview-pull-down-loading").removeClass("dx-scrollview-pull-down-ready"),this._refreshPullDownText(),this.pullDownCallbacks.fire())},_releaseHandler(){return 0===this._state&&this._moveToBounds(),this._update(),this._releaseTask&&this._releaseTask.abort(),this._releaseTask=(0,u.executeAsync)(this._release.bind(this)),this._releaseTask.promise},_release(){this._stateReleased(),this._scrollComplete()},_reachBottomEnablingHandler(e){this._reachBottomEnabled!==e&&(this._reachBottomEnabled=e,this._updateBounds())},_pullDownEnablingHandler(e){this._pullDownEnabled!==e&&(this._pullDownEnabled=e,this._considerTopPocketChange(),this._updateHandler())},_considerTopPocketChange(){this._location-=(0,oe.Cr)(this._$topPocket)||-this._topPocketSize,this._maxOffset=0,this._move()},_pendingReleaseHandler(){this._state=1},dispose(){this._releaseTask&&this._releaseTask.abort(),this.callBase()}}),ka=xa.inherit({_init(e){this.callBase(e),this._$pullDown=e._$pullDown,this._$topPocket=e._$topPocket,this._$bottomPocket=e._$bottomPocket,this._initCallbacks()},_initCallbacks(){this.pullDownCallbacks=(0,h.Z)(),this.releaseCallbacks=(0,h.Z)(),this.reachBottomCallbacks=(0,h.Z)()},render(){this._renderPullDown(),this.callBase()},_renderPullDown(){const e=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-image"),t=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-indicator"),i=new Dr.Z((0,c.Z)("<div>")).$element(),n=this._$pullDownText=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down-text");this._$pullingDownText=(0,c.Z)("<div>").text(this.option("pullingDownText")).appendTo(n),this._$pulledDownText=(0,c.Z)("<div>").text(this.option("pulledDownText")).appendTo(n),this._$refreshingText=(0,c.Z)("<div>").text(this.option("refreshingText")).appendTo(n),this._$pullDown.empty().append(e).append(t.append(i)).append(n)},pullDownEnable(e){this._eventHandler("pullDownEnabling",e)},reachBottomEnable(e){this._eventHandler("reachBottomEnabling",e)},_createScroller(e){const t=this,i=t._scrollers[e]=new Ia(t._scrollerOptions(e));i.pullDownCallbacks.add((()=>{t.pullDownCallbacks.fire()})),i.releaseCallbacks.add((()=>{t.releaseCallbacks.fire()})),i.reachBottomCallbacks.add((()=>{t.reachBottomCallbacks.fire()}))},_scrollerOptions(e){return(0,f.l)(this.callBase(e),{$topPocket:this._$topPocket,$bottomPocket:this._$bottomPocket,$pullDown:this._$pullDown,$pullDownText:this._$pullDownText,$pullingDownText:this._$pullingDownText,$pulledDownText:this._$pulledDownText,$refreshingText:this._$refreshingText})},pendingRelease(){this._eventHandler("pendingRelease")},release(){return this._eventHandler("release").done(this._updateAction)},location(){const e=this.callBase();return e.top+=(0,oe.Cr)(this._$topPocket),e},dispose(){(0,j.each)(this._scrollers,(function(){this.dispose()})),this.callBase()}}),Ea="vertical",Oa="both",Ta=function(){return[{device:()=>!Xo.nativeScrolling,options:{useNative:!1}},{device:e=>!a.default.isSimulator()&&"desktop"===a.default.real().deviceType&&"generic"===e.platform,options:{bounceEnabled:!1,scrollByThumb:!0,scrollByContent:Xo.touch,showScrollbar:"onHover"}}]},Da="dxScrollable",Ba="vertical",Aa="horizontal",Pa="both",Ma=sn.default.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{disabled:!1,onScroll:null,direction:Ba,showScrollbar:"onScroll",useNative:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,onUpdated:null,onStart:null,onEnd:null,onBounce:null,useSimulatedScrollbar:!1,useKeyboard:!0,inertiaEnabled:!0,updateManually:!1,_onVisibilityChanged:u.noop})},_defaultOptionsRules(){return this.callBase().concat(Ta(),[{device:()=>Xo.nativeScrolling&&"android"===a.default.real().platform&&!Be.default.mozilla,options:{useSimulatedScrollbar:!0}}])},_initOptions(e){this.callBase(e),"useSimulatedScrollbar"in e||this._setUseSimulatedScrollbar()},_setUseSimulatedScrollbar(){this.initialOption("useSimulatedScrollbar")||this.option("useSimulatedScrollbar",!this.option("useNative"))},_init(){this.callBase(),this._initScrollableMarkup(),this._locked=!1},_visibilityChanged(e){e?(this.update(),this._updateRtlPosition(),this._savedScrollOffset&&this.scrollTo(this._savedScrollOffset),delete this._savedScrollOffset,this.option("_onVisibilityChanged")(this)):this._savedScrollOffset=this.scrollOffset()},_initScrollableMarkup(){const e=this.$element().addClass("dx-scrollable"),t=this._$container=(0,c.Z)("<div>").addClass("dx-scrollable-container"),i=this._$wrapper=(0,c.Z)("<div>").addClass("dx-scrollable-wrapper");(this._$content=(0,c.Z)("<div>").addClass("dx-scrollable-content")).append(e.contents()).appendTo(t),t.appendTo(i),i.appendTo(e)},_dimensionChanged(){this.update(),this._updateRtlPosition()},_initMarkup(){this.callBase(),this._renderDirection()},_render(){this._renderStrategy(),this._attachEventHandlers(),this._renderDisabledState(),this._createActions(),this.update(),this.callBase(),this._updateRtlPosition(!0)},_updateRtlPosition(e){this._strategy.updateRtlPosition(e)},_getMaxOffset(){const{scrollWidth:e,clientWidth:t,scrollHeight:i,clientHeight:n}=(0,c.Z)(this.container()).get(0);return{left:e-t,top:i-n}},_attachEventHandlers(){const e=this._strategy,t={getDirection:e.getDirection.bind(e),validate:this._validate.bind(this),isNative:this.option("useNative"),scrollTarget:this._$container};m.Z.off(this._$wrapper,`.${Da}`),m.Z.on(this._$wrapper,(0,v.addNamespace)(T,Da),t,this._initHandler.bind(this)),m.Z.on(this._$wrapper,(0,v.addNamespace)(D,Da),e.handleStart.bind(e)),m.Z.on(this._$wrapper,(0,v.addNamespace)(B,Da),e.handleMove.bind(e)),m.Z.on(this._$wrapper,(0,v.addNamespace)(A,Da),e.handleEnd.bind(e)),m.Z.on(this._$wrapper,(0,v.addNamespace)(M,Da),e.handleCancel.bind(e)),m.Z.on(this._$wrapper,(0,v.addNamespace)(P,Da),e.handleStop.bind(e)),m.Z.off(this._$container,`.${Da}`),m.Z.on(this._$container,(0,v.addNamespace)("scroll",Da),e.handleScroll.bind(e))},_validate(e){return!this._isLocked()&&(this._updateIfNeed(),this._moveIsAllowed(e))},_moveIsAllowed(e){return this._strategy.validate(e)},handleMove(e){this._strategy.handleMove(e)},_prepareDirections(e){this._strategy._prepareDirections(e)},_initHandler(){const e=this._strategy;e.handleInit.apply(e,arguments)},_renderDisabledState(){this.$element().toggleClass("dx-scrollable-disabled",this.option("disabled")),this.option("disabled")?this._lock():this._unlock()},_renderDirection(){this.$element().removeClass(`dx-scrollable-${Aa}`).removeClass(`dx-scrollable-${Ba}`).removeClass(`dx-scrollable-${Pa}`).addClass(`dx-scrollable-${this.option("direction")}`)},_renderStrategy(){this._createStrategy(),this._strategy.render(),this.$element().data("dxScrollableStrategy",this._strategy)},_createStrategy(){this._strategy=this.option("useNative")?new sa(this):new xa(this)},_createActions(){this._strategy&&this._strategy.createActions()},_clean(){this._strategy&&this._strategy.dispose()},_optionChanged(e){switch(e.name){case"onStart":case"onEnd":case"onUpdated":case"onScroll":case"onBounce":this._createActions();break;case"direction":this._resetInactiveDirection(),this._invalidate();break;case"useNative":this._setUseSimulatedScrollbar(),this._invalidate();break;case"inertiaEnabled":case"scrollByThumb":case"bounceEnabled":case"useKeyboard":case"showScrollbar":case"useSimulatedScrollbar":this._invalidate();break;case"disabled":this._renderDisabledState(),this._strategy&&this._strategy.disabledChanged();break;case"updateManually":case"scrollByContent":case"_onVisibilityChanged":break;case"width":this.callBase(e),this._updateRtlPosition();break;default:this.callBase(e)}},_resetInactiveDirection(){const e=this._getInactiveProp();if(!e||!(0,Z.hasWindow)())return;const t=this.scrollOffset();t[e]=0,this.scrollTo(t)},_getInactiveProp(){const e=this.option("direction");return e===Ba?"left":e===Aa?"top":void 0},_location(){return this._strategy.location()},_normalizeLocation(e){if((0,_.PO)(e)){const t=(0,u.ensureDefined)(e.left,e.x),i=(0,u.ensureDefined)(e.top,e.y);return{left:(0,_.$K)(t)?-t:void 0,top:(0,_.$K)(i)?-i:void 0}}const t=this.option("direction");return{left:t!==Ba?-e:void 0,top:t!==Aa?-e:void 0}},_isLocked(){return this._locked},_lock(){this._locked=!0},_unlock(){this.option("disabled")||(this._locked=!1)},_isDirection(e){const t=this.option("direction");return e===Ba?t!==Aa:e===Aa?t!==Ba:t===e},_updateAllowedDirection(){const e=this._strategy._allowedDirections();this._isDirection(Pa)&&e.vertical&&e.horizontal?this._allowedDirectionValue=Pa:this._isDirection(Aa)&&e.horizontal?this._allowedDirectionValue=Aa:this._isDirection(Ba)&&e.vertical?this._allowedDirectionValue=Ba:this._allowedDirectionValue=null},_allowedDirection(){return this._allowedDirectionValue},$content(){return this._$content},content(){return(0,l.uD)(this._$content)},container(){return(0,l.uD)(this._$container)},scrollOffset(){return this._strategy._getScrollOffset()},_isRtlNativeStrategy(){const{useNative:e,rtlEnabled:t}=this.option();return e&&t},scrollTop(){return this.scrollOffset().top},scrollLeft(){return this.scrollOffset().left},clientHeight(){return(0,oe.Cr)(this._$container)},scrollHeight(){return(0,oe.zp)(this.$content())},clientWidth(){return(0,oe.dz)(this._$container)},scrollWidth(){return(0,oe.Y_)(this.$content())},update(){if(this._strategy)return(0,p.gx)(this._strategy.update()).done((()=>{this._updateAllowedDirection()}))},scrollBy(e){((e=this._normalizeLocation(e)).top||e.left)&&(this._updateIfNeed(),this._strategy.scrollBy(e))},scrollTo(e){e=this._normalizeLocation(e),this._updateIfNeed();let t=this._location();this.option("useNative")||(e=this._strategy._applyScaleRatio(e),t=this._strategy._applyScaleRatio(t)),this._isRtlNativeStrategy()&&(t.left-=this._getMaxOffset().left);const i=this._normalizeLocation({left:t.left-(0,u.ensureDefined)(e.left,t.left),top:t.top-(0,u.ensureDefined)(e.top,t.top)});(i.top||i.left)&&this._strategy.scrollBy(i)},scrollToElement(e,t){const i=(0,c.Z)(e),n=this.$content().find(e).length,o=i.parents(".dx-scrollable").length-i.parents(".dx-scrollable-content").length==0;if(!n||!o)return;const r={top:0,left:0},s=this.option("direction");s!==Ba&&(r.left=this.getScrollElementPosition(i,Aa,t)),s!==Aa&&(r.top=this.getScrollElementPosition(i,Ba,t)),this.scrollTo(r)},getScrollElementPosition(e,t,i){const o=this.scrollOffset();return function(e,t,i,o,r){const s=(0,n.Z)({top:0,left:0,right:0,bottom:0},r),a=t===Ea,l=a?"top":"left",c=a?"bottom":"right",d=a?"height":"width",h=i[`offset${(0,En.titleize)(d)}`],u=i[`client${(0,En.titleize)(d)}`],p=i.getBoundingClientRect()[d],f=e.getBoundingClientRect()[d];let _=1;Math.abs(p-h)>1&&(_=p/h);const m=function(e,t){const i={left:0,top:0};let n=t;for(;null!==(o=n)&&void 0!==o&&o.offsetParent&&!n.classList.contains("dx-scrollable-content");){var o;const e=n.offsetParent,t=n.getBoundingClientRect(),r=e.getBoundingClientRect();i.left+=t.left-r.left,i.top+=t.top-r.top,n=n.offsetParent}return i}(0,e)[l]/_,g=o[l],v=g-m+s[l],b=g-m-f/_+u-s[c];return v<=0&&b>=0?g:g-(Math.abs(v)>Math.abs(b)?b:v)}(e.get(0),t,(0,c.Z)(this.container()).get(0),o,i)},_updateIfNeed(){this.option("updateManually")||this.update()},_useTemplates:()=>!1,isRenovated:()=>!!Ma.IS_RENOVATED_WIDGET});(0,r.default)(Da,Ma);const Ra=Ma,$a={pullDown:la,swipeDown:ca,simulated:ka},Na=!(0,Z.hasWindow)(),Va={finishLoading:u.noop,release:u.noop,refresh:u.noop,scrollOffset:()=>({top:0,left:0}),_optionChanged(e){if("onUpdated"!==e.name)return this.callBase.apply(this,arguments)}},Fa=Ra.inherit(Na?Va:{_getDefaultOptions(){return(0,f.l)(this.callBase(),{pullingDownText:z.Z.format("dxScrollView-pullingDownText"),pulledDownText:z.Z.format("dxScrollView-pulledDownText"),refreshingText:z.Z.format("dxScrollView-refreshingText"),reachBottomText:z.Z.format("dxScrollView-reachBottomText"),onPullDown:null,onReachBottom:null,refreshStrategy:"pullDown"})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"android"===a.default.real().platform,options:{refreshStrategy:"swipeDown"}},{device:()=>(0,Sn.yj)(),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",reachBottomText:""}}])},_init(){this.callBase(),this._loadingIndicatorEnabled=!0},_initScrollableMarkup(){this.callBase(),this.$element().addClass("dx-scrollview"),this._initContent(),this._initTopPocket(),this._initBottomPocket(),this._initLoadPanel()},_initContent(){const e=(0,c.Z)("<div>").addClass("dx-scrollview-content");this._$content.wrapInner(e)},_initTopPocket(){const e=this._$topPocket=(0,c.Z)("<div>").addClass("dx-scrollview-top-pocket"),t=this._$pullDown=(0,c.Z)("<div>").addClass("dx-scrollview-pull-down");e.append(t),this._$content.prepend(e)},_initBottomPocket(){const e=this._$bottomPocket=(0,c.Z)("<div>").addClass("dx-scrollview-bottom-pocket"),t=this._$reachBottom=(0,c.Z)("<div>").addClass("dx-scrollview-scrollbottom"),i=(0,c.Z)("<div>").addClass("dx-scrollview-scrollbottom-indicator"),n=new Dr.Z((0,c.Z)("<div>")).$element(),o=this._$reachBottomText=(0,c.Z)("<div>").addClass("dx-scrollview-scrollbottom-text");this._updateReachBottomText(),t.append(i.append(n)).append(o),e.append(t),this._$content.append(e)},_initLoadPanel(){const e=(0,c.Z)("<div>").addClass("dx-scrollview-loadpanel").appendTo(this.$element()),t={shading:!1,delay:400,message:this.option("refreshingText"),position:{of:this.$element()}};this._loadPanel=this._createComponent(e,zs.Z,t)},_updateReachBottomText(){this._$reachBottomText.text(this.option("reachBottomText"))},_createStrategy(){const e=this.option("useNative")?this.option("refreshStrategy"):"simulated",t=$a[e];this._strategy=new t(this),this._strategy.pullDownCallbacks.add(this._pullDownHandler.bind(this)),this._strategy.releaseCallbacks.add(this._releaseHandler.bind(this)),this._strategy.reachBottomCallbacks.add(this._reachBottomHandler.bind(this))},_createActions(){this.callBase(),this._pullDownAction=this._createActionByOption("onPullDown"),this._reachBottomAction=this._createActionByOption("onReachBottom"),this._tryRefreshPocketState()},_tryRefreshPocketState(){this._pullDownEnable(this.hasActionSubscription("onPullDown")),this._reachBottomEnable(this.hasActionSubscription("onReachBottom"))},on(e){const t=this.callBase.apply(this,arguments);return"pullDown"!==e&&"reachBottom"!==e||this._tryRefreshPocketState(),t},_pullDownEnable(e){if(0===arguments.length)return this._pullDownEnabled;this._$pullDown&&this._strategy&&(this._$pullDown.toggle(e),this._strategy.pullDownEnable(e),this._pullDownEnabled=e)},_reachBottomEnable(e){if(0===arguments.length)return this._reachBottomEnabled;this._$reachBottom&&this._strategy&&(this._$reachBottom.toggle(e),this._strategy.reachBottomEnable(e),this._reachBottomEnabled=e)},_pullDownHandler(){this._loadingIndicator(!1),this._pullDownLoading()},_loadingIndicator(e){if(arguments.length<1)return this._loadingIndicatorEnabled;this._loadingIndicatorEnabled=e},_pullDownLoading(){this.startLoading(),this._pullDownAction()},_reachBottomHandler(){this._loadingIndicator(!1),this._reachBottomLoading()},_reachBottomLoading(){this.startLoading(),this._reachBottomAction()},_releaseHandler(){this.finishLoading(),this._loadingIndicator(!0)},_optionChanged(e){switch(e.name){case"onPullDown":case"onReachBottom":this._createActions();break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"refreshStrategy":this._invalidate();break;case"reachBottomText":this._updateReachBottomText();break;default:this.callBase(e)}},content(){return(0,l.uD)(this._$content.children().eq(1))},release(e){return void 0!==e&&this.toggleLoading(!e),this._strategy.release()},toggleLoading(e){this._reachBottomEnable(e)},refresh(){this.hasActionSubscription("onPullDown")&&(this._strategy.pendingRelease(),this._pullDownLoading())},startLoading(){this._loadingIndicator()&&this.$element().is(":visible")&&this._loadPanel.show(),this._lock()},finishLoading(){this._loadPanel.hide(),this._unlock()},_dispose(){this._strategy.dispose(),this.callBase(),this._loadPanel&&this._loadPanel.$element().remove()}});(0,r.default)("dxScrollView",Fa);const Za=Fa,Ha={_getSpecificDataSourceOption(){let e=this.option("dataSource"),t=!1,i={};return this._getGroupedOption()&&(e=>Array.isArray(e)&&e.every((e=>2===Object.keys(e).length&&"key"in e&&"items"in e&&Array.isArray(e.items))))(e)&&(i=e.reduce(((e,i)=>{const n=i.items.map((e=>((0,_.Kn)(e)||(e={text:e},t=!0),"key"in e||(e.key=i.key),e)));return e.concat(n)}),[]),e={store:{type:"array",data:i},group:{selector:"key",keepInitialKeyOrder:!0}},t&&(e.searchExpr="text")),e}},La=hr.inherit({_renderWatchers(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this)),this._startWatcher("showChevron",this._renderShowChevron.bind(this))},_renderBadge(e){if(this._$element.children(".dx-list-item-badge-container").remove(),!e)return;const t=(0,c.Z)("<div>").addClass("dx-list-item-badge-container").append((0,c.Z)("<div>").addClass("dx-list-item-badge").addClass("dx-badge").text(e)),i=this._$element.children(".dx-list-item-chevron-container").first();i.length>0?t.insertBefore(i):t.appendTo(this._$element)},_renderShowChevron(e){if(this._$element.children(".dx-list-item-chevron-container").remove(),!e)return;const t=(0,c.Z)("<div>").addClass("dx-list-item-chevron-container"),i=(0,c.Z)("<div>").addClass("dx-list-item-chevron");t.append(i).appendTo(this._$element)}}),ja=(0,hn.vb)("items");const za=js.inherit({_activeStateUnit:[".dx-list-item",".dx-list-select-all"].join(","),_supportedKeys(){const e=this,t=function(t){let n=i(t);n.is(e.option("focusedElement"))&&(function(t,i){let n=t.position().top;"prev"===i&&(n=t.position().top-(0,oe.Cr)(e.$element())+(0,oe.zp)(t)),e.scrollTo(n)}(n,t),n=i(t)),e.option("focusedElement",(0,l.uD)(n)),e.scrollToItem(n)};function i(t){const i=e.scrollTop(),n=(0,oe.Cr)(e.$element());let o=(0,c.Z)(e.option("focusedElement")),r=!0;if(!o.length)return(0,c.Z)();for(;r;){const e=o[t]();if(!e.length)break;const s=e.position().top+(0,oe.zp)(e)/2;r=s<n+i&&s>i,r&&(o=e)}return o}return(0,f.l)(this.callBase(),{leftArrow:u.noop,rightArrow:u.noop,pageUp:()=>(t("prev"),!1),pageDown:()=>(t("next"),!1)})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{hoverStateEnabled:!0,pullRefreshEnabled:!1,scrollingEnabled:!0,selectByClick:!0,showScrollbar:"onScroll",useNativeScrolling:!0,bounceEnabled:!0,scrollByContent:!0,scrollByThumb:!1,pullingDownText:z.Z.format("dxList-pullingDownText"),pulledDownText:z.Z.format("dxList-pulledDownText"),refreshingText:z.Z.format("dxList-refreshingText"),pageLoadingText:z.Z.format("dxList-pageLoadingText"),onScroll:null,onPullRefresh:null,onPageLoading:null,pageLoadMode:"scrollBottom",nextButtonText:z.Z.format("dxList-nextButtonText"),onItemSwipe:null,grouped:!1,onGroupRendered:null,collapsibleGroups:!1,groupTemplate:"group",indicateLoading:!0,activeStateEnabled:!0,_itemAttributes:{role:"option"},useInkRipple:!1,wrapItemText:!1,_swipeEnabled:!0,showChevronExpr:e=>e?e.showChevron:void 0,badgeExpr:e=>e?e.badge:void 0})},_defaultOptionsRules(){const e=(0,Sn.Vk)();return this.callBase().concat(Ta(),[{device:()=>!Xo.nativeScrolling,options:{useNativeScrolling:!1}},{device:e=>!Xo.nativeScrolling&&!a.default.isSimulator()&&"desktop"===a.default.real().deviceType&&"generic"===e.platform,options:{showScrollbar:"onHover",pageLoadMode:"nextButton"}},{device:()=>"desktop"===a.default.real().deviceType&&!a.default.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>(0,Sn.x2)(e),options:{useInkRipple:!0}},{device:()=>(0,Sn.yj)(e),options:{pullingDownText:"",pulledDownText:"",refreshingText:"",pageLoadingText:""}}])},_visibilityChanged(e){e&&this._updateLoadingState(!0)},_itemClass:()=>"dx-list-item",_itemDataKey:()=>"dxListItemData",_itemContainer(){return this._$container},_getItemsContainer(){return this._$listContainer},_cleanItemContainer(){this.callBase();const e=this._getItemsContainer();(0,c.Z)(e).empty(),e.appendTo(this._$container)},_saveSelectionChangeEvent(e){this._selectionChangeEventInstance=e},_getSelectionChangeEvent(){return this._selectionChangeEventInstance},_refreshItemElements(){this.option("grouped")?this._itemElementsCache=this._getItemsContainer().children(".dx-list-group").children(".dx-list-group-body").children(this._itemSelector()):this._itemElementsCache=this._getItemsContainer().children(this._itemSelector())},_modifyByChanges(){this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},reorderItem(e,t){return this.callBase(e,t).done((function(){this._refreshItemElements()}))},deleteItem(e){return this.callBase(e).done((function(){this._refreshItemElements()}))},_itemElements(){return this._itemElementsCache},_itemSelectHandler(e){if("single"!==this.option("selectionMode")||!this.isItemSelected(e.currentTarget))return this.callBase(e)},_allowDynamicItemsAppend:()=>!0,_init(){this.callBase(),this._dataController.resetDataSourcePageIndex(),this._$container=this.$element(),this._$listContainer=(0,c.Z)("<div>").addClass("dx-list-items"),this._initScrollView(),this._feedbackShowTimeout=70,this._createGroupRenderAction()},_scrollBottomMode(){return"scrollBottom"===this.option("pageLoadMode")},_nextButtonMode(){return"nextButton"===this.option("pageLoadMode")},_dataSourceOptions(){const e=this._scrollBottomMode(),t=this._nextButtonMode();return(0,f.l)(this.callBase(),{paginate:(0,u.ensureDefined)(e||t,!0)})},_getGroupedOption(){return this.option("grouped")},_getGroupContainerByIndex(e){return this._getItemsContainer().find(".dx-list-group").eq(e).find(".dx-list-group-body")},_dataSourceFromUrlLoadMode:()=>"raw",_initScrollView(){const e=this.option("scrollingEnabled"),t=e&&this.option("pullRefreshEnabled"),i=e&&this._scrollBottomMode()&&!!this._dataController.getDataSource();this._scrollView=this._createComponent(this.$element(),Za,{height:this.option("height"),width:this.option("width"),disabled:this.option("disabled")||!e,onScroll:this._scrollHandler.bind(this),onPullDown:t?this._pullDownHandler.bind(this):null,onReachBottom:i?this._scrollBottomHandler.bind(this):null,showScrollbar:this.option("showScrollbar"),useNative:this.option("useNativeScrolling"),bounceEnabled:this.option("bounceEnabled"),scrollByContent:this.option("scrollByContent"),scrollByThumb:this.option("scrollByThumb"),pullingDownText:this.option("pullingDownText"),pulledDownText:this.option("pulledDownText"),refreshingText:this.option("refreshingText"),reachBottomText:this.option("pageLoadingText"),useKeyboard:!1}),this._$container=(0,c.Z)(this._scrollView.content()),this._$listContainer.appendTo(this._$container),this._toggleWrapItemText(this.option("wrapItemText")),this._createScrollViewActions()},_toggleWrapItemText(e){this._$listContainer.toggleClass("dx-wrap-item-text",e)},_createScrollViewActions(){this._scrollAction=this._createActionByOption("onScroll"),this._pullRefreshAction=this._createActionByOption("onPullRefresh"),this._pageLoadingAction=this._createActionByOption("onPageLoading")},_scrollHandler(e){this._scrollAction&&this._scrollAction(e)},_initTemplates(){this._templateManager.addDefaultTemplates({group:new No(((e,t)=>{(0,_.PO)(t)?t.key&&e.text(t.key):e.text(String(t))}),["key"],this.option("integrationOptions.watchMethod"))}),this.callBase()},_prepareDefaultItemTemplate(e,t){if(this.callBase(e,t),e.icon){const i=Cn(e.icon).addClass("dx-list-item-icon"),n=(0,c.Z)("<div>").addClass("dx-list-item-icon-container");n.append(i),t.prepend(n)}},_getBindableFields:()=>["text","html","icon"],_updateLoadingState(e){const t=this._dataController,i=this._scrollBottomMode()&&e&&!t.isLoading()&&!this._isLastPage();this._shouldContinueLoading(i)?this._infiniteDataLoading():(this._scrollView.release(!i&&!t.isLoading()),this._toggleNextButton(this._shouldRenderNextButton()&&!this._isLastPage()),this._loadIndicationSuppressed(!1))},_shouldRenderNextButton(){return this._nextButtonMode()&&this._dataController.isLoaded()},_isDataSourceFirstLoadCompleted(e){return(0,_.$K)(e)&&(this._isFirstLoadCompleted=e),this._isFirstLoadCompleted},_dataSourceLoadingChangedHandler(e){this._loadIndicationSuppressed()||(e&&this.option("indicateLoading")?this._showLoadingIndicatorTimer=setTimeout((()=>{var e;!this._itemElements().length&&!this._isDataSourceFirstLoadCompleted()||null===(e=this._scrollView)||void 0===e||e.startLoading()})):(clearTimeout(this._showLoadingIndicatorTimer),this._scrollView&&this._scrollView.finishLoading()),e||this._isDataSourceFirstLoadCompleted(!1))},_dataSourceChangedHandler(){!this._shouldAppendItems()&&(0,Z.hasWindow)()&&this._scrollView&&this._scrollView.scrollTo(0),this.callBase.apply(this,arguments),this._isDataSourceFirstLoadCompleted(!0)},_refreshContent(){this._prepareContent(),this._fireContentReadyAction()},_hideLoadingIfLoadIndicationOff(){this.option("indicateLoading")||this._dataSourceLoadingChangedHandler(!1)},_loadIndicationSuppressed(e){if(!arguments.length)return this._isLoadIndicationSuppressed;this._isLoadIndicationSuppressed=e},_scrollViewIsFull(){const e=this._scrollView;return!e||(0,oe.Cr)(e.content())>(0,oe.Cr)(e.container())},_pullDownHandler(e){this._pullRefreshAction(e);const t=this._dataController;t.getDataSource()&&!t.isLoading()?(this._clearSelectedItems(),t.pageIndex(0),t.reload()):this._updateLoadingState()},_shouldContinueLoading(e){var t;const i=(0,oe.Cr)(this._scrollView.content())-(0,oe.Cr)(this._scrollView.container())<((null===(t=this._scrollView.scrollOffset())||void 0===t?void 0:t.top)??0);return e&&(!this._scrollViewIsFull()||i)},_infiniteDataLoading(){this.$element().is(":visible")&&(clearTimeout(this._loadNextPageTimer),this._loadNextPageTimer=setTimeout((()=>{this._loadNextPage()})))},_scrollBottomHandler(e){this._pageLoadingAction(e),this._dataController.isLoading()||this._isLastPage()?this._updateLoadingState():this._loadNextPage()},_renderItems(e){this.option("grouped")?((0,j.each)(e,this._renderGroup.bind(this)),this._attachGroupCollapseEvent(),this._renderEmptyMessage(),(0,Sn.x2)()&&this.attachGroupHeaderInkRippleEvents()):this.callBase.apply(this,arguments),this._refreshItemElements(),this._updateLoadingState(!0)},_attachGroupCollapseEvent(){const e=(0,v.addNamespace)(He.name,this.NAME),t=this.$element(),i=this.option("collapsibleGroups");t.toggleClass("dx-list-collapsible-groups",i),m.Z.off(t,e,".dx-list-group-header"),i&&m.Z.on(t,e,".dx-list-group-header",(e=>{this._createAction((e=>{const t=(0,c.Z)(e.event.currentTarget).parent();this._collapseGroupHandler(t),this.option("focusStateEnabled")&&this.option("focusedElement",(0,l.uD)(t.find(".dx-list-item").eq(0)))}),{validatingTargetName:"element"})({event:e})}))},_collapseGroupHandler(e,t){const i=(0,p.BH)();if(e.hasClass("dx-list-group-collapsed")===t)return i.resolve();const n=e.children(".dx-list-group-body"),o=(0,oe.zp)(n);let r=0;return 0===o&&((0,oe.QQ)(n,"auto"),r=(0,oe.zp)(n)),e.toggleClass("dx-list-group-collapsed",t),mo.default.animate(n,{type:"custom",from:{height:o},to:{height:r},duration:200,complete:function(){this.updateDimensions(),this._updateLoadingState(!0),i.resolve()}.bind(this)}),i.promise()},_dataSourceLoadErrorHandler(){this._forgetNextPageLoading(),this._initialized&&(this._renderEmptyMessage(),this._updateLoadingState())},_initMarkup(){this._itemElementsCache=(0,c.Z)(),this.$element().addClass("dx-list"),this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.setAria({role:"group",roledescription:"list"},this.$element()),this.setAria({role:"application"},this._focusTarget()),this._setListAria()},_setListAria(){const{items:e,allowItemDeleting:t}=this.option(),i=t?z.Z.format("dxList-listAriaLabel-deletable"):z.Z.format("dxList-listAriaLabel"),n=null!=e&&e.length?{role:"listbox",label:i}:{role:void 0,label:void 0};this.setAria(n,this._$listContainer)},_focusTarget(){return this._itemContainer()},_renderInkRipple(){this._inkRipple=Pn()},_toggleActiveState(e,t,i){this.callBase.apply(this,arguments);const n=this;if(!this._inkRipple)return;const o={element:e,event:i};t?(0,Sn.x2)()?this._inkRippleTimer=setTimeout((()=>{n._inkRipple.showWave(o)}),35):n._inkRipple.showWave(o):(clearTimeout(this._inkRippleTimer),this._inkRipple.hideWave(o))},_postprocessRenderItem(e){this._refreshItemElements(),this.callBase.apply(this,arguments),this.option("_swipeEnabled")&&this._attachSwipeEvent((0,c.Z)(e.itemElement))},_attachSwipeEvent(e){const t=(0,v.addNamespace)($s,this.NAME);m.Z.on(e,t,this._itemSwipeEndHandler.bind(this))},_itemSwipeEndHandler(e){this._itemDXEventHandler(e,"onItemSwipe",{direction:e.offset<0?"left":"right"})},_nextButtonHandler(e){this._pageLoadingAction(e);const t=this._dataController;t.getDataSource()&&!t.isLoading()&&(this._scrollView.toggleLoading(!0),this._$nextButton.detach(),this._loadIndicationSuppressed(!0),this._loadNextPage())},_renderGroup(e,t){const i=(0,c.Z)("<div>").addClass("dx-list-group").appendTo(this._getItemsContainer()),n=`dx-${(new V.Z).toString()}`,o={role:"group",labelledby:n};this.setAria(o,i);const r=(0,c.Z)("<div>").addClass("dx-list-group-header").attr("id",n).appendTo(i),s=this.option("groupTemplate"),a=this._getTemplate(t.template||s,t,e,r),d={index:e,itemData:t,container:(0,l.uD)(r)};this._createItemByTemplate(a,d),(0,c.Z)("<div>").addClass("dx-list-group-header-indicator").prependTo(r),this._renderingGroupIndex=e;const h=(0,c.Z)("<div>").addClass("dx-list-group-body").appendTo(i);(0,j.each)(ja(t)||[],((t,i)=>{this._renderItem({group:e,item:t},i,h)})),this._groupRenderAction({groupElement:(0,l.uD)(i),groupIndex:e,groupData:t})},downInkRippleHandler(e){this._toggleActiveState((0,c.Z)(e.currentTarget),!0,e)},upInkRippleHandler(e){this._toggleActiveState((0,c.Z)(e.currentTarget),!1)},attachGroupHeaderInkRippleEvents(){const e=this.$element();this._downInkRippleHandler=this._downInkRippleHandler||this.downInkRippleHandler.bind(this),this._upInkRippleHandler=this._upInkRippleHandler||this.upInkRippleHandler.bind(this);const t=[e,"dxpointerdown",".dx-list-group-header",this._downInkRippleHandler],i=[e,"dxpointerup dxpointerout",".dx-list-group-header",this._upInkRippleHandler];m.Z.off(...t),m.Z.on(...t),m.Z.off(...i),m.Z.on(...i)},_createGroupRenderAction(){this._groupRenderAction=this._createActionByOption("onGroupRendered")},_clean(){clearTimeout(this._inkRippleTimer),this._$nextButton&&(this._$nextButton.remove(),this._$nextButton=null),this.callBase.apply(this,arguments)},_dispose(){this._isDataSourceFirstLoadCompleted(!1),clearTimeout(this._holdTimer),clearTimeout(this._loadNextPageTimer),clearTimeout(this._showLoadingIndicatorTimer),this.callBase()},_toggleDisabledState(e){this.callBase(e),this._scrollView.option("disabled",e||!this.option("scrollingEnabled"))},_toggleNextButton(e){const t=this._dataController,i=this._getNextButton();this.$element().toggleClass("dx-has-next",e),e&&t.isLoaded()&&i.appendTo(this._itemContainer()),e||i.detach()},_getNextButton(){return this._$nextButton||(this._$nextButton=this._createNextButton()),this._$nextButton},_createNextButton(){const e=(0,c.Z)("<div>").addClass("dx-list-next-button"),t=(0,c.Z)("<div>").appendTo(e);return this._createComponent(t,_o,{text:this.option("nextButtonText"),onClick:this._nextButtonHandler.bind(this),type:(0,Sn.yj)()?"default":void 0,integrationOptions:{}}),e},_moveFocus(){this.callBase.apply(this,arguments),this.scrollToItem(this.option("focusedElement"))},_refresh(){if((0,Z.hasWindow)()){const e=this._scrollView.scrollTop();this.callBase(),e&&this._scrollView.scrollTo(e)}else this.callBase()},_optionChanged(e){switch(e.name){case"pageLoadMode":this._toggleNextButton(e.value),this._initScrollView();break;case"dataSource":this.callBase(e),this._initScrollView(),this._isDataSourceFirstLoadCompleted(!1);break;case"items":this.callBase(e),this._isDataSourceFirstLoadCompleted(!1);break;case"pullingDownText":case"pulledDownText":case"refreshingText":case"pageLoadingText":case"showScrollbar":case"bounceEnabled":case"scrollByContent":case"scrollByThumb":case"useNativeScrolling":case"scrollingEnabled":case"pullRefreshEnabled":this._initScrollView(),this._updateLoadingState(!0);break;case"nextButtonText":case"onItemSwipe":case"useInkRipple":case"grouped":case"collapsibleGroups":case"groupTemplate":case"showChevronExpr":case"badgeExpr":this._invalidate();break;case"onScroll":case"onPullRefresh":case"onPageLoading":this._createScrollViewActions();break;case"wrapItemText":this._toggleWrapItemText(e.value);break;case"onGroupRendered":this._createGroupRenderAction();break;case"width":case"height":this.callBase(e),this._scrollView.option(e.name,e.value),this._scrollView.update();break;case"indicateLoading":this._hideLoadingIfLoadIndicationOff();break;case"visible":this.callBase(e),this._scrollView.update();break;case"rtlEnabled":this._initScrollView(),this.callBase(e);break;case"_swipeEnabled":case"selectByClick":break;default:this.callBase(e)}},_extendActionArgs(e){if(!this.option("grouped"))return this.callBase(e);const t=e.closest(".dx-list-group"),i=t.find(".dx-list-item");return(0,f.l)(this.callBase(e),{itemIndex:{group:t.index(),item:i.index(e)}})},expandGroup(e){const t=(0,p.BH)(),i=this._getItemsContainer().find(".dx-list-group").eq(e);return this._collapseGroupHandler(i,!1).done((()=>{t.resolveWith(this)})),t.promise()},collapseGroup(e){const t=(0,p.BH)(),i=this._getItemsContainer().find(".dx-list-group").eq(e);return this._collapseGroupHandler(i,!0).done((()=>{t.resolveWith(this)})),t},updateDimensions(){const e=this,t=(0,p.BH)();return e._scrollView?e._scrollView.update().done((()=>{!e._scrollViewIsFull()&&e._updateLoadingState(!0),t.resolveWith(e)})):t.resolveWith(e),t.promise()},reload(){this.callBase(),this.scrollTo(0),this._pullDownHandler()},repaint(){this.scrollTo(0),this.callBase()},scrollTop(){return this._scrollView.scrollOffset().top},clientHeight(){return this._scrollView.clientHeight()},scrollHeight(){return this._scrollView.scrollHeight()},scrollBy(e){this._scrollView.scrollBy(e)},scrollTo(e){this._scrollView.scrollTo(e)},scrollToItem(e){const t=this._editStrategy.getItemElement(e),i=null==t?void 0:t.get(0);this._scrollView.scrollToElement(i,{bottom:Fs(i,"bottom")})},_dimensionChanged(){this.updateDimensions()}}).include(Ha);za.ItemClass=La;const Wa={},Ka=[],qa=function(e,t,i){Ka.push({enabled:e,decoratorType:t,decoratorSubType:i})};qa((function(){return this.option("menuItems").length}),(()=>"menu"),(function(){return this.option("menuMode")})),qa((function(){return!this.option("menuItems").length&&this.option("allowItemDeleting")}),(function(){const e=this.option("itemDeleteMode");return"toggle"===e||"slideButton"===e||"swipe"===e||"static"===e?"delete":"menu"}),(function(){let e=this.option("itemDeleteMode");return"slideItem"===e&&(e="slide"),e})),qa((function(){return"none"!==this.option("selectionMode")&&this.option("showSelectionControls")}),(()=>"selection"),(()=>"default")),qa((function(){return this.option("itemDragging.allowReordering")||this.option("itemDragging.allowDropInsideItem")||this.option("itemDragging.group")}),(()=>"reorder"),(()=>"default"));const Ua=g.default.inherit({ctor(e){this._list=e,this._fetchRequiredDecorators()},dispose(){this._decorators&&this._decorators.length&&(0,j.each)(this._decorators,((e,t)=>{t.dispose()}))},_fetchRequiredDecorators(){this._decorators=[],(0,j.each)(Ka,((e,t)=>{if(t.enabled.call(this._list)){const e=t.decoratorType.call(this._list),i=t.decoratorSubType.call(this._list),n=this._createDecorator(e,i);this._decorators.push(n)}}))},_createDecorator(e,t){return new(this._findDecorator(e,t))(this._list)},_findDecorator(e,t){var i;const n=null===(i=Wa[e])||void 0===i?void 0:i[t];if(!n)throw ge.Z.Error("E1012",e,t);return n},modifyItemElement(e){const t=(0,c.Z)(e.itemElement),i={$itemElement:t};this._prependBeforeBags(t,i),this._appendAfterBags(t,i),this._applyDecorators("modifyElement",i)},afterItemsRendered(){this._applyDecorators("afterRender")},_prependBeforeBags(e,t){const i=this._collectDecoratorsMarkup("beforeBag",t,"dx-list-item-before-bag");e.prepend(i)},_appendAfterBags(e,t){const i=this._collectDecoratorsMarkup("afterBag",t,"dx-list-item-after-bag");e.append(i)},_collectDecoratorsMarkup(e,t,i){const n=(0,c.Z)("<div>");return(0,j.each)(this._decorators,(function(){const o=(0,c.Z)("<div>").addClass(i);this[e]((0,f.l)({$container:o},t)),o.children().length&&n.append(o)})),n.children()},_applyDecorators(e,t){(0,j.each)(this._decorators,(function(){this[e](t)}))},_handlerExists(e){if(!this._decorators)return!1;const t=this._decorators,{length:i}=t;for(let n=0;n<i;n++)if(t[n][e]!==u.noop)return!0;return!1},_eventHandler(e,t,i){if(!this._decorators)return!1;let n=!1;const o=this._decorators,{length:r}=o;for(let s=0;s<r&&(n=o[s][e](t,i),!n);s++);return n},handleClick(e,t){return this._eventHandler("handleClick",e,t)},handleKeyboardEvents(e,t){return this._eventHandler("handleKeyboardEvents",e,t)},handleEnterPressing(e){return this._eventHandler("handleEnterPressing",e)},contextMenuHandlerExists(){return this._handlerExists("handleContextMenu")},handleContextMenu(e,t){return this._eventHandler("handleContextMenu",e,t)},getExcludedItemSelectors(){const e=[];return this._applyDecorators("getExcludedSelectors",e),e.join(",")}}),Ga=Ua;var Ya=i(7985);const Qa=function(e){return(e.group<<20)+e.item},Xa=function(e){return{group:e>>20,item:1048575&e}},Ja=vr.inherit({_groupElements(){return this._collectionWidget._itemContainer().find(".dx-list-group")},_groupItemElements:e=>e.find(".dx-list-item"),getIndexByItemData(e){const t=this._collectionWidget.option("items");let i=!1;return!!e&&(e.items&&e.items.length&&(e=e.items[0]),(0,j.each)(t,((t,n)=>!!n.items&&((0,j.each)(n.items,((n,o)=>o!==e||(i={group:t,item:n},!1))),!i&&void 0))),i)},getItemDataByIndex(e){const t=this._collectionWidget.option("items");return(0,_.kE)(e)?this.itemsGetter()[e]:e&&t[e.group]&&t[e.group].items[e.item]||null},itemsGetter(){let e=[];const t=this._collectionWidget.option("items");for(let i=0;i<t.length;i++)t[i]&&t[i].items?e=e.concat(t[i].items):e.push(t[i]);return e},deleteItemAtIndex(e){const t=Xa(e);this._collectionWidget.option("items")[t.group].items.splice(t.item,1)},getKeysByItems(e){let t,i=[];for(t=0;t<e.length;t++)e[t]&&e[t].items?i=i.concat(e[t].items):i.push(e[t]);const n=[];for(t=0;t<i.length;t++)n.push(this._collectionWidget.keyOf(i[t]));return n},getIndexByKey(e,t){const i=t||this._collectionWidget.option("items");let n=-1;const o=this;return(0,j.each)(i,((t,i)=>{if(i.items)return(0,j.each)(i.items,((i,r)=>{const s=o._collectionWidget.keyOf(r);if(o._equalKeys(s,e))return n={group:t,item:i},!1})),-1===n&&void 0})),n},_getGroups(e){const t=this._collectionWidget._dataController.group();return t?Ya.Z.queryByOptions((0,Zo.Z)(e),{group:t}).toArray():this._collectionWidget.option("items")},getItemsByKeys(e,t){const i=[],n=this._getGroups(t),o={},r=e=>{const t=this.getIndexByKey(e,n),i=t&&n[t.group];if(i)return{groupKey:i.key,item:i.items[t.item]}};return(0,j.each)(e,((e,t)=>{const n=r(t);if(!n)return;const{groupKey:s}=n,{item:a}=n;let l=o[s];l||(l={key:s,items:[]},o[s]=l,i.push(l)),l.items.push(a)})),i},moveItemAtIndexToIndex(e,t){const i=this._collectionWidget.option("items"),n=Xa(e),o=Xa(t),r=i[n.group].items,s=i[o.group].items,a=r[n.item];r.splice(n.item,1),s.splice(o.item,0,a)},_isItemIndex:e=>e&&(0,_.kE)(e.group)&&(0,_.kE)(e.item),_getNormalizedItemIndex(e){const t=(0,c.Z)(e),i=t.closest(".dx-list-group");return i.length?Qa({group:this._groupElements().index(i),item:this._groupItemElements(i).index(t)}):-1},_normalizeItemIndex:e=>Qa(e),_denormalizeItemIndex:e=>Xa(e),_getItemByNormalizedIndex(e){const t=Xa(e),i=this._groupElements().eq(t.group);return this._groupItemElements(i).eq(t.item)},_itemsFromSameParent:(e,t)=>Xa(e).group===Xa(t).group}),el=Ja,tl=za.inherit({_supportedKeys(){const e=this,t=this.callBase(),i=(i,n)=>{const o=this._editStrategy,r=this.option("focusedElement"),s=o.getNormalizedIndex(r);if(s!==this._getLastItemIndex()||!this._dataController.isLoading())if(i.shiftKey&&e.option("itemDragging.allowReordering")){const e=s+(n?-1:1),t=o.getItemElement(e);this.reorderItem(r,t),this.scrollToItem(r),i.preventDefault()}else this._editProvider.handleKeyboardEvents(s,n)||(n?t.upArrow(i):t.downArrow(i))};return(0,f.l)({},t,{del:t=>{e.option("allowItemDeleting")&&(t.preventDefault(),e.deleteItem(e.option("focusedElement")))},upArrow:e=>i(e,!0),downArrow:e=>i(e),enter:function(e){this._editProvider.handleEnterPressing(e)||t.enter.apply(this,arguments)},space:function(e){this._editProvider.handleEnterPressing(e)||t.space.apply(this,arguments)}})},_updateSelection(){this._editProvider.afterItemsRendered(),this.callBase()},_getLastItemIndex(){return this._itemElements().length-1},_refreshItemElements(){this.callBase();const e=this._editProvider.getExcludedItemSelectors();e.length&&(this._itemElementsCache=this._itemElementsCache.not(e))},_isItemStrictEquals(e,t){const i=e&&e.__dx_key__;return!(i&&!this.key()&&this._selection.isItemSelected(i))&&this.callBase(e,t)},_getDefaultOptions(){return(0,f.l)(this.callBase(),{showSelectionControls:!1,selectionMode:"none",selectAllMode:"page",onSelectAllValueChanged:null,selectAllText:z.Z.format("dxList-selectAll"),menuItems:[],menuMode:"context",allowItemDeleting:!1,itemDeleteMode:"static",itemDragging:{}})},_defaultOptionsRules(){return this.callBase().concat([{device:e=>"ios"===e.platform,options:{menuMode:"slide",itemDeleteMode:"slideItem"}},{device:{platform:"android"},options:{itemDeleteMode:"swipe"}}])},_init(){this.callBase(),this._initEditProvider()},_initDataSource(){this.callBase(),this._isPageSelectAll()||this._dataSource&&this._dataSource.requireTotalCount(!0)},_isPageSelectAll(){return"page"===this.option("selectAllMode")},_initEditProvider(){this._editProvider=new Ga(this)},_disposeEditProvider(){this._editProvider&&this._editProvider.dispose()},_refreshEditProvider(){this._disposeEditProvider(),this._initEditProvider()},_initEditStrategy(){this.option("grouped")?this._editStrategy=new el(this):this.callBase()},_initMarkup(){this._refreshEditProvider(),this.callBase()},_renderItems(){this.callBase(...arguments),this._editProvider.afterItemsRendered()},_selectedItemClass:()=>"dx-list-item-selected",_itemResponseWaitClass:()=>"dx-list-item-response-wait",_itemClickHandler(e){const t=(0,c.Z)(e.currentTarget);t.is(".dx-state-disabled, .dx-state-disabled *")||this._editProvider.handleClick(t,e)||(this._saveSelectionChangeEvent(e),this.callBase(...arguments))},_shouldFireContextMenuEvent(){return this.callBase(...arguments)||this._editProvider.contextMenuHandlerExists()},_itemHoldHandler(e){const t=(0,c.Z)(e.currentTarget);t.is(".dx-state-disabled, .dx-state-disabled *")||((0,v.isTouchEvent)(e)&&this._editProvider.handleContextMenu(t,e)?e.handledByEditProvider=!0:this.callBase(...arguments))},_getItemContainer(e){if(this.option("grouped")){var t;const i=null===(t=this._editStrategy.getIndexByItemData(e))||void 0===t?void 0:t.group;return this._getGroupContainerByIndex(i)}return this.callBase(e)},_itemContextMenuHandler(e){const t=(0,c.Z)(e.currentTarget);t.is(".dx-state-disabled, .dx-state-disabled *")||(!e.handledByEditProvider&&this._editProvider.handleContextMenu(t,e)?e.preventDefault():this.callBase(...arguments))},_postprocessRenderItem(e){this.callBase(...arguments),this._editProvider.modifyItemElement(e)},_clean(){this._disposeEditProvider(),this.callBase()},focusListItem(e){const t=this._editStrategy.getItemElement(e);this.option("focusedElement",t),this.focus(),this.scrollToItem(this.option("focusedElement"))},_optionChanged(e){switch(e.name){case"selectAllMode":this._initDataSource(),this._dataController.pageIndex(0),this._dataController.load();break;case"grouped":this._clearSelectedItems(),delete this._renderingGroupIndex,this._initEditStrategy(),this.callBase(e);break;case"showSelectionControls":case"menuItems":case"menuMode":case"allowItemDeleting":case"itemDeleteMode":case"itemDragging":case"selectAllText":this._invalidate();break;case"onSelectAllValueChanged":break;default:this.callBase(e)}},selectAll(){return this._selection.selectAll(this._isPageSelectAll())},unselectAll(){return this._selection.deselectAll(this._isPageSelectAll())},isSelectAll(){return this._selection.getSelectAllState(this._isPageSelectAll())},getFlatIndexByItemElement(e){return this._itemElements().index(e)},getItemElementByFlatIndex(e){const t=this._itemElements();return e<0||e>=t.length?(0,c.Z)():t.eq(e)},getItemByIndex(e){return this._editStrategy.getItemDataByIndex(e)},deleteItem(e){const t=this._editStrategy,i=t.getNormalizedIndex(e),n=this.option("focusedElement"),o=this.option("focusStateEnabled"),r=n?t.getNormalizedIndex(n):i,s=r===this._getLastItemIndex()||i<r?r-1:r;return this.callBase(e).done((function(){o&&this.focusListItem(s)}))}}).inherit(Ps).inherit({_addWidgetPrefix:e=>`dx-list-${e}`,_getCombinedFilter(){const e=this._dataController,t={filter:e.filter()};e.addSearchFilter(t);const{filter:i}=t;return i},_initDataSource(){const e=this.option("searchValue"),t=this.option("searchExpr"),i=this.option("searchMode");this.callBase();const n=this._dataController;e&&e.length&&n.searchValue(e),i.length&&n.searchOperation(Ps.getOperationBySearchMode(i)),t&&n.searchExpr(t)}});(0,r.default)("dxList",tl);const il=tl,nl=Cr.inherit({_initMarkup(){this._deferredItems=[],this.callBase()},_renderItemContent(e){const t=(0,p.BH)(),i=(0,p.BH)();this._deferredItems[e.index]=i;const n=this.callBase.call(this,e);return i.done((()=>{t.resolve(n)})),t.promise()},_onItemTemplateRendered(e,t){return()=>{this._deferredItems[t.index].resolve()}},_postProcessRenderItems:u.noop,_renderItemsAsync(){const e=(0,p.BH)();return p.gx.apply(this,this._deferredItems).done((()=>{this._postProcessRenderItems(),e.resolve()})),e.promise()},_clean(){this.callBase(),this._deferredItems=[]}}),ol="dx-toolbar";class rl extends nl{_getSynchronizableOptionsForCreateComponent(){return super._getSynchronizableOptionsForCreateComponent().filter((e=>"disabled"!==e))}_initTemplates(){super._initTemplates();const e=new No(((e,t,i)=>{if((0,_.PO)(t)){const{text:i,html:n,widget:o}=t;i&&e.text(i).wrapInner("<div>"),n&&e.html(n),"dxDropDownButton"===o&&(t.options=t.options??{},(0,_.$K)(t.options.stylingMode)||(t.options.stylingMode=this.option("useFlatButtons")?"text":"contained")),"dxButton"===o&&(this.option("useFlatButtons")&&(t.options=t.options??{},t.options.stylingMode=t.options.stylingMode??"text"),this.option("useDefaultButtons")&&(t.options=t.options??{},t.options.type=t.options.type??"default"))}else e.text(String(t));this._getTemplate("dx-polymorph-widget").render({container:e,model:i,parent:this})}),["text","html","widget","options"],this.option("integrationOptions.watchMethod"));this._templateManager.addDefaultTemplates({item:e,menuItem:e})}_getDefaultOptions(){return(0,n.Z)({},super._getDefaultOptions(),{renderAs:"topToolbar",grouped:!1,useFlatButtons:!1,useDefaultButtons:!1})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>(0,Sn.yj)(),options:{useFlatButtons:!0}}])}_itemContainer(){return this._$toolbarItemsContainer.find([".dx-toolbar-before",".dx-toolbar-center",".dx-toolbar-after"].join(","))}_itemClass(){return"dx-toolbar-item"}_itemDataKey(){return"dxToolbarItemDataKey"}_dimensionChanged(e){this._disposed||(this._arrangeItems(),this._applyCompactMode())}_initMarkup(){this._renderToolbar(),this._renderSections(),super._initMarkup()}_render(){super._render(),this._renderItemsAsync(),this._updateDimensionsInMaterial()}_postProcessRenderItems(){this._arrangeItems()}_renderToolbar(){this.$element().addClass(ol),this._$toolbarItemsContainer=(0,c.Z)("<div>").addClass("dx-toolbar-items-container").appendTo(this.$element()),this.setAria("role","toolbar")}_renderSections(){const e=this._$toolbarItemsContainer;(0,j.each)(["before","center","after"],((t,i)=>{const n=`dx-toolbar-${i}`;e.find(`.${n}`).length||(this[`_$${i}Section`]=(0,c.Z)("<div>").addClass(n).attr("role","presentation").appendTo(e))}))}_arrangeItems(e){var t,i;const n=e??(0,oe.dz)(this.$element());this._$centerSection.css({margin:"0 auto",float:"none"});const o=(0,ne.l)(null===(t=this._$beforeSection)||void 0===t?void 0:t.get(0)),r=(0,ne.l)(null===(i=this._$afterSection)||void 0===i?void 0:i.get(0));this._alignCenterSection(o,r,n);const s=this._$toolbarItemsContainer.find(".dx-toolbar-label").eq(0),a=s.parent();if(!s.length)return;const l=o.width?o.width:s.position().left,c=a.hasClass("dx-toolbar-before")?0:l,d=a.hasClass("dx-toolbar-after")?0:r.width;let h=0;a.children().not(".dx-toolbar-label").each(((e,t)=>{h+=(0,oe.Y_)(t)}));const u=n-h,p=Math.max(u-c-d,0);if(a.hasClass("dx-toolbar-before"))this._alignSection(this._$beforeSection,p);else{const e=(0,oe.Y_)(s)-(0,oe.dz)(s);s.css("maxWidth",p-e)}}_alignCenterSection(e,t,i){var n;this._alignSection(this._$centerSection,i-e.width-t.width);const o=this.option("rtlEnabled"),r=o?t:e,s=o?e:t,a=(0,ne.l)(null===(n=this._$centerSection)||void 0===n?void 0:n.get(0));(r.right>a.left||a.right>s.left)&&this._$centerSection.css({marginLeft:r.width,marginRight:s.width,float:r.width>s.width?"none":"right"})}_alignSection(e,t){let i=e.find(".dx-toolbar-label").toArray();t-=this._getCurrentLabelsPaddings(i);const n=this._getCurrentLabelsWidth(i),o=Math.abs(n-t);t<n?(i=i.reverse(),this._alignSectionLabels(i,o,!1)):this._alignSectionLabels(i,o,!0)}_alignSectionLabels(e,t,i){const n=function(e){return(0,ne.l)(e).width};for(let o=0;o<e.length;o++){const r=(0,c.Z)(e[o]),s=Math.ceil(n(e[o]));let a;i&&r.css("maxWidth","inherit");const l=Math.ceil(i?n(e[o]):s);if(!(l<t)){a=i?s+t:s-t,r.css("maxWidth",a);break}a=i?l:0,t-=l,r.css("maxWidth",a)}}_applyCompactMode(){const e=(0,c.Z)(this.element());e.removeClass("dx-toolbar-compact"),this.option("compactMode")&&this._getSummaryItemsSize("width",this._itemElements(),!0)>(0,oe.dz)(e)&&e.addClass("dx-toolbar-compact")}_getCurrentLabelsWidth(e){let t=0;return e.forEach((e=>{t+=(0,oe.Y_)(e)})),t}_getCurrentLabelsPaddings(e){let t=0;return e.forEach((e=>{t+=(0,oe.Y_)(e)-(0,oe.dz)(e)})),t}_renderItem(e,t,i,n){const o=t.location??"center",r=i??this[`_$${o}Section`],s=!!(t.text??t.html),a=super._renderItem(e,t,r,n);return a.toggleClass("dx-toolbar-button",!s).toggleClass("dx-toolbar-label",s).addClass(t.cssClass),a}_renderGroupedItems(){(0,j.each)(this.option("items"),((e,t)=>{const i=t.items,n=(0,c.Z)("<div>").addClass("dx-toolbar-group"),o=t.location??"center";i&&i.length&&((0,j.each)(i,((e,t)=>{this._renderItem(e,t,n,null)})),this._$toolbarItemsContainer.find(`.dx-toolbar-${o}`).append(n))}))}_renderItems(e){this.option("grouped")&&e.length&&e[0].items?this._renderGroupedItems():super._renderItems(e)}_getToolbarItems(){return this.option("items")??[]}_renderContentImpl(){const e=this._getToolbarItems();this.$element().toggleClass("dx-toolbar-mini",0===e.length),this._renderedItemsCount?this._renderItems(e.slice(this._renderedItemsCount)):this._renderItems(e),this._applyCompactMode()}_renderEmptyMessage(){}_clean(){this._$toolbarItemsContainer.children().empty(),this.$element().empty(),delete this._$beforeSection,delete this._$centerSection,delete this._$afterSection}_visibilityChanged(e){e&&this._arrangeItems()}_isVisible(){return(0,oe.dz)(this.$element())>0&&(0,oe.Cr)(this.$element())>0}_getIndexByItem(e){return this._getToolbarItems().indexOf(e)}_itemOptionChanged(e,t,i,n){super._itemOptionChanged(e,t,i,n),this._arrangeItems()}_optionChanged(e){const{name:t}=e;switch(t){case"width":super._optionChanged(e),this._dimensionChanged();break;case"renderAs":case"useFlatButtons":case"useDefaultButtons":this._invalidate();break;case"compactMode":this._applyCompactMode();break;case"grouped":break;default:super._optionChanged(e)}}_dispose(){super._dispose(),clearTimeout(this._waitParentAnimationTimeout)}_updateDimensionsInMaterial(){if((0,Sn.x2)()){const e=()=>new Promise((e=>{const t=()=>{let t=!0;return this.$element().parents().each(((e,i)=>{if(mo.default.isAnimating((0,c.Z)(i)))return t=!1,!1})),t&&e(),t},i=()=>{clearTimeout(this._waitParentAnimationTimeout),this._waitParentAnimationTimeout=setTimeout((()=>t()||i()),15)};i()})),t=()=>{const e=this.$element().find(".dx-toolbar-label"),t=[];return e.each(((e,i)=>{const n=(0,c.Z)(i).text(),o=(0,c.Z)(i).css("fontWeight");t.push((0,Sn.Ih)(n,o))})),Promise.all(t)};Promise.all([e(),t()]).then((()=>{this._dimensionChanged()}))}}}(0,r.default)("dxToolbarBase",rl);const sl=rl,al=["dxAutocomplete","dxButton","dxCheckBox","dxDateBox","dxMenu","dxSelectBox","dxTabs","dxTextBox","dxButtonGroup","dxDropDownButton"];function ll(e,t){var i;if(!e)return;const n=e._findItemElementByItem(t);if(!n.length)return;const o=e._getItemData(n),r=!!(null!==(i=o.options)&&void 0!==i&&i.disabled||o.disabled||e.option("disabled")),{widget:s}=o;if(s&&al.includes(s)){const e=n.find(s.toLowerCase().replace("dx",".dx-"));if(e.length){var a,l;const t=function(e){const t=e.data&&e.data(),i=t&&t.dxComponents,n=i&&i[0];return n&&t[n]}(e);if(!t)return;let i=null===(a=t._focusTarget)||void 0===a?void 0:a.call(t);i="dxDropDownButton"===s?i&&i.find(".dx-buttongroup"):i??(0,c.Z)(t.element());const n=null===(l=o.options)||void 0===l?void 0:l.tabIndex;r?i.attr("tabIndex",-1):i.attr("tabIndex",n??0)}}}class cl{constructor(e){this._toolbar=e}_initMarkup(){}_updateMenuVisibility(){}_renderMenuItems(){}_renderItem(){}_getMenuItems(){}_getToolbarItems(){return this._toolbar.option("items")??[]}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",this._toolbar._itemElements(),!0)}_arrangeItems(){const e=this._toolbar._$toolbarItemsContainer.find(".dx-toolbar-label").eq(0);if(!e.length)return;const t=(0,oe.dz)(this._toolbar.$element()),i=(0,oe.Y_)(e)-(0,oe.dz)(e);e.css("maxWidth",t-i)}_hideOverflowItems(){}_dimensionChanged(){}_itemOptionChanged(){}_optionChanged(){}}var dl=i(7028),hl=i(8839),ul=i(4072),pl=i(112);const fl="dxResizable",_l=(0,v.addNamespace)(pl.BL,fl),ml=(0,v.addNamespace)(pl.pB,fl),gl=(0,v.addNamespace)(pl.ut,fl),vl={left:"borderLeftWidth",top:"borderTopWidth",right:"borderRightWidth",bottom:"borderBottomWidth"},bl=sn.default.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{handles:"all",step:"1",stepPrecision:"simple",area:void 0,minWidth:30,maxWidth:1/0,minHeight:30,maxHeight:1/0,onResizeStart:null,onResize:null,onResizeEnd:null,roundStepValue:!0,keepAspectRatio:!0})},_init(){this.callBase(),this.$element().addClass("dx-resizable")},_initMarkup(){this.callBase(),this._renderHandles()},_render(){this.callBase(),this._renderActions()},_renderActions(){this._resizeStartAction=this._createActionByOption("onResizeStart"),this._resizeEndAction=this._createActionByOption("onResizeEnd"),this._resizeAction=this._createActionByOption("onResize")},_renderHandles(){this._handles=[];const e=this.option("handles");if("none"===e||!e)return;const t="all"===e?["top","bottom","left","right"]:e.split(" "),i={};(0,j.each)(t,((e,t)=>{i[t]=!0,this._renderHandle(t)})),i.bottom&&i.right&&this._renderHandle("corner-bottom-right"),i.bottom&&i.left&&this._renderHandle("corner-bottom-left"),i.top&&i.right&&this._renderHandle("corner-top-right"),i.top&&i.left&&this._renderHandle("corner-top-left"),this._attachEventHandlers()},_renderHandle(e){const t=(0,c.Z)("<div>").addClass("dx-resizable-handle").addClass(`dx-resizable-handle-${e}`).appendTo(this.$element());this._handles.push(t)},_attachEventHandlers(){if(this.option("disabled"))return;const e={};e[_l]=this._dragStartHandler.bind(this),e[ml]=this._dragHandler.bind(this),e[gl]=this._dragEndHandler.bind(this),this._handles.forEach((t=>{m.Z.on(t,e,{direction:"both",immediate:!0})}))},_detachEventHandlers(){this._handles.forEach((e=>{m.Z.off(e)}))},_toggleEventHandlers(e){e?this._attachEventHandlers():this._detachEventHandlers()},_getElementSize(){const e=this.$element();return"border-box"===e.css("boxSizing")?{width:(0,oe.Y_)(e),height:(0,oe.zp)(e)}:{width:(0,oe.dz)(e),height:(0,oe.Cr)(e)}},_dragStartHandler(e){const t=this.$element();t.is(".dx-state-disabled, .dx-state-disabled *")?e.cancel=!0:(this._toggleResizingClass(!0),this._movingSides=this._getMovingSides(e),this._elementLocation=(0,Ws.jt)(t),this._elementSize=this._getElementSize(),this._renderDragOffsets(e),this._resizeStartAction({event:e,width:this._elementSize.width,height:this._elementSize.height,handles:this._movingSides}),e.targetElements=null)},_toggleResizingClass(e){this.$element().toggleClass("dx-resizable-resizing",e)},_renderDragOffsets(e){const t=this._getArea();if(!t)return;const i=(0,c.Z)(e.target).closest(".dx-resizable-handle"),n=(0,oe.Y_)(i),o=(0,oe.zp)(i),r=i.offset(),s=t.offset,a=this._getAreaScrollOffset();e.maxLeftOffset=this._leftMaxOffset=r.left-s.left-a.scrollX,e.maxRightOffset=this._rightMaxOffset=s.left+t.width-r.left-n+a.scrollX,e.maxTopOffset=this._topMaxOffset=r.top-s.top-a.scrollY,e.maxBottomOffset=this._bottomMaxOffset=s.top+t.height-r.top-o+a.scrollY},_getBorderWidth(e,t){if((0,_.FJ)(e.get(0)))return 0;const i=e.css(vl[t]);return parseInt(i)||0},_proportionate(e,t){const i=this._elementSize;return t*("x"===e?i.width/i.height:i.height/i.width)},_getProportionalDelta(e){let{x:t,y:i}=e;const n=this._proportionate("y",t);if(n>=i)return{x:t,y:n};const o=this._proportionate("x",i);return o>=t?{x:o,y:i}:{x:0,y:0}},_getDirectionName(e){const t=this._movingSides;return"x"===e?t.left?"left":"right":t.top?"top":"bottom"},_fitIntoArea(e,t){const i=this._getDirectionName(e);return Math.min(t,this[`_${i}MaxOffset`]??1/0)},_fitDeltaProportionally(e){let t=(0,n.Z)({},e);const i=this._elementSize,{minWidth:o,minHeight:r,maxWidth:s,maxHeight:a}=this.option(),l=()=>i.width+t.x,c=()=>i.height+t.y,d=e=>t[e]===this._fitIntoArea(e,t[e]),h=()=>(0,ul.Z2)(l(),o,s)&&d("x"),u=()=>(0,ul.Z2)(c(),r,a)&&d("y");if(!h()){const e=this._fitIntoArea("x",(0,ul.n$)(l(),o,s)-i.width);t={x:e,y:this._proportionate("y",e)}}if(!u()){const e=this._fitIntoArea("y",(0,ul.n$)(c(),r,a)-i.height);t={x:this._proportionate("x",e),y:e}}return h()&&u()?t:{x:0,y:0}},_fitDelta(e){let{x:t,y:i}=e;const n=this._elementSize,{minWidth:o,minHeight:r,maxWidth:s,maxHeight:a}=this.option();return{x:(0,ul.n$)(n.width+t,o,s)-n.width,y:(0,ul.n$)(n.height+i,r,a)-n.height}},_getDeltaByOffset(e){const t=this._movingSides,i=this._isCornerHandler(t)&&this.option("keepAspectRatio");let n={x:e.x*(t.left?-1:1),y:e.y*(t.top?-1:1)};if(i){const e=this._getProportionalDelta(n);n=this._fitDeltaProportionally(e)}else{const e=this._fitDelta(n);n=this._roundByStep(e)}return n},_updatePosition(e,t){let{width:i,height:n}=t;const o=this._elementLocation,r=this._movingSides,s=this.$element(),a=this._getElementSize(),l=e.y*(r.top?-1:1)-((a.height||n)-n),c=e.x*(r.left?-1:1)-((a.width||i)-i);(0,Ws.pB)(s,{top:o.top+(r.top?l:0),left:o.left+(r.left?c:0)})},_dragHandler(e){const t=this._getOffset(e),i=this._getDeltaByOffset(t),n=this._updateDimensions(i);this._updatePosition(i,n),this._triggerResizeAction(e,n)},_updateDimensions(e){const t=e=>"px"===e.substring(e.length-2),i="strict"===this.option("stepPrecision"),n=this._elementSize,o=n.width+e.x,r=n.height+e.y,s=this.$element().get(0).style,a=e.x||i||t(s.width),l=e.y||i||t(s.height);return a&&this.option({width:o}),l&&this.option({height:r}),{width:a?o:n.width,height:l?r:n.height}},_triggerResizeAction(e,t){let{width:i,height:n}=t;this._resizeAction({event:e,width:this.option("width")||i,height:this.option("height")||n,handles:this._movingSides}),(0,hl.U_)(this.$element())},_isCornerHandler:e=>0===Object.values(e).reduce(((e,t)=>e^t),0),_getOffset(e){const{offset:t}=e,i=this._movingSides;return i.left||i.right||(t.x=0),i.top||i.bottom||(t.y=0),t},_roundByStep(e){return"strict"===this.option("stepPrecision")?this._roundStrict(e):this._roundNotStrict(e)},_getSteps(){return(0,u.pairToObject)(this.option("step"),!this.option("roundStepValue"))},_roundNotStrict(e){const t=this._getSteps();return{x:e.x-e.x%t.h,y:e.y-e.y%t.v}},_roundStrict(e){const t=this._movingSides,i={x:e.x*(t.left?-1:1),y:e.y*(t.top?-1:1)},n=this._getSteps(),o=this._elementLocation,r=this._elementSize,s=t.left?o.left:o.left+r.width,a=t.top?o.top:o.top+r.height,l=(s+i.x)%n.h,c=(a+i.y)%n.v,d=Math.sign||(e=>0==(e=+e)||isNaN(e)?e:e>0?1:-1),h=(e,t)=>(1+.2*d(t))%1*e,u=(e,t)=>Math.abs(e)<.2*t;let p=i.x-l,f=i.y-c;l>h(n.h,i.x)&&(p+=n.h),c>h(n.v,i.y)&&(f+=n.v);const _=!t.left&&!t.right||u(i.x,n.h)?0:p,m=!t.top&&!t.bottom||u(i.y,n.v)?0:f;return{x:_*(t.left?-1:1),y:m*(t.top?-1:1)}},_getMovingSides(e){const t=(0,c.Z)(e.target),i=t.hasClass("dx-resizable-handle-corner-top-left"),n=t.hasClass("dx-resizable-handle-corner-top-right"),o=t.hasClass("dx-resizable-handle-corner-bottom-left"),r=t.hasClass("dx-resizable-handle-corner-bottom-right");return{top:t.hasClass("dx-resizable-handle-top")||i||n,left:t.hasClass("dx-resizable-handle-left")||i||o,bottom:t.hasClass("dx-resizable-handle-bottom")||o||r,right:t.hasClass("dx-resizable-handle-right")||n||r}},_getArea(){let e=this.option("area");return(0,_.mf)(e)&&(e=e.call(this)),(0,_.PO)(e)?this._getAreaFromObject(e):this._getAreaFromElement(e)},_getAreaScrollOffset(){const e=this.option("area"),t={scrollY:0,scrollX:0};if(!(0,_.mf)(e)&&!(0,_.PO)(e)){const i=(0,c.Z)(e)[0];(0,_.FJ)(i)&&(t.scrollX=i.pageXOffset,t.scrollY=i.pageYOffset)}return t},_getAreaFromObject(e){const t={width:e.right-e.left,height:e.bottom-e.top,offset:{left:e.left,top:e.top}};return this._correctAreaGeometry(t),t},_getAreaFromElement(e){const t=(0,c.Z)(e);let i;return t.length&&(i={width:(0,oe.Xt)(t),height:(0,oe.fA)(t),offset:(0,f.l)({top:0,left:0},(0,_.FJ)(t[0])?{}:t.offset())},this._correctAreaGeometry(i,t)),i},_correctAreaGeometry(e,t){const i=t?this._getBorderWidth(t,"left"):0,n=t?this._getBorderWidth(t,"top"):0;e.offset.left+=i+this._getBorderWidth(this.$element(),"left"),e.offset.top+=n+this._getBorderWidth(this.$element(),"top"),e.width-=(0,oe.Y_)(this.$element())-(0,oe.Xt)(this.$element()),e.height-=(0,oe.zp)(this.$element())-(0,oe.fA)(this.$element())},_dragEndHandler(e){const t=this.$element();this._resizeEndAction({event:e,width:(0,oe.Y_)(t),height:(0,oe.zp)(t),handles:this._movingSides}),this._toggleResizingClass(!1)},_renderWidth(e){this.option("width",(0,ul.n$)(e,this.option("minWidth"),this.option("maxWidth")))},_renderHeight(e){this.option("height",(0,ul.n$)(e,this.option("minHeight"),this.option("maxHeight")))},_optionChanged(e){switch(e.name){case"disabled":this._toggleEventHandlers(!e.value),this.callBase(e);break;case"handles":this._invalidate();break;case"minWidth":case"maxWidth":(0,Z.hasWindow)()&&this._renderWidth((0,oe.Y_)(this.$element()));break;case"minHeight":case"maxHeight":(0,Z.hasWindow)()&&this._renderHeight((0,oe.zp)(this.$element()));break;case"onResize":case"onResizeStart":case"onResizeEnd":this._renderActions();break;case"area":case"stepPrecision":case"step":case"roundStepValue":case"keepAspectRatio":break;default:this.callBase(e)}},_clean(){this.$element().find(".dx-resizable-handle").remove()},_useTemplates:()=>!1});(0,r.default)(fl,bl);const yl=bl;var Cl=i(6371);const wl=class{constructor(e){this.init(e)}init(e){let{dragEnabled:t,handle:i,draggableElement:n,positionController:o}=e;this._positionController=o,this._draggableElement=n,this._handle=i,this._dragEnabled=t,this.unsubscribe(),t&&this.subscribe()}moveDown(e){this._moveTo(5,0,e)}moveUp(e){this._moveTo(-5,0,e)}moveLeft(e){this._moveTo(0,-5,e)}moveRight(e){this._moveTo(0,5,e)}subscribe(){const e=this._getEventNames();m.Z.on(this._handle,e.startEventName,(e=>{this._dragStartHandler(e)})),m.Z.on(this._handle,e.updateEventName,(e=>{this._dragUpdateHandler(e)})),m.Z.on(this._handle,e.endEventName,(e=>{this._dragEndHandler(e)}))}unsubscribe(){const e=this._getEventNames();m.Z.off(this._handle,e.startEventName),m.Z.off(this._handle,e.updateEventName),m.Z.off(this._handle,e.endEventName)}_getEventNames(){return{startEventName:(0,v.addNamespace)(pl.BL,"overlayDrag"),updateEventName:(0,v.addNamespace)(pl.pB,"overlayDrag"),endEventName:(0,v.addNamespace)(pl.ut,"overlayDrag")}}_dragStartHandler(e){const t=this._getAllowedOffsets();this._prevOffset={x:0,y:0},e.targetElements=[],e.maxTopOffset=t.top,e.maxBottomOffset=t.bottom,e.maxLeftOffset=t.left,e.maxRightOffset=t.right}_dragUpdateHandler(e){const t={top:e.offset.y-this._prevOffset.y,left:e.offset.x-this._prevOffset.x};this._moveByOffset(t),this._prevOffset=e.offset}_dragEndHandler(e){this._positionController.dragHandled(),this._positionController.detectVisualPositionChange(e)}_moveTo(e,t,i){if(!this._dragEnabled)return;i.preventDefault(),i.stopPropagation();const n=this._fitOffsetIntoAllowedRange(e,t);this._moveByOffset(n),this._dragEndHandler(i)}_fitOffsetIntoAllowedRange(e,t){const i=this._getAllowedOffsets();return{top:(0,ul.n$)(e,-i.top,i.bottom),left:(0,ul.n$)(t,-i.left,i.right)}}_getContainerDimensions(){const e=Fe.Z.getDocument(),t=this._positionController.$dragResizeContainer.get(0);let i=(0,oe.Y_)(t),n=(0,oe.zp)(t);return(0,_.FJ)(t)&&(n=Math.max(e.body.clientHeight,n),i=Math.max(e.body.clientWidth,i)),{width:i,height:n}}_getContainerPosition(){const e=this._positionController.$dragResizeContainer.get(0);return(0,_.FJ)(e)?{top:0,left:0}:(0,oe.os)(e)}_getElementPosition(){return(0,oe.os)(this._draggableElement)}_getInnerDelta(){const e=this._getContainerDimensions(),t=this._getElementDimensions();return{x:e.width-t.width,y:e.height-t.height}}_getOuterDelta(){const{width:e,height:t}=this._getElementDimensions(),{outsideDragFactor:i}=this._positionController;return{x:e*i,y:t*i}}_getFullDelta(){const e=this._getInnerDelta(),t=this._getOuterDelta();return{x:e.x+t.x,y:e.y+t.y}}_getElementDimensions(){return{width:this._draggableElement.offsetWidth,height:this._draggableElement.offsetHeight}}_getAllowedOffsets(){const e=this._getFullDelta();if(!(e.y>=0&&e.x>=0))return{top:0,bottom:0,left:0,right:0};const t=this._getElementPosition(),i=this._getContainerPosition(),n=this._getOuterDelta();return{top:t.top-i.top+n.y,bottom:-t.top+i.top+e.y,left:t.left-i.left+n.x,right:-t.left+i.left+e.x}}_moveByOffset(e){const t=(0,Ws.jt)(this._draggableElement),i={left:t.left+e.left,top:t.top+e.top};(0,Ws.pB)(this._draggableElement,i)}},xl={setOverflow:u.noop,restoreOverflow:u.noop};var Sl=i(6425),Il=i(4405);const kl=["fullScreen","forceApplyBindings","dragOutsideBoundary","dragAndResizeArea","outsideDragFactor"],El=(0,Z.getWindow)();class Ol extends Il.H{constructor(e){let{fullScreen:t,forceApplyBindings:i,dragOutsideBoundary:o,dragAndResizeArea:r,outsideDragFactor:s}=e;super((0,an.Z)(e,kl)),this._props=(0,n.Z)({},this._props,{fullScreen:t,forceApplyBindings:i,dragOutsideBoundary:o,dragAndResizeArea:r,outsideDragFactor:s}),this._$dragResizeContainer=void 0,this._updateDragResizeContainer()}set fullScreen(e){this._props.fullScreen=e,e?this._fullScreenEnabled():this._fullScreenDisabled()}get $dragResizeContainer(){return this._$dragResizeContainer}get outsideDragFactor(){return this._props.dragOutsideBoundary?1:this._props.outsideDragFactor}set dragAndResizeArea(e){this._props.dragAndResizeArea=e,this._updateDragResizeContainer()}set dragOutsideBoundary(e){this._props.dragOutsideBoundary=e,this._updateDragResizeContainer()}set outsideDragFactor(e){this._props.outsideDragFactor=e}updateContainer(e){super.updateContainer(e),this._updateDragResizeContainer()}dragHandled(){this.restorePositionOnNextRender(!1)}resizeHandled(){this.restorePositionOnNextRender(!1)}positionContent(){var e,t;this._props.fullScreen?((0,Ws.pB)(this._$content,{top:0,left:0}),this.detectVisualPositionChange()):(null===(e=(t=this._props).forceApplyBindings)||void 0===e||e.call(t),super.positionContent())}_updateDragResizeContainer(){this._$dragResizeContainer=this._getDragResizeContainer()}_getDragResizeContainer(){return this._props.dragOutsideBoundary?(0,c.Z)(El):this._props.dragAndResizeArea?(0,c.Z)(this._props.dragAndResizeArea):(0,Sl.In)().get(0)||this._props.container?this._$markupContainer:(0,c.Z)(El)}_getVisualContainer(){return this._props.fullScreen?(0,c.Z)(El):super._getVisualContainer()}_fullScreenEnabled(){this.restorePositionOnNextRender(!1)}_fullScreenDisabled(){this.restorePositionOnNextRender(!0)}}const Tl=(0,Z.getWindow)(),Dl=["cancel","clear","done"],Bl=Be.default.safari&&(0,dl.q)(Be.default.version,[11])<0,Al={static:"",inherit:"dx-popup-inherit-height",flex:"dx-popup-flex-height"},Pl=se.Z.inherit({_supportedKeys(){return(0,f.l)(this.callBase(),{upArrow:e=>{var t;null===(t=this._drag)||void 0===t||t.moveUp(e)},downArrow:e=>{var t;null===(t=this._drag)||void 0===t||t.moveDown(e)},leftArrow:e=>{var t;null===(t=this._drag)||void 0===t||t.moveLeft(e)},rightArrow:e=>{var t;null===(t=this._drag)||void 0===t||t.moveRight(e)}})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{fullScreen:!1,title:"",showTitle:!0,titleTemplate:"title",onTitleRendered:null,dragOutsideBoundary:!1,dragEnabled:!1,dragAndResizeArea:void 0,enableBodyScroll:!0,outsideDragFactor:0,onResizeStart:null,onResize:null,onResizeEnd:null,resizeEnabled:!1,toolbarItems:[],showCloseButton:!1,bottomTemplate:"bottom",useDefaultToolbarButtons:!1,useFlatToolbarButtons:!1,autoResizeEnabled:!0})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{animation:this._iosAnimation}},{device:{platform:"android"},options:{animation:this._androidAnimation}},{device:{platform:"generic"},options:{showCloseButton:!0}},{device:e=>"desktop"===a.default.real().deviceType&&"generic"===e.platform,options:{dragEnabled:!0}},{device:()=>"desktop"===a.default.real().deviceType&&!a.default.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>(0,Sn.yj)(),options:{useFlatToolbarButtons:!0}},{device:()=>(0,Sn.x2)(),options:{useDefaultToolbarButtons:!0,showCloseButton:!1}}])},_iosAnimation:{show:{type:"slide",duration:400,from:{position:{my:"top",at:"bottom"}},to:{position:{my:"center",at:"center"}}},hide:{type:"slide",duration:400,from:{opacity:1,position:{my:"center",at:"center"}},to:{opacity:1,position:{my:"top",at:"bottom"}}}},_androidAnimation(){return this.option("fullScreen")?{show:{type:"slide",duration:300,from:{top:"30%",opacity:0},to:{top:0,opacity:1}},hide:{type:"slide",duration:300,from:{top:0,opacity:1},to:{top:"30%",opacity:0}}}:{show:{type:"fade",duration:400,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}}},_init(){const e=this.option("_wrapperClassExternal"),t=e?`dx-popup-wrapper ${e}`:"dx-popup-wrapper";this.callBase(),this._createBodyOverflowManager(),this._updateResizeCallbackSkipCondition(),this.$element().addClass("dx-popup"),this.$wrapper().addClass(t),this._$popupContent=this._$content.wrapInner((0,c.Z)("<div>").addClass("dx-popup-content")).children().eq(0),this._toggleContentScrollClass(),this.$overlayContent().attr("role","dialog")},_render(){const e=this.option("fullScreen");this._toggleFullScreenClass(e),this.callBase()},_createBodyOverflowManager(){this._bodyOverflowManager=(()=>{if(!(0,Z.hasWindow)())return xl;const e=(0,Z.getWindow)(),{documentElement:t}=Fe.Z.getDocument(),i=Fe.Z.getBody(),n="ios"===a.default.real().platform,o={overflow:null,overflowX:null,overflowY:null,paddingRight:null,position:null,top:null,left:null};return{setOverflow:n?()=>{if((0,_.$K)(o.position)||"fixed"===i.style.position)return;const{scrollY:t,scrollX:n}=e;o.position=i.style.position,o.top=i.style.top,o.left=i.style.left,i.style.setProperty("position","fixed"),i.style.setProperty("top",-t+"px"),i.style.setProperty("left",-n+"px")}:()=>{(()=>{const n=e.innerWidth-t.clientWidth;if(o.paddingRight||n<=0)return;const r=e.getComputedStyle(i).getPropertyValue("padding-right"),s=parseInt(r,10);o.paddingRight=s,i.style.setProperty("padding-right",`${s+n}px`)})(),o.overflow||"hidden"===i.style.overflow||(o.overflow=i.style.overflow,o.overflowX=i.style.overflowX,o.overflowY=i.style.overflowY,i.style.setProperty("overflow","hidden"))},restoreOverflow:n?()=>{if(!(0,_.$K)(o.position))return;const t=-parseInt(i.style.top,10),n=-parseInt(i.style.left,10);["position","top","left"].forEach((e=>{o[e]?i.style.setProperty(e,o[e]):i.style.removeProperty(e)})),e.scrollTo(n,t),o.position=null}:()=>{(0,_.$K)(o.paddingRight)&&(o.paddingRight?i.style.setProperty("padding-right",`${o.paddingRight}px`):i.style.removeProperty("padding-right"),o.paddingRight=null),["overflow","overflowX","overflowY"].forEach((e=>{if(!(0,_.$K)(o[e]))return;const t=e.replace(/(X)|(Y)/,(e=>`-${e.toLowerCase()}`));o[e]?i.style.setProperty(t,o[e]):i.style.removeProperty(t),o[e]=null}))}}})()},_toggleFullScreenClass(e){this.$overlayContent().toggleClass("dx-popup-fullscreen",e).toggleClass("dx-popup-normal",!e)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new d.s,bottom:new d.s})},_getActionsList(){return this.callBase().concat(["onResizeStart","onResize","onResizeEnd"])},_contentResizeHandler(e){this._shouldSkipContentResize(e)||this._renderGeometry({shouldOnlyReposition:!0})},_doesShowAnimationChangeDimensions(){const e=this.option("animation");return["to","from"].some((t=>{var i;const n=null==e||null===(i=e.show)||void 0===i?void 0:i[t];return(0,_.Kn)(n)&&("width"in n||"height"in n)}))},_updateResizeCallbackSkipCondition(){const e=this._doesShowAnimationChangeDimensions();this._shouldSkipContentResize=t=>e&&this._showAnimationProcessing||this._areContentDimensionsRendered(t)},_observeContentResize(e){if(!this.option("useResizeObserver"))return;const t=this._$content.get(0);e?Tr.Z.observe(t,(e=>{this._contentResizeHandler(e)})):Tr.Z.unobserve(t)},_areContentDimensionsRendered(e){var t,i,n;const o=null===(t=e.contentBoxSize)||void 0===t?void 0:t[0];var r,s;if(o)return parseInt(o.inlineSize,10)===(null===(r=this._renderedDimensions)||void 0===r?void 0:r.width)&&parseInt(o.blockSize,10)===(null===(s=this._renderedDimensions)||void 0===s?void 0:s.height);const{contentRect:a}=e;return parseInt(a.width,10)===(null===(i=this._renderedDimensions)||void 0===i?void 0:i.width)&&parseInt(a.height,10)===(null===(n=this._renderedDimensions)||void 0===n?void 0:n.height)},_renderContent(){this.callBase(),this._observeContentResize(!0)},_renderContentImpl(){this._renderTitle(),this.callBase(),this._renderResize(),this._renderBottom()},_renderTitle(){const e=this._getToolbarItems("top"),{title:t,showTitle:i}=this.option();if(i&&t&&e.unshift({location:a.default.current().ios?"center":"before",text:t}),i||e.length>0){this._$title&&this._$title.remove();const t=(0,c.Z)("<div>").addClass("dx-popup-title").insertBefore(this.$content());this._$title=this._renderTemplateByType("titleTemplate",e,t).addClass("dx-popup-title"),this._renderDrag(),this._executeTitleRenderAction(this._$title),this._$title.toggleClass("dx-has-close-button",this._hasCloseButton())}else this._$title&&this._$title.detach();this._toggleAriaLabel()},_toggleAriaLabel(){var e;const{title:t,showTitle:i}=this.option(),n=i&&t?new V.Z:null;null===(e=this._$title)||void 0===e||e.find(".dx-toolbar-label").eq(0).attr("id",n),this.$overlayContent().attr("aria-labelledby",n)},_renderTemplateByType(e,t,i,n){const{rtlEnabled:o,useDefaultToolbarButtons:r,useFlatToolbarButtons:s,disabled:a}=this.option(),h=this._getTemplateByOption(e);if(h instanceof d.s){const e=(0,f.l)({},this.option("integrationOptions"),{skipTemplates:["content","title"]}),l=(0,f.l)(n,{items:t,rtlEnabled:o,useDefaultButtons:r,useFlatButtons:s,disabled:a,integrationOptions:e});this._getTemplate("dx-polymorph-widget").render({container:i,model:{widget:this._getToolbarName(),options:l}});const c=i.children("div");return i.replaceWith(c),c}const u=(0,c.Z)(h.render({container:(0,l.uD)(i)}));return u.hasClass("dx-template-wrapper")&&(i.replaceWith(u),i=u),i},_getToolbarName:()=>"dxToolbarBase",_renderVisibilityAnimate(e){return this.callBase(e)},_hide(){return this._observeContentResize(!1),this.callBase()},_executeTitleRenderAction(e){this._getTitleRenderAction()({titleElement:(0,l.uD)(e)})},_getTitleRenderAction(){return this._titleRenderAction||this._createTitleRenderAction()},_createTitleRenderAction(){return this._titleRenderAction=this._createActionByOption("onTitleRendered",{element:this.element(),excludeValidators:["disabled","readOnly"]})},_getCloseButton(){return{toolbar:"top",location:"after",template:this._getCloseButtonRenderer()}},_getCloseButtonRenderer(){return(e,t,i)=>{const n=(0,c.Z)("<div>").addClass("dx-closebutton");this._createComponent(n,_o,{icon:"close",onClick:this._createToolbarItemAction(void 0),stylingMode:"text",integrationOptions:{}}),(0,c.Z)(i).append(n)}},_getToolbarItems(e){const t=this.option("toolbarItems"),i=[];this._toolbarItemClasses=[];const n=a.default.current().platform;let o=0;return(0,j.each)(t,((t,r)=>{const s=(0,_.$K)(r.shortcut),l=s?(e=>{const t=a.default.current(),{platform:i}=t;let n="bottom",o="before";if("ios"===i)switch(e){case"cancel":n="top";break;case"clear":n="top",o="after";break;case"done":o="after"}else if("android"===i)switch(e){case"cancel":case"done":o="after"}return{toolbar:n,location:o}})(r.shortcut):r;if(s&&"ios"===n&&o<2&&(l.toolbar="top",o++),l.toolbar=r.toolbar||l.toolbar||"top",l&&l.toolbar===e){s&&(0,f.l)(l,{location:r.location},this._getToolbarItemByAlias(r));const e="generic"===n;"done"===r.shortcut&&e||"cancel"===r.shortcut&&!e?i.unshift(l):i.push(l)}})),"top"===e&&this._hasCloseButton()&&i.push(this._getCloseButton()),i},_hasCloseButton(){return this.option("showCloseButton")&&this.option("showTitle")},_getLocalizationKey:e=>"done"===e.toLowerCase()?"OK":(0,En.camelize)(e,!0),_getToolbarButtonStylingMode(e){return(0,Sn.dC)()?"done"===e?"contained":"outlined":this.option("useFlatToolbarButtons")?"text":"contained"},_getToolbarButtonType(e){return(0,Sn.dC)()&&"done"===e||this.option("useDefaultToolbarButtons")?"default":"normal"},_getToolbarItemByAlias(e){const t=this,i=e.shortcut;if(!Dl.includes(i))return!1;const n=(0,f.l)({text:z.Z.format(this._getLocalizationKey(i)),onClick:this._createToolbarItemAction(e.onClick),integrationOptions:{},type:this._getToolbarButtonType(i),stylingMode:this._getToolbarButtonStylingMode(i)},e.options||{}),o=`dx-popup-${i}`;return this._toolbarItemClasses.push(o),{template(e,i,r){const s=(0,c.Z)("<div>").addClass(o).appendTo(r);t._createComponent(s,_o,n)}}},_createToolbarItemAction(e){return this._createAction(e,{afterExecute(e){e.component.hide()}})},_renderBottom(){const e=this._getToolbarItems("bottom");if(e.length){this._$bottom&&this._$bottom.remove();const t=(0,c.Z)("<div>").addClass("dx-popup-bottom").insertAfter(this.$content());this._$bottom=this._renderTemplateByType("bottomTemplate",e,t,{compactMode:!0}).addClass("dx-popup-bottom"),this._toggleClasses()}else this._$bottom&&this._$bottom.detach()},_toggleDisabledState(e){this.callBase(...arguments),this.$content().toggleClass("dx-state-disabled",Boolean(e))},_toggleClasses(){const e=Dl;(0,j.each)(e,((e,t)=>{const i=`dx-popup-${t}`;this._toolbarItemClasses.includes(i)?(this.$wrapper().addClass(`${i}-visible`),this._$bottom.addClass(i)):(this.$wrapper().removeClass(`${i}-visible`),this._$bottom.removeClass(i))}))},_toggleFocusClass(e,t){if(this.callBase(e,t),e&&!Cl.Ao(this._zIndex)){const e=Cl.Ue(this._zIndexInitValue());Cl.Od(this._zIndex),this._zIndex=e,this._$wrapper.css("zIndex",e),this._$content.css("zIndex",e)}},_toggleContentScrollClass(){const e=!this.option("preventScrollEvents");this.$content().toggleClass("dx-popup-content-scrollable",e)},_getPositionControllerConfig(){const{fullScreen:e,forceApplyBindings:t,dragOutsideBoundary:i,dragAndResizeArea:n,outsideDragFactor:o}=this.option();return(0,f.l)({},this.callBase(),{fullScreen:e,forceApplyBindings:t,dragOutsideBoundary:i,dragAndResizeArea:n,outsideDragFactor:o})},_initPositionController(){this._positionController=new Ol(this._getPositionControllerConfig())},_getDragTarget(){return this.topToolbar()},_renderGeometry(e){const{visible:t,useResizeObserver:i}=this.option();if(t&&(0,Z.hasWindow)()){const t=this._showAnimationProcessing&&!(null!=e&&e.forceStopAnimation)&&i;this._isAnimationPaused=t||void 0,this._stopAnimation(),null!=e&&e.shouldOnlyReposition?this._renderPosition(!1):this._renderGeometryImpl(null==e?void 0:e.isDimensionChange),t&&(this._animateShowing(),this._isAnimationPaused=void 0)}},_cacheDimensions(){this.option("useResizeObserver")&&(this._renderedDimensions={width:parseInt((0,oe.dz)(this._$content),10),height:parseInt((0,oe.Cr)(this._$content),10)})},_renderGeometryImpl(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]||this._resetContentHeight(),this.callBase(),this._cacheDimensions(),this._setContentHeight()},_resetContentHeight(){"auto"===this._getOptionValue("height")&&this.$content().css({height:"auto",maxHeight:"none"})},_renderDrag(){const e=this._getDragTarget(),t=this.option("dragEnabled");if(!e)return;const i={dragEnabled:t,handle:e.get(0),draggableElement:this._$content.get(0),positionController:this._positionController};this._drag?this._drag.init(i):this._drag=new wl(i),this.$overlayContent().toggleClass("dx-popup-draggable",t)},_renderResize(){this._resizable=this._createComponent(this._$content,yl,{handles:this.option("resizeEnabled")?"all":"none",onResizeEnd:e=>{this._resizeEndHandler(e),this._observeContentResize(!0)},onResize:e=>{this._setContentHeight(),this._actions.onResize(e)},onResizeStart:e=>{this._observeContentResize(!1),this._actions.onResizeStart(e)},minHeight:100,minWidth:100,area:this._positionController.$dragResizeContainer,keepAspectRatio:!1})},_resizeEndHandler(e){const t=this._resizable.option("width"),i=this._resizable.option("height");t&&this._setOptionWithoutOptionChange("width",t),i&&this._setOptionWithoutOptionChange("height",i),this._cacheDimensions(),this._positionController.resizeHandled(),this._positionController.detectVisualPositionChange(e.event),this._actions.onResizeEnd(e)},_setContentHeight(){(this.option("forceApplyBindings")||u.noop)();const e=this.$overlayContent().get(0),t=this._chooseHeightStrategy(e);this.$content().css(this._getHeightCssStyles(t,e)),this._setHeightClasses(this.$overlayContent(),t)},_heightStrategyChangeOffset:(e,t)=>e===Al.flex?-t:0,_chooseHeightStrategy(e){const t="auto"===e.style.width||""===e.style.width;let i=Al.static;return this._isAutoHeight()&&this.option("autoResizeEnabled")&&(i=t||Bl?Al.inherit:Al.flex),i},_getHeightCssStyles(e,t){let i={};const n=this._getOptionValue("maxHeight",t),o=this._getOptionValue("minHeight",t),r=this._splitPopupHeight(),s=r.header+r.footer+r.contentVerticalOffsets+r.popupVerticalOffsets+this._heightStrategyChangeOffset(e,r.popupVerticalPaddings);if(e===Al.static){if(!this._isAutoHeight()||n||o){const e=(this.option("fullScreen")?Math.min((0,ne.l)(t).height,(0,Z.getWindow)().innerHeight):(0,ne.l)(t).height)-s;i={height:Math.max(0,e),minHeight:"auto",maxHeight:"auto"}}}else{const e=(0,c.Z)(this._positionController.$visualContainer).get(0),t=(0,oe.n2)(n,-s,e);i={height:"auto",minHeight:(0,oe.eK)(o,-s,e),maxHeight:t}}return i},_setHeightClasses(e,t){let i="";for(const e in Al)Al[e]!==t&&(i+=` ${Al[e]}`);e.removeClass(i).addClass(t)},_isAutoHeight(){return"auto"===this.$overlayContent().get(0).style.height},_splitPopupHeight(){const e=this.topToolbar(),t=this.bottomToolbar();return{header:(0,oe.$D)(e&&e.get(0)),footer:(0,oe.$D)(t&&t.get(0)),contentVerticalOffsets:(0,oe.sQ)(this.$overlayContent().get(0),!0),popupVerticalOffsets:(0,oe.sQ)(this.$content().get(0),!0),popupVerticalPaddings:(0,oe.sQ)(this.$content().get(0),!1)}},_isAllWindowCovered(){return this.callBase()||this.option("fullScreen")},_renderDimensions(){this.option("fullScreen")?this.$overlayContent().css({width:"100%",height:"100%",minWidth:"",maxWidth:"",minHeight:"",maxHeight:""}):this.callBase(),(0,Z.hasWindow)()&&this._renderFullscreenWidthClass()},_dimensionChanged(){this._renderGeometry({isDimensionChange:!0})},_clean(){this.callBase(),this._observeContentResize(!1)},_dispose(){this.callBase(),this._toggleBodyScroll(!0)},_renderFullscreenWidthClass(){this.$overlayContent().toggleClass("dx-popup-fullscreen-width",(0,oe.Y_)(this.$overlayContent())===(0,oe.dz)(Tl))},_toggleSafariScrolling(){this.option("enableBodyScroll")&&this.callBase()},_toggleBodyScroll(e){if(!this._bodyOverflowManager)return;const{setOverflow:t,restoreOverflow:i}=this._bodyOverflowManager;e?i():t()},refreshPosition(){this._renderPosition()},_optionChanged(e){var t;const{value:i,name:n}=e;switch(n){case"disabled":this.callBase(e),this._renderTitle(),this._renderBottom();break;case"animation":this._updateResizeCallbackSkipCondition();break;case"enableBodyScroll":this.option("visible")&&this._toggleBodyScroll(i);break;case"showTitle":case"title":case"titleTemplate":this._renderTitle(),this._renderGeometry(),(0,hl.U_)(this.$overlayContent());break;case"bottomTemplate":this._renderBottom(),this._renderGeometry(),(0,hl.U_)(this.$overlayContent());break;case"container":var o;this.callBase(e),this.option("resizeEnabled")&&(null===(o=this._resizable)||void 0===o||o.option("area",this._positionController.$dragResizeContainer));break;case"width":case"height":this.callBase(e),null===(t=this._resizable)||void 0===t||t.option(n,i);break;case"onTitleRendered":this._createTitleRenderAction(i);break;case"toolbarItems":case"useDefaultToolbarButtons":case"useFlatToolbarButtons":{const t=!e.fullName.match(/^toolbarItems((\[\d+\])(\.(options|visible).*)?)?$/);this._renderTitle(),this._renderBottom(),t&&(this._renderGeometry(),(0,hl.U_)(this.$overlayContent()));break}case"dragEnabled":this._renderDrag();break;case"dragAndResizeArea":this._positionController.dragAndResizeArea=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer),this._positionController.positionContent();break;case"dragOutsideBoundary":this._positionController.dragOutsideBoundary=i,this.option("resizeEnabled")&&this._resizable.option("area",this._positionController.$dragResizeContainer);break;case"outsideDragFactor":this._positionController.outsideDragFactor=i;break;case"resizeEnabled":this._renderResize(),this._renderGeometry();break;case"autoResizeEnabled":this._renderGeometry(),(0,hl.U_)(this.$overlayContent());break;case"fullScreen":this._positionController.fullScreen=i,this._toggleFullScreenClass(i),this._toggleSafariScrolling(),this._renderGeometry(),(0,hl.U_)(this.$overlayContent());break;case"showCloseButton":this._renderTitle();break;case"preventScrollEvents":this.callBase(e),this._toggleContentScrollClass();break;default:this.callBase(e)}},bottomToolbar(){return this._$bottom},topToolbar(){return this._$title},$content(){return this._$popupContent},content(){return(0,l.uD)(this.$content())},$overlayContent(){return this._$content},getFocusableElements(){return this.$wrapper().find("[tabindex]").filter(((e,t)=>t.getAttribute("tabindex")>=0))}});(0,r.default)("dxPopup",Pl);const Ml=Pl;var Rl=i(3046);class $l extends za{_init(){super._init(),this._activeStateUnit=".dx-toolbar-menu-action:not(.dx-toolbar-hidden-button-group)"}_initMarkup(){this._renderSections(),super._initMarkup(),this._setMenuRole()}_getSections(){return this._itemContainer().children()}_itemElements(){return this._getSections().children(this._itemSelector())}_renderSections(){const e=this._itemContainer();(0,j.each)(["before","center","after","menu"],((t,i)=>{const n=`_$${i}Section`;this[n]||(this[n]=(0,c.Z)("<div>").addClass("dx-toolbar-menu-section")),this[n].appendTo(e)}))}_renderItems(){super._renderItems.apply(this,arguments),this._updateSections()}_setMenuRole(){this.$element().find(".dx-scrollview-content").attr("role","menu")}_updateSections(){const e=this.$element().find(".dx-toolbar-menu-section");e.removeClass("dx-toolbar-menu-last-section"),e.not(":empty").eq(-1).addClass("dx-toolbar-menu-last-section")}_renderItem(e,t,i,n){const o=t.location??"menu",r=this[`_$${o}Section`],s=super._renderItem(e,t,r,n);return this._getItemTemplateName({itemData:t})&&s.addClass("dx-toolbar-menu-custom"),("menu"===o||"dxButton"===t.widget||"dxButtonGroup"===t.widget||t.isAction)&&s.addClass("dx-toolbar-menu-action"),"dxButton"===t.widget&&s.addClass("dx-toolbar-hidden-button"),"dxButtonGroup"===t.widget&&s.addClass("dx-toolbar-hidden-button-group"),s.addClass(t.cssClass),s}_getItemTemplateName(e){const t=super._getItemTemplateName(e),i=e.itemData;return i&&i.menuItemTemplate||t}_dataSourceOptions(){return{paginate:!1}}_itemClickHandler(e,t,i){(0,c.Z)(e.target).closest(".dx-toolbar-menu-action").length&&super._itemClickHandler(e,t,i)}_clean(){this._getSections().empty(),super._clean()}}class Nl extends Co{_supportedKeys(){var e;let t={};return this.option("opened")&&null!==(e=this._list)&&void 0!==e&&e.option("focusedElement")||(t=this._button._supportedKeys()),(0,f.l)(super._supportedKeys(),t,{tab(){this._popup&&this._popup.hide()}})}_getDefaultOptions(){return(0,n.Z)({},super._getDefaultOptions(),{items:[],onItemClick:null,dataSource:null,itemTemplate:"item",onButtonClick:null,activeStateEnabled:!0,hoverStateEnabled:!0,opened:!1,onItemRendered:null,closeOnClick:!0,useInkRipple:!1,container:void 0,animation:{show:{type:"fade",from:0,to:1},hide:{type:"fade",to:0}}})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>"desktop"===a.default.real().deviceType&&!a.default.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>(0,Sn.yj)(),options:{useInkRipple:!0,animation:{show:{type:"pop",duration:200,from:{scale:0},to:{scale:1}},hide:{type:"pop",duration:200,from:{scale:1},to:{scale:0}}}}}])}_init(){super._init(),this.$element().addClass("dx-dropdownmenu"),this._initItemClickAction(),this._initButtonClickAction()}_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")}_initButtonClickAction(){this._buttonClickAction=this._createActionByOption("onButtonClick")}_initTemplates(){this._templateManager.addDefaultTemplates({content:new Rl.s("content")}),super._initTemplates()}_initMarkup(){this._renderButton(),super._initMarkup()}_render(){super._render(),this.setAria({haspopup:!0,expanded:this.option("opened")})}_renderContentImpl(){this.option("opened")&&this._renderPopup()}_clean(){this._cleanFocusState(),this._list&&this._list.$element().remove(),this._popup&&this._popup.$element().remove(),delete this._list,delete this._popup}_renderButton(){const e=this.$element().addClass("dx-dropdownmenu-button");this._button=this._createComponent(e,_o,{icon:"overflow",template:"content",stylingMode:(0,Sn.dC)()?"text":"contained",useInkRipple:this.option("useInkRipple"),hoverStateEnabled:!1,focusStateEnabled:!1,onClick:e=>{this.option("opened",!this.option("opened")),this._buttonClickAction(e)}})}_toggleActiveState(e,t,i){this._button._toggleActiveState(e,t,i)}_toggleMenuVisibility(e){var t,i;const n=e??!(null!==(t=this._popup)&&void 0!==t&&t.option("visible"));e&&this._renderPopup(),null===(i=this._popup)||void 0===i||i.toggle(n),this.setAria("expanded",n)}_renderPopup(){if(this._$popup)return;this._$popup=(0,c.Z)("<div>").appendTo(this.$element());const{rtlEnabled:e,container:t,animation:i}=this.option();this._popup=this._createComponent(this._$popup,"dxPopup",{onInitialized(e){let{component:t}=e;t.$wrapper().addClass("dx-dropdownmenu-popup-wrapper").addClass("dx-dropdownmenu-popup")},deferRendering:!1,preventScrollEvents:!1,contentTemplate:e=>this._renderList(e),_ignoreFunctionValueDeprecation:!0,maxHeight:()=>this._getMaxHeight(),position:{my:"top "+(e?"left":"right"),at:"bottom "+(e?"left":"right"),collision:"fit flip",offset:{v:3},of:this.$element()},animation:i,onOptionChanged:e=>{let{name:t,value:i}=e;"visible"===t&&this.option("opened",i)},container:t,autoResizeEnabled:!1,height:"auto",width:"auto",hideOnOutsideClick:e=>this._closeOutsideDropDownHandler(e),hideOnParentScroll:!0,shading:!1,dragEnabled:!1,showTitle:!1,fullScreen:!1,_fixWrapperPosition:!0})}_getMaxHeight(){const e=this.$element(),t=e.offset().top,i=(0,oe.zp)((0,Z.getWindow)()),n=Math.max(t,i-t-(0,oe.zp)(e));return Math.min(i,n-3-10)}_closeOutsideDropDownHandler(e){return!(0,c.Z)(e.target).closest(this.$element()).length}_renderList(e){const t=(0,c.Z)(e);t.addClass("dx-dropdownmenu-list"),this._list=this._createComponent(t,$l,{dataSource:this._getListDataSource(),pageLoadMode:"scrollBottom",indicateLoading:!1,noDataText:"",itemTemplate:this.option("itemTemplate"),onItemClick:e=>{this.option("closeOnClick")&&this.option("opened",!1),this._itemClickAction(e)},tabIndex:-1,focusStateEnabled:!1,activeStateEnabled:!0,onItemRendered:this.option("onItemRendered"),_itemAttributes:{role:"menuitem"}})}_itemOptionChanged(e,t,i){var n;null===(n=this._list)||void 0===n||n._itemOptionChanged(e,t,i),ll(this._list,e)}_getListDataSource(){return this.option("dataSource")??this.option("items")}_setListDataSource(){var e;null===(e=this._list)||void 0===e||e.option("dataSource",this._getListDataSource()),delete this._deferRendering}_getKeyboardListeners(){return super._getKeyboardListeners().concat([this._list])}_toggleVisibility(e){var t;super._toggleVisibility(e),null===(t=this._button)||void 0===t||t.option("visible",e)}_optionChanged(e){var t,i,n;const{name:o,value:r}=e;switch(o){case"items":case"dataSource":this.option("opened")?this._setListDataSource():this._deferRendering=!0;break;case"itemTemplate":null===(t=this._list)||void 0===t||t.option(o,this._getTemplate(r));break;case"onItemClick":this._initItemClickAction();break;case"onButtonClick":this._buttonClickAction();break;case"useInkRipple":this._invalidate();break;case"focusStateEnabled":null===(i=this._list)||void 0===i||i.option(o,r),super._optionChanged(e);break;case"onItemRendered":null===(n=this._list)||void 0===n||n.option(o,r);break;case"opened":this._deferRendering&&this._setListDataSource(),this._toggleMenuVisibility(r),this._updateFocusableItemsTabIndex();break;case"closeOnClick":break;case"container":this._popup&&this._popup.option(o,r);break;case"disabled":this._list&&this._updateFocusableItemsTabIndex();break;default:super._optionChanged(e)}}_updateFocusableItemsTabIndex(){this.option("items").forEach((e=>ll(this._list,e)))}}const Vl="dx-toolbar-item-invisible";class Fl{constructor(e){this._toolbar=e}_initMarkup(){(0,u.deferRender)((()=>{this._renderOverflowMenu(),this._renderMenuItems()}))}_renderOverflowMenu(){if(!this._hasVisibleMenuItems())return;this._renderMenuButtonContainer();const e=(0,c.Z)("<div>").appendTo(this._overflowMenuContainer()),t=this._toolbar._createActionByOption("onItemClick"),i=this._toolbar._getTemplateByOption("menuItemTemplate");this._menu=this._toolbar._createComponent(e,Nl,{disabled:this._toolbar.option("disabled"),itemTemplate:()=>i,onItemClick:e=>{t(e)},container:this._toolbar.option("menuContainer"),onOptionChanged:e=>{let{name:t,value:i}=e;"opened"===t&&this._toolbar.option("overflowMenuVisible",i),"items"===t&&this._updateMenuVisibility(i)}})}renderMenuItems(){this._menu||this._renderOverflowMenu(),this._menu&&this._menu.option("items",this._getMenuItems()),this._menu&&!this._menu.option("items").length&&this._menu.option("opened",!1)}_renderMenuButtonContainer(){this._$overflowMenuContainer=(0,c.Z)("<div>").appendTo(this._toolbar._$afterSection).addClass("dx-toolbar-button").addClass("dx-toolbar-menu-container")}_overflowMenuContainer(){return this._$overflowMenuContainer}_updateMenuVisibility(e){const t=e??this._getMenuItems(),i=t.length&&this._hasVisibleMenuItems(t);this._toggleMenuVisibility(i)}_toggleMenuVisibility(e){this._overflowMenuContainer()&&this._overflowMenuContainer().toggleClass("dx-state-invisible",!e)}_renderMenuItems(){(0,u.deferRender)((()=>{this.renderMenuItems()}))}_dimensionChanged(){this.renderMenuItems()}_getToolbarItems(){return(0,u.grep)(this._toolbar.option("items")??[],(e=>!this._toolbar._isMenuItem(e)))}_getHiddenItems(){return this._toolbar._itemContainer().children(`.dx-toolbar-item-auto-hide.${Vl}`).not(".dx-state-invisible")}_getMenuItems(){const e=(0,u.grep)(this._toolbar.option("items")??[],(e=>this._toolbar._isMenuItem(e))),t=this._getHiddenItems();return this._restoreItems=this._restoreItems??[],[...[].slice.call(t).map((e=>{const t=this._toolbar._getItemData(e),i=(0,c.Z)(e),n=i.children();return(0,f.l)({menuItemTemplate:()=>(this._restoreItems.push({container:i,item:n}),(0,c.Z)("<div>").addClass("dx-toolbar-item-auto-hide").append(n))},t)})),...e]}_hasVisibleMenuItems(e){const t=e??this._toolbar.option("items");let i=!1;const n=(0,hn.vb)("visible"),o=(0,hn.vb)("locateInMenu");return(0,j.each)(t,((e,t)=>{const r=n(t,{functionsAsIs:!0}),s=o(t,{functionsAsIs:!0});(!1===r||"auto"!==s&&"always"!==s)&&"menu"!==t.location||(i=!0)})),i}_arrangeItems(){this._toolbar._$centerSection.css({margin:"0 auto",float:"none"}),(0,j.each)(this._restoreItems??[],((e,t)=>{(0,c.Z)(t.container).append(t.item)})),this._restoreItems=[];const e=(0,oe.dz)(this._toolbar.$element());return this._hideOverflowItems(e),e}_hideOverflowItems(e){const t=this._toolbar.$element().find(".dx-toolbar-item-auto-hide");if(!t.length)return;const i=e??(0,oe.dz)(this._toolbar.$element());(0,c.Z)(t).removeClass(Vl);let n=this._getItemsWidth();for(;t.length&&i<n;)t.eq(-1).addClass(Vl),n=this._getItemsWidth(),t.splice(-1,1)}_getItemsWidth(){return this._toolbar._getSummaryItemsSize("width",[this._toolbar._$beforeSection,this._toolbar._$centerSection,this._toolbar._$afterSection])}_itemOptionChanged(e,t,i){var n;"disabled"!==t&&"options.disabled"!==t||!this._toolbar._isMenuItem(e)?this.renderMenuItems():null===(n=this._menu)||void 0===n||n._itemOptionChanged(e,t,i)}_renderItem(e,t){"auto"===e.locateInMenu&&t.addClass("dx-toolbar-item-auto-hide")}_optionChanged(e,t){var i,n,o,r,s;switch(e){case"disabled":null===(i=this._menu)||void 0===i||i.option(e,t);break;case"overflowMenuVisible":null===(n=this._menu)||void 0===n||n.option("opened",t);break;case"onItemClick":null===(o=this._menu)||void 0===o||o.option(e,t);break;case"menuContainer":null===(r=this._menu)||void 0===r||r.option("container",t);break;case"menuItemTemplate":null===(s=this._menu)||void 0===s||s.option("itemTemplate",t)}}}class Zl extends sl{_getDefaultOptions(){return(0,n.Z)({},super._getDefaultOptions(),{menuItemTemplate:"menuItem",menuContainer:void 0,overflowMenuVisible:!1,multiline:!1})}_isMultiline(){return this.option("multiline")}_dimensionChanged(e){"height"!==e&&(super._dimensionChanged(),this._layoutStrategy._dimensionChanged())}_initMarkup(){super._initMarkup(),this._updateFocusableItemsTabIndex(),this._layoutStrategy._initMarkup()}_renderToolbar(){super._renderToolbar(),this._renderLayoutStrategy()}_itemContainer(){return this._isMultiline()?this._$toolbarItemsContainer:super._itemContainer()}_renderLayoutStrategy(){this.$element().toggleClass("dx-toolbar-multiline",this._isMultiline()),this._layoutStrategy=this._isMultiline()?new cl(this):new Fl(this)}_renderSections(){if(!this._isMultiline())return super._renderSections()}_postProcessRenderItems(){this._layoutStrategy._hideOverflowItems(),this._layoutStrategy._updateMenuVisibility(),super._postProcessRenderItems(),this._layoutStrategy._renderMenuItems()}_renderItem(e,t,i,n){const o=super._renderItem(e,t,i,n);this._layoutStrategy._renderItem(t,o);const{widget:r,showText:s}=t;return"dxButton"===r&&"inMenu"===s&&o.toggleClass("dx-toolbar-text-auto-hide"),o}_getItemsWidth(){return this._layoutStrategy._getItemsWidth()}_getMenuItems(){return this._layoutStrategy._getMenuItems()}_getToolbarItems(){return this._layoutStrategy._getToolbarItems()}_arrangeItems(){if(this.$element().is(":hidden"))return;const e=this._layoutStrategy._arrangeItems();this._isMultiline()||super._arrangeItems(e)}_itemOptionChanged(e,t,i,n){this._isMenuItem(e)||super._itemOptionChanged(e,t,i,n),this._layoutStrategy._itemOptionChanged(e,t,i),"disabled"!==t&&"options.disabled"!==t||ll(this,e),"location"===t&&this.repaint()}_updateFocusableItemsTabIndex(){this._getToolbarItems().forEach((e=>ll(this,e)))}_isMenuItem(e){return"menu"===e.location||"always"===e.locateInMenu}_isToolbarItem(e){return void 0===e.location||"never"===e.locateInMenu}_optionChanged(e){const{name:t,value:i}=e;switch(this._layoutStrategy._optionChanged(t,i),t){case"menuContainer":case"menuItemTemplate":case"overflowMenuVisible":break;case"multiline":this._invalidate();break;case"disabled":super._optionChanged(e),this._updateFocusableItemsTabIndex();break;default:super._optionChanged(e)}}updateDimensions(){this._dimensionChanged()}}(0,r.default)("dxToolbar",Zl);const Hl=Zl;class Ll extends Ml{_getDefaultOptions(){return(0,f.l)(super._getDefaultOptions(),{preventScrollEvents:!1})}_getToolbarName(){return"dxToolbar"}}Ll.defaultOptions=function(e){Ml.defaultOptions(e)},(0,r.default)("dxPopup",Ll);const jl=Ll;let zl=Pe;if(be()){const e="dx-suggestion-list",t="dx-suggestion-list-wrapper",i="dx-dropdowneditor-overlay",n=100;zl=class extends Pe{constructor(e,n){super(e,n),this.options=(0,f.l)({},this._getDefaultOptions(),n),this._popup=this.renderPopup(),this._popup.$wrapper().addClass(`${t} ${i}`),this._renderPreventFocusOut()}_getDefaultOptions(){return{dataSource:null}}renderList(t,i){const n=(0,c.Z)("<div>").addClass(e).appendTo(t);this._list=this.options.editorInstance._createComponent(n,il,i)}renderPopup(){const{editorInstance:e}=this.options,t=(0,c.Z)("<div>").appendTo(e.$element()),i=this._getPopupConfig();return e._createComponent(t,jl,i)}_getPopupConfig(){return{contentTemplate:e=>{const t=this._getListConfig(this.options);this.renderList((0,c.Z)(e),t)},deferRendering:!1,onShown:()=>{this._list.focus()},onHidden:()=>{this._list.unselectAll(),this._list.option("focusedElement",null)},showTitle:!1,width:"auto",height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:!0,animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},fullScreen:!1,maxHeight:this.maxHeight}}_getListConfig(e){return{dataSource:e.dataSource,onSelectionChanged:this.selectionChangedHandler.bind(this),selectionMode:"single",pageLoadMode:"scrollBottom"}}get maxHeight(){const e=(0,Z.getWindow)(),t=e&&(0,oe.Cr)(e)||0;return Math.max(n,.5*t)}selectionChangedHandler(e){this._popup.option("visible")&&(this._popup.hide(),this.insertEmbedContent(e))}_renderPreventFocusOut(){const e=(0,v.addNamespace)("mousedown","dxHtmlEditorPopupModule");m.Z.on(this._popup.$wrapper(),e,(e=>{e.preventDefault()}))}insertEmbedContent(e){}showPopup(){this._popup&&this._popup.show()}savePosition(e){this.caretPosition=e}getPosition(){return this.caretPosition}}}const Wl=zl;let Kl=Pe;if(be()){const e="user",t="@",i={ARROW_UP:"upArrow",ARROW_DOWN:"downArrow",ARROW_LEFT:"leftArrow",ARROW_RIGHT:"rightArrow",ENTER:"enter",ESCAPE:"escape",SPACE:"space",PAGE_UP:"pageUp",PAGE_DOWN:"pageDown",END:"end",HOME:"home"},n=[i.ARROW_LEFT,i.ARROW_RIGHT,i.PAGE_UP,i.PAGE_DOWN,i.END,i.HOME],o=[" ","\n"],r="dx-state-disabled";be().register({"formats/mention":Bs},!0),Kl=class extends Wl{constructor(e,i){super(e,i),this._mentions={},i.mentions.forEach((e=>{let{marker:i}=e;i||(e.marker=i=t);const{template:n}=e;if(n){const e=this.editorInstance._getTemplate(n);e&&Bs.addTemplate({marker:i,editorKey:this.editorInstance.getMentionKeyInTemplateStorage()},e)}this._mentions[i]=(0,f.l)({},this._getDefaultOptions(),e)})),this._attachKeyboardHandlers(),this.addCleanCallback(this.clean.bind(this)),this.quill.on("text-change",this.onTextChange.bind(this))}_getDefaultOptions(){const e=super._getDefaultOptions();return(0,f.l)(e,{itemTemplate:"item",valueExpr:"this",displayExpr:"this",template:null,searchExpr:null,searchTimeout:500,minSearchLength:0})}_attachKeyboardHandlers(){this.quill.keyboard.addBinding({key:i.ARROW_UP},this._moveToItem.bind(this,"prev")),this.quill.keyboard.addBinding({key:i.ARROW_DOWN},this._moveToItem.bind(this,"next")),this.quill.keyboard.addBinding({key:[i.ENTER,i.SPACE]},this._selectItemHandler.bind(this));const e=this.quill.keyboard.bindings[i.ENTER];e.unshift(e.pop()),this.quill.keyboard.addBinding({key:i.ESCAPE},this._escapeKeyHandler.bind(this)),this.quill.keyboard.addBinding({key:[i.ARROW_LEFT,i.ARROW_RIGHT],shiftKey:!0},this._ignoreKeyHandler.bind(this)),this.quill.keyboard.addBinding({key:n},this._ignoreKeyHandler.bind(this))}_moveToItem(e){const t=this._list.getDataSource();if(this._isMentionActive&&!t.isLoading()){const t="next"===e?"first":"last";let i=(0,c.Z)(this._list.option("focusedElement"))[e]();i=i.length?i:this._activeListItems[t](),this._list.option("focusedElement",(0,l.uD)(i)),this._list.scrollToItem(i)}return!this._isMentionActive}_ignoreKeyHandler(){return!this._isMentionActive}_fitIntoRange(e,t,i){return e>i?t:e<t?i:e}_selectItemHandler(){return this._isMentionActive&&(this._list.option("items").length?this._list.selectItem(this._list.option("focusedElement")):this._popup.hide()),!this._isMentionActive}_escapeKeyHandler(){return this._isMentionActive&&this._popup.hide(),!this._isMentionActive}renderList(e,t){this.compileGetters(this.options),super.renderList(e,t)}compileGetters(e){let{displayExpr:t,valueExpr:i}=e;this._valueGetter=(0,hn.vb)(t),this._idGetter=(0,hn.vb)(i)}_getListConfig(e){const t=super._getListConfig(e);return(0,f.l)(t,{itemTemplate:this.options.itemTemplate,onContentReady:()=>{this._hasSearch&&(this._popup.repaint(),this._focusFirstElement(),this._hasSearch=!1)}})}insertEmbedContent(){const e=this._activeMentionConfig.marker.length,t=e+this._searchValue.length,i=this.getPosition(),n=this._list.option("selectedItem"),o={value:this._valueGetter(n),id:this._idGetter(n),marker:this._activeMentionConfig.marker,keyInTemplateStorage:this.editorInstance.getMentionKeyInTemplateStorage()},r=be().import("delta"),s=Math.max(0,i-e),a=this.quill.getFormat(s),l=(new r).retain(s).delete(t).insert({mention:o}).insert(" ",a);this.quill.updateContents(l),this.quill.setSelection(s+2)}_getLastInsertOperation(e){const t=e[e.length-1];if("insert"in t)return t;const i="delete"in t;if(i&&e.length>=2){const t=e[e.length-2];if(i&&"insert"in t)return t}return null}onTextChange(t,i,n){if(n===e){const e=t.ops[t.ops.length-1];if(this._isMentionActive&&this._isPopupVisible)this._processSearchValue(e)&&this._filterList(this._searchValue);else{const{ops:e}=t,i=this._getLastInsertOperation(e);i&&this.checkMentionRequest(i,e)}}}get _isPopupVisible(){var e;return null===(e=this._popup)||void 0===e?void 0:e.option("visible")}_processSearchValue(e){if("insert"in e)this._searchValue+=e.insert;else{if(!this._searchValue.length||e.delete>1)return this._popup.hide(),!1;this._searchValue=this._searchValue.slice(0,-1)}return!0}checkMentionRequest(e,t){let{insert:i}=e;const n=this.quill.getSelection();if(i&&(0,_.HD)(i)&&n&&!this._isMarkerPartOfText(t[0].retain)&&(this._activeMentionConfig=this._mentions[i],this._activeMentionConfig)){this._updateList(this._activeMentionConfig);const e=n.index&&"\n"===this._getCharByIndex(n.index-1);this.savePosition(n.index+e),this._popup.option("position",this._popupPosition),this._searchValue="",this._popup.show()}}_isMarkerPartOfText(e){return!(!e||o.includes(this._getCharByIndex(e-1)))}_getCharByIndex(e){return this.quill.getContents(e,1).ops[0].insert}_updateList(e){let{dataSource:t,displayExpr:i,valueExpr:n,itemTemplate:o,searchExpr:r}=e;this.compileGetters({displayExpr:i,valueExpr:n}),this._list.unselectAll(),this._list.option({dataSource:t,displayExpr:i,itemTemplate:o,searchExpr:r})}_filterList(e){if(!this._isMinSearchLengthExceeded(e))return void this._resetFilter();const{searchTimeout:t}=this._activeMentionConfig;t?(clearTimeout(this._searchTimer),this._searchTimer=setTimeout((()=>{this._search(e)}),t)):this._search(e)}_isMinSearchLengthExceeded(e){return e.length>=this._activeMentionConfig.minSearchLength}_resetFilter(){clearTimeout(this._searchTimer),this._search(null)}_search(e){this._hasSearch=!0,this._list.option("searchValue",e)}_focusFirstElement(){if(!this._list)return;const e=this._activeListItems.first();this._list.option("focusedElement",(0,l.uD)(e)),this._list.scrollToItem(e)}_toggleActiveDescendant(e){if(e){const e=this._list.getFocusedItemId();this.quill.root.setAttribute("aria-activedescendant",e)}else this.quill.root.removeAttribute("aria-activedescendant")}get _popupPosition(){const e=this.getPosition(),{left:t,top:i,height:n}=this.quill.getBounds(e?e-1:e),{left:o,top:r}=(0,c.Z)(this.quill.root).offset();return{of:m.Z.Event("positionEvent",{pageX:o+t,pageY:r+i}),offset:{v:n},my:"top left",at:"top left",collision:{y:"flip",x:"flipfit"}}}_getPopupConfig(){return(0,f.l)(super._getPopupConfig(),{hideOnParentScroll:!1,onShown:()=>{this._toggleActiveDescendant(!0),this._isMentionActive=!0,this._hasSearch=!1,this._focusFirstElement()},onHidden:()=>{this._toggleActiveDescendant(!1),this._list.unselectAll(),this._list.option("focusedElement",null),this._isMentionActive=!1,this._search(null)},focusStateEnabled:!1})}get _activeListItems(){return this._list.itemElements().filter(`:not(.${r})`)}clean(){Object.keys(this._mentions).forEach((e=>{this._mentions[e].template&&Bs.removeTemplate({marker:e,editorKey:this.editorInstance.getMentionKeyInTemplateStorage()})}))}}}const ql=Kl,Ul="dxHtmlResizingModule",Gl=(0,v.addNamespace)("keydown",Ul),Yl=(0,v.addNamespace)("scroll",Ul),Ql=(0,v.addNamespace)("mousedown",Ul);class Xl extends Pe{constructor(e,t){super(e,t),this.allowedTargets=t.allowedTargets||["image"],this.enabled=!!t.enabled,this._hideFrameWithContext=this.hideFrame.bind(this),this._framePositionChangedHandler=this._prepareFramePositionChangedHandler(),this.enabled&&(this._attachEvents(),this._createResizeFrame())}_attachEvents(){m.Z.on(this.quill.root,(0,v.addNamespace)(He.name,Ul),this._clickHandler.bind(this)),m.Z.on(this.quill.root,Yl,this._framePositionChangedHandler),this.editorInstance.on("focusOut",this._hideFrameWithContext),this.quill.on("text-change",this._framePositionChangedHandler)}_detachEvents(){m.Z.off(this.quill.root,`.${Ul}`),this.editorInstance.off("focusOut",this._hideFrameWithContext),this.quill.off("text-change",this._framePositionChangedHandler)}_clickHandler(e){if(this._isAllowedTarget(e.target)){if(this._$target===e.target)return;this._$target=e.target;const t=(0,c.Z)(this._$target),i=Math.max((0,oe.Y_)(t)-(0,oe.dz)(t),this.resizable.option("minWidth")),n=Math.max((0,oe.zp)(t)-(0,oe.Cr)(t),this.resizable.option("minHeight"));this.resizable.option({minWidth:i,minHeight:n}),this.updateFramePosition(),this.showFrame(),this._adjustSelection()}else this._$target&&this.hideFrame()}_prepareFramePositionChangedHandler(){return()=>{this._$target&&this.updateFramePosition()}}_adjustSelection(){this.quill.getSelection()||this.quill.setSelection(0,0)}_isAllowedTarget(e){return this._isImage(e)}_isImage(e){return-1!==this.allowedTargets.indexOf("image")&&"IMG"===e.tagName.toUpperCase()}showFrame(){this._$resizeFrame.show(),m.Z.on(this.quill.root,Gl,this._handleFrameKeyDown.bind(this))}_handleFrameKeyDown(e){const t=(0,v.normalizeKeyName)(e);"del"!==t&&"backspace"!==t||this._deleteImage(),this.hideFrame()}hideFrame(){this._$target=null,this._$resizeFrame.hide(),m.Z.off(this.quill.root,Gl)}updateFramePosition(){const{height:e,width:t,top:i,left:n}=(0,ne.l)(this._$target),{top:o,left:r}=(0,ne.l)(this.quill.root),s=this._getBorderWidth();this._$resizeFrame.css({height:e,width:t,padding:1,top:i-o-s-1,left:n-r-s-1}),(0,Ws.pB)(this._$resizeFrame,{left:0,top:0})}_getBorderWidth(){return parseInt(this._$resizeFrame.css("borderTopWidth"))}_createResizeFrame(){if(this._$resizeFrame)return;const{deviceType:e}=a.default.current();this._$resizeFrame=(0,c.Z)("<div>").addClass("dx-resize-frame").toggleClass("dx-touch-device","desktop"!==e).appendTo(this.editorInstance._getQuillContainer()).hide(),m.Z.on(this._$resizeFrame,Ql,(e=>{e.preventDefault()})),this.resizable=this.editorInstance._createComponent(this._$resizeFrame,yl,{onResize:e=>{this._$target&&((0,c.Z)(this._$target).attr({height:e.height,width:e.width}),this.updateFramePosition())}})}_deleteImage(){var e;this._isAllowedTarget(this._$target)&&(null===(e=be().find(this._$target))||void 0===e||e.deleteAt(0))}option(e,t){if("mediaResizing"!==e)if("enabled"===e){if(this.enabled===t)return;this.enabled=t,t?(this._attachEvents(),this._createResizeFrame()):this.clean()}else"allowedTargets"===e&&Array.isArray(t)&&(this.allowedTargets=t);else this.handleOptionChangeValue(t)}clean(){this._detachEvents(),this._$resizeFrame.remove(),this._$resizeFrame=void 0}}var Jl=i(9873);const ec=Ra,tc=g.default.inherit({ctor(){this._dataStructure=[],this._itemsCount=0,this._visibleItemsCount=0},_indexByKey:{},_convertItemsToNodes(e,t){const i=this;(0,j.each)(e,((e,n)=>{const o=(0,_.$K)(t)?t:i._getParentId(n),r=i._convertItemToNode(n,o);i._dataStructure.push(r),i._checkForDuplicateId(r.internalFields.key),i._indexByKey[r.internalFields.key]=i._dataStructure.length-1,i._itemHasChildren(n)&&i._convertItemsToNodes(i._dataAccessors.getters.items(n),r.internalFields.key)}))},_checkForDuplicateId(e){if((0,_.$K)(this._indexByKey[e]))throw ge.Z.Error("E1040",e)},_getParentId(e){return"plain"===this._dataType?this._dataAccessors.getters.parentKey(e):void 0},_itemHasChildren(e){if("plain"===this._dataType)return;const t=this._dataAccessors.getters.items(e);return t&&t.length},_getUniqueKey(e){const t=this._dataAccessors.getters.key,i=t(e);return t&&(i||0===i)&&(0,_.pt)(i)?i:this.getItemsCount()},_convertItemToNode(e,t){this._itemsCount++,!1!==e.visible&&this._visibleItemsCount++;const i={internalFields:{disabled:this._dataAccessors.getters.disabled(e,{defaultValue:!1}),expanded:this._dataAccessors.getters.expanded(e,{defaultValue:!1}),selected:this._dataAccessors.getters.selected(e,{defaultValue:!1}),key:this._getUniqueKey(e),parentKey:(0,_.$K)(t)?t:this._rootValue,item:this._makeObjectFromPrimitive(e),childrenKeys:[]}};return(0,f.l)(i,e),delete i.items,i},setChildrenKeys(){const e=this;(0,j.each)(this._dataStructure,((t,i)=>{if(i.internalFields.parentKey===e._rootValue)return;const n=e.getParentNode(i);n&&n.internalFields.childrenKeys.push(i.internalFields.key)}))},_makeObjectFromPrimitive(e){if((0,_.pt)(e)){const t=e;e={},this._dataAccessors.setters.key(e,t)}return e},_convertToPublicNode(e,t){if(!e)return null;const i={text:this._dataAccessors.getters.display(e),key:e.internalFields.key,selected:e.internalFields.selected,expanded:e.internalFields.expanded,disabled:e.internalFields.disabled,parent:t||null,itemData:e.internalFields.item,children:[],items:[]};return i.parent&&(i.parent.children.push(i),i.parent.items.push(i)),i},convertToPublicNodes(e,t){if(!e.length)return[];const i=this,n=[];return(0,j.each)(e,((e,o)=>{o=(0,_.pt)(o)?i._getByKey(o):o;const r=i._convertToPublicNode(o,t);r.children=i.convertToPublicNodes(o.internalFields.childrenKeys,r),n.push(r),o.internalFields.publicNode=r})),n},setDataAccessors(e){this._dataAccessors=e},_getByKey(e){return this._dataStructure[this.getIndexByKey(e)]||null},getParentNode(e){return this._getByKey(e.internalFields.parentKey)},getByKey(e,t){if(null==t)return null;let i=null;const n=this;return function(e,t){return(0,j.each)(e,((e,o)=>{if((o.internalFields&&o.internalFields.key||n._dataAccessors.getters.key(o)).toString()===t.toString())return i=o,!1})),i}(e,t)},getItemsCount(){return this._itemsCount},getVisibleItemsCount(){return this._visibleItemsCount},updateIndexByKey(){const e=this;this._indexByKey={},(0,j.each)(this._dataStructure,((t,i)=>{e._checkForDuplicateId(i.internalFields.key),e._indexByKey[i.internalFields.key]=t}))},updateChildrenKeys(){this._indexByKey={},this.removeChildrenKeys(),this.updateIndexByKey(),this.setChildrenKeys()},removeChildrenKeys(){this._indexByKey={},(0,j.each)(this._dataStructure,((e,t)=>{t.internalFields.childrenKeys=[]}))},getIndexByKey(e){return this._indexByKey[e]},createPlainStructure(e,t,i){return this._itemsCount=0,this._visibleItemsCount=0,this._rootValue=t,this._dataType=i,this._indexByKey={},this._convertItemsToNodes(e),this.setChildrenKeys(),this._dataStructure}}),ic=tc,nc="expanded",oc="selected";Ps.setEditorClass(us);const rc=g.default.inherit({ctor(e){this.options={},(0,f.l)(this.options,this._defaultOptions(),e),this.options.dataConverter.setDataAccessors(this.options.dataAccessors),this._selectedNodesKeys=[],this._expandedNodesKeys=[],this._dataStructure=[],this._createInternalDataStructure(),this.getTreeNodes()},setOption(e,t){this.options[e]=t,"recursiveSelection"===e&&this._updateSelection()},_defaultOptions:()=>({dataAccessors:void 0,items:[],multipleSelection:!0,recursiveSelection:!1,recursiveExpansion:!1,rootValue:0,searchValue:"",dataType:"tree",searchMode:"contains",dataConverter:new ic,onNodeChanged:u.noop,sort:null}),_createInternalDataStructure(){this._initialDataStructure=this.options.dataConverter.createPlainStructure(this.options.items,this.options.rootValue,this.options.dataType),this._dataStructure=this.options.searchValue.length?this.search(this.options.searchValue):this._initialDataStructure,this.options.dataConverter._dataStructure=this._dataStructure,this._updateSelection(),this._updateExpansion()},_updateSelection(){this.options.recursiveSelection&&(this._setChildrenSelection(),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(oc)},_updateExpansion(e){this.options.recursiveExpansion&&(e?this._updateOneBranch(e):this._setParentExpansion()),this._expandedNodesKeys=this._updateNodesKeysArray(nc)},_updateNodesKeysArray(e){const t=this;let i=[];return(0,j.each)(t._getDataBySelectionMode(),((n,o)=>{t._isNodeVisible(o)&&o.internalFields[e]&&(e===nc||t.options.multipleSelection?i.push(o.internalFields.key):(i.length&&t.toggleSelection(i[0],!1,!0),i=[o.internalFields.key]))})),i},_getDataBySelectionMode(){return this.options.multipleSelection?this.getData():this.getFullData()},_isNodeVisible:e=>!1!==e.internalFields.item.visible,_getByKey(e,t){return e===this._dataStructure?this.options.dataConverter._getByKey(t):this.options.dataConverter.getByKey(e,t)},_setChildrenSelection(){const e=this;(0,j.each)(this._dataStructure,((t,i)=>{if(!i.internalFields.childrenKeys.length)return;const n=i.internalFields.selected;!0===n&&e._toggleChildrenSelection(i,n)}))},_setParentSelection(){const e=this;(0,j.each)(this._dataStructure,((t,i)=>{e.options.dataConverter.getParentNode(i)&&i.internalFields.parentKey!==e.options.rootValue&&e._iterateParents(i,(t=>{const i=e._calculateSelectedState(t);e._setFieldState(t,oc,i)}))}))},_setParentExpansion(){const e=this;(0,j.each)(this._dataStructure,((t,i)=>{i.internalFields.expanded&&e._updateOneBranch(i.internalFields.key)}))},_updateOneBranch(e){const t=this,i=this.getNodeByKey(e);t._iterateParents(i,(e=>{t._setFieldState(e,nc,!0)}))},_iterateChildren(e,t,i,n){if(!(0,_.mf)(i))return;const o=this,r=e.internalFields.key;-1===(n=n||[]).indexOf(r)&&(n.push(r),(0,j.each)(e.internalFields.childrenKeys,((e,r)=>{const s=o.getNodeByKey(r);i(s),s.internalFields.childrenKeys.length&&t&&o._iterateChildren(s,t,i,n)})))},_iterateParents(e,t,i){if(e.internalFields.parentKey===this.options.rootValue||!(0,_.mf)(t))return;i=i||[];const{key:n}=e.internalFields;if(-1===i.indexOf(n)){i.push(n);const o=this.options.dataConverter.getParentNode(e);o&&(t(o),o.internalFields.parentKey!==this.options.rootValue&&this._iterateParents(o,t,i))}},_calculateSelectedState(e){const t=e.internalFields.childrenKeys.length;let i=0,n=0,o=!1;for(let o=0;o<=t-1;o++){const t=this.getNodeByKey(e.internalFields.childrenKeys[o]),r=!1===t.internalFields.item.visible,s=t.internalFields.selected;r?n++:s?i++:void 0===s&&(i+=.5)}return i&&(o=i===t-n||void 0),o},_toggleChildrenSelection(e,t){const i=this;this._iterateChildren(e,!0,(e=>{i._isNodeVisible(e)&&i._setFieldState(e,oc,t)}))},_setFieldState(e,t,i){e.internalFields[t]!==i&&(e.internalFields[t]=i,e.internalFields.publicNode&&(e.internalFields.publicNode[t]=i),this.options.dataAccessors.setters[t](e.internalFields.item,i),this.options.onNodeChanged(e))},_markChildren(e){const t=this;(0,j.each)(e,((e,i)=>{const n=t.getIndexByKey(i),o=t.getNodeByKey(i);t._dataStructure[n]=0,o.internalFields.childrenKeys.length&&t._markChildren(o.internalFields.childrenKeys)}))},_removeNode(e){const t=this.getNodeByKey(e);this._dataStructure[this.getIndexByKey(e)]=0,this._markChildren(t.internalFields.childrenKeys);const i=this;let n=0;const o=(0,f.l)([],this._dataStructure);(0,j.each)(o,((e,t)=>{t||(i._dataStructure.splice(e-n,1),n++)}))},_addNode(e){const{dataConverter:t}=this.options,i=t._convertItemToNode(e,this.options.dataAccessors.getters.parentKey(e));this._dataStructure=this._dataStructure.concat(i),this._initialDataStructure=this._initialDataStructure.concat(i),t._dataStructure=t._dataStructure.concat(i)},_updateFields(){this.options.dataConverter.updateChildrenKeys(),this._updateSelection(),this._updateExpansion()},getSelectedNodesKeys(){return this._selectedNodesKeys},getExpandedNodesKeys(){return this._expandedNodesKeys},getData(){return this._dataStructure},getFullData(){return this._initialDataStructure},getNodeByItem(e){let t=null;return(0,j.each)(this._dataStructure,((i,n)=>{if(n.internalFields.item===e)return t=n,!1})),t},getNodesByItems(e){const t=this,i=[];return(0,j.each)(e,((e,n)=>{const o=t.getNodeByItem(n);o&&i.push(o)})),i},getNodeByKey(e,t){return this._getByKey(t||this._getDataBySelectionMode(),e)},getTreeNodes(){return this.options.dataConverter.convertToPublicNodes(this.getRootNodes())},getItemsCount(){return this.options.dataConverter.getItemsCount()},getVisibleItemsCount(){return this.options.dataConverter.getVisibleItemsCount()},getPublicNode:e=>e.internalFields.publicNode,getRootNodes(){return this.getChildrenNodes(this.options.rootValue)},getChildrenNodes(e){return(0,Zo.Z)(this._dataStructure,{langParams:this.options.langParams}).filter(["internalFields.parentKey",e]).toArray()},getIndexByKey(e){return this.options.dataConverter.getIndexByKey(e)},addItem(e){this._addNode(e),this._updateFields()},removeItem(e){this._removeNode(e),this._updateFields()},toggleSelection(e,t,i){const n=this._isSingleModeUnselect(t),o=this._getByKey(i||n?this._initialDataStructure:this._dataStructure,e);this._setFieldState(o,oc,t),this.options.recursiveSelection&&!i&&(t?this._setChildrenSelection():this._toggleChildrenSelection(o,t),this._setParentSelection()),this._selectedNodesKeys=this._updateNodesKeysArray(oc)},_isSingleModeUnselect(e){return!this.options.multipleSelection&&!e},toggleNodeDisabledState(e,t){const i=this.getNodeByKey(e);this._setFieldState(i,"disabled",t)},toggleSelectAll(e){if(!(0,_.$K)(e))return;const t=this,i=t._selectedNodesKeys[t._selectedNodesKeys.length-1],n=t._isSingleModeUnselect(e)?this._initialDataStructure:this._dataStructure;(0,j.each)(n,((i,n)=>{t._isNodeVisible(n)&&t._setFieldState(n,oc,e)})),t._selectedNodesKeys=t._updateNodesKeysArray(oc),!e&&t.options.selectionRequired&&t.toggleSelection(i,!0)},isAllSelected(){return!!this.getSelectedNodesKeys().length&&(this.getSelectedNodesKeys().length===this.getVisibleItemsCount()||void 0)},toggleExpansion(e,t){const i=this.getNodeByKey(e);this._setFieldState(i,nc,t),t&&this._updateExpansion(e),this._expandedNodesKeys=this._updateNodesKeysArray(nc)},isFiltered(e){return!this.options.searchValue.length||!!this._filterDataStructure(this.options.searchValue,[e]).length},_createCriteria(e,t,i){const n=[];return Array.isArray(e)?((0,j.each)(e,((e,o)=>{n.push([o,i,t],"or")})),n.pop(),n):[e,i,t]},_filterDataStructure(e,t){const i=this.options.searchExpr||this.options.dataAccessors.getters.display,n=Ps.getOperationBySearchMode(this.options.searchMode),o=this._createCriteria(i,e,n);return t=t||this._initialDataStructure,(0,Zo.Z)(t,{langParams:this.options.langParams}).filter(o).toArray()},search(e){const t=this;let i=this._filterDataStructure(e);const{dataConverter:n}=this.options;return function e(i,o){const{length:r}=i;for(;o<r;){const r=i[o];if(r.internalFields.parentKey===t.options.rootValue){o++;continue}const s=n.getParentNode(r);s?(s.internalFields.expanded||t._setFieldState(s,nc,!0),i.includes(s)?o++:(i.splice(o,0,s),e(i,o))):(ge.Z.log("W1007",r.internalFields.parentKey,r.internalFields.key),o++)}}(i,0),this.options.sort&&(i=Ya.Z.queryByOptions((0,Zo.Z)(i),{sort:this.options.sort,langParams:this.options.langParams}).toArray()),n._indexByKey={},(0,j.each)(i,((e,t)=>{t.internalFields.childrenKeys=[],n._indexByKey[t.internalFields.key]=e})),n._dataStructure=i,n.setChildrenKeys(),n._dataStructure}}),sc=rc,ac=wr.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{keyExpr:"id",displayExpr:"text",selectedExpr:"selected",disabledExpr:"disabled",itemsExpr:"items",hoverStateEnabled:!0,parentIdExpr:"parentId",expandedExpr:"expanded"})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===a.default.real().deviceType&&!a.default.isSimulator(),options:{focusStateEnabled:!0}}])},_init(){this.callBase(),this._initAccessors(),this._initDataAdapter(),this._initDynamicTemplates()},_initDataSource(){this.callBase(),this._dataSource&&this._dataSource.paginate(!1)},_initDataAdapter(){const e=this._createDataAdapterAccessors();this._dataAdapter=new sc((0,f.l)({dataAccessors:{getters:e.getters,setters:e.setters},items:this.option("items")},this._getDataAdapterOptions()))},_getDataAdapterOptions:u.noop,_getItemExtraPropNames:u.noop,_initDynamicTemplates(){const e=["text","html","items","icon"].concat(this._getItemExtraPropNames());this._templateManager.addDefaultTemplates({item:new No(this._addContent.bind(this),e,this.option("integrationOptions.watchMethod"),{text:this._displayGetter,items:this._itemsGetter})})},_addContent(e,t){e.html(t.html).append(this._getIconContainer(t)).append(this._getTextContainer(t))},_getLinkContainer(e,t,i){let{linkAttr:o,url:r}=i;const s=(0,_.Kn)(o)?o:{};return(0,c.Z)("<a>").addClass("dx-item-url").attr((0,n.Z)({},s,{href:r})).append(e).append(t)},_getIconContainer(e){if(!e.icon)return;const t=Cn(e.icon);if(t.is("img")){const e=this.NAME.startsWith("dxPrivateComponent")?"":`${this.NAME} `;t.attr("alt",`${e}item icon`)}return t},_getTextContainer:e=>(0,c.Z)("<span>").text(e.text),_initAccessors(){const e=this;(0,j.each)(this._getAccessors(),((t,i)=>{e._compileAccessor(i)})),this._compileDisplayGetter()},_getAccessors:()=>["key","selected","items","disabled","parentId","expanded"],_getChildNodes(e){const t=this,i=[];return(0,j.each)(e.internalFields.childrenKeys,((e,n)=>{const o=t._dataAdapter.getNodeByKey(n);i.push(o)})),i},_hasChildren:e=>e&&e.internalFields.childrenKeys.length,_compileAccessor(e){const t=`_${e}Getter`,i=`_${e}Setter`,n=this.option(`${e}Expr`);return n?(0,_.mf)(n)?(this[i]=function(e,t){e[n()]=t},void(this[t]=function(e){return e[n()]})):(this[t]=(0,hn.vb)(n),void(this[i]=(0,hn.OM)(n))):(this[t]=u.noop,void(this[i]=u.noop))},_createDataAdapterAccessors(){const e=this,t={getters:{},setters:{}};return(0,j.each)(this._getAccessors(),((i,n)=>{const o=`_${n}Getter`,r=`_${n}Setter`,s="parentId"===n?"parentKey":n;t.getters[s]=e[o],t.setters[s]=e[r]})),t.getters.display=this._displayGetter?this._displayGetter:e=>e.text,t},_initMarkup(){this.callBase(),this._addWidgetClass()},_addWidgetClass(){this._focusTarget().addClass(this._widgetClass())},_widgetClass:u.noop,_renderItemFrame(e,t){const i=this.callBase.apply(this,arguments);return i.toggleClass("dx-state-disabled",!!this._disabledGetter(t)),i},_optionChanged(e){switch(e.name){case"displayExpr":case"keyExpr":this._initAccessors(),this._initDynamicTemplates(),this.repaint();break;case"itemsExpr":case"selectedExpr":case"disabledExpr":case"expandedExpr":case"parentIdExpr":this._initAccessors(),this._initDataAdapter(),this.repaint();break;case"items":this._initDataAdapter(),this.callBase(e);break;default:this.callBase(e)}}}),lc=ac,cc=class extends vr{_getPlainItems(){return(0,j.map)(this._collectionWidget.option("items"),(function e(t){return t.items?[t].concat((0,j.map)(t.items,e)):t}))}_stringifyItem(e){return JSON.stringify(e,((e,t)=>"template"===e?this._getTemplateString(t):t))}_getTemplateString(e){let t;return t="object"==typeof e?(0,c.Z)(e).text():e.toString(),t}},dc="dx-menu-item",hc=`${dc}-content`,uc=`${dc}-selected`,pc=`${dc}-wrapper`,fc=`${dc}-expanded`,_c=`${dc}-has-text`,mc=`${dc}-has-icon`,gc=`${dc}-has-submenu`,vc=`${dc}-popout`,bc=`${vc}-container`,yc=`${dc}-text`,Cc={show:50,hide:300},wc=`${yc}-with-url`;class xc extends lc{_getDefaultOptions(){return(0,f.l)(super._getDefaultOptions(),{items:[],cssClass:"",activeStateEnabled:!0,showSubmenuMode:{name:"onHover",delay:{show:50,hide:300}},animation:{show:{type:"fade",from:0,to:1,duration:100},hide:{type:"fade",from:1,to:0,duration:100}},selectByClick:!1,focusOnSelectedItem:!1,keyExpr:null,_itemAttributes:{role:"menuitem"},useInkRipple:!1})}_itemDataKey(){return"dxMenuItemDataKey"}_itemClass(){return dc}_setAriaSelectionAttribute(e,t){}_selectedItemClass(){return uc}_widgetClass(){return"dx-menu-base"}_focusTarget(){return this._itemContainer()}_clean(){this.option("focusedElement",null),super._clean()}_supportedKeys(){return(0,f.l)(super._supportedKeys(),{space:()=>{const e=(0,c.Z)(this.option("focusedElement"));e.length&&this._isSelectionEnabled()&&this.selectItem(e[0])},pageUp:u.noop,pageDown:u.noop})}_isSelectionEnabled(){return"single"===this.option("selectionMode")}_init(){this._activeStateUnit=`.${dc}`,super._init(),this._renderSelectedItem(),this._initActions()}_getLinkContainer(e,t,i){const{linkAttr:n,url:o}=i;return null==e||e.addClass("dx-icon-with-url"),null==t||t.addClass(wc),super._getLinkContainer(e,t,{linkAttr:n,url:o})}_addContent(e,t){const{html:i,url:n}=t;if(n){e.html(i);const n=this._getLinkContainer(this._getIconContainer(t),this._getTextContainer(t),t);e.append(n)}else super._addContent(e,t);e.append(this._getPopoutContainer(t)),this._addContentClasses(t,e.parent())}_getTextContainer(e){const{text:t}=e;if(!t)return;const i=(0,c.Z)("<span>").addClass(yc),n=(0,_.PO)(e)?t:String(e);return i.text(n)}_getItemExtraPropNames(){return["url","linkAttr"]}_getPopoutContainer(e){const{items:t}=e;let i;if(t&&t.length){const e=(0,c.Z)("<div>").addClass(vc);i=(0,c.Z)("<span>").addClass(bc).append(e)}return i}_getDataAdapterOptions(){return{rootValue:0,multipleSelection:!1,recursiveSelection:!1,recursiveExpansion:!1,searchValue:""}}_selectByItem(e){if(!e)return;const t=this._dataAdapter.getNodeByItem(e);this._dataAdapter.toggleSelection(t.internalFields.key,!0)}_renderSelectedItem(){const e=this._dataAdapter.getSelectedNodesKeys(),t=e.length&&e[0],i=this.option("selectedItem");if(!t)return void this._selectByItem(i);const n=this._dataAdapter.getNodeByKey(t);!1!==n.selectable&&(i?i!==n.internalFields.item&&(this._dataAdapter.toggleSelection(t,!1),this._selectByItem(i)):this.option("selectedItem",n.internalFields.item))}_initActions(){}_initMarkup(){super._initMarkup(),this.option("useInkRipple")&&this._renderInkRipple()}_renderInkRipple(){this._inkRipple=Pn()}_toggleActiveState(e,t,i){if(super._toggleActiveState.apply(this,arguments),!this._inkRipple)return;const n={element:e,event:i};t?this._inkRipple.showWave(n):this._inkRipple.hideWave(n)}_getShowSubmenuMode(){let e=this.option("showSubmenuMode");return e=(0,_.Kn)(e)?e.name:e,this._isDesktopDevice()?e:"onClick"}_initSelectedItems(){}_isDesktopDevice(){return"desktop"===a.default.real().deviceType}_initEditStrategy(){const e=cc;this._editStrategy=new e(this)}_addCustomCssClass(e){e.addClass(this.option("cssClass"))}_itemWrapperSelector(){return`.${pc}`}_hoverStartHandler(e){const t=this._getItemElementByEventArgs(e);t&&!this._isItemDisabled(t)&&(e.stopPropagation(),"onHover"===this._getShowSubmenuMode()&&(clearTimeout(this._showSubmenusTimeout),this._showSubmenusTimeout=setTimeout(this._showSubmenu.bind(this,t),this._getSubmenuDelay("show"))))}_getAvailableItems(e){return super._getAvailableItems(e).filter((function(){return"hidden"!==(0,c.Z)(this).css("visibility")}))}_isItemDisabled(e){return this._disabledGetter(e.data(this._itemDataKey()))}_showSubmenu(e){this._addExpandedClass(e)}_addExpandedClass(e){(0,c.Z)(e).addClass(fc)}_getSubmenuDelay(e){const{delay:t}=this.option("showSubmenuMode");return(0,_.$K)(t)?(0,_.Kn)(t)?t[e]:t:Cc[e]}_getItemElementByEventArgs(e){let t=(0,c.Z)(e.target);if(t.hasClass(this._itemClass())||t.get(0)===e.currentTarget)return t;for(;!t.hasClass(this._itemClass());)if(t=t.parent(),t.hasClass("dx-submenu"))return null;return t}_hoverEndHandler(e){clearTimeout(this._showSubmenusTimeout)}_hasSubmenu(e){return e&&e.internalFields.childrenKeys.length}_renderContentImpl(){this._renderItems(this._dataAdapter.getRootNodes())}_renderItems(e,t){if(!e.length)return;this.hasIcons=!1;const i=this._renderContainer(this.$element(),t);let n=-1,o=-1;(0,j.each)(e,((e,t)=>{const r=!1!==t.visible;r&&n<0&&(n=e),n<e&&(t.beginGroup||e===o)&&(o=r?e:e+1),e===o&&n<e&&this._renderSeparator(i),this._renderItem(e,t,i)})),this.hasIcons||i.addClass("dx-menu-no-icons")}_renderContainer(e,t){const i=(0,c.Z)("<ul>");return this.setAria("role","none",i),i.appendTo(e).addClass("dx-menu-items-container")}_createDOMElement(e){const t=(0,c.Z)("<li>");return this.setAria("role","none",t),t.appendTo(e).addClass(pc)}_renderItem(e,t,i,n){const{items:o=[]}=this.option(),r=n??this._createDOMElement(i);o[e+1]&&o[e+1].beginGroup&&r.addClass("dx-menu-last-group-item");const s=super._renderItem(e,t.internalFields.item,r);t.internalFields.item===this.option("selectedItem")&&s.addClass(uc),s.attr("tabIndex",-1),this._hasSubmenu(t)&&this.setAria("haspopup","true",s)}_renderItemFrame(e,t,i){const n=i.children(`.${dc}`);return n.length?n:super._renderItemFrame.apply(this,arguments)}_refreshItem(e,t){const i=this._dataAdapter.getNodeByItem(t),n=e.data(this._itemIndexKey()),o=e.closest("ul"),r=e.closest("li");this._renderItem(n,i,o,r)}_addContentClasses(e,t){const i=!!e.text&&!!e.text.length,n=!!e.icon,o=!!e.items&&!!e.items.length;t.toggleClass(_c,i),t.toggleClass(mc,n),this.hasIcons||(this.hasIcons=n),t.toggleClass(gc,o)}_getItemContent(e){let t=super._getItemContent(e);return t.length||(t=e.children(`.${hc}`)),t}_postprocessRenderItem(e){const t=(0,c.Z)(e.itemElement),i=this._dataAdapter.getSelectedNodesKeys();i.length&&this._selectedGetter(e.itemData)&&this._isItemSelectable(e.itemData)&&this._dataAdapter.getNodeByItem(e.itemData).internalFields.key===i[0]?(t.addClass(this._selectedItemClass()),this._setAriaSelectionAttribute(t,"true")):this._setAriaSelectionAttribute(t,"false")}_isItemSelectable(e){return!1!==e.selectable}_renderSeparator(e){(0,c.Z)("<li>").appendTo(e).addClass("dx-menu-separator")}_itemClickHandler(e){if(e._skipHandling)return;const t=this._createAction(this._updateSubmenuVisibilityOnClick.bind(this));this._itemDXEventHandler(e,"onItemClick",{},{beforeExecute:this._itemClick,afterExecute:t.bind(this)}),e._skipHandling=!0}_itemClick(e){const{event:t,itemData:i}=e.args[0],n=this._getItemElementByEventArgs(t),o=n&&n.find(".dx-item-url").get(0);i.url&&o&&o.click()}_updateSubmenuVisibilityOnClick(e){this._updateSelectedItemOnClick(e),"onClick"===this._getShowSubmenuMode()&&this._addExpandedClass(e.args[0].itemElement)}_updateSelectedItemOnClick(e){const t=e.args?e.args[0]:e;if(!this._isItemSelectAllowed(t.itemData))return;const i=this._dataAdapter.getSelectedNodesKeys(),n=i.length&&this._dataAdapter.getNodeByKey(i[0]);n&&this._toggleItemSelection(n,!1),n&&n.internalFields.item===t.itemData?(this._fireSelectionChangeEvent(null,this.option("selectedItem")),this._setOptionWithoutOptionChange("selectedItem",null)):this.selectItem(t.itemData)}_isItemSelectAllowed(e){const t=this._isSelectionEnabled()&&this.option("selectByClick");return!this._isContainerEmpty()&&t&&this._isItemSelectable(e)&&!this._itemsGetter(e)}_isContainerEmpty(){return this._itemContainer().is(":empty")}_syncSelectionOptions(){return(0,u.asyncNoop)()}_optionChanged(e){switch(e.name){case"showSubmenuMode":break;case"selectedItem":{const t=this._dataAdapter.getNodeByItem(e.value),i=this._dataAdapter.getSelectedNodesKeys()[0];if(t&&t.internalFields.key!==i){if(!1===t.selectable)break;i&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(i),!1),this._toggleItemSelection(t,!0),this._updateSelectedItems()}break}case"cssClass":case"position":case"selectByClick":case"animation":case"useInkRipple":this._invalidate();break;default:super._optionChanged(e)}}_toggleItemSelection(e,t){const i=this._getElementByItem(e.internalFields.item);i&&(0,c.Z)(i).toggleClass(uc),this._dataAdapter.toggleSelection(e.internalFields.key,t)}_getElementByItem(e){let t;return(0,j.each)(this._itemElements(),((i,n)=>(0,c.Z)(n).data(this._itemDataKey())!==e||(t=n,!1))),t}_updateSelectedItems(e,t){(e||t)&&this._fireSelectionChangeEvent(t,e)}_fireSelectionChangeEvent(e,t){this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})({addedItems:[e],removedItems:[t]})}selectItem(e){const t=e.nodeType?this._getItemData(e):e,i=this._dataAdapter.getSelectedNodesKeys()[0],n=this.option("selectedItem"),o=this._dataAdapter.getNodeByItem(t);o.internalFields.key!==i&&(i&&this._toggleItemSelection(this._dataAdapter.getNodeByKey(i),!1),this._toggleItemSelection(o,!0),this._updateSelectedItems(n,t),this._setOptionWithoutOptionChange("selectedItem",t))}unselectItem(e){const t=e.nodeType?this._getItemData(e):e,i=this._dataAdapter.getNodeByItem(t),n=this.option("selectedItem");i.internalFields.selected&&(this._toggleItemSelection(i,!1),this._updateSelectedItems(n,null),this._setOptionWithoutOptionChange("selectedItem",null))}}xc.ItemClass=hr;const Sc=xc,Ic=["onShowing","onShown","onSubmenuCreated","onHiding","onHidden","onPositioning","onLeftFirstItem","onLeftLastItem","onCloseRootSubmenu","onExpandLastSubmenu"],kc=["up","down","first","last"],Ec=(0,Z.getWindow)();class Oc extends Sc{getShowEvent(e){return(0,_.Kn)(e)?null!==e.name?e.name??"dxcontextmenu":null:e}getShowDelay(e){return(0,_.Kn)(e)&&e.delay}_getDefaultOptions(){return(0,f.l)(super._getDefaultOptions(),{showEvent:"dxcontextmenu",hideOnOutsideClick:!0,position:{at:"top left",my:"top left"},onShowing:null,onShown:null,onSubmenuCreated:null,onHiding:null,onHidden:null,onPositioning:null,submenuDirection:"auto",visible:!1,target:void 0,onLeftFirstItem:null,onLeftLastItem:null,onCloseRootSubmenu:null,onExpandLastSubmenu:null})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>!(0,Z.hasWindow)(),options:{animation:null}}])}_setDeprecatedOptions(){super._setDeprecatedOptions(),(0,f.l)(this._deprecatedOptions,{closeOnOutsideClick:{since:"22.2",alias:"hideOnOutsideClick"}})}_initActions(){this._actions={},(0,j.each)(Ic,((e,t)=>{this._actions[t]=this._createActionByOption(t)||u.noop}))}_setOptionsByReference(){super._setOptionsByReference(),(0,f.l)(this._optionsByReference,{animation:!0,selectedItem:!0})}_focusInHandler(){}_itemContainer(){return this._overlay?this._overlay.$content():(0,c.Z)()}_eventBindingTarget(){return this._itemContainer()}itemsContainer(){return this._overlay?this._overlay.$content():void 0}_supportedKeys(){return(0,f.l)(super._supportedKeys(),{space:()=>{const e=(0,c.Z)(this.option("focusedElement"));this.hide(),e.length&&this._isSelectionEnabled()&&this.selectItem(e[0])},escape:this.hide})}_getActiveItem(e){const t=this._getAvailableItems(),i=t.filter(".dx-state-focused"),n=t.filter(".dx-state-hover");return n.closest(".dx-menu-items-container").find(".dx-menu-item").index(i)>=0?i:n.length?n:super._getActiveItem()}_moveFocus(e){const t=this._getItemsByLocation(e),i=this._getActiveItem(!0),n=this.itemsContainer().find(".dx-state-hover"),o=!(!(0,c.Z)(this.option("focusedElement")).length&&!n.length);let r;switch(e){case"up":r=o?this._prevItem(t):i,this._setFocusedElement(r),i.is(t.first())&&this._actions.onLeftFirstItem(i);break;case"down":r=o?this._nextItem(t):i,this._setFocusedElement(r),i.is(t.last())&&this._actions.onLeftLastItem(i);break;case"right":r=this.option("rtlEnabled")?this._hideSubmenuHandler():this._expandSubmenuHandler(t,e),this._setFocusedElement(r);break;case"left":r=this.option("rtlEnabled")?this._expandSubmenuHandler(t,e):this._hideSubmenuHandler(),this._setFocusedElement(r);break;case"first":r=t.first(),this._setFocusedElement(r);break;case"last":r=t.last(),this._setFocusedElement(r);break;default:return super._moveFocus(e)}}_setFocusedElement(e){e&&0!==e.length&&(this.option("focusedElement",(0,l.uD)(e)),this._scrollToElement(e))}_scrollToElement(e){const t=e.closest(".dx-scrollable").dxScrollable("instance");null==t||t.scrollToElement(e)}_getItemsByLocation(e){const t=this._getActiveItem(!0);let i;return kc.includes(e)&&(i=t.closest(".dx-menu-items-container").children().children()),i=this._getAvailableItems(i),i}_getAriaTarget(){return this.$element()}_refreshActiveDescendant(){if((0,_.$K)(this._overlay)){const e=this._overlay.$content();super._refreshActiveDescendant(e)}}_hideSubmenuHandler(){const e=this._getActiveItem(!0),t=e.parents(".dx-menu-item-expanded").first();if(t.length)return this._hideSubmenusOnSameLevel(t),this._hideSubmenu(e.closest(".dx-submenu")),t;this._actions.onCloseRootSubmenu(e)}_expandSubmenuHandler(e,t){const i=this._getActiveItem(!0),n=this._getItemData(i),o=this._dataAdapter.getNodeByItem(n),r=this._hasSubmenu(o),s=i.children(".dx-submenu");if(r&&!i.hasClass("dx-state-disabled"))return s.length&&"hidden"!==s.css("visibility")||this._showSubmenu(i),this._nextItem(this._getItemsByLocation(t));this._actions.onExpandLastSubmenu(i)}_clean(){this._overlay&&(this._overlay.$element().remove(),this._overlay=null),this._detachShowContextMenuEvents(this._getTarget()),super._clean()}_initMarkup(){this.$element().addClass("dx-has-context-menu"),super._initMarkup()}_render(){super._render(),this._renderVisibility(this.option("visible")),this._addWidgetClass()}_isTargetOutOfComponent(e){return!(0!==(0,c.Z)(e).closest(".dx-context-menu").length)}_focusOutHandler(e){const{relatedTarget:t}=e;t&&this._isTargetOutOfComponent(t)&&this.hide(),super._focusOutHandler(e)}_renderContentImpl(){this._detachShowContextMenuEvents(this._getTarget()),this._attachShowContextMenuEvents()}_attachKeyboardEvents(){!this._keyboardListenerId&&this._focusTarget().length&&super._attachKeyboardEvents()}_renderContextMenuOverlay(){if(this._overlay)return;const e=this._getOverlayOptions();this._overlay=this._createComponent((0,c.Z)("<div>").appendTo(this._$element),se.Z,e);const t=this._overlay.$content();t.addClass("dx-context-menu"),this._addCustomCssClass(t),this._addPlatformDependentClass(t),this._attachContextMenuEvent()}preventShowingDefaultContextMenuAboveOverlay(){const e=this._itemContainer(),t=(0,v.addNamespace)(ar,this.NAME);m.Z.off(e,t,".dx-submenu"),m.Z.on(e,t,".dx-submenu",(i=>{i.stopPropagation(),i.preventDefault(),m.Z.off(e,t,".dx-submenu")}))}_itemContextMenuHandler(e){super._itemContextMenuHandler(e),e.stopPropagation()}_addPlatformDependentClass(e){a.default.current().phone&&e.addClass("dx-menu-phone-overlay")}_detachShowContextMenuEvents(e){const t=this.getShowEvent(this.option("showEvent"));if(!t)return;const i=(0,v.addNamespace)(t,this.NAME);this._showContextMenuEventHandler?m.Z.off(Fe.Z.getDocument(),i,e,this._showContextMenuEventHandler):m.Z.off((0,c.Z)(e),i)}_attachShowContextMenuEvents(){const e=this._getTarget(),t=this.getShowEvent(this.option("showEvent"));if(!t)return;const i=(0,v.addNamespace)(t,this.NAME);let n=this._createAction((e=>{const t=this.getShowDelay(this.option("showEvent"));t?setTimeout((()=>this._show(e.event)),t):this._show(e.event)}),{validatingTargetName:"target"});const o=e=>n({event:e,target:(0,c.Z)(e.currentTarget)});n=this._createAction(n),(0,_.ZU)(e)||e.nodeType||(0,_.FJ)(e)?(this._showContextMenuEventHandler=void 0,m.Z.on(e,i,o)):(this._showContextMenuEventHandler=o,m.Z.on(Fe.Z.getDocument(),i,e,this._showContextMenuEventHandler))}_hoverEndHandler(e){super._hoverEndHandler(e),e.stopPropagation()}_renderDimensions(){}_renderContainer(e,t){const i=t||this._itemContainer();(e=(0,c.Z)("<div>")).appendTo(i).addClass("dx-submenu").css("visibility",t?"hidden":"visible"),e.parent().hasClass("dx-overlay-content")||this._addCustomCssClass(e);const n=super._renderContainer(e);return t?n:this.option("width")?n.css("minWidth",this.option("width")):this.option("height")?n.css("minHeight",this.option("height")):n}_renderSubmenuItems(e,t){this._renderItems(this._getChildNodes(e),t);const i=t.children(".dx-submenu");this._actions.onSubmenuCreated({itemElement:(0,l.uD)(t),itemData:e.internalFields.item,submenuElement:(0,l.uD)(i)}),this._initScrollable(i),this.setAria({role:"menu"},i)}_getOverlayOptions(){const e=this.option("position");return{focusStateEnabled:this.option("focusStateEnabled"),animation:this.option("animation"),innerOverlay:!0,hideOnOutsideClick:e=>this._hideOnOutsideClickHandler(e),propagateOutsideClick:!0,hideOnParentScroll:!0,deferRendering:!1,position:{at:e.at,my:e.my,of:this._getTarget(),collision:"flipfit"},shading:!1,showTitle:!1,height:"auto",width:"auto",onShown:this._overlayShownActionHandler.bind(this),onHiding:this._overlayHidingActionHandler.bind(this),onHidden:this._overlayHiddenActionHandler.bind(this),visualContainer:Ec}}_overlayShownActionHandler(e){this._actions.onShown(e)}_overlayHidingActionHandler(e){this._actions.onHiding(e),e.cancel||(this._hideAllShownSubmenus(),this._setOptionWithoutOptionChange("visible",!1))}_overlayHiddenActionHandler(e){this._actions.onHidden(e)}_shouldHideOnOutsideClick(e){const{closeOnOutsideClick:t,hideOnOutsideClick:i}=this.option();return(0,_.mf)(i)?i(e):(0,_.mf)(t)?t(e):i||t}_hideOnOutsideClickHandler(e){if(!this._shouldHideOnOutsideClick(e))return!1;if(Fe.Z.isDocument(e.target))return!0;const t=this._getActiveItemsContainer(e.target),i=this._getItemsContainers(),n=this._searchActiveItem(e.target),o=this.$element().parents(".dx-menu-item"),r=n[0]===o[0]&&n.length&&o.length;return!(this._isIncludeOverlay(t,i)&&n.length)&&!r||("onClick"===this._getShowSubmenuMode()&&this._hideAllShownChildSubmenus(n),!1)}_getActiveItemsContainer(e){return(0,c.Z)(e).closest(".dx-menu-items-container")}_getItemsContainers(){return this._overlay.$content().find(".dx-menu-items-container")}_searchActiveItem(e){return(0,c.Z)(e).closest(".dx-menu-item").eq(0)}_isIncludeOverlay(e,t){let i=!1;return(0,j.each)(t,((t,n)=>{e.is(n)&&!i&&(i=!0)})),i}_hideAllShownChildSubmenus(e){const t=e.find(".dx-submenu"),i=(0,f.l)([],this._shownSubmenus);t.length>0&&(0,j.each)(i,((t,i)=>{const n=this._searchActiveItem(i.context).parent();n.parent().is(e.parent().parent())&&!n.is(e.parent())&&this._hideSubmenu(i)}))}_initScrollable(e){this._createComponent(e,ec,{useKeyboard:!1,_onVisibilityChanged:e=>{e.scrollTo(0)}})}_setSubMenuHeight(e,t,i){const n=e.find(".dx-menu-items-container"),o=(0,oe.zp)(n),r=this._getMaxHeight(t,!i),s=Math.min(o,r);e.css("height",i?s:"100%")}_getMaxHeight(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const i=(0,oe.zp)(Ec),n=(0,_.ZU)(e),o=Fe.Z.getDocument(),r=e.length&&e[0]===o;if(!n||r)return i;const s=e[0].getBoundingClientRect().top,a=(0,oe.zp)(e);return(t?Math.max(s,i-s-a):Math.max(s+a,i-s))-10}_dimensionChanged(){this._shownSubmenus&&this._shownSubmenus.forEach((e=>{const t=e.closest(".dx-menu-item");this._setSubMenuHeight(e,t,!0),this._scrollToElement(t);const i=this._getSubmenuPosition(t);Jl.Z.setup(e,i)}))}_getSubmenuBorderWidth(){return(0,Sn.yj)((0,Sn.Vk)())?0:1}_showSubmenu(e){const t=this._dataAdapter.getNodeByItem(this._getItemData(e));if(this._hideSubmenusOnSameLevel(e),!this._hasSubmenu(t))return;let i=e.children(".dx-submenu");const n=i.length;super._showSubmenu(e),n||(this._renderSubmenuItems(t,e),i=e.children(".dx-submenu")),this._setSubMenuHeight(i,e,!0),this._isSubmenuVisible(i)||this._drawSubmenu(e)}_hideSubmenusOnSameLevel(e){const t=e.parent(".dx-menu-item-wrapper").siblings().find(".dx-menu-item-expanded");t.length&&(t.removeClass("dx-menu-item-expanded"),this._hideSubmenu(t.find(".dx-submenu")))}_hideSubmenuGroup(e){this._isSubmenuVisible(e)&&this._hideSubmenuCore(e)}_isSubmenuVisible(e){return"visible"===e.css("visibility")}_drawSubmenu(e){const t=this.option("animation")?this.option("animation").show:{},i=e.children(".dx-submenu"),n=this._getSubmenuPosition(e);this._overlay&&this._overlay.option("visible")&&((0,_.$K)(this._shownSubmenus)||(this._shownSubmenus=[]),this._shownSubmenus.includes(i)||this._shownSubmenus.push(i),t&&mo.default.stop(i),Jl.Z.setup(i,n),t&&((0,_.PO)(t.to)&&(t.to.position=n),this._animate(i,t)),i.css("visibility","visible"))}_animate(e,t){mo.default.animate(e,t)}_getSubmenuPosition(e){const t=this.option("submenuDirection").toLowerCase(),i={collision:"flip",of:e.parent(".dx-menu-item-wrapper"),offset:{h:0,v:-1}};switch(t){case"left":i.at="left top",i.my="right top";break;case"right":i.at="right top",i.my="left top";break;default:this.option("rtlEnabled")?(i.at="left top",i.my="right top"):(i.at="right top",i.my="left top")}return i}_updateSubmenuVisibilityOnClick(e){if(!e.args.length)return;const{itemData:t}=e.args[0],i=this._dataAdapter.getNodeByItem(t);if(!i)return;const n=(0,c.Z)(e.args[0].itemElement);let o=n.find(".dx-submenu");if(this._hasSubmenu(i)&&!o.length&&(this._renderSubmenuItems(i,n),o=n.find(".dx-submenu")),n.context===o.context&&"visible"===o.css("visibility"))return;this._updateSelectedItemOnClick(e);const r=t&&!1===t.closeMenuOnClick;if(t&&!t.disabled&&!r)if(0===o.length){const t=(0,c.Z)(n.parents(".dx-submenu")[0]);this._hideSubmenu(t),!e.canceled&&this._overlay&&this._overlay.option("visible")&&this.option("visible",!1)}else this._shownSubmenus&&this._shownSubmenus.length>0&&this._shownSubmenus[0].is(o)&&this._hideSubmenu(o),this._showSubmenu(n)}_hideSubmenu(e){const t=(0,f.l)([],this._shownSubmenus);(0,j.each)(t,((t,i)=>{(e.is(i)||(0,F.contains)(e[0],i[0]))&&(i.parent().removeClass("dx-menu-item-expanded"),this._hideSubmenuCore(i))}))}_hideSubmenuCore(e){const t=this._shownSubmenus.indexOf(e),i=this.option("animation")?this.option("animation").hide:null;t>=0&&this._shownSubmenus.splice(t,1),this._stopAnimate(e),i&&this._animate(e,i),e.css("visibility","hidden"),e.dxScrollable("instance").scrollTo(0),this.option("focusedElement",null)}_stopAnimate(e){mo.default.stop(e,!0)}_hideAllShownSubmenus(){const e=(0,f.l)([],this._shownSubmenus);this._overlay.$content().find(".dx-menu-item-expanded").removeClass("dx-menu-item-expanded"),(0,j.each)(e,((e,t)=>{this._hideSubmenu(t)}))}_visibilityChanged(e){e&&this._renderContentImpl()}_optionChanged(e){if(Ic.includes(e.name))this._initActions();else switch(e.name){case"visible":this._renderVisibility(e.value);break;case"showEvent":case"position":case"submenuDirection":this._invalidate();break;case"target":e.previousValue&&this._detachShowContextMenuEvents(e.previousValue),this._invalidate();break;case"closeOnOutsideClick":case"hideOnOutsideClick":break;default:super._optionChanged(e)}}_renderVisibility(e){return e?this._show():this._hide()}_toggleVisibility(){}_show(e){const t={jQEvent:e};let i=(0,p.BH)().reject().promise();if(this._actions.onShowing(t),t.cancel)return i;const n=this._positionContextMenu(e);if(n){var o;this._overlay||(this._renderContextMenuOverlay(),this._overlay.$content().addClass(this._widgetClass()),this._renderFocusState(),this._attachHoverEvents(),this._attachClickEvent(),this._renderItems(this._dataAdapter.getRootNodes()));const t=(0,c.Z)(this._overlay.content()).children(".dx-submenu");this._setOptionWithoutOptionChange("visible",!0),this._overlay.option({height:()=>this._getMaxHeight(n.of),maxHeight:()=>{const e=t.find(".dx-menu-items-container"),i=this._getSubmenuBorderWidth();return(0,oe.zp)(e)+2*i},position:n}),t.length&&this._setSubMenuHeight(t,n.of,!1),i=this._overlay.show(),e&&e.stopPropagation(),this._setAriaAttributes(),(null==e||null===(o=e.originalEvent)||void 0===o?void 0:o.type)===nr&&this.preventShowingDefaultContextMenuAboveOverlay()}return i}_renderItems(e,t){super._renderItems(e,t);const i=(0,c.Z)(this._overlay.content()).children(".dx-submenu");i.length&&this._initScrollable(i)}_setAriaAttributes(){this._overlayContentId=`dx-${new V.Z}`,this.setAria("owns",this._overlayContentId),this.setAria({id:this._overlayContentId,role:"menu"},this._overlay.$content())}_cleanAriaAttributes(){this._overlay&&this.setAria("id",null,this._overlay.$content()),this.setAria("owns",void 0)}_getTarget(){return this.option("target")||this.option("position").of||(0,c.Z)(Fe.Z.getDocument())}_getContextMenuPosition(){return(0,f.l)({},this.option("position"),{of:this._getTarget()})}_positionContextMenu(e){let t=this._getContextMenuPosition();const i=this._isInitialOptionValue("position"),n=this._createActionByOption("onPositioning");e&&e.preventDefault&&i&&(t.of=e);const o={position:t,event:e};return n(o),o.cancel?t=null:o.event&&(o.event.cancel=!0,e.preventDefault()),t}_refresh(){if((0,Z.hasWindow)())if(this._overlay){const e=this._overlay.option("position");super._refresh(),this._overlay&&this._overlay.option("position",e)}else super._refresh();else super._refresh()}_hide(){let e;return this._overlay&&(e=this._overlay.hide(),this._setOptionWithoutOptionChange("visible",!1)),this._cleanAriaAttributes(),this.option("focusedElement",null),e||(0,p.BH)().reject().promise()}toggle(e){const t=this.option("visible");return e=void 0===e?!t:e,this._renderVisibility(e)}show(){return this.toggle(!0)}hide(){return this.toggle(!1)}}(0,r.default)("dxContextMenu",Oc);const Tc=Oc,Dc=["table","tableHeaderCell"],Bc=["insertTable","insertHeaderRow","insertRowAbove","insertRowBelow","insertColumnLeft","insertColumnRight","deleteColumn","deleteRow","deleteTable","cellProperties","tableProperties"];function Ac(e){const t=e.getModule("table");return null!=t&&t.tableFormats?t.tableFormats():Dc}function Pc(e,t){let{tableBlot:i,quill:n}=t;(i??n.scroll.find(e.get(0))).format("tableWidth","initial")}function Mc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.find("tr").eq(t).find("th, td")}function Rc(e){const t=[],i="horizontal"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"horizontal");return(i?Mc(e):Vc(e)).each(((e,n)=>{const o=(0,c.Z)(n);""===o.get(0).style[i?"width":"height"]&&t.push(o)})),t}function $c(e,t){let{elements:i,property:n,value:o}=t;const r=e.quill.getModule("table").tableBlots,s=`cell${(0,En.camelize)(n,!0)}`;(0,j.each)(i,((t,i)=>{var n;let a=e.quill.scroll.find(i);if(!r.includes(a.statics.blotName)){const e=a.descendant((e=>r.includes(e.statics.blotName)));a=e?e[0]:null}null===(n=a)||void 0===n||n.format(s,`${o}px`)}))}function Nc(e,t){return"horizontal"===(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"horizontal")?Vc(e,t):Mc(e,t)}function Vc(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e.find(`th:nth-child(${1+t}), td:nth-child(${1+t})`)}function Fc(e,t){for(var i=arguments.length,n=new Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return()=>{const i=e.getModule("table");if(i)return e.focus(),i[t](...n)}}var Zc=i(7311),Hc=i(7207);class Lc extends Br{constructor(e,t,i){super(e,t,i),this.currentTemplate=null}_attachEvents(e){const{editor:t}=this;e.option("onClick",(e=>{var i;(null!==(i=t._shouldCallOpenHandler)&&void 0!==i&&i.call(t)||!t.option("openOnFieldClick"))&&t._openHandler(e)})),m.Z.on(e.$element(),"mousedown",(e=>{t.$element().is(".dx-state-focused")&&e.preventDefault()}))}_create(){const{editor:e}=this,t=(0,c.Z)("<div>"),i=this._getOptions();this._addToContainer(t);const n=e._createComponent(t,_o,(0,f.l)({},i,{elementAttr:{"aria-label":z.Z.format("dxDropDownEditor-selectLabel")}}));return this._legacyRender(e.$element(),t,i.visible),{$element:t,instance:n}}_getOptions(){const{editor:e}=this,t=this._isVisible(),i={focusStateEnabled:!1,hoverStateEnabled:!1,activeStateEnabled:!1,useInkRipple:!1,disabled:e.option("readOnly"),visible:t};return this._addTemplate(i),i}_isVisible(){const{editor:e}=this;return super._isVisible()&&e.option("showDropDownButton")}_legacyRender(e,t,i){e.toggleClass("dx-dropdowneditor-button-visible",i),t&&t.removeClass("dx-button").removeClass("dx-button-mode-contained").addClass("dx-dropdowneditor-button")}_isSameTemplate(){return this.editor.option("dropDownButtonTemplate")===this.currentTemplate}_addTemplate(e){this._isSameTemplate()||(e.template=this.editor._getTemplateByOption("dropDownButtonTemplate"),this.currentTemplate=this.editor.option("dropDownButtonTemplate"))}update(){if(super.update()){const{editor:e,instance:t}=this,i=e.$element(),n=this._getOptions();null==t||t.option(n),this._legacyRender(i,null==t?void 0:t.$element(),n.visible)}}}const jc=function(e){if((0,Z.hasWindow)())return(0,oe.Y_)(e)},zc=function(e){return null===e&&(e=void 0),"function"==typeof e&&(e=e()),e},Wc="dx-dropdowneditor-input-wrapper",Kc="dx-dropdowneditor-overlay",qc="ios"===a.default.current().platform,Uc=us.inherit({_supportedKeys(){return(0,f.l)({},this.callBase(),{tab(e){if(!this.option("opened"))return;if(!this._popup.getFocusableElements().length)return void this.close();const t=e.shiftKey?this._getLastPopupElement():this._getFirstPopupElement();t&&(m.Z.trigger(t,"focus"),t.select()),e.preventDefault()},escape(e){return this.option("opened")&&e.preventDefault(),this.close(),!0},upArrow(e){return!(!(0,v.isCommandKeyPressed)(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey)&&(this.close(),1))},downArrow(e){return!(!(0,v.isCommandKeyPressed)(e)&&(e.preventDefault(),e.stopPropagation(),e.altKey)&&(this._validatedOpening(),1))},enter(e){return this.option("opened")&&(e.preventDefault(),this._valueChangeEventHandler(e)),!0}})},_getDefaultButtons(){return this.callBase().concat([{name:"dropDown",Ctor:Lc}])},_getDefaultOptions(){return(0,f.l)(this.callBase(),{value:null,onOpened:null,onClosed:null,opened:!1,acceptCustomValue:!0,applyValueMode:"instantly",deferRendering:!0,activeStateEnabled:!0,dropDownButtonTemplate:"dropDownButton",fieldTemplate:null,openOnFieldClick:!1,showDropDownButton:!0,buttons:void 0,dropDownOptions:{showTitle:!1},popupPosition:this._getDefaultPopupPosition(),onPopupInitialized:null,applyButtonText:z.Z.format("OK"),cancelButtonText:z.Z.format("Cancel"),buttonsLocation:"default",useHiddenSubmitElement:!1,validationMessagePosition:"auto"})},_useTemplates:()=>!0,_getDefaultPopupPosition(e){const t=(0,ne.q)(e);return{offset:{h:0,v:-1},my:`${t} top`,at:`${t} bottom`,collision:"flip flip"}},_defaultOptionsRules(){return this.callBase().concat([{device:e=>"generic"===e.platform,options:{popupPosition:{offset:{v:0}}}}])},_inputWrapper(){return this.$element().find(`.${Wc}`).first()},_init(){this.callBase(),this._initVisibilityActions(),this._initPopupInitializedAction(),this._updatePopupPosition(this.option("rtlEnabled")),this._options.cache("dropDownOptions",this.option("dropDownOptions"))},_updatePopupPosition(e){const{my:t,at:i}=this._getDefaultPopupPosition(e),n=this.option("popupPosition");this.option("popupPosition",(0,f.l)({},n,{my:t,at:i}))},_initVisibilityActions(){this._openAction=this._createActionByOption("onOpened",{excludeValidators:["disabled","readOnly"]}),this._closeAction=this._createActionByOption("onClosed",{excludeValidators:["disabled","readOnly"]})},_initPopupInitializedAction(){this._popupInitializedAction=this._createActionByOption("onPopupInitialized",{excludeValidators:["disabled","readOnly"]})},_initMarkup(){this._renderSubmitElement(),this.callBase(),this.$element().addClass("dx-dropdowneditor"),this.setAria("role",this._getAriaRole())},_render(){this.callBase(),this._renderOpenHandler(),this._attachFocusOutHandler(),this._renderOpenedState()},_renderContentImpl(){this.option("deferRendering")||this._createPopup()},_renderInput(){this.callBase(),this._renderTemplateWrapper(),this._wrapInput(),this._setDefaultAria()},_wrapInput(){this._$container=this.$element().wrapInner((0,c.Z)("<div>").addClass(Wc)).children().eq(0)},_getAriaHasPopup:()=>"true",_getAriaAutocomplete:()=>"none",_getAriaRole:()=>"combobox",_setDefaultAria(){this.setAria({haspopup:this._getAriaHasPopup(),autocomplete:this._getAriaAutocomplete(),role:this._getAriaRole()})},_readOnlyPropValue(){return!this._isEditable()||this.callBase()},_cleanFocusState(){this.callBase(),this.option("fieldTemplate")&&this._detachFocusEvents()},_getFieldTemplate(){return this.option("fieldTemplate")&&this._getTemplateByOption("fieldTemplate")},_renderMask(){this.option("fieldTemplate")||this.callBase()},_renderField(){const e=this._getFieldTemplate();e&&this._renderTemplatedField(e,this._fieldRenderData())},_renderPlaceholder(){this._getFieldTemplate()||this.callBase()},_renderValue(){this.option("useHiddenSubmitElement")&&this._setSubmitValue(),this.callBase().always(this._renderField.bind(this))},_getButtonsContainer(){return this._getFieldTemplate()?this._$container:this._$textEditorContainer},_renderTemplateWrapper(){this._getFieldTemplate()&&(this._$templateWrapper||(this._$templateWrapper=(0,c.Z)("<div>").addClass("dx-dropdowneditor-field-template-wrapper").prependTo(this.$element())))},_renderTemplatedField(e,t){const i=(0,lr.si)(this._input());this._detachKeyboardEvents(),this._detachFocusEvents(),this._$textEditorContainer.remove(),this._$templateWrapper.empty();const n=this._$templateWrapper,o=Symbol("renderContext");this._activeRenderContext=o,e.render({model:t,container:(0,l.uD)(n),onRendered:()=>{if(this._activeRenderContext!==o)return;if(!this.$element().find(n).length)return;const e=this._input();if(!e.length)throw ge.Z.Error("E1010");this._integrateInput(),i&&m.Z.trigger(e,"focus")}})},_integrateInput(){var e;const{isValid:t}=this.option();this._renderFocusState(),this._refreshValueChangeEvent(),this._refreshEvents(),this._refreshEmptinessEvent(),this._setDefaultAria(),this._setFieldAria(),this._toggleValidationClasses(!t),null===(e=this.option("_onMarkupRendered"))||void 0===e||e()},_refreshEmptinessEvent(){m.Z.off(this._input(),"input blur",this._toggleEmptinessEventHandler),this._renderEmptinessEvent()},_fieldRenderData(){return this.option("value")},_initTemplates(){this._templateManager.addDefaultTemplates({dropDownButton:new Hc.k((e=>{const t=(0,c.Z)("<div>").addClass("dx-dropdowneditor-icon");(0,c.Z)(e.container).append(t)}))}),this.callBase()},_renderOpenHandler(){const e=this._inputWrapper(),t=(0,v.addNamespace)(He.name,this.NAME),i=this.option("openOnFieldClick");m.Z.off(e,t),m.Z.on(e,t,this._getInputClickHandler(i)),this.$element().toggleClass("dx-dropdowneditor-field-clickable",i),i&&(this._openOnFieldClickAction=this._createAction(this._openHandler.bind(this)))},_attachFocusOutHandler(){qc&&(this._detachFocusOutEvents(),m.Z.on(this._inputWrapper(),(0,v.addNamespace)("focusout",this.NAME),(e=>{const t=e.relatedTarget;t&&this.option("opened")&&this._isTargetOutOfComponent(t)&&this.close()})))},_isTargetOutOfComponent(e){const t=this.content?(0,c.Z)(this.content()).closest(`.${Kc}`):this._$popup;return 0===(0,c.Z)(e).closest(`.${Kc}`,t).length},_detachFocusOutEvents(){qc&&m.Z.off(this._inputWrapper(),(0,v.addNamespace)("focusout",this.NAME))},_getInputClickHandler(e){return e?e=>{this._executeOpenAction(e)}:()=>{this._focusInput()}},_openHandler(){this._toggleOpenState()},_executeOpenAction(e){this._openOnFieldClickAction({event:e})},_keyboardEventBindingTarget(){return this._input()},_focusInput(){return!this.option("disabled")&&(this.option("focusStateEnabled")&&!(0,lr.si)(this._input())&&(this._resetCaretPosition(),m.Z.trigger(this._input(),"focus")),!0)},_resetCaretPosition(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t=this._input().get(0);if(t){const{value:i}=t,n=(0,_.$K)(i)&&(e||this._isEditable())?i.length:0;this._caret({start:n,end:n},!0)}},_isEditable(){return this.option("acceptCustomValue")},_toggleOpenState(e){this._focusInput()&&(this.option("readOnly")||(e=arguments.length?e:!this.option("opened"),this.option("opened",e)))},_getControlsAria(){return this._popup&&this._popupContentId},_renderOpenedState(){const e=this.option("opened");e&&this._createPopup(),this.$element().toggleClass("dx-dropdowneditor-active",e),this._setPopupOption("visible",e);const t={expanded:e,controls:this._getControlsAria()};this.setAria(t),this.setAria("owns",e?this._popupContentId:void 0,this.$element())},_createPopup(){this._$popup||(this._$popup=(0,c.Z)("<div>").addClass(Kc).appendTo(this.$element()),this._renderPopup(),this._renderPopupContent(),this._setPopupAriaLabel())},_setPopupAriaLabel(){const e=this._popup.$overlayContent();this.setAria("label","Dropdown",e)},_renderPopupContent:u.noop,_renderPopup(){const e=(0,f.l)(this._popupConfig(),this._options.cache("dropDownOptions"));delete e.closeOnOutsideClick,this._popup=this._createComponent(this._$popup,Ml,e),this._popup.on({showing:this._popupShowingHandler.bind(this),shown:this._popupShownHandler.bind(this),hiding:this._popupHidingHandler.bind(this),hidden:this._popupHiddenHandler.bind(this),contentReady:this._contentReadyHandler.bind(this)}),this._attachPopupKeyHandler(),this._contentReadyHandler(),this._setPopupContentId(this._popup.$content()),this._bindInnerWidgetOptions(this._popup,"dropDownOptions")},_attachPopupKeyHandler(){m.Z.on(this._popup.$overlayContent(),(0,v.addNamespace)("keydown",this.NAME),(e=>this._popupKeyHandler(e)))},_popupKeyHandler(e){switch((0,v.normalizeKeyName)(e)){case"tab":this._popupTabHandler(e);break;case"escape":this._popupEscHandler(e)}},_popupTabHandler(e){const t=(0,c.Z)(e.target),i=e.shiftKey&&t.is(this._getFirstPopupElement());(!e.shiftKey&&t.is(this._getLastPopupElement())||i)&&(m.Z.trigger(this.field(),"focus"),e.preventDefault())},_popupEscHandler(){m.Z.trigger(this._input(),"focus"),this.close()},_setPopupContentId(e){this._popupContentId=`dx-${new V.Z}`,this.setAria("id",this._popupContentId,e)},_contentReadyHandler:u.noop,_popupConfig(){return{onInitialized:this._getPopupInitializedHandler(),position:(0,f.l)(this.option("popupPosition"),{of:this.$element()}),showTitle:this.option("dropDownOptions.showTitle"),_ignoreFunctionValueDeprecation:!0,width:()=>jc(this.$element()),height:"auto",shading:!1,hideOnParentScroll:!0,hideOnOutsideClick:e=>this._closeOutsideDropDownHandler(e),animation:{show:{type:"fade",duration:0,from:0,to:1},hide:{type:"fade",duration:400,from:1,to:0}},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,dragEnabled:!1,toolbarItems:this._getPopupToolbarItems(),onPositioned:this._popupPositionedHandler.bind(this),fullScreen:!1,contentTemplate:null,_hideOnParentScrollTarget:this.$element(),_wrapperClassExternal:Kc,_ignorePreventScrollEventsDeprecation:!0}},_popupInitializedHandler:u.noop,_getPopupInitializedHandler(){const e=this.option("onPopupInitialized");return t=>{this._popupInitializedHandler(t),e&&this._popupInitializedAction({popup:t.component})}},_dimensionChanged(){!(0,Z.hasWindow)()||this.$element().is(":visible")?this._updatePopupWidth():this.close()},_updatePopupWidth(){void 0===zc(this.option("dropDownOptions.width"))&&this._setPopupOption("width",(()=>jc(this.$element())))},_popupPositionedHandler(e){var t;const{labelMode:i,stylingMode:n}=this.option();if(!this._popup)return;const o=this._popup.$overlayContent(),r=null===(t=e.position)||void 0===t||null===(t=t.v)||void 0===t?void 0:t.flip,s="hidden"!==i&&"outside"!==i&&"outlined"===n;if(e.position&&o.toggleClass("dx-dropdowneditor-overlay-flipped",r),r&&s&&this._label.isVisible()){const e=this._label.$element();(0,Ws.pB)(o,{top:(0,Ws.jt)(o).top-parseInt(e.css("fontSize"))})}},_popupShowingHandler:u.noop,_popupHidingHandler(){this.option("opened",!1)},_popupShownHandler(){var e;this._openAction(),null===(e=this._validationMessage)||void 0===e||e.option("positionSide",this._getValidationMessagePositionSide())},_popupHiddenHandler(){var e;this._closeAction(),null===(e=this._validationMessage)||void 0===e||e.option("positionSide",this._getValidationMessagePositionSide())},_getValidationMessagePositionSide(){const e=this.option("validationMessagePosition");if("auto"!==e)return e;let t="bottom";if(this._popup&&this._popup.option("visible")){const{top:e}=Jl.Z.setup(this.$element()),{top:i}=Jl.Z.setup(this._popup.$content());t=e+this.option("popupPosition").offset.v>i?"bottom":"top"}return t},_closeOutsideDropDownHandler(e){let{target:t}=e;const i=(0,c.Z)(t),n=this.getButton("dropDown"),o=n&&n.$element(),r=!!i.closest(this.$element()).length,s=!!i.closest(o).length;return!r&&!s},_clean(){delete this._openOnFieldClickAction,delete this._$templateWrapper,this._$popup&&(this._$popup.remove(),delete this._$popup,delete this._popup),this.callBase()},_setPopupOption(e,t){this._setWidgetOption("_popup",arguments)},_validatedOpening(){this.option("readOnly")||this._toggleOpenState(!0)},_getPopupToolbarItems(){return"useButtons"===this.option("applyValueMode")?this._popupToolbarItemsConfig():[]},_getFirstPopupElement(){return(0,c.Z)(this._popup.getFocusableElements()).first()},_getLastPopupElement(){return(0,c.Z)(this._popup.getFocusableElements()).last()},_popupToolbarItemsConfig(){const e=[{shortcut:"done",options:{onClick:this._applyButtonHandler.bind(this),text:this.option("applyButtonText")}},{shortcut:"cancel",options:{onClick:this._cancelButtonHandler.bind(this),text:this.option("cancelButtonText")}}];return this._applyButtonsLocation(e)},_applyButtonsLocation(e){const t=this.option("buttonsLocation"),i=e;if("default"!==t){const e=(0,u.splitPair)(t);(0,j.each)(i,((t,i)=>{(0,f.l)(i,{toolbar:e[0],location:e[1]})}))}return i},_applyButtonHandler(){this.close(),this.option("focusStateEnabled")&&this.focus()},_cancelButtonHandler(){this.close(),this.option("focusStateEnabled")&&this.focus()},_popupOptionChanged(e){const t=de.default.getOptionsFromContainer(e);this._setPopupOption(t);const i=Object.keys(t);(i.includes("width")||i.includes("height"))&&this._dimensionChanged()},_renderSubmitElement(){this.option("useHiddenSubmitElement")&&(this._$submitElement=(0,c.Z)("<input>").attr("type","hidden").appendTo(this.$element()))},_setSubmitValue(){this._getSubmitElement().val(this.option("value"))},_getSubmitElement(){return this.option("useHiddenSubmitElement")?this._$submitElement:this.callBase()},_dispose(){this._detachFocusOutEvents(),this.callBase()},_optionChanged(e){var t;switch(e.name){case"width":case"height":this.callBase(e),null===(t=this._popup)||void 0===t||t.repaint();break;case"opened":this._renderOpenedState();break;case"onOpened":case"onClosed":this._initVisibilityActions();break;case"onPopupInitialized":this._initPopupInitializedAction();break;case"fieldTemplate":case"acceptCustomValue":case"openOnFieldClick":this._invalidate();break;case"dropDownButtonTemplate":case"showDropDownButton":this._updateButtons(["dropDown"]);break;case"dropDownOptions":this._popupOptionChanged(e),this._options.cache("dropDownOptions",this.option("dropDownOptions"));break;case"popupPosition":break;case"deferRendering":(0,Z.hasWindow)()&&this._createPopup();break;case"applyValueMode":case"applyButtonText":case"cancelButtonText":case"buttonsLocation":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"useHiddenSubmitElement":this._$submitElement&&(this._$submitElement.remove(),this._$submitElement=void 0),this._renderSubmitElement();break;case"rtlEnabled":this._updatePopupPosition(e.value),this.callBase(e);break;default:this.callBase(e)}},open(){this.option("opened",!0)},close(){this.option("opened",!1)},field(){return(0,l.uD)(this._input())},content(){return this._popup?this._popup.content():null}});(0,r.default)("dxDropDownEditor",Uc);const Gc=Uc,Yc=(0,Z.getWindow)(),Qc="dxDraggable",Xc=(0,v.addNamespace)(pl.BL,Qc),Jc=(0,v.addNamespace)(pl.pB,Qc),ed=(0,v.addNamespace)(pl.ut,Qc),td=(0,v.addNamespace)(pl.IO,Qc),id=(0,v.addNamespace)(pl.Zu,Qc),nd=(0,v.addNamespace)($.Z.down,Qc),od=(0,v.addNamespace)("keydown",Qc);let rd,sd;const ad=e=>({x:e.pageX-(0,c.Z)(Yc).scrollLeft(),y:e.pageY-(0,c.Z)(Yc).scrollTop()});class ld{constructor(e,t){this._$scrollableAtPointer=null,this._preventScroll=!0,this._component=t,"vertical"===e?(this._scrollValue="scrollTop",this._overFlowAttr="overflowY",this._sizeAttr="height",this._scrollSizeProp="scrollHeight",this._clientSizeProp="clientHeight",this._limitProps={start:"top",end:"bottom"}):(this._scrollValue="scrollLeft",this._overFlowAttr="overflowX",this._sizeAttr="width",this._scrollSizeProp="scrollWidth",this._clientSizeProp="clientWidth",this._limitProps={start:"left",end:"right"})}updateScrollable(e,t){let i=!1;e.some((e=>{const n=(0,c.Z)(e),o=n.hasClass("dx-overlay-wrapper"),r=n.hasClass("dx-overlay-content");return!(!o&&!r)||(i=this._trySetScrollable(e,t),i)})),i||(this._$scrollableAtPointer=null,this._scrollSpeed=0)}isScrolling(){return!!this._scrollSpeed}isScrollable(e){return("auto"===e.css(this._overFlowAttr)||e.hasClass("dx-scrollable-container"))&&e.prop(this._scrollSizeProp)>Math.ceil("width"===this._sizeAttr?(0,oe.dz)(e):(0,oe.Cr)(e))}_trySetScrollable(e,t){const i=this,n=(0,c.Z)(e);let o;const r=i._component.option("scrollSensitivity");let s=i.isScrollable(n);return s&&(o=i._calculateDistanceToBorders(n,t),r>o[i._limitProps.start]?i._preventScroll||(i._scrollSpeed=-i._calculateScrollSpeed(o[i._limitProps.start]),i._$scrollableAtPointer=n):r>o[i._limitProps.end]?i._preventScroll||(i._scrollSpeed=i._calculateScrollSpeed(o[i._limitProps.end]),i._$scrollableAtPointer=n):(s=!1,i._preventScroll=!1)),s}_calculateDistanceToBorders(e,t){const i=e.get(0);let n;return i?(n=(0,ne.l)(i),{left:t.x-n.left,top:t.y-n.top,right:n.right-t.x,bottom:n.bottom-t.y}):{}}_calculateScrollSpeed(e){const t=this._component,i=t.option("scrollSensitivity"),n=t.option("scrollSpeed");return Math.ceil(((i-e)/i)**2*n)}scrollByStep(){const e=this;if(e._$scrollableAtPointer&&e._scrollSpeed){if(e._$scrollableAtPointer.hasClass("dx-scrollable-container")){const t=e._$scrollableAtPointer.closest(".dx-scrollable"),i=t.data("dxScrollable")||t.data("dxScrollView");if(i){const t=i.scrollOffset()[e._limitProps.start]+e._scrollSpeed;i.scrollTo({[e._limitProps.start]:t})}}else{const t=e._$scrollableAtPointer[e._scrollValue]()+e._scrollSpeed;e._$scrollableAtPointer[e._scrollValue](t)}const t=e._component._dragMoveArgs;t&&e._component._dragMoveHandler(t)}}reset(){this._$scrollableAtPointer=null,this._scrollSpeed=0,this._preventScroll=!0}isOutsideScrollable(e,t){if(!e)return!1;const i=(0,ne.l)(e.get(0)),n=i[this._limitProps.start],o=i[this._sizeAttr],r=ad(t),s="width"===this._sizeAttr?r.x:r.y;return s<n||s>n+o}}const cd=ha.inherit({ctor(e){this.callBase(),this._strategy=e},_step(){const e=this._strategy._horizontalScrollHelper,t=this._strategy._verticalScrollHelper;e&&e.scrollByStep(),t&&t.scrollByStep()}}),dd=sn.default.inherit({reset:u.noop,dragMove:u.noop,dragEnter:u.noop,dragLeave:u.noop,dragEnd(e){return this._getSourceDraggable()._fireRemoveEvent(e),(0,p.BH)().resolve()},_fireRemoveEvent:u.noop,_getDefaultOptions(){return(0,f.l)(this.callBase(),{onDragStart:null,onDragMove:null,onDragEnd:null,onDragEnter:null,onDragLeave:null,onDragCancel:null,onCancelByEsc:!1,onDrop:null,immediate:!0,dragDirection:"both",boundary:void 0,boundOffset:0,allowMoveByClick:!1,itemData:null,container:void 0,dragTemplate:void 0,contentTemplate:"content",handle:"",filter:"",clone:!1,autoScroll:!0,scrollSpeed:30,scrollSensitivity:60,group:void 0,data:void 0})},_setOptionsByReference(){this.callBase.apply(this,arguments),(0,f.l)(this._optionsByReference,{component:!0,group:!0,itemData:!0,data:!0})},_init(){this.callBase(),this._attachEventHandlers(),this._scrollAnimator=new cd(this),this._horizontalScrollHelper=new ld("horizontal",this),this._verticalScrollHelper=new ld("vertical",this),this._initScrollTop=0,this._initScrollLeft=0},_normalizeCursorOffset:e=>((0,_.Kn)(e)&&(e={h:e.x,v:e.y}),{left:(e=(0,u.splitPair)(e).map((e=>parseFloat(e))))[0],top:1===e.length?e[0]:e[1]}),_getNormalizedCursorOffset(e,t){return(0,_.mf)(e)&&(e=e.call(this,t)),this._normalizeCursorOffset(e)},_calculateElementOffset(e){let t,i;const{event:n}=e,o=(0,c.Z)(e.itemElement),r=(0,c.Z)(e.dragElement),s=this._dragElementIsCloned(),a=this.option("cursorOffset");let l={left:0,top:0};const d=this._initialLocate=(0,Ws.jt)(r);return(s||e.initialOffset||a)&&(t=e.initialOffset||o.offset(),a&&(l=this._getNormalizedCursorOffset(a,e),isFinite(l.left)&&(t.left=n.pageX),isFinite(l.top)&&(t.top=n.pageY)),i=r.offset(),t.top-=i.top+(l.top||0)-d.top,t.left-=i.left+(l.left||0)-d.left),t},_initPosition(e){const t=(0,c.Z)(e.dragElement),i=this._calculateElementOffset(e);i&&this._move(i,t),this._startPosition=(0,Ws.jt)(t)},_startAnimator(){this._scrollAnimator.inProgress()||this._scrollAnimator.start()},_stopAnimator(){this._scrollAnimator.stop()},_addWidgetPrefix(e){const t=this.NAME;return(0,En.dasherize)(t)+(e?`-${e}`:"")},_getItemsSelector(){return this.option("filter")||""},_$content(){const e=this.$element(),t=e.children(".dx-template-wrapper");return t.length?t:e},_attachEventHandlers(){if(this.option("disabled"))return;let e=this._$content(),t=this._getItemsSelector();const i=this.option("allowMoveByClick"),n={direction:this.option("dragDirection"),immediate:this.option("immediate"),checkDropTarget:(e,t)=>{const i=this.option("group"),n=this._getSourceDraggable().option("group"),o=this._getScrollable(e);return!this._verticalScrollHelper.isOutsideScrollable(o,t)&&!this._horizontalScrollHelper.isOutsideScrollable(o,t)&&n&&n===i}};i&&(e=this._getArea(),m.Z.on(e,nd,n,this._pointerDownHandler.bind(this))),">"===t[0]&&(t=t.slice(1)),m.Z.on(e,Xc,t,n,this._dragStartHandler.bind(this)),m.Z.on(e,Jc,n,this._dragMoveHandler.bind(this)),m.Z.on(e,ed,n,this._dragEndHandler.bind(this)),m.Z.on(e,td,n,this._dragEnterHandler.bind(this)),m.Z.on(e,id,n,this._dragLeaveHandler.bind(this)),this.option("onCancelByEsc")&&m.Z.on(e,od,this._keydownHandler.bind(this))},_dragElementIsCloned(){return this._$dragElement&&this._$dragElement.hasClass(this._addWidgetPrefix("clone"))},_getDragTemplateArgs(e,t){return{container:(0,l.uD)(t),model:{itemData:this.option("itemData"),itemElement:(0,l.uD)(e)}}},_createDragElement(e){let t=e;const i=this.option("clone"),n=this._getContainer();let o=this.option("dragTemplate");return o?(o=this._getTemplate(o),t=(0,c.Z)("<div>").appendTo(n),o.render(this._getDragTemplateArgs(e,t))):i&&(t=(0,c.Z)("<div>").appendTo(n),e.clone().css({width:e.css("width"),height:e.css("height")}).appendTo(t)),t.toggleClass(this._addWidgetPrefix("clone"),t.get(0)!==e.get(0)).toggleClass("dx-rtl",this.option("rtlEnabled"))},_resetDragElement(){this._dragElementIsCloned()?this._$dragElement.remove():this._toggleDraggingClass(!1),this._$dragElement=null},_resetSourceElement(){this._toggleDragSourceClass(!1),this._$sourceElement=null},_detachEventHandlers(){m.Z.off(this._$content(),`.${Qc}`),m.Z.off(this._getArea(),`.${Qc}`)},_move(e,t){(0,Ws.pB)(t||this._$dragElement,e)},_getDraggableElement(e){const t=this._getSourceElement();if(t)return t;if(this.option("allowMoveByClick"))return this.$element();let i=(0,c.Z)(e&&e.target);const n=this._getItemsSelector();if(">"===n[0]){const e=this._$content().find(n);e.is(i)||(i=i.closest(e))}return i},_getSourceElement(){return this._getSourceDraggable()._$sourceElement},_pointerDownHandler(e){if((0,v.needSkipEvent)(e))return;const t={},i=this.$element(),n=this.option("dragDirection");"horizontal"!==n&&"both"!==n||(t.left=e.pageX-i.offset().left+(0,Ws.jt)(i).left-(0,oe.dz)(i)/2),"vertical"!==n&&"both"!==n||(t.top=e.pageY-i.offset().top+(0,Ws.jt)(i).top-(0,oe.Cr)(i)/2),this._move(t,i),this._getAction("onDragMove")(this._getEventArgs(e))},_isValidElement(e,t){const i=this.option("handle"),n=(0,c.Z)(e.originalEvent&&e.originalEvent.target);return!(i&&!n.closest(i).length||!t.length||t.is(".dx-state-disabled, .dx-state-disabled *"))},_dragStartHandler(e){const t=this._getDraggableElement(e);if(this.dragInProgress=!0,!this._isValidElement(e,t))return void(e.cancel=!0);if(this._$sourceElement)return;const i=this._getDragStartArgs(e,t);if(this._getAction("onDragStart")(i),i.cancel)return void(e.cancel=!0);this.option("itemData",i.itemData),this._setSourceDraggable(),this._$sourceElement=t;let o=t.offset();!this._hasClonedDraggable()&&this.option("autoScroll")&&(this._initScrollTop=this._getScrollableScrollTop(),this._initScrollLeft=this._getScrollableScrollLeft(),o=this._getDraggableElementOffset(o.left,o.top));const r=this._$dragElement=this._createDragElement(t);this._toggleDraggingClass(!0),this._toggleDragSourceClass(!0),this._setGestureCoverCursor(r.children());const s="fixed"===r.css("position");this._initPosition((0,f.l)({},i,{dragElement:r.get(0),initialOffset:s&&o})),this._getAction("onDraggableElementShown")((0,n.Z)({},i,{dragElement:r}));const a=this._getArea(),l=this._getAreaOffset(a),c=this._getBoundOffset(),d=(0,oe.Y_)(a),h=(0,oe.zp)(a),u=(0,oe.dz)(r),p=(0,oe.Cr)(r),_=r.offset().left-l.left,m=r.offset().top-l.top;a.length&&(e.maxLeftOffset=_-c.left,e.maxRightOffset=d-_-u-c.right,e.maxTopOffset=m-c.top,e.maxBottomOffset=h-m-p-c.bottom),this.option("autoScroll")&&this._startAnimator()},_getAreaOffset:e=>e&&Jl.Z.offset(e)||{left:0,top:0},_toggleDraggingClass(e){this._$dragElement&&this._$dragElement.toggleClass(this._addWidgetPrefix("dragging"),e)},_toggleDragSourceClass(e,t){const i=t||this._$sourceElement;i&&i.toggleClass(this._addWidgetPrefix("source"),e)},_setGestureCoverCursor(e){(0,c.Z)(".dx-gesture-cover").css("cursor",e.css("cursor"))},_getBoundOffset(){let e=this.option("boundOffset");return(0,_.mf)(e)&&(e=e.call(this)),(0,re.quadToObject)(e)},_getArea(){let e=this.option("boundary");return(0,_.mf)(e)&&(e=e.call(this)),(0,c.Z)(e)},_getContainer(){let e=this.option("container");return void 0===e&&(e=(0,Sl.S3)()),(0,c.Z)(e)},_getDraggableElementOffset(e,t){var i,n;const o=this._initScrollTop,r=this._initScrollLeft,s=this._getScrollableScrollTop(),a=this._getScrollableScrollLeft(),l="fixed"===(0,c.Z)(this.element()).css("position"),d={left:((null===(i=this._startPosition)||void 0===i?void 0:i.left)??0)+e,top:((null===(n=this._startPosition)||void 0===n?void 0:n.top)??0)+t};return l||this._hasClonedDraggable()?d:{left:(0,_.kE)(a)?d.left+a-r:d.left,top:(0,_.kE)(s)?d.top+s-o:d.top}},_hasClonedDraggable(){return this.option("clone")||this.option("dragTemplate")},_dragMoveHandler(e){if(this._dragMoveArgs=e,!this._$dragElement)return void(e.cancel=!0);const t=this._getDraggableElementOffset(e.offset.x,e.offset.y);this._move(t),this._updateScrollable(e);const i=this._getEventArgs(e);this._getAction("onDragMove")(i),!0!==i.cancel&&this._getTargetDraggable().dragMove(e,scrollBy)},_updateScrollable(e){const t=this;if(t.option("autoScroll")){const i=ad(e),n=Fe.Z.elementsFromPoint(i.x,i.y,this.$element().get(0));t._verticalScrollHelper.updateScrollable(n,i),t._horizontalScrollHelper.updateScrollable(n,i)}},_getScrollable(e){let t;return e.parents().toArray().some((e=>{const i=(0,c.Z)(e);return!(!this._horizontalScrollHelper.isScrollable(i)&&!this._verticalScrollHelper.isScrollable(i)||(t=i,0))})),t},_getScrollableScrollTop(){var e;return(null===(e=this._getScrollable((0,c.Z)(this.element())))||void 0===e?void 0:e.scrollTop())??0},_getScrollableScrollLeft(){var e;return(null===(e=this._getScrollable((0,c.Z)(this.element())))||void 0===e?void 0:e.scrollLeft())??0},_defaultActionArgs(){const e=this.callBase.apply(this,arguments),t=this.option("component");return t&&(e.component=t,e.element=t.element()),e},_getEventArgs(e){const t=this._getSourceDraggable(),i=this._getTargetDraggable();return{event:e,itemData:t.option("itemData"),itemElement:(0,l.uD)(t._$sourceElement),fromComponent:t.option("component")||t,toComponent:i.option("component")||i,fromData:t.option("data"),toData:i.option("data")}},_getDragStartArgs(e,t){const i=this._getEventArgs(e);return{event:i.event,itemData:i.itemData,itemElement:t,fromData:i.fromData}},_revertItemToInitialPosition(){!this._dragElementIsCloned()&&this._move(this._initialLocate,this._$sourceElement)},_dragEndHandler(e){const t=(0,p.BH)(),i=this._getEventArgs(e),n=this._getEventArgs(e),o=this._getTargetDraggable();let r=!0;this.dragInProgress=!1;try{this._getAction("onDragEnd")(i)}finally{(0,p.gx)((0,p.p4)(i.cancel)).done((e=>{if(!e&&(o!==this&&o._getAction("onDrop")(n),!n.cancel))return r=!1,void(0,p.gx)((0,p.p4)(o.dragEnd(i))).always(t.resolve);t.resolve()})).fail(t.resolve),t.done((()=>{r&&this._revertItemToInitialPosition(),this._resetDragOptions(o)}))}},_isTargetOverAnotherDraggable(e){const t=this._getSourceDraggable();if(this===t)return!1;const i=t._$dragElement,n=t.$element(),o=this.$element(),r=ad(e),s=Fe.Z.elementsFromPoint(r.x,r.y,this.element()).filter((e=>{const t=(0,c.Z)(e);return!!t.hasClass(this._addWidgetPrefix())&&!t.closest(i).length}))[0],a=this._getSourceElement(),l=s===n.get(0),d=(0,c.Z)(s).closest(a).length;return!s||s===o.get(0)&&!l&&!d},_dragEnterHandler(e){this._fireDragEnterEvent(e),this._isTargetOverAnotherDraggable(e)&&this._setTargetDraggable(),this._getSourceDraggable().dragEnter(e)},_dragLeaveHandler(e){this._fireDragLeaveEvent(e),this._resetTargetDraggable(),this!==this._getSourceDraggable()&&this.reset(),this._getSourceDraggable().dragLeave(e)},_keydownHandler(e){this.dragInProgress&&"Escape"===e.key&&this._keydownEscapeHandler(e)},_keydownEscapeHandler(e){var t;if(!this._getSourceElement())return;const i=this._getEventArgs(e);if(this._getAction("onDragCancel")(i),i.cancel)return;this.dragInProgress=!1,null===(t=sd)||void 0===t||t._toggleDraggingClass(!1),this._detachEventHandlers(),this._revertItemToInitialPosition();const n=this._getTargetDraggable();this._resetDragOptions(n),this._attachEventHandlers()},_getAction(e){return this[`_${e}Action`]||this._createActionByOption(e)},_getAnonymousTemplateName:()=>"content",_initTemplates(){this.option("contentTemplate")&&(this._templateManager.addDefaultTemplates({content:new d.s}),this.callBase.apply(this,arguments))},_render(){this.callBase(),this.$element().addClass(this._addWidgetPrefix());const e=this._templateManager.anonymousTemplateName===this.option("contentTemplate"),t=this._getTemplateByOption("contentTemplate");t&&(0,c.Z)(t.render({container:this.element(),transclude:e}))},_optionChanged(e){const{name:t}=e;switch(t){case"onDragStart":case"onDragMove":case"onDragEnd":case"onDrop":case"onDragEnter":case"onDragLeave":case"onDragCancel":case"onDraggableElementShown":this[`_${t}Action`]=this._createActionByOption(t);break;case"dragTemplate":case"contentTemplate":case"container":case"clone":case"scrollSensitivity":case"scrollSpeed":case"boundOffset":case"handle":case"group":case"data":case"itemData":break;case"allowMoveByClick":case"dragDirection":case"disabled":case"boundary":case"filter":case"immediate":this._resetDragElement(),this._detachEventHandlers(),this._attachEventHandlers();break;case"onCancelByEsc":this._keydownHandler();break;case"autoScroll":this._verticalScrollHelper.reset(),this._horizontalScrollHelper.reset();break;default:this.callBase(e)}},_getTargetDraggable(){return rd||this},_getSourceDraggable(){return sd||this},_setTargetDraggable(){const e=this.option("group"),t=this._getSourceDraggable();e&&e===t.option("group")&&(rd=this)},_setSourceDraggable(){sd=this},_resetSourceDraggable(){sd=null},_resetTargetDraggable(){rd=null},_resetDragOptions(e){this.reset(),e.reset(),this._stopAnimator(),this._horizontalScrollHelper.reset(),this._verticalScrollHelper.reset(),this._resetDragElement(),this._resetSourceElement(),this._resetTargetDraggable(),this._resetSourceDraggable()},_dispose(){this.callBase(),this._detachEventHandlers(),this._resetDragElement(),this._resetTargetDraggable(),this._resetSourceDraggable(),this._$sourceElement=null,this._stopAnimator()},_fireDragEnterEvent(e){const t=this._getEventArgs(e);this._getAction("onDragEnter")(t)},_fireDragLeaveEvent(e){const t=this._getEventArgs(e);this._getAction("onDragLeave")(t)}});(0,r.default)(Qc,dd);const hd=dd,ud="dxdblclick",pd=(0,v.addNamespace)(He.name,"dxDblClick"),fd=new(g.default.inherit({ctor(){this._handlerCount=0,this._forgetLastClick()},_forgetLastClick(){this._firstClickTarget=null,this._lastClickTimeStamp=-300},add(){this._handlerCount<=0&&m.Z.on(Fe.Z.getDocument(),pd,this._clickHandler.bind(this)),this._handlerCount+=1},_clickHandler(e){const t=e.timeStamp||Date.now(),i=t-this._lastClickTimeStamp;!(i<0)&&i<300?((0,v.fireEvent)({type:"dxdblclick",target:(0,F.closestCommonParent)(this._firstClickTarget,e.target),originalEvent:e}),this._forgetLastClick()):(this._firstClickTarget=e.target,this._lastClickTimeStamp=t,clearTimeout(this._lastClickClearTimeout),this._lastClickClearTimeout=setTimeout((()=>{this._forgetLastClick()}),600))},remove(){this._handlerCount-=1,this._handlerCount<=0&&(this._forgetLastClick(),m.Z.off(Fe.Z.getDocument(),pd,void 0),clearTimeout(this._lastClickClearTimeout),this._handlerCount=0)}}));(0,Jo.Z)(ud,fd);var _d=i(354);const md=ls,gd="dxNumberBox",vd=(0,v.addNamespace)($.Z.up,gd),bd=(0,v.addNamespace)($.Z.cancel,gd),yd=de.default.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{direction:"up",onChange:null,activeStateEnabled:!0,hoverStateEnabled:!0})},_initMarkup(){this.callBase();const e=`dx-numberbox-spin-${this.option("direction")}`;this.$element().addClass("dx-numberbox-spin-button").addClass(e),this._spinIcon=(0,c.Z)("<div>").addClass(`${e}-icon`).appendTo(this.$element())},_render(){this.callBase();const e=(0,v.addNamespace)($.Z.down,this.NAME),t=this.$element();m.Z.off(t,e),m.Z.on(t,e,this._spinDownHandler.bind(this)),this._spinChangeHandler=this._createActionByOption("onChange")},_spinDownHandler(e){e.preventDefault(),this._clearTimer(),m.Z.on(this.$element(),nr,(()=>{this._feedBackDeferred=(0,p.BH)(),(0,_n.dR)(this._feedBackDeferred),this._spinChangeHandler({event:e}),this._holdTimer=setInterval(this._spinChangeHandler,100,{event:e})}));const t=Fe.Z.getDocument();m.Z.on(t,vd,this._clearTimer.bind(this)),m.Z.on(t,bd,this._clearTimer.bind(this)),this._spinChangeHandler({event:e})},_dispose(){this._clearTimer(),this.callBase()},_clearTimer(){m.Z.off(this.$element(),nr);const e=Fe.Z.getDocument();m.Z.off(e,vd),m.Z.off(e,bd),this._feedBackDeferred&&this._feedBackDeferred.resolve(),this._holdTimer&&clearInterval(this._holdTimer)},_optionChanged(e){switch(e.name){case"onChange":case"direction":this._invalidate();break;default:this.callBase(e)}}});class Cd extends Br{_attachEvents(e,t){const{editor:i}=this,n=(0,v.addNamespace)($.Z.down,i.NAME),o=t.children(),r=i._createAction((e=>i._spinButtonsPointerDownHandler(e)));m.Z.off(t,n),m.Z.on(t,n,(e=>r({event:e}))),yd.getInstance(o.eq(0)).option("onChange",(e=>i._spinUpChangeHandler(e))),yd.getInstance(o.eq(1)).option("onChange",(e=>i._spinDownChangeHandler(e)))}_create(){const{editor:e}=this,t=(0,c.Z)("<div>").addClass("dx-numberbox-spin-container"),i=(0,c.Z)("<div>").appendTo(t),n=(0,c.Z)("<div>").appendTo(t),o=this._getOptions();return this._addToContainer(t),e._createComponent(i,yd,(0,f.l)({direction:"up"},o)),e._createComponent(n,yd,(0,f.l)({direction:"down"},o)),this._legacyRender(e.$element(),this._isTouchFriendly(),o.visible),{instance:t,$element:t}}_getOptions(){const{editor:e}=this;return{visible:this._isVisible(),disabled:e.option("disabled")}}_isVisible(){const{editor:e}=this;return super._isVisible()&&e.option("showSpinButtons")}_isTouchFriendly(){const{editor:e}=this;return e.option("showSpinButtons")&&e.option("useLargeSpinButtons")}_legacyRender(e,t,i){e.toggleClass("dx-numberbox-spin-touch-friendly",t),e.toggleClass("dx-numberbox-spin",i)}update(){if(super.update()){const{editor:e,instance:t}=this,i=e.$element(),n=this._isVisible(),o=this._isTouchFriendly(),r=t.children(),s=yd.getInstance(r.eq(0)),a=yd.getInstance(r.eq(1)),l=this._getOptions();s.option(l),a.option(l),this._legacyRender(i,o,n)}}}const wd=Math,xd=["tab","del","backspace","leftArrow","rightArrow","home","end","enter"],Sd=md.inherit({_supportedKeys(){return(0,f.l)(this.callBase(),{upArrow(e){(0,v.isCommandKeyPressed)(e)||(e.preventDefault(),e.stopPropagation(),this._spinUpChangeHandler(e))},downArrow(e){(0,v.isCommandKeyPressed)(e)||(e.preventDefault(),e.stopPropagation(),this._spinDownChangeHandler(e))},enter(){}})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{value:0,min:void 0,max:void 0,step:1,showSpinButtons:!1,useLargeSpinButtons:!0,mode:"text",invalidValueMessage:z.Z.format("dxNumberBox-invalidValueMessage"),buttons:void 0})},_useTemplates:()=>!1,_getDefaultButtons(){return this.callBase().concat([{name:"spins",Ctor:Cd}])},_isSupportInputMode(){const e=parseFloat(Be.default.version);return Be.default.chrome&&e>=66||Be.default.safari&&e>=12},_defaultOptionsRules(){return this.callBase().concat([{device:()=>a.default.real().generic&&!a.default.isSimulator(),options:{useLargeSpinButtons:!1}},{device:function(){return"desktop"!==a.default.real().deviceType&&!this._isSupportInputMode()}.bind(this),options:{mode:"number"}}])},_initMarkup(){this._renderSubmitElement(),this.$element().addClass("dx-numberbox"),this.callBase()},_getDefaultAttributes(){const e=this.callBase();return e.inputmode="decimal",e},_renderContentImpl(){this.option("isValid")&&this._validateValue(this.option("value")),this.setAria("role","spinbutton")},_renderSubmitElement(){this._$submitElement=(0,c.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue(e){this._getSubmitElement().val((0,u.applyServerDecimalSeparator)(e))},_getSubmitElement(){return this._$submitElement},_keyPressHandler(e){this.callBase(e);const t=(0,v.getChar)(e);if(!/[\d.,eE\-+]/.test(t)){const t=(0,v.normalizeKeyName)(e);if((0,v.isCommandKeyPressed)(e)||t&&xd.includes(t))return;return e.preventDefault(),!1}this._keyPressed=!0},_onMouseWheel(e){e.delta>0?this._spinValueChange(1,e):this._spinValueChange(-1,e)},_renderValue(){const e=this._input().val(),t=this.option("value");e.length&&Number(e)===t||(this._forceValueRender(),this._toggleEmptinessEventHandler());const i=(0,_.$K)(t)?null:z.Z.format("dxNumberBox-noDataText");return this.setAria({valuenow:(0,u.ensureDefined)(t,""),valuetext:i}),this.option("text",this._input().val()),this._updateButtons(),(0,p.BH)().resolve()},_forceValueRender(){const e=this.option("value"),t=Number(e),i=isNaN(t)?"":this._applyDisplayValueFormatter(e);this._renderDisplayText(i)},_applyDisplayValueFormatter(e){return this.option("displayValueFormatter")(e)},_renderProps(){this._input().prop({min:this.option("min"),max:this.option("max"),step:this.option("step")}),this.setAria({valuemin:(0,u.ensureDefined)(this.option("min"),""),valuemax:(0,u.ensureDefined)(this.option("max"),"")})},_spinButtonsPointerDownHandler(){const e=this._input();this.option("useLargeSpinButtons")||Fe.Z.getActiveElement()===e[0]||m.Z.trigger(e,"focus")},_spinUpChangeHandler(e){this.option("readOnly")||this._spinValueChange(1,e.event||e)},_spinDownChangeHandler(e){this.option("readOnly")||this._spinValueChange(-1,e.event||e)},_spinValueChange(e,t){const i=parseFloat(this.option("step"));if(0===i)return;let n=parseFloat(this._normalizeInputValue())||0;n=this._correctRounding(n,i*e);const o=this.option("min"),r=this.option("max");(0,_.$K)(o)&&(n=Math.max(o,n)),(0,_.$K)(r)&&(n=Math.min(r,n)),this._saveValueChangeEvent(t),this.option("value",n)},_correctRounding(e,t){const i=/[,.](.*)/,n=i.test(e),o=i.test(t);if(n||o){const r=n?i.exec(e)[0].length:0,s=o?i.exec(t)[0].length:0,a=wd.max(r,s);return this._round(e+t,a)}return e+t},_round(e,t){const i=10**(t=t||0);return e*=i,Math.round(e)/i},_renderValueChangeEvent(){this.callBase();const e=(0,v.addNamespace)("focusout","NumberBoxForceValueChange");m.Z.off(this.element(),e),m.Z.on(this.element(),e,this._forceRefreshInputValue.bind(this))},_forceRefreshInputValue(){if("number"===this.option("mode"))return;const e=this._input(),t=this._applyDisplayValueFormatter(this.option("value"));e.val(null),e.val(t)},_valueChangeEventHandler(e){const t=this._input(),i=this._normalizeText(),n=this._parseValue(i),o="."!==i&&"-"!==i;!this._isValueValid()||this._validateValue(n)?(o&&this.callBase(e,isNaN(n)?null:n),this._applyValueBoundaries(i,n),this.validationRequest.fire({value:n,editor:this})):t.val(this._applyDisplayValueFormatter(n))},_applyValueBoundaries(e,t){const i=this._isValueIncomplete(e),n=this._isValueInRange(e);i||n||null===t||Number(e)!==t&&this._input().val(this._applyDisplayValueFormatter(t))},_replaceCommaWithPoint:e=>e.replace(",","."),_inputIsInvalid(){const e="number"===this.option("mode"),t=this._input().get(0).validity;return e&&t&&t.badInput},_renderDisplayText(e){this._inputIsInvalid()||this.callBase(e)},_isValueIncomplete:e=>/(^-$)|(^-?\d*\.$)|(\d+e-?$)/i.test(e),_isValueInRange(e){return(0,ul.Z2)(e,this.option("min"),this.option("max"))},_isNumber(e){return null!==this._parseValue(e)},_validateValue(e){const t=this._normalizeText(),i=this._isValueValid();let n=!0;const o=this._isNumber(t);return isNaN(Number(e))&&(n=!1),!e&&i?n=!0:o||i||(n=!1),this.option({isValid:n,validationError:n?null:{editorSpecific:!0,message:this.option("invalidValueMessage")}}),n},_normalizeInputValue(){return this._parseValue(this._normalizeText())},_normalizeText(){const e=this._input().val().trim();return this._replaceCommaWithPoint(e)},_parseValue(e){const t=parseFloat(e);return isNaN(t)?null:(0,ul.n$)(t,this.option("min"),this.option("max"))},_clearValue(){this._inputIsInvalid()&&(this._input().val(""),this._validateValue()),this.callBase()},clear(){null===this.option("value")?(this.option("text",""),this._input().length&&this._renderValue()):this.option("value",null)},_optionChanged(e){switch(e.name){case"value":this._validateValue(e.value),this._setSubmitValue(e.value),this.callBase(e),this._resumeValueChangeAction();break;case"step":this._renderProps();break;case"min":case"max":this._renderProps(),this.option("value",this._parseValue(this.option("value")));break;case"showSpinButtons":case"useLargeSpinButtons":this._updateButtons(["spins"]);break;case"invalidValueMessage":break;default:this.callBase(e)}}}),Id=function(e){let t=0,i=0;for(let n=0;n<e.length;++n)if("'"===e[n]&&t++,"."===e[n]&&(++i,t%2==0))return{occurrence:i,index:n};return{occurrence:1,index:-1}},kd=function(e,t,i){let n=-1;for(;i--&&n++<e.length;)n=e.indexOf(t,n);return n},Ed=function(e,t){return-1===t?[e]:[e.slice(0,t),e.slice(t+1)]},Od=function(e,t){if("string"==typeof t){const n=t.split(";"),o=W.Z.getSign(e,t);n[1]=n[1]||`-${n[0]}`,i=t=n[o<0?1:0],t=i.replace(/'([^']*)'/g,(e=>e.split("").map((()=>" ")).join("").substr(2)));const r=/^[^#0.,]*/.exec(t)[0].length,s=/[^#0.,]*$/.exec(t)[0].length;return{start:r,end:e.length-s}}var i;return{start:0,end:e.length}},Td=function(e,t){const i=W.Z.getDecimalSeparator(),n=new RegExp(`[^0-9${(0,u.escapeRegExp)(i)}]`,"g");return t.slice(0,e).replace(n,"").length},Dd=function(e){return e.split("").reverse().join("")},Bd=function(e,t){if(!e)return-1;const i=/[0-9]/g;let n=1,o=null,r=i.exec(t);for(;r;){if(o=r.index,n>=e)return o;n++,r=i.exec(t)}return null===o?t.length:o},Ad=function(e,t){return void 0===e.start&&(e={start:e,end:e}),{start:e.start+t,end:e.end+t}};function Pd(e,t,i){e=Ad(e,0);const n=Od(t,i);return{start:(0,ul.n$)(e.start,n.start,n.end),end:(0,ul.n$)(e.end,n.start,n.end)}}const Md=Sd.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{useMaskBehavior:!0,format:null})},_isDeleteKey:e=>"del"===e,_supportedKeys(){return this._useMaskBehavior()?(0,f.l)(this.callBase(),{minus:this._revertSign.bind(this),del:this._removeHandler.bind(this),backspace:this._removeHandler.bind(this),leftArrow:this._arrowHandler.bind(this,-1),rightArrow:this._arrowHandler.bind(this,1),home:this._moveCaretToBoundaryEventHandler.bind(this,1),enter:this._updateFormattedValue.bind(this),end:this._moveCaretToBoundaryEventHandler.bind(this,-1)}):this.callBase()},_getTextSeparatorIndex(e){const t=W.Z.getDecimalSeparator(),i=Id(this.option("format")).occurrence;return kd(e,t,i)},_focusInHandler(e){this._preventNestedFocusEvent(e)||(this.clearCaretTimeout(),this._caretTimeout=setTimeout((()=>{this._caretTimeout=void 0;const t=this._caret();if(t.start===t.end&&this._useMaskBehavior()){const t=this._getInputVal(),i=this._getTextSeparatorIndex(t);i>=0?this._caret({start:i,end:i}):this._moveCaretToBoundaryEventHandler(-1,e)}}),0)),this.callBase(e)},_focusOutHandler(e){const t=!this._preventNestedFocusEvent(e);t&&(this._focusOutOccurs=!0,this._useMaskBehavior()&&this._updateFormattedValue()),this.callBase(e),t&&(this._focusOutOccurs=!1)},_hasValueBeenChanged(e){const t=this._getFormatPattern(),i=this.option("value");return(this._format(i,t)||"")!==e},_updateFormattedValue(){const e=this._getInputVal();this._hasValueBeenChanged(e)&&(this._updateParsedValue(),this._adjustParsedValue(),this._setTextByParsedValue(),this._parsedValue!==this.option("value")&&m.Z.trigger(this._input(),"change"))},_arrowHandler(e,t){if(!this._useMaskBehavior())return;const i=this._getInputVal(),n=this._getFormatPattern();let o=Ad(this._caret(),e);(function(e,t,i){const n=Pd(e=Ad(e,0),t,i);return e.start>=n.start&&e.end<=n.end})(o,i,n)||(o=1===e?o.end:o.start,t.preventDefault(),this._caret(Pd(o,i,n)))},_moveCaretToBoundary(e){const t=Od(this._getInputVal(),this._getFormatPattern()),i=Ad(1===e?t.start:t.end,0);this._caret(i)},_moveCaretToBoundaryEventHandler(e,t){!this._useMaskBehavior()||t&&t.shiftKey||(this._moveCaretToBoundary(e),t&&t.preventDefault())},_shouldMoveCaret(e,t){const i=W.Z.getDecimalSeparator(),n=e.charAt(t.end)===i;return(this._lastKey===i||"."===this._lastKey||","===this._lastKey)&&n},_getInputVal(){return W.Z.convertDigits(this._input().val(),!0)},_keyboardHandler(e){if(this.clearCaretTimeout(),this._lastKey=W.Z.convertDigits((0,v.getChar)(e),!0),this._lastKeyName=(0,v.normalizeKeyName)(e),!this._shouldHandleKey(e.originalEvent))return this.callBase(e);const t=this._getInputVal(),i=this._caret();let n;n="minus"===this._lastKeyName?"":110===e.which?W.Z.getDecimalSeparator():this._lastKey;const o=this._tryParse(t,i,n);return this._shouldMoveCaret(t,i)&&(this._moveCaret(1),e.originalEvent.preventDefault()),void 0===o?"minus"!==this._lastKeyName&&e.originalEvent.preventDefault():this._parsedValue=o,this.callBase(e)},_keyPressHandler(e){this._useMaskBehavior()||this.callBase(e)},_removeHandler(e){const t=this._caret(),i=this._getInputVal();let{start:n}=t,{end:o}=t;this._lastKey=(0,v.getChar)(e),this._lastKeyName=(0,v.normalizeKeyName)(e);const r=this._isDeleteKey(this._lastKeyName),s=!r;if(n===o){if(!(s&&n>0||r&&n<i.length))return void e.preventDefault();r&&o++,s&&n--}const a=i.slice(n,o);if(this._isStub(a))return this._moveCaret(r?1:-1),(this._parsedValue<0||1/this._parsedValue==-1/0)&&(this._revertSign(e),this._setTextByParsedValue(),this.option("valueChangeEvent").split(" ").includes("input")&&m.Z.trigger(this._input(),"input")),void e.preventDefault();const l=W.Z.getDecimalSeparator();if(a===l){const t=i.indexOf(l);return void(this._isNonStubAfter(t+1)&&(this._moveCaret(r?1:-1),e.preventDefault()))}if(o-n<i.length&&this._replaceSelectedText(i,{start:n,end:o},"").search(/[0-9]/)<0&&this._isValueInRange(0))return void(this._parsedValue=this._parsedValue<0||1/this._parsedValue==-1/0?-0:0);const c=this._tryParse(i,{start:n,end:o},"");void 0===c?e.preventDefault():this._parsedValue=c},_isPercentFormat(){return-1!==this._getFormatPattern().replace(/'[^']+'/g,"").indexOf("%")},_parse(e,t){const i=this.option("format"),n=(0,_.mf)(i.parser),o=n?i.parser:W.Z.parse;let r=0;if(!n){const i=Id(t).index,n=this._getTextSeparatorIndex(e),o=-1!==i?i:t.length,s=-1!==n?n:e.length;s>o&&-1===t.indexOf("#")&&(r=s-o)}return o(e=e.substr(r),t)},_format(e,t){const i=this.option("format"),n=(null==i?void 0:i.formatter)||i,o=(0,_.mf)(n)?n:W.Z.format;return null===e?"":o(e,t)},_getFormatPattern(){return this._currentFormat||this._updateFormat(),this._currentFormat},_updateFormat(){const e=this.option("format"),t=(0,_.mf)(null==e?void 0:e.parser),i=(0,_.HD)(e)&&(e.includes("0")||e.includes("#")),n="exponential"===e||"exponential"===(null==e?void 0:e.type),o=t||i||n;this._currentFormat=o?e:(0,_d.y)((t=>{const i=this._format(t,e);return W.Z.convertDigits(i,!0)}))},_getFormatForSign(e){const t=this._getFormatPattern();if((0,_.HD)(t)){const i=t.split(";"),n=W.Z.getSign(e,t);return i[1]=i[1]||`-${i[0]}`,n<0?i[1]:i[0]}return W.Z.getSign(e)<0?"-":""},_removeStubs(e,t){const i=this._getFormatForSign(e),n=W.Z.getThousandsSeparator(),o=this._getStubs(i);let r=e;if(o.length){const e=o[0],i=new RegExp(`(${(0,u.escapeRegExp)(o[1]||"")})$`,"g"),s=new RegExp(`[-${(0,u.escapeRegExp)(t?"":n)}]`,"g");r=r.replace(e,"").replace(i,"").replace(s,"")}return r},_getStubs(e){const t=/[^']([#0.,]+)/g.exec(e),i=t&&t[0].trim();return e.split(i).map((e=>e.replace(/'/g,"")))},_truncateToPrecision(e,t){if((0,_.$K)(e)){const i=e.toString(),n=i.indexOf(".");if(i&&n>-1){const o=parseFloat(i.substr(0,n+t+1));return isNaN(o)?e:o}}return e},_tryParse(e,t,i){const n=t.start!==t.end,o=n&&0===t.start&&t.end===e.length,r=W.Z.getDecimalSeparator();if(o&&i===r)return 0;const s=this._replaceSelectedText(e,t,i),a=this._getFormatPattern();let l=this._getParsedValue(s,a);const c=!a.parser&&this._getPrecisionLimits(s).max,d=l!==this._parsedValue,h=i===r&&0===c,u=!n&&!d&&"-"!==i&&this._isStub(i);if(h||u)return;if(""===this._removeStubs(s)&&(l=Math.abs(0*this._parsedValue)),isNaN(l))return;const p=null===l?this._parsedValue:l;return l=c?this._truncateToPrecision(p,c):l,!a.parser&&this._isPercentFormat()?(_=c,(f=l)&&(0,ul.zB)(f/100,_)):l;var f,_},_getParsedValue(e,t){const i=W.Z.getSign(e,(null==t?void 0:t.formatter)||t),n=this._removeStubs(e,!0),o=this._parse(n,t),r=o<0?-1:1;return(0,_.kE)(o)&&i!==r?i*o:o},_isValueIncomplete(e){if(!this._useMaskBehavior())return this.callBase(e);const t=this._caret(),i=W.Z.getDecimalSeparator(),n=this._getTextSeparatorIndex(e),o=n>=0&&n<t.start,r=this._removeStubs(e,!0).split(i);if(!o||2!==r.length)return!1;const s=r[1].length,a=!!this._getFormatPattern().parser,l=!a&&this._getPrecisionLimits(this._getFormatPattern(),e),c=!!a||(0,ul.Z2)(s,l.min,l.max),d="0"===r[1].charAt(s-1);return c&&(d||!s)},_isValueInRange(e){const t=(0,u.ensureDefined)(this.option("min"),-1/0),i=(0,u.ensureDefined)(this.option("max"),1/0);return(0,ul.Z2)(e,t,i)},_setInputText(e){const t=W.Z.convertDigits(e,!0),i=function(e,t,i,n){i=Ad(i,0);const o=W.Z.getDecimalSeparator(),r=function(e){return 1===e.length&&!!e.match(/^[,.][0-9]*$/g)}(e),s=Id(n).occurrence,a=r?0:kd(e,o,s),l=kd(t,o,s),c=Ed(e,a),d=Ed(t,l);if(-1!==a&&i.start>a){const e=i.start-a-1,o=Td(e,c[1]);return Pd(d[1]?l+1+Bd(o,d[1])+1:t.length,t,n)}const h=function(e){return e.replace(/[^0-9e]+$/,"")}(d[0]),u=c[0].length-i.start,p=Td(u,Dd(c[0])),f=Bd(p,Dd(h));return Pd(h.length-(f+1),t,n)}(this._getInputVal(),t,this._caret(),this._getFormatPattern());this._input().val(e),this._toggleEmptinessEventHandler(),this._formattedValue=e,this._focusOutOccurs||this._caret(i)},_useMaskBehavior(){return!!this.option("format")&&this.option("useMaskBehavior")},_renderInputType(){const e="number"===this.option("mode"),t="desktop"===a.default.real().deviceType;this._useMaskBehavior()&&e?this._setInputType(t||this._isSupportInputMode()?"text":"tel"):this.callBase()},_isChar:e=>(0,_.HD)(e)&&1===e.length,_moveCaret(e){if(!e)return;const t=Pd(Ad(this._caret(),e),this._getInputVal(),this._getFormatPattern());this._caret(t)},_shouldHandleKey(e){const t=(0,v.normalizeKeyName)(e),i=(0,v.isCommandKeyPressed)(e)||e.altKey||e.shiftKey||!this._isChar(t),n="minus"===t;return this._useMaskBehavior()&&!i&&!n},_renderInput(){this.callBase(),this._renderFormatter()},_renderFormatter(){this._clearCache(),this._detachFormatterEvents(),this._useMaskBehavior()&&this._attachFormatterEvents()},_detachFormatterEvents(){m.Z.off(this._input(),".dxNumberFormatter")},_isInputFromPaste(e){const t=e.originalEvent&&e.originalEvent.inputType;return(0,_.$K)(t)?"insertFromPaste"===t:this._isValuePasted},_attachFormatterEvents(){const e=this._input();m.Z.on(e,(0,v.addNamespace)("input","dxNumberFormatter"),(e=>{this._formatValue(e),this._isValuePasted=!1})),m.Z.on(e,(0,v.addNamespace)("dxclick","dxNumberFormatter"),(()=>{this._caretTimeout||(this._caretTimeout=setTimeout((()=>{this._caretTimeout=void 0,this._caret(Pd(this._caret(),this._getInputVal(),this._getFormatPattern()))}),0))})),m.Z.on(e,ud,(()=>{this.clearCaretTimeout()}))},clearCaretTimeout(){clearTimeout(this._caretTimeout),this._caretTimeout=void 0},_forceRefreshInputValue(){if(!this._useMaskBehavior())return this.callBase()},_isNonStubAfter(e){const t=this._getInputVal().slice(e);return t&&!this._isStub(t,!0)},_isStub(e,t){const i=(0,u.escapeRegExp)(W.Z.getDecimalSeparator());return new RegExp(`^[^0-9${i}]+$`,"g").test(e)&&(t||this._isChar(e))},_parseValue(e){return this._useMaskBehavior()?this._parsedValue:this.callBase(e)},_getPrecisionLimits(e){const t=this._getFormatForSign(e),i=Id(t).index,n=(Ed(t,i)[1]||"").replace(/[^#0]/g,"");return{min:n.replace(/^(0*)#*/,"$1").length,max:n.length}},_revertSign(e){if(!this._useMaskBehavior())return;const t=this._caret();if(t.start!==t.end){if("minus"===(0,v.normalizeKeyName)(e))return void this._applyRevertedSign(e,t,!0);this._caret(Pd(0,this._getInputVal(),this._getFormatPattern()))}this._applyRevertedSign(e,t)},_applyRevertedSign(e,t,i){const n=-1*(0,u.ensureDefined)(this._parsedValue,null);if((this._isValueInRange(n)||0===n)&&(this._parsedValue=n,i)){const i=this._getFormatPattern(),n=this._getInputVal();this._setTextByParsedValue(),e.preventDefault();const o=this._getInputVal(),r=function(e,t,i){const n=Od(e,i);return Od(t,i).start-n.start}(n,o,i),s=Pd(t=Ad(t,r),o,i);this._caret(s)}},_removeMinusFromText(e,t){return"minus"===this._lastKeyName&&"-"===e.charAt(t.start-1)?this._replaceSelectedText(e,{start:t.start-1,end:t.start},""):e},_setTextByParsedValue(){const e=this._getFormatPattern(),t=this._parseValue(),i=this._format(t,e)||"";this._setInputText(i)},_formatValue(e){let t=this._getInputVal();const i=this._caret(),n=this._removeMinusFromText(t,i),o=n!==t;if(t=n,!this._isInputFromPaste(e)&&this._isValueIncomplete(n))return this._formattedValue=t,void(o&&this._setTextByParsedValue());if(W.Z.convertDigits(this._formattedValue,!0)!==t){const e=this._tryParse(t,i,"");(0,_.$K)(e)&&(this._parsedValue=e)}this._setTextByParsedValue()},_renderDisplayText(){this._useMaskBehavior()?this._toggleEmptinessEventHandler():this.callBase.apply(this,arguments)},_renderValue(){return this._useMaskBehavior()&&(this._parsedValue=this.option("value"),this._setTextByParsedValue()),this.callBase()},_updateParsedValue(){const e=this._getInputVal();this._parsedValue=this._tryParse(e,this._caret())},_adjustParsedValue(){if(!this._useMaskBehavior())return;const e=this._removeStubs(this._getInputVal())?this._parseValue():null;(0,_.kE)(e)?this._parsedValue=(0,ul.n$)(e,this.option("min"),this.option("max")):this._parsedValue=e},_valueChangeEventHandler(e){if(!this._useMaskBehavior())return this.callBase(e);const t=this._caret();this._saveValueChangeEvent(e),this._lastKey=null,this._lastKeyName=null,this._updateParsedValue(),this._adjustParsedValue(),this.option("value",this._parsedValue),t&&this._caret(t)},_optionChanged(e){switch(e.name){case"format":case"useMaskBehavior":this._renderInputType(),this._updateFormat(),this._renderFormatter(),this._renderValue(),this._refreshValueChangeEvent(),this._refreshEvents();break;case"min":case"max":this._adjustParsedValue(),this.callBase(e);break;default:this.callBase(e)}},_clearCache(){delete this._formattedValue,delete this._lastKey,delete this._lastKeyName,delete this._parsedValue,delete this._focusOutOccurs,clearTimeout(this._caretTimeout),delete this._caretTimeout},_clean(){this._clearCache(),this.callBase()}}),Rd=Md;(0,r.default)("dxNumberBox",Rd);const $d=Rd,Nd="dx-colorview-container-row",Vd="dx-colorview-palette-gradient",Fd="dx-colorview-palette-gradient-white",Zd="dx-colorview-palette-gradient-black",Hd="dx-colorview-color-preview",Ld="dx-colorview-color-preview-color-current",jd="dx-colorview-color-preview-color-new",zd=me.inherit({_supportedKeys(){const e=this.option("rtlEnabled"),t=this,i=function(e){let i=100/t._paletteWidth;return e.shiftKey&&(i*=t.option("keyStep")),i=i>1?i:1,Math.round(i)},n=function(e){let i=t._currentColor.hsv.s+e;i>100?i=100:i<0&&(i=0),t._currentColor.hsv.s=i,s()},o=function(e){let i=100/t._paletteHeight;return e.shiftKey&&(i*=t.option("keyStep")),i=i>1?i:1,Math.round(i)},r=function(e){let i=t._currentColor.hsv.v+e;i>100?i=100:i<0&&(i=0),t._currentColor.hsv.v=i,s()};function s(){t._placePaletteHandle(),t._updateColorFromHsv(t._currentColor.hsv.h,t._currentColor.hsv.s,t._currentColor.hsv.v)}const a=function(e){let i=360/(t._hueScaleWrapperHeight-t._hueScaleHandleHeight);return e.shiftKey&&(i*=t.option("keyStep")),i=i>1?i:1,i},l=function(e){t._currentColor.hsv.h+=e,t._placeHueScaleHandle();const i=(0,Ws.jt)(t._$hueScaleHandle);t._updateColorHue(i.top+t._hueScaleHandleHeight/2)},c=function(i){let n=1/t._alphaChannelScaleWorkWidth;return i.shiftKey&&(n*=t.option("keyStep")),n=n>.01?n:.01,n=e?-n:n,n},d=function(e){t._currentColor.a+=e,t._placeAlphaChannelHandle();const i=(0,Ws.jt)(t._$alphaChannelHandle);t._calculateColorTransparencyByScaleWidth(i.left+t._alphaChannelHandleWidth/2)};return(0,f.l)(this.callBase(),{upArrow(e){e.preventDefault(),e.stopPropagation(),(0,v.isCommandKeyPressed)(e)?this._currentColor.hsv.h<=360&&!this._isTopColorHue&&(this._saveValueChangeEvent(e),l(a(e))):this._currentColor.hsv.v<100&&(this._saveValueChangeEvent(e),r(o(e)))},downArrow(e){e.preventDefault(),e.stopPropagation(),(0,v.isCommandKeyPressed)(e)?this._currentColor.hsv.h>=0&&(this._isTopColorHue&&(this._currentColor.hsv.h=360),this._saveValueChangeEvent(e),l(-a(e))):this._currentColor.hsv.v>0&&(this._saveValueChangeEvent(e),r(-o(e)))},rightArrow(t){t.preventDefault(),t.stopPropagation(),(0,v.isCommandKeyPressed)(t)?(e?this._currentColor.a<1:this._currentColor.a>0&&this.option("editAlphaChannel"))&&(this._saveValueChangeEvent(t),d(-c(t))):this._currentColor.hsv.s<100&&(this._saveValueChangeEvent(t),n(i(t)))},leftArrow(t){t.preventDefault(),t.stopPropagation(),(0,v.isCommandKeyPressed)(t)?(e?this._currentColor.a>0:this._currentColor.a<1&&this.option("editAlphaChannel"))&&(this._saveValueChangeEvent(t),d(c(t))):this._currentColor.hsv.s>0&&(this._saveValueChangeEvent(t),n(-i(t)))},enter(e){this._fireEnterKeyPressed(e)}})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{value:null,matchValue:null,onEnterKeyPressed:void 0,editAlphaChannel:!1,keyStep:1,stylingMode:void 0})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===a.default.real().deviceType&&!a.default.isSimulator(),options:{focusStateEnabled:!0}}])},_init(){this.callBase(),this._initColorAndOpacity(),this._initEnterKeyPressedAction()},_initEnterKeyPressedAction(){this._onEnterKeyPressedAction=this._createActionByOption("onEnterKeyPressed")},_fireEnterKeyPressed(e){this._onEnterKeyPressedAction&&this._onEnterKeyPressedAction({event:e})},_initColorAndOpacity(){this._setCurrentColor(this.option("value"))},_setCurrentColor(e){e=e||"#000000";const t=new Zc.default(e);t.colorIsInvalid?(this._currentColor||(this._currentColor=new Zc.default("#000000")),this.option("value",this._currentColor.baseColor)):this._currentColor&&this._makeRgba(this._currentColor)===this._makeRgba(t)||(this._currentColor=t,this._$currentColor&&this._makeTransparentBackground(this._$currentColor,t))},_setBaseColor(e){const t=e||"#000000",i=new Zc.default(t);i.colorIsInvalid||this._makeRgba(this.option("matchValue")!==this._makeRgba(i))&&this._$baseColor&&this._makeTransparentBackground(this._$baseColor,i)},_initMarkup(){this.callBase(),this.$element().addClass("dx-colorview"),this._renderColorPickerContainer()},_render(){this.callBase(),this._renderPalette(),this._renderHueScale(),this._renderControlsContainer(),this._renderControls(),this._renderAlphaChannelElements()},_makeTransparentBackground(e,t){t instanceof Zc.default||(t=new Zc.default(t)),e.css("backgroundColor",this._makeRgba(t))},_makeRgba:e=>(e instanceof Zc.default||(e=new Zc.default(e)),`rgba(${[e.r,e.g,e.b,e.a].join(", ")})`),_renderValue(){this.callBase(this.option("editAlphaChannel")?this._makeRgba(this._currentColor):this.option("value"))},_renderColorPickerContainer(){const e=this.$element();this._$colorPickerContainer=(0,c.Z)("<div>").addClass("dx-colorview-container").appendTo(e),this._renderHtmlRows()},_renderHtmlRows(e){const t=this._$colorPickerContainer.find(`.${Nd}`),i=t.length;let n=i-(this.option("editAlphaChannel")?2:1);if(n>0&&t.eq(-1).remove(),n<0){n=Math.abs(n);const e=[];let o;for(o=0;o<n;o++)e.push((0,c.Z)("<div>").addClass(Nd));if(i)for(o=0;o<e.length;o++)t.eq(0).after(e[o]);else this._$colorPickerContainer.append(e)}},_renderHtmlCellInsideRow:(e,t,i)=>(0,c.Z)("<div>").addClass("dx-colorview-container-cell").addClass(i).appendTo(t.find(`.${Nd}`).eq(e)),_renderPalette(){const e=this._renderHtmlCellInsideRow(0,this._$colorPickerContainer,"dx-colorview-palette-cell"),t=(0,c.Z)("<div>").addClass([Vd,Fd].join(" ")),i=(0,c.Z)("<div>").addClass([Vd,Zd].join(" "));this._$palette=(0,c.Z)("<div>").addClass("dx-colorview-palette").css("backgroundColor",this._currentColor.getPureColor().toHex()).appendTo(e),this._paletteHeight=(0,oe.Cr)(this._$palette),this._paletteWidth=(0,oe.dz)(this._$palette),this._renderPaletteHandle(),this._$palette.append([t,i])},_renderPaletteHandle(){this._$paletteHandle=(0,c.Z)("<div>").addClass("dx-colorview-palette-handle").appendTo(this._$palette);const e=`dx-${new V.Z}`,t={id:e,role:"application"};this.setAria(t,this._$paletteHandle),this.setAria("activedescendant",e,this.option("target")),this._createComponent(this._$paletteHandle,hd,{contentTemplate:null,boundary:this._$palette,allowMoveByClick:!0,boundOffset:function(){return-this._paletteHandleHeight/2}.bind(this),onDragMove:e=>{let{event:t}=e;const i=(0,Ws.jt)(this._$paletteHandle);this._updateByDrag=!0,this._saveValueChangeEvent(t),this._updateColorFromHsv(this._currentColor.hsv.h,this._calculateColorSaturation(i),this._calculateColorValue(i))}}),this._paletteHandleWidth=(0,oe.dz)(this._$paletteHandle),this._paletteHandleHeight=(0,oe.Cr)(this._$paletteHandle),this._placePaletteHandle()},_placePaletteHandle(){(0,Ws.pB)(this._$paletteHandle,{left:Math.round(this._paletteWidth*this._currentColor.hsv.s/100-this._paletteHandleWidth/2),top:Math.round(this._paletteHeight-this._paletteHeight*this._currentColor.hsv.v/100-this._paletteHandleHeight/2)})},_calculateColorValue(e){const t=Math.floor(e.top+this._paletteHandleHeight/2);return 100-Math.round(100*t/this._paletteHeight)},_calculateColorSaturation(e){const t=Math.floor(e.left+this._paletteHandleWidth/2);return Math.round(100*t/this._paletteWidth)},_updateColorFromHsv(e,t,i){const{a:n}=this._currentColor;this._currentColor=new Zc.default(`hsv(${[e,t,i].join(",")})`),this._currentColor.a=n,this._updateColorParamsAndColorPreview(),this.applyColor()},_renderHueScale(){const e=this._renderHtmlCellInsideRow(0,this._$colorPickerContainer,"dx-colorview-hue-scale-cell");this._$hueScaleWrapper=(0,c.Z)("<div>").addClass("dx-colorview-hue-scale-wrapper").appendTo(e),this._$hueScale=(0,c.Z)("<div>").addClass("dx-colorview-hue-scale").appendTo(this._$hueScaleWrapper),this._hueScaleHeight=(0,oe.Cr)(this._$hueScale),this._hueScaleWrapperHeight=(0,oe.zp)(this._$hueScaleWrapper),this._renderHueScaleHandle()},_renderHueScaleHandle(){this._$hueScaleHandle=(0,c.Z)("<div>").addClass("dx-colorview-hue-scale-handle").appendTo(this._$hueScaleWrapper),this._createComponent(this._$hueScaleHandle,hd,{contentTemplate:null,boundary:this._$hueScaleWrapper,allowMoveByClick:!0,dragDirection:"vertical",onDragMove:e=>{let{event:t}=e;this._updateByDrag=!0,this._saveValueChangeEvent(t),this._updateColorHue((0,Ws.jt)(this._$hueScaleHandle).top+this._hueScaleHandleHeight/2)}}),this._hueScaleHandleHeight=(0,oe.Cr)(this._$hueScaleHandle),this._placeHueScaleHandle()},_placeHueScaleHandle(){const e=this._hueScaleWrapperHeight,t=this._hueScaleHandleHeight;let i=(e-t)*(360-this._currentColor.hsv.h)/360;e<i+t&&(i=e-t),i<0&&(i=0),(0,Ws.pB)(this._$hueScaleHandle,{top:Math.round(i)})},_updateColorHue(e){let t=360-Math.round(360*(e-this._hueScaleHandleHeight/2)/(this._hueScaleWrapperHeight-this._hueScaleHandleHeight));const i=this._currentColor.hsv.s,n=this._currentColor.hsv.v;this._isTopColorHue=!1,t=t<0?0:t,t>=360&&(this._isTopColorHue=!0,t=0),this._updateColorFromHsv(t,i,n),this._$palette.css("backgroundColor",this._currentColor.getPureColor().toHex())},_renderControlsContainer(){const e=this._renderHtmlCellInsideRow(0,this._$colorPickerContainer);this._$controlsContainer=(0,c.Z)("<div>").addClass("dx-colorview-controls-container").appendTo(e)},_renderControls(){this._renderColorsPreview(),this._renderRgbInputs(),this._renderHexInput()},_renderColorsPreview(){const e=(0,c.Z)("<div>").addClass("dx-colorview-color-preview-container").appendTo(this._$controlsContainer),t=(0,c.Z)("<div>").addClass("dx-colorview-color-preview-container-inner").appendTo(e);this._$currentColor=(0,c.Z)("<div>").addClass([Hd,jd].join(" ")),this._$baseColor=(0,c.Z)("<div>").addClass([Hd,Ld].join(" ")),this._makeTransparentBackground(this._$baseColor,this.option("matchValue")),this._makeTransparentBackground(this._$currentColor,this._currentColor),t.append([this._$baseColor,this._$currentColor])},_renderAlphaChannelElements(){this.option("editAlphaChannel")&&(this._$colorPickerContainer.find(`.${Nd}`).eq(1).addClass("dx-colorview-alpha-channel-row"),this._renderAlphaChannelScale(),this._renderAlphaChannelInput())},_renderRgbInputs(){this._rgbInputsWithLabels=[this._renderEditorWithLabel({editorType:$d,value:this._currentColor.r,onValueChanged:this._updateColor.bind(this,!1),labelText:"R",labelAriaText:z.Z.format("dxColorView-ariaRed"),labelClass:"dx-colorview-label-red"}),this._renderEditorWithLabel({editorType:$d,value:this._currentColor.g,onValueChanged:this._updateColor.bind(this,!1),labelText:"G",labelAriaText:z.Z.format("dxColorView-ariaGreen"),labelClass:"dx-colorview-label-green"}),this._renderEditorWithLabel({editorType:$d,value:this._currentColor.b,onValueChanged:this._updateColor.bind(this,!1),labelText:"B",labelAriaText:z.Z.format("dxColorView-ariaBlue"),labelClass:"dx-colorview-label-blue"})],this._$controlsContainer.append(this._rgbInputsWithLabels),this._rgbInputs=[this._rgbInputsWithLabels[0].find(".dx-numberbox").dxNumberBox("instance"),this._rgbInputsWithLabels[1].find(".dx-numberbox").dxNumberBox("instance"),this._rgbInputsWithLabels[2].find(".dx-numberbox").dxNumberBox("instance")]},_renderEditorWithLabel(e){const t=(0,c.Z)("<div>"),i=(0,c.Z)("<label>").addClass(e.labelClass).text(`${e.labelText}:`).append(t);m.Z.off(i,He.name),m.Z.on(i,He.name,(e=>{e.preventDefault()}));const{editorType:n}=e,o=(0,f.l)({value:e.value,onValueChanged:e.onValueChanged,onKeyboardHandled:e=>this._keyboardHandler(e)},{stylingMode:this.option("stylingMode")});return n===$d&&(o.min=e.min||0,o.max=e.max||255,o.step=e.step||1),new n(t,o).registerKeyHandler("enter",(e=>{this._fireEnterKeyPressed(e)})),this.setAria("label",e.labelAriaText,t),i},hexInputOptions(){return{editorType:us,value:this._currentColor.toHex().replace("#",""),onValueChanged:this._updateColor.bind(this,!0),labelClass:"dx-colorview-label-hex",labelText:"#",labelAriaText:z.Z.format("dxColorView-ariaHex")}},_renderHexInput(){this._hexInput=us.getInstance(this._renderEditorWithLabel(this.hexInputOptions()).appendTo(this._$controlsContainer).find(".dx-textbox"));const e=`dx-${new V.Z}`,t=this._$controlsContainer.find(".dx-colorview-label-hex").find(".dx-texteditor-input");this.setAria("id",e,t),this.setAria("labelledby",e,this._$paletteHandle)},_renderAlphaChannelScale(){const e=this._renderHtmlCellInsideRow(1,this._$colorPickerContainer,"dx-colorview-alpha-channel-cell"),t=(0,c.Z)("<div>").addClass("dx-colorview-alpha-channel-border").appendTo(e),i=(0,c.Z)("<div>").addClass("dx-colorview-alpha-channel-wrapper").appendTo(t);this._$alphaChannelScale=(0,c.Z)("<div>").addClass("dx-colorview-alpha-channel-scale").appendTo(i),this._makeCSSLinearGradient(this._$alphaChannelScale),this._renderAlphaChannelHandle(e)},_makeCSSLinearGradient(e){const t=this._currentColor,i=`${t.r},${t.g},${t.b}`,n=this.option("rtlEnabled"),o=`linear-gradient(-90deg, rgba(${i}, ${n?"1":"0"}), rgba(${i}, ${n?"0":"1"}))`;e.css("backgroundImage",o)},_renderAlphaChannelInput(){const e=this,t=this._renderHtmlCellInsideRow(1,this._$colorPickerContainer);e._alphaChannelInput=this._renderEditorWithLabel({editorType:$d,value:this._currentColor.a,max:1,step:.1,onValueChanged(t){let{value:i}=t;i=e._currentColor.isValidAlpha(i)?i:e._currentColor.a,t.event&&e._saveValueChangeEvent(t.event),e._updateColorTransparency(i),e._placeAlphaChannelHandle()},labelClass:"dx-colorview-alpha-channel-label",labelText:"Alpha",labelAriaText:z.Z.format("dxColorView-ariaAlpha")}).appendTo(t).find(".dx-numberbox").dxNumberBox("instance")},_updateColorTransparency(e){this._currentColor.a=e,this.applyColor()},_renderAlphaChannelHandle(e){this._$alphaChannelHandle=(0,c.Z)("<div>").addClass("dx-colorview-alpha-channel-handle").appendTo(e),this._createComponent(this._$alphaChannelHandle,hd,{contentTemplate:null,boundary:e,allowMoveByClick:!0,dragDirection:"horizontal",onDragMove:e=>{let{event:t}=e;this._updateByDrag=!0;const i=this._$alphaChannelHandle,n=(0,Ws.jt)(i).left+this._alphaChannelHandleWidth/2;this._saveValueChangeEvent(t),this._calculateColorTransparencyByScaleWidth(n)}}),this._alphaChannelHandleWidth=(0,oe.dz)(this._$alphaChannelHandle),this._alphaChannelScaleWorkWidth=(0,oe.dz)(e)-this._alphaChannelHandleWidth,this._placeAlphaChannelHandle()},_calculateColorTransparencyByScaleWidth(e){let t=(e-this._alphaChannelHandleWidth/2)/this._alphaChannelScaleWorkWidth;const i=this.option("rtlEnabled");t=i?t:1-t,e>=this._alphaChannelScaleWorkWidth+this._alphaChannelHandleWidth/2?t=i?1:0:t<1&&(t=t.toFixed(2));const n=this._alphaChannelInput.option("value");t=Math.max(t,0),t=Math.min(t,1),t===n?this._updateByDrag=!1:this._alphaChannelInput.option("value",t)},_placeAlphaChannelHandle(){let e=this._alphaChannelScaleWorkWidth*(1-this._currentColor.a);e<0&&(e=0),this._alphaChannelScaleWorkWidth<e&&(e=this._alphaChannelScaleWorkWidth),(0,Ws.pB)(this._$alphaChannelHandle,{left:this.option("rtlEnabled")?this._alphaChannelScaleWorkWidth-e:e})},applyColor(){const e=this.option("value"),t=this.option("editAlphaChannel")?this._makeRgba(this._currentColor):this._currentColor.toHex();this._makeTransparentBackground(this._$currentColor,this._currentColor),t===e?this._updateByDrag=!1:this.option("value",t)},cancelColor(){this._initColorAndOpacity(),this._refreshMarkup()},_updateColor(e,t){let i,n;e?n=this._validateHex(`#${this._hexInput.option("value")}`):(i=this._validateRgb(),this._alphaChannelInput?(i.push(this._alphaChannelInput.option("value")),n=`rgba(${i.join(", ")})`):n=`rgb(${i.join(", ")})`),this._suppressEditorsValueUpdating||(this._currentColor=new Zc.default(n),this._saveValueChangeEvent(t.event),this.applyColor(),this._refreshMarkup())},_validateHex(e){return this._currentColor.isValidHex(e)?e:this._currentColor.toHex()},_validateRgb(){let e=this._rgbInputs[0].option("value"),t=this._rgbInputs[1].option("value"),i=this._rgbInputs[2].option("value");return this._currentColor.isValidRGB(e,t,i)||(e=this._currentColor.r,t=this._currentColor.g,i=this._currentColor.b),[e,t,i]},_refreshMarkup(){this._placeHueScaleHandle(),this._placePaletteHandle(),this._updateColorParamsAndColorPreview(),this._$palette.css("backgroundColor",this._currentColor.getPureColor().toHex()),this._$alphaChannelHandle&&(this._updateColorTransparency(this._currentColor.a),this._placeAlphaChannelHandle())},_updateColorParamsAndColorPreview(){this._suppressEditorsValueUpdating=!0,this._hexInput.option("value",this._currentColor.toHex().replace("#","")),this._rgbInputs[0].option("value",this._currentColor.r),this._rgbInputs[1].option("value",this._currentColor.g),this._rgbInputs[2].option("value",this._currentColor.b),this._suppressEditorsValueUpdating=!1,this.option("editAlphaChannel")&&(this._makeCSSLinearGradient.call(this,this._$alphaChannelScale),this._alphaChannelInput.option("value",this._currentColor.a))},_optionChanged(e){const{value:t}=e;switch(e.name){case"value":this._setCurrentColor(t),this._updateByDrag||this._refreshMarkup(),this._updateByDrag=!1,this.callBase(e);break;case"matchValue":this._setBaseColor(t);break;case"onEnterKeyPressed":this._initEnterKeyPressedAction();break;case"editAlphaChannel":this._$colorPickerContainer&&(this._renderHtmlRows("editAlphaChannel"),this._renderAlphaChannelElements());break;case"keyStep":break;case"stylingMode":this._renderControls();break;default:this.callBase(e)}}});(0,r.default)("dxColorView",zd);const Wd=zd,Kd="dx-colorbox-color-is-not-defined",qd=Wd.prototype,Ud={makeTransparentBackground:qd._makeTransparentBackground.bind(qd),makeRgba:qd._makeRgba.bind(qd)},Gd=Gc.inherit({_supportedKeys(){const e=function(e){if(e.stopPropagation(),this.option("opened"))return e.preventDefault(),!0};return(0,f.l)(this.callBase(),{enter:this._enterKeyHandler,leftArrow:e,rightArrow:e,upArrow:function(e){return this.option("opened")?!e.altKey||(this.close(),!1):(e.preventDefault(),!1)},downArrow:function(e){return this.option("opened")||e.altKey?!(!this.option("opened")&&e.altKey&&(this._validatedOpening(),1)):(e.preventDefault(),!1)}})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{editAlphaChannel:!1,applyValueMode:"useButtons",keyStep:1,fieldTemplate:null,buttonsLocation:"bottom after"})},_popupHidingHandler(){this.callBase(),"useButtons"===this.option("applyValueMode")&&this._updateColorViewValue(this.option("value"))},_popupConfig(){return(0,f.l)(this.callBase(),{width:""})},_contentReadyHandler(){this._createColorView(),this._addPopupBottomClasses()},_addPopupBottomClasses(){const e=this._popup.bottomToolbar();e&&(e.addClass("dx-colorview-container-cell").addClass("dx-colorview-button-cell").find(".dx-toolbar-items-container").addClass("dx-colorview-buttons-container"),e.find(".dx-popup-done").addClass("dx-colorview-apply-button"),e.find(".dx-popup-cancel").addClass("dx-colorview-cancel-button"))},_createColorView(){this._popup.$overlayContent().addClass("dx-colorbox-overlay");const e=(0,c.Z)("<div>").appendTo(this._popup.$content());this._colorView=this._createComponent(e,Wd,this._colorViewConfig())},_applyNewColor(e){this.option("value",e),e&&Ud.makeTransparentBackground(this._$colorResultPreview,e),this._colorViewEnterKeyPressed&&(this.close(),this._colorViewEnterKeyPressed=!1)},_colorViewConfig(){const e=this;return{value:e.option("value"),matchValue:e.option("value"),editAlphaChannel:e.option("editAlphaChannel"),applyValueMode:e.option("applyValueMode"),focusStateEnabled:e.option("focusStateEnabled"),stylingMode:this.option("stylingMode"),target:this._input(),onEnterKeyPressed(t){let{event:i}=t;e._colorViewEnterKeyPressed=!0,e._colorView.option("value")!==e.option("value")&&(e._saveValueChangeEvent(i),e._applyNewColor(e._colorView.option("value")),e.close())},onValueChanged(t){let{event:i,value:n,previousValue:o}=t;const r="instantly"===e.option("applyValueMode"),s=Ud.makeRgba(n)===o,a=r||e._colorViewEnterKeyPressed,l=e._shouldSaveEmptyValue;s||!a||l||(i&&e._saveValueChangeEvent(i),e._applyNewColor(n))}}},_enterKeyHandler(e){const t=this._input().val(),{value:i,editAlphaChannel:n}=this.option(),o=i&&n?Ud.makeRgba(i):i;if(!t)return!1;if(!new Zc.default(t).colorIsInvalid){if(t!==o&&(this._applyColorFromInput(t),this._saveValueChangeEvent(e),this.option("value",this.option("editAlphaChannel")?Ud.makeRgba(t):t)),this._colorView){const t=this._colorView.option("value");i!==t&&(this._saveValueChangeEvent(e),this.option("value",t))}return this.close(),!1}this._input().val(o)},_applyButtonHandler(e){this._saveValueChangeEvent(e.event),this._applyNewColor(this._colorView.option("value")),this.callBase()},_cancelButtonHandler(){this._resetInputValue(),this.callBase()},_getKeyboardListeners(){return this.callBase().concat([this._colorView])},_init(){this.callBase()},_initMarkup(){this.$element().addClass("dx-colorbox"),this.callBase()},_renderInput(){this.callBase(),this._input().addClass("dx-colorbox-input"),this._renderColorPreview()},_renderColorPreview(){this.$element().wrapInner((0,c.Z)("<div>").addClass("dx-colorbox-input-container")),this._$colorBoxInputContainer=this.$element().children().eq(0),this._$colorResultPreview=(0,c.Z)("<div>").addClass("dx-colorbox-color-result-preview").appendTo(this._$textEditorInputContainer),this.option("value")?Ud.makeTransparentBackground(this._$colorResultPreview,this.option("value")):this._$colorBoxInputContainer.addClass(Kd)},_renderValue(){const{value:e,editAlphaChannel:t}=this.option(),i=e&&t?Ud.makeRgba(e):e;return this.option("text",i),this.callBase()},_resetInputValue(){const e=this._input(),t=this.option("value");e.val(t),this._updateColorViewValue(t)},_updateColorViewValue(e){this._colorView&&this._colorView.option({value:e,matchValue:e})},_valueChangeEventHandler(e){let t=this._input().val();t&&(t=this._applyColorFromInput(t),this._updateColorViewValue(t)),this.callBase(e,t)},_applyColorFromInput(e){const{editAlphaChannel:t}=this.option();return new Zc.default(e).colorIsInvalid?(this._resetInputValue(),this.option("value")):t?Ud.makeRgba(e):e},_clean(){this.callBase(),delete this._shouldSaveEmptyValue},_optionChanged(e){const{value:t}=e,{name:i}=e;switch(i){case"value":this._$colorBoxInputContainer.toggleClass(Kd,!t),t?Ud.makeTransparentBackground(this._$colorResultPreview,t):this._$colorResultPreview.removeAttr("style"),null===t&&(this._shouldSaveEmptyValue=!0),this._updateColorViewValue(t),this._shouldSaveEmptyValue=!1,this.callBase(e);break;case"applyButtonText":case"cancelButtonText":this.callBase(e),this._popup&&this._addPopupBottomClasses();break;case"editAlphaChannel":case"keyStep":this._colorView&&this._colorView.option(i,t);break;default:this.callBase(e)}}});(0,r.default)("dxColorBox",Gd);const Yd=Gd,Qd="dx-invalid-message-auto",Xd="dx-validation-target";class Jd extends bn{getProps(){const e=super.getProps();return e.onFocusIn=()=>{if("auto"===this.option("validationMessageMode")){const i=(0,c.Z)((".dx-invalid-message.dx-overlay-wrapper",((null===(t=(e=this.element()).getRootNode)||void 0===t?void 0:t.call(e))??document).querySelector(".dx-invalid-message.dx-overlay-wrapper")));null==i||i.removeClass(Qd);const n=150;this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout),this.showValidationMessageTimeout=setTimeout((()=>{null==i||i.addClass(Qd)}),n)}var e,t},e.saveValueChangeEvent=e=>{this._valueChangeEventInstance=e},e}_createElement(e){super._createElement(e),this.showValidationMessageTimeout=void 0,this.validationRequest=(0,h.Z)(),(0,N.aT)(this.$element()[0],Xd,this)}_render(){var e;null===(e=this.option("_onMarkupRendered"))||void 0===e||e()}_init(){super._init(),this._initialValue=this.option("value")}_initializeComponent(){super._initializeComponent(),this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]})}_initOptions(e){super._initOptions(e),this.option(ie.initValidationOptions(e))}_getDefaultOptions(){return(0,f.l)(super._getDefaultOptions(),{validationMessageOffset:{h:0,v:0},validationTooltipOptions:{}})}_bindInnerWidgetOptions(e,t){const i=(0,f.l)({},e.option()),n=()=>this._silent(t,i);n(),e.on("optionChanged",n)}_raiseValidation(e,t){const i=!(0,_.$K)(e)&&!(0,_.$K)(t);e===t||i||this.validationRequest.fire({value:e,editor:this})}_raiseValueChangeAction(e,t){var i;null===(i=this._valueChangeAction)||void 0===i||i.call(this,{element:this.$element(),previousValue:t,value:e,event:this._valueChangeEventInstance}),this._valueChangeEventInstance=void 0}_optionChanged(e){const{name:t,previousValue:i,value:n}=e;switch(t&&void 0!==this._getActionConfigs()[t]&&this._addAction(t),t){case"value":this._raiseValidation(n,i),this.option("isDirty",this._initialValue!==n),this._raiseValueChangeAction(n,i);break;case"onValueChanged":this._valueChangeAction=this._createActionByOption("onValueChanged",{excludeValidators:["disabled","readOnly"]});break;case"isValid":case"validationError":case"validationErrors":case"validationStatus":this.option(ie.synchronizeValidationOptions(e,this.option()))}super._optionChanged(e)}clear(){const{value:e}=this._getDefaultOptions();this.option({value:e})}reset(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;arguments.length&&(this._initialValue=e),this.option("value",this._initialValue),this.option("isDirty",!1),this.option("isValid",!0)}_dispose(){super._dispose(),(0,N.aT)(this.element(),Xd,null),this.showValidationMessageTimeout&&clearTimeout(this.showValidationMessageTimeout)}}const eh=me.isEditor,th=e=>eh(e)||e instanceof Jd;Jd.isEditor=th,me.isEditor=th;class ih extends Jd{_useTemplates(){return!1}_isFocused(){return this.$element()[0].classList.contains("dx-state-focused")}getSupportedKeyNames(){return["space"]}getProps(){const e=super.getProps();return null!==e.value&&(e.value=Boolean(e.value)),e}}const nh=["dataSource","selectedRowKeys"],oh={integrationOptions:!0};function rh(e,t,i){return{path:e,value:t,previousValue:i}}function sh(e,t,i,o,r,s){if(oh[o])return;const a=(0,_.dt)(t),l=(0,_.dt)(i);if(t!==i)if(a!==l)e.push(rh(o,i,t));else if("object"===a)if((0,_.PO)(i)){const a=lh(t,i,r,s);e.push(...a.map((e=>(0,n.Z)({},e,{path:`${o}.${e.path}`}))))}else e.push(rh(o,i,t));else if("array"===a)if(s.some((e=>r.includes(e)))&&t!==i)e.push(rh(o,i,t));else if(t.length!==i.length)e.push(rh(o,i,t));else{const a=lh(t,i,r,s);[].push.apply(e,a.map((e=>(0,n.Z)({},e,{path:`${o}${e.path}`}))))}else e.push(rh(o,i,t))}const ah=e=>(t,i,n,o)=>{const r=[],s=Array.isArray(t)?e=>{sh(r,t[e],i[e],`[${e}]`,`${n}.${e}`,o)}:e=>{sh(r,t[e],i[e],e,`${n}.${e}`,o)};return e(t).forEach(s),Object.keys(i).filter((e=>!Object.prototype.hasOwnProperty.call(t,e)&&t[e]!==i[e])).forEach((e=>{r.push({path:e,value:i[e],previousValue:t[e]})})),r},lh=ah((e=>Object.keys(e))),ch={key:!0,ref:!0,children:!0,style:!0},dh=ah((e=>Object.keys(e).filter((e=>!ch[e])))),hh=["valueChange"],uh=["componentProps","componentType","templateNames"],ph=e=>Object.keys(e).reduce(((t,i)=>(void 0!==e[i]&&(t[i]=e[i]),t)),{});class fh extends Fi{get config(){return this.context[Jn.id]?this.context[Jn.id]:Jn.defaultValue}constructor(e){super(e),this.state={},this.widgetRef={current:null},this.getInstance=this.getInstance.bind(this),this.setupWidget=this.setupWidget.bind(this),this.updateWidget=this.updateWidget.bind(this)}createEffects(){return[new Li(this.setupWidget,[]),new Li(this.updateWidget,[this.props.componentProps,this.config,this.props.templateNames])]}updateEffects(){var e;null===(e=this._effects[1])||void 0===e||e.update([this.props.componentProps,this.config,this.props.templateNames])}setupWidget(){const e=new this.props.componentType(this.widgetRef.current,this.properties);return this.instance=e,()=>{e.dispose(),this.instance=null}}updateWidget(){const e=this.getInstance();if(!e)return;const t=function(e,t){return dh(e,t,"",arguments.length>2&&void 0!==arguments[2]?arguments[2]:nh)}(this.prevProps||{},this.properties);t.length&&(e.beginUpdate(),t.forEach((t=>{let{path:i,value:n}=t;e.option(i,n)})),e.endUpdate()),this.prevProps=this.properties}get properties(){var e;const t=ph(this.props.componentProps),{valueChange:i}=t,o=(0,an.Z)(t,hh),r=(0,n.Z)({rtlEnabled:!(null===(e=this.config)||void 0===e||!e.rtlEnabled),isRenovated:!0},o);return i&&(r.onValueChanged=e=>{let{value:t}=e;return i(t)}),this.props.templateNames.forEach((e=>{((e,t,i)=>{const n=t[e];return!!n&&"string"!=typeof n})(e,r)&&(r[e]=(t,i,n)=>{var o,r;o=this.props.componentProps[e],r={item:t,index:i,container:n},setTimeout((()=>{ki(Xi(o,r),(e=>{var t,i;return(null===(t=e.container)||void 0===t?void 0:t.get(0))||(null===(i=e.item)||void 0===i?void 0:i.get(0))})(r))}),0)})})),r}get restAttributes(){const e=this.props;return(0,an.Z)(e,uh)}getInstance(){return this.instance}render(){const e=this.props;return(e=>{let{props:{componentProps:{className:t}},restAttributes:i,widgetRef:o}=e;return ph(mt(1,"div",t,null,1,(0,n.Z)({},i),null,o))})({props:(0,n.Z)({},e),widgetRef:this.widgetRef,config:this.config,properties:this.properties,restAttributes:this.restAttributes})}}fh.defaultProps={};const _h=["accessKey","activeStateEnabled","boundary","className","contentId","disabled","focusStateEnabled","height","hint","hoverStateEnabled","mode","offset","onClick","onKeyDown","positionSide","rtlEnabled","tabIndex","target","validationErrors","visible","visualContainer","width"],mh=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Xn),Object.getOwnPropertyDescriptors({mode:"auto",positionSide:"top",offset:Object.freeze({h:0,v:0}),isReactComponentWrapper:!0})));class gh extends Vi{constructor(e){super(e),this.state={}}get componentProps(){return this.props}get restAttributes(){const e=this.props;return(0,an.Z)(e,_h)}render(){const e=this.props;return(e=>{let{componentProps:t,restAttributes:i}=e;return yt(gt(2,fh,(0,n.Z)({componentType:ce,componentProps:t,templateNames:[]},i)))})({props:(0,n.Z)({},e),componentProps:this.componentProps,restAttributes:this.restAttributes})}}gh.defaultProps=mh;const vh=["accessKey","activeStateEnabled","aria","children","className","classes","defaultValue","disabled","focusStateEnabled","height","hint","hoverStateEnabled","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","tabIndex","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],bh=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Xn),Object.getOwnPropertyDescriptors({readOnly:!1,name:"",validationError:null,validationErrors:null,validationMessageMode:"auto",validationMessagePosition:"bottom",validationStatus:"valid",isValid:!0,isDirty:!1,inputAttr:Object.freeze({}),defaultValue:null,valueChange:()=>{}}))),yh={get readOnly(){return bh.readOnly},get name(){return bh.name},get validationError(){return bh.validationError},get validationErrors(){return bh.validationErrors},get validationMessageMode(){return bh.validationMessageMode},get validationMessagePosition(){return bh.validationMessagePosition},get validationStatus(){return bh.validationStatus},get isValid(){return bh.isValid},get isDirty(){return bh.isDirty},get inputAttr(){return bh.inputAttr},get defaultValue(){return bh.defaultValue},get valueChange(){return bh.valueChange},get className(){return bh.className},get activeStateEnabled(){return bh.activeStateEnabled},get disabled(){return bh.disabled},get focusStateEnabled(){return bh.focusStateEnabled},get hoverStateEnabled(){return bh.hoverStateEnabled},get tabIndex(){return bh.tabIndex},get visible(){return bh.visible},get aria(){return oo.aria},get classes(){return oo.classes}};class Ch extends Zi{constructor(e){super(e),this.widgetRef={current:null},this.rootElementRef={current:null},this.__getterCache={},this.state={validationMessageGuid:`dx-${new V.Z}`,isValidationMessageVisible:!1,value:void 0!==this.props.value?this.props.value:this.props.defaultValue},this.updateValidationMessageVisibility=this.updateValidationMessageVisibility.bind(this),this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onFocusIn=this.onFocusIn.bind(this)}createEffects(){return[new Li(this.updateValidationMessageVisibility,[this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors]),ji()]}updateEffects(){var e;null===(e=this._effects[0])||void 0===e||e.update([this.props.isValid,this.props.validationStatus,this.props.validationError,this.props.validationErrors])}updateValidationMessageVisibility(){this.setState((e=>({isValidationMessageVisible:this.shouldShowValidationMessage})))}onFocusIn(e){const{onFocusIn:t}=this.props;null==t||t(e)}get cssClasses(){return`${(e=>{const{classes:t,isValid:i,readOnly:n}=e;return kn({"dx-state-readonly":!!n,"dx-invalid":!i,[String(t)]:!!t})})((0,n.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}))}`}get shouldShowValidationMessage(){const{isValid:e,validationStatus:t}=this.props,i=this.validationErrors??[];return!(e&&"invalid"!==t)&&i.length>0}get aria(){const{isValid:e,readOnly:t}=this.props,i={readonly:t?"true":"false",invalid:e?"false":"true"};return this.shouldShowValidationMessage&&(i.describedBy=this.state.validationMessageGuid),(0,n.Z)({},i,this.props.aria)}get validationErrors(){return void 0!==this.__getterCache.validationErrors?this.__getterCache.validationErrors:this.__getterCache.validationErrors=(()=>{const{validationError:e,validationErrors:t}=this.props;let i=t&&[...t];return!i&&e&&(i=[(0,n.Z)({},e)]),i})()}get validationMessageTarget(){var e;return null===(e=this.rootElementRef)||void 0===e?void 0:e.current}get restAttributes(){const e=(0,n.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,an.Z)(e,vh)}focus(){this.widgetRef.current.focus()}blur(){this.widgetRef.current.blur()}componentWillUpdate(e,t,i){super.componentWillUpdate(),this.props.validationError===e.validationError&&this.props.validationErrors===e.validationErrors||(this.__getterCache.validationErrors=void 0)}render(){const e=this.props;return(e=>{const{aria:t,cssClasses:i,isValidationMessageVisible:o,onFocusIn:r,props:{accessKey:s,activeStateEnabled:a,children:l,className:c,disabled:d,focusStateEnabled:h,height:u,hint:p,hoverStateEnabled:f,onClick:_,onKeyDown:m,rtlEnabled:g,tabIndex:v,validationMessageMode:b,validationMessagePosition:y,visible:C,width:w},restAttributes:x,rootElementRef:S,validationErrors:I,validationMessageGuid:k,validationMessageTarget:E,widgetRef:O}=e;return yt(gt(2,ro,(0,n.Z)({rootElementRef:S,aria:t,classes:i,activeStateEnabled:a,focusStateEnabled:h,hoverStateEnabled:f,accessKey:s,className:c,rtlEnabled:g,hint:p,disabled:d,height:u,width:w,onFocusIn:r,onClick:_,onKeyDown:m,tabIndex:v,visible:C},x,{children:bt([l,o&&gt(2,gh,{validationErrors:I,mode:b,positionSide:y,rtlEnabled:g,target:E,boundary:E,visualContainer:E,contentId:k})],0)}),null,O))})({props:(0,n.Z)({},e,{value:void 0!==this.props.value?this.props.value:this.state.value}),validationMessageGuid:this.state.validationMessageGuid,isValidationMessageVisible:this.state.isValidationMessageVisible,rootElementRef:this.rootElementRef,widgetRef:this.widgetRef,onFocusIn:this.onFocusIn,cssClasses:this.cssClasses,shouldShowValidationMessage:this.shouldShowValidationMessage,aria:this.aria,validationErrors:this.validationErrors,validationMessageTarget:this.validationMessageTarget,restAttributes:this.restAttributes})}}Ch.defaultProps=yh;const wh=["size"];class xh extends Vi{constructor(e){super(e),this.state={},this.elementRef={current:null},this.__getterCache={}}get cssStyles(){return void 0!==this.__getterCache.cssStyles?this.__getterCache.cssStyles:this.__getterCache.cssStyles=(()=>{const{size:e}=this.props;return{fontSize:(0,Qn.bh)("fontSize",e)}})()}get restAttributes(){const e=this.props;return(0,an.Z)(e,wh)}componentWillUpdate(e,t,i){this.props.size!==e.size&&(this.__getterCache.cssStyles=void 0)}render(){const e=this.props;return(e=>{const{cssStyles:t,elementRef:i}=e;return mt(1,"span","dx-checkbox-icon",null,1,{style:tn(t)},null,i)})({props:(0,n.Z)({},e),elementRef:this.elementRef,cssStyles:this.cssStyles,restAttributes:this.restAttributes})}}xh.defaultProps={};const Sh=["accessKey","activeStateEnabled","aria","className","defaultValue","disabled","enableThreeStateBehavior","focusStateEnabled","height","hint","hoverStateEnabled","iconSize","inputAttr","isDirty","isValid","name","onClick","onFocusIn","onKeyDown","readOnly","rtlEnabled","saveValueChangeEvent","tabIndex","text","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","value","valueChange","visible","width"],Ih=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(bh),Object.getOwnPropertyDescriptors({text:"",enableThreeStateBehavior:!1,activeStateEnabled:!0,hoverStateEnabled:!0,get focusStateEnabled(){return"desktop"===a.default.real().deviceType&&!a.default.isSimulator()},defaultValue:!1,valueChange:()=>{}}))),kh={get text(){return Ih.text},get enableThreeStateBehavior(){return Ih.enableThreeStateBehavior},get activeStateEnabled(){return Ih.activeStateEnabled},get hoverStateEnabled(){return Ih.hoverStateEnabled},get focusStateEnabled(){return Ih.focusStateEnabled},get defaultValue(){return Ih.defaultValue},get valueChange(){return Ih.valueChange},get readOnly(){return Ih.readOnly},get name(){return Ih.name},get validationError(){return Ih.validationError},get validationErrors(){return Ih.validationErrors},get validationMessageMode(){return Ih.validationMessageMode},get validationMessagePosition(){return Ih.validationMessagePosition},get validationStatus(){return Ih.validationStatus},get isValid(){return Ih.isValid},get isDirty(){return Ih.isDirty},get inputAttr(){return Ih.inputAttr},get className(){return Ih.className},get disabled(){return Ih.disabled},get tabIndex(){return Ih.tabIndex},get visible(){return Ih.visible},get aria(){return oo.aria}};class Eh extends Zi{constructor(e){super(e),this.editorRef={current:null},this.state={value:void 0!==this.props.value?this.props.value:this.props.defaultValue},this.focus=this.focus.bind(this),this.blur=this.blur.bind(this),this.onWidgetClick=this.onWidgetClick.bind(this),this.keyDown=this.keyDown.bind(this)}createEffects(){return[ji()]}onWidgetClick(e){const{enableThreeStateBehavior:t,readOnly:i,saveValueChangeEvent:n}=this.props;if(!i)if(null==n||n(e),t){let e;this.setState((t=>(e=null===(void 0!==this.props.value?this.props.value:t.value)||!(void 0!==this.props.value?this.props.value:t.value)&&null,{value:e}))),this.props.valueChange(e)}else{let e;this.setState((t=>(e=!(void 0!==this.props.value?this.props.value:t.value),{value:e}))),this.props.valueChange(e)}}keyDown(e){const{onKeyDown:t}=this.props,{keyName:i,originalEvent:n,which:o}=e,r=null==t?void 0:t(e);if(null!=r&&r.cancel)return r;"space"!==i&&"space"!==o||(n.preventDefault(),this.onWidgetClick(n))}get cssClasses(){return(e=>{const{text:t,value:i}=e;return kn({"dx-checkbox":!0,"dx-checkbox-checked":!0===i,"dx-checkbox-has-text":!!t,"dx-checkbox-indeterminate":null===i})})((0,n.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value}))}get aria(){const e=!0===(void 0!==this.props.value?this.props.value:this.state.value),t={role:"checkbox",checked:null===(void 0!==this.props.value?this.props.value:this.state.value)?"mixed":`${e}`};return(0,n.Z)({},t,this.props.aria)}get restAttributes(){const e=(0,n.Z)({},this.props,{value:void 0!==this.props.value?this.props.value:this.state.value});return(0,an.Z)(e,Sh)}focus(){this.editorRef.current.focus()}blur(){this.editorRef.current.blur()}render(){const e=this.props;return(e=>{const{aria:t,cssClasses:i,editorRef:o,keyDown:r,onWidgetClick:s,props:{accessKey:a,activeStateEnabled:l,className:c,disabled:d,focusStateEnabled:h,height:u,hint:p,hoverStateEnabled:f,iconSize:_,isValid:m,name:g,onFocusIn:v,readOnly:b,rtlEnabled:y,tabIndex:C,text:w,validationError:x,validationErrors:S,validationMessageMode:I,validationMessagePosition:k,validationStatus:E,value:O,visible:T,width:D},restAttributes:B}=e;return yt(gt(2,Ch,(0,n.Z)({aria:t,classes:i,onClick:s,onKeyDown:r,accessKey:a,activeStateEnabled:l,focusStateEnabled:h,hoverStateEnabled:f,className:c,disabled:d,readOnly:b,hint:p,height:u,width:D,rtlEnabled:y,tabIndex:C,visible:T,validationError:x,validationErrors:S,validationMessageMode:I,validationMessagePosition:k,validationStatus:E,isValid:m,onFocusIn:v},B,{children:bt([yt(mt(64,"input",null,null,1,(0,n.Z)({type:"hidden",value:`${O}`},g&&{name:g}))),mt(1,"div","dx-checkbox-container",[gt(2,xh,{size:_,isChecked:!0===O}),w&&mt(1,"span","dx-checkbox-text",w,0)],0)],4)}),null,o))})({props:(0,n.Z)({},e,{value:void 0!==this.props.value?this.props.value:this.state.value}),editorRef:this.editorRef,onWidgetClick:this.onWidgetClick,keyDown:this.keyDown,cssClasses:this.cssClasses,aria:this.aria,restAttributes:this.restAttributes})}}Eh.defaultProps=kh;const Oh=[];class Th extends ih{getProps(){const e=super.getProps();return e.onKeyDown=this._wrapKeyDownHandler(e.onKeyDown),e}focus(){var e;return null===(e=this.viewRef)||void 0===e?void 0:e.focus(...arguments)}blur(){var e;return null===(e=this.viewRef)||void 0===e?void 0:e.blur(...arguments)}_getActionConfigs(){return{onFocusIn:{},onClick:{}}}get _propsInfo(){return{twoWay:[["value","defaultValue","valueChange"]],allowNull:["defaultValue","validationError","validationErrors","value"],elements:[],templates:[],props:["text","iconSize","enableThreeStateBehavior","activeStateEnabled","hoverStateEnabled","focusStateEnabled","saveValueChangeEvent","defaultValue","valueChange","readOnly","name","validationError","validationErrors","validationMessageMode","validationMessagePosition","validationStatus","isValid","isDirty","inputAttr","onFocusIn","className","accessKey","disabled","height","hint","onClick","onKeyDown","rtlEnabled","tabIndex","visible","width","aria","value"]}}get _viewComponent(){return Eh}}(0,r.default)("dxCheckBox",Th),Th.defaultOptions=function(e){Oh.push(e),Eh.defaultProps=Object.create(Object.prototype,Object.assign(Object.getOwnPropertyDescriptors(Eh.defaultProps),Object.getOwnPropertyDescriptors(function(e){const t=["value"];return Object.keys(e).reduce(((i,n)=>{const o=e[n],r=t.some((e=>e===n))?"default"+n.charAt(0).toUpperCase()+n.slice(1):n;return i[r]=o,i}),{})}((0,xn.wt)(Oh)))))};const Dh=Th;var Bh=i(9217),Ah=i(3282),Ph=i(8087),Mh=i(7735),Rh=i(9487),$h=i(5963);const Nh={onStart:Ms,onUpdated:Rs,onEnd:$s,onCancel:"dxswipecancel"},Vh=sn.default.inherit({_getDefaultOptions:function(){return(0,f.l)(this.callBase(),{elastic:!0,immediate:!1,immediateTimeout:180,direction:"horizontal",itemSizeFunc:null,onStart:null,onUpdated:null,onEnd:null,onCancel:null})},_render:function(){this.callBase(),this.$element().addClass("dx-swipeable"),this._attachEventHandlers()},_attachEventHandlers:function(){if(this._detachEventHandlers(),this.option("disabled"))return;const e=this.NAME;this._createEventData(),(0,j.each)(Nh,function(t,i){const n=this._createActionByOption(t,{context:this});i=(0,v.addNamespace)(i,e),m.Z.on(this.$element(),i,this._eventData,(function(e){return n({event:e})}))}.bind(this))},_createEventData:function(){this._eventData={elastic:this.option("elastic"),itemSizeFunc:this.option("itemSizeFunc"),direction:this.option("direction"),immediate:this.option("immediate"),immediateTimeout:this.option("immediateTimeout")}},_detachEventHandlers:function(){m.Z.off(this.$element(),".dxSwipeable")},_optionChanged:function(e){switch(e.name){case"disabled":case"onStart":case"onUpdated":case"onEnd":case"onCancel":case"elastic":case"immediate":case"itemSizeFunc":case"direction":this._detachEventHandlers(),this._attachEventHandlers();break;case"rtlEnabled":break;default:this.callBase(e)}},_useTemplates:function(){return!1}});(0,cr.u2)(Vh,"dxSwipeable");const Fh=Vh,Zh=class{constructor(e){this.calendar=e}dateOption(e){return this.calendar._dateOption(e)}dateValue(e,t){this.calendar._dateValue(e,t)}skipNavigate(){this.calendar._skipNavigate=!0}updateAriaSelected(e,t){this.calendar._updateAriaSelected(e,t),e[0]&&this.calendar.option("currentDate").getTime()===e[0].getTime()&&this.calendar._updateAriaId(e[0])}processValueChanged(e,t){var i,n;(0,_.$K)(e)&&!Array.isArray(e)&&(e=[e]),(0,_.$K)(t)&&!Array.isArray(t)&&(t=[t]),e=(null===(i=e)||void 0===i?void 0:i.map((e=>this._convertToDate(e))))||[],t=(null===(n=t)||void 0===n?void 0:n.map((e=>this._convertToDate(e))))||[],this._updateViewsValue(e),this.updateAriaSelected(e,t),this._currentDateChanged||this.calendar._initCurrentDate(),this._currentDateChanged=!1}_isDateDisabled(e){const t=this.calendar._dateOption("min"),i=this.calendar._dateOption("max"),n=(0,_.$K)(t)&&e<t&&!Rh.default.sameDate(t,e),o=(0,_.$K)(i)&&e>i&&!Rh.default.sameDate(i,e);return this.calendar._view.isDateDisabled(e)||n||o}_getLowestDateInArray(e){if(e.length)return new Date(Math.min(...e))}_convertToDate(e){return this.calendar._convertToDate(e)}_isMaxZoomLevel(){return this.calendar._isMaxZoomLevel()}_updateViewsOption(e,t){this.calendar._updateViewsOption(e,t)}_updateViewsValue(e){this._updateViewsOption("value",e)}_updateCurrentDate(e){this.calendar.option("currentDate",e??new Date)}_shouldHandleWeekNumberClick(){const{selectionMode:e,selectWeekOnClick:t}=this.calendar.option();return t&&"single"!==e}},Hh=class extends Co{_getDefaultOptions(){return(0,n.Z)({},super._getDefaultOptions(),{onClick:void 0,onCaptionClick:void 0,type:"normal",stylingMode:"outlined",text:""})}_defaultOptionsRules(){return super._defaultOptionsRules().concat([{device:()=>(0,Sn.x2)(),options:{type:"default",stylingMode:"text"}},{device:()=>(0,Sn.dC)(),options:{type:"normal",stylingMode:"text"}}])}_init(){super._init(),this._initActions()}_initActions(){this._clickAction=this._createActionByOption("onClick"),this._captionClickAction=this._createActionByOption("onCaptionClick")}_initMarkup(){super._initMarkup(),(0,c.Z)(this.element()).addClass("dx-calendar-navigator"),this._renderButtons(),this._renderCaption()}_renderButtons(){const{rtlEnabled:e,type:t,stylingMode:i,focusStateEnabled:n}=this.option();this._prevButton=this._createComponent((0,c.Z)("<div>"),_o,{focusStateEnabled:n,icon:e?"chevronright":"chevronleft",onClick:e=>{this._clickAction({direction:-1,event:e})},type:t,stylingMode:i,integrationOptions:{}});const o=(0,c.Z)(this._prevButton.element()).addClass("dx-calendar-navigator-previous-view").addClass("dx-calendar-navigator-previous-month");this._nextButton=this._createComponent((0,c.Z)("<div>"),_o,{focusStateEnabled:n,icon:e?"chevronleft":"chevronright",onClick:e=>{this._clickAction({direction:1,event:e})},type:t,stylingMode:i,integrationOptions:{}});const r=(0,c.Z)(this._nextButton.element()).addClass("dx-calendar-navigator-next-view").addClass("dx-calendar-navigator-next-month");this._caption=this._createComponent((0,c.Z)("<div>").addClass("dx-calendar-caption-button"),_o,{focusStateEnabled:n,onClick:e=>{this._captionClickAction({event:e})},type:t,stylingMode:i,template:(e,t)=>{const{text:i}=this.option();i.split(" - ").forEach((e=>{(0,c.Z)(t).append((0,c.Z)("<span>").addClass("dx-button-text").text(e))}))},integrationOptions:{}});const s=this._caption.$element();this.$element().append(o,s,r)}_renderCaption(){var e;null===(e=this._caption)||void 0===e||e.option("text",this.option("text"))}toggleButton(e,t){const i=this[`_${e}Button`];i&&(i.option("disabled",t),i.$element().toggleClass("dx-calendar-disabled-navigator-link",t))}_optionChanged(e){"text"===e.name?this._renderCaption():super._optionChanged(e)}},{abstract:Lh}=de.default,jh="td:not(.dx-calendar-week-number-cell)",zh=(0,v.addNamespace)(He.name,"dxCalendar"),Wh=(0,v.addNamespace)(mn.B,"dxCalendar"),Kh={month:z.Z.format("dxCalendar-currentDay"),year:z.Z.format("dxCalendar-currentMonth"),decade:z.Z.format("dxCalendar-currentYear"),century:z.Z.format("dxCalendar-currentYearRange")},qh="single",Uh="range",Gh=de.default.inherit({_getViewName:()=>"base",_getDefaultOptions(){return(0,f.l)(this.callBase(),{date:new Date,focusStateEnabled:!1,cellTemplate:null,disabledDates:null,onCellClick:null,onCellHover:null,onWeekNumberClick:null,rowCount:3,colCount:4,allowValueSelection:!0,_todayDate:()=>new Date})},_initMarkup(){this.callBase(),this._renderImpl()},_renderImpl(){this.$element().append(this._createTable()),this._createDisabledDatesHandler(),this._renderBody(),this._renderContouredDate(),this._renderValue(),this._renderRange(),this._renderEvents(),this._updateTableAriaLabel()},_getLocalizedWidgetName:()=>z.Z.format("dxCalendar-ariaWidgetName"),_getSingleModeAriaLabel(){const{value:e}=this.option(),t=this._getLocalizedWidgetName(),i=Bh.Z.format(e,"date");return`${t}. ${z.Z.format("dxCalendar-selectedDate",i)}`},_getRangeModeAriaLabel(){const{value:e}=this.option(),t=this._getLocalizedWidgetName(),[i,n]=e,o=Bh.Z.format(i,"date"),r=Bh.Z.format(n,"date");return`${t}. ${i&&n?z.Z.format("dxCalendar-selectedDateRange",o,r):z.Z.format("dxCalendar-selectedDate",o??r)}`},_getMultipleModeAriaLabel(){return this._getLocalizedWidgetName()},_getTableAriaLabel(){const{value:e,selectionMode:t}=this.option();if(!e||Array.isArray(e)&&!e.filter(Boolean).length)return this._getLocalizedWidgetName();switch(t){case qh:return this._getSingleModeAriaLabel();case Uh:return this._getRangeModeAriaLabel();case"multiple":return this._getMultipleModeAriaLabel()}},_updateTableAriaLabel(){const e=this._getTableAriaLabel();this.setAria({label:e},this._$table)},_createTable(){return this._$table=(0,c.Z)("<table>"),this.setAria({role:"grid"},this._$table),this._$table},_renderBody(){this.$body=(0,c.Z)("<tbody>").appendTo(this._$table);const e={cellDate:this._getFirstCellData(),prevCellDate:null};for(let t=0,i=this.option("rowCount");t<i;t++){e.row=this._createRow();for(let t=0,i=this.option("colCount");t<i;t++)this._renderCell(e,t);this._renderWeekNumberCell(e)}},_createRow(){const e=Fe.Z.createElement("tr");return this.setAria("role","row",(0,c.Z)(e)),this.$body.get(0).appendChild(e),e},_createCell(e,t){const i=Fe.Z.createElement("td"),n=(0,c.Z)(i);return i.className=this._getClassNameByDate(e,t),i.setAttribute("data-value",$h.Z.serializeDate(e,Rh.default.getShortDateFormat())),(0,N.aT)(i,"dxDateValueKey",e),this.setAria({role:"gridcell",selected:!1,label:this.getCellAriaLabel(e)},n),{cell:i,$cell:n}},_renderCell(e,t){const{cellDate:i,prevCellDate:n,row:o}=e;n&&Rh.default.fixTimezoneGap(n,i),e.prevCellDate=i;const{cell:r,$cell:s}=this._createCell(i,t),a=this.option("cellTemplate");(0,c.Z)(o).append(r),a?a.render(this._prepareCellTemplateData(i,t,s)):r.innerHTML=this._getCellText(i),e.cellDate=this._getNextCellData(i)},_getClassNameByDate(e,t){let i="dx-calendar-cell";return this._isTodayCell(e)&&(i+=" dx-calendar-today"),(this._isDateOutOfRange(e)||this.isDateDisabled(e))&&(i+=" dx-calendar-empty-cell"),this._isOtherView(e)&&(i+=" dx-calendar-other-view"),this.option("selectionMode")===Uh&&(0===t&&(i+=" dx-calendar-cell-start-in-row"),t===this.option("colCount")-1&&(i+=" dx-calendar-cell-end-in-row"),this._isStartDayOfMonth(e)&&(i+=" dx-calendar-cell-start"),this._isEndDayOfMonth(e)&&(i+=" dx-calendar-cell-end")),i},_prepareCellTemplateData(e,t,i){const n=e instanceof Date;return{model:{text:n?this._getCellText(e):e,date:n?e:void 0,view:this._getViewName()},container:(0,l.uD)(i),index:t}},_renderEvents(){this._createCellClickAction(),m.Z.off(this._$table,zh),m.Z.on(this._$table,zh,jh,(e=>{(0,c.Z)(e.currentTarget).hasClass("dx-calendar-empty-cell")||this._cellClickAction({event:e,value:(0,c.Z)(e.currentTarget).data("dxDateValueKey")})}));const{selectionMode:e}=this.option();m.Z.off(this._$table,Wh),e===Uh&&(this._createCellHoverAction(),m.Z.on(this._$table,Wh,jh,(e=>{(0,c.Z)(e.currentTarget).hasClass("dx-calendar-empty-cell")||this._cellHoverAction({event:e,value:(0,c.Z)(e.currentTarget).data("dxDateValueKey")})}))),e!==qh&&(this._createWeekNumberCellClickAction(),m.Z.on(this._$table,zh,".dx-calendar-week-number-cell",(e=>{const t=(0,c.Z)(e.currentTarget).closest("tr"),i=t.find(".dx-calendar-cell").first().data("dxDateValueKey"),n=t.find(".dx-calendar-cell").last().data("dxDateValueKey"),o=[...Rh.default.getDatesOfInterval(i,n,864e5),n];this._weekNumberCellClickAction({event:e,rowDates:o})})))},_createCellClickAction(){this._cellClickAction=this._createActionByOption("onCellClick")},_createCellHoverAction(){this._cellHoverAction=this._createActionByOption("onCellHover")},_createWeekNumberCellClickAction(){this._weekNumberCellClickAction=this._createActionByOption("onWeekNumberClick")},_createDisabledDatesHandler(){const e=this.option("disabledDates");this._disabledDatesHandler=Array.isArray(e)?this._getDefaultDisabledDatesHandler(e):e||u.noop},_getDefaultDisabledDatesHandler:()=>u.noop,_isTodayCell:Lh,_isDateOutOfRange:Lh,isDateDisabled(e){const t={date:e,view:this._getViewName()};return this._disabledDatesHandler(t)},_isOtherView:Lh,_isStartDayOfMonth:Lh,_isEndDayOfMonth:Lh,_getCellText:Lh,_getFirstCellData:Lh,_getNextCellData:Lh,_renderContouredDate(e){if(!this.option("focusStateEnabled"))return;e=e||this.option("contouredDate");const t=this._getContouredCell(),i=this._getCellByDate(e);t.removeClass("dx-calendar-contoured-date"),e&&i.addClass("dx-calendar-contoured-date")},_getContouredCell(){return this._$table.find(".dx-calendar-contoured-date")},_renderValue(){if(!this.option("allowValueSelection"))return;let e=this.option("value");Array.isArray(e)||(e=[e]),this._updateSelectedClass(e)},_updateSelectedClass(e){var t;this._isRangeMode()&&!this._isMonthView()||(null===(t=this._$selectedCells)||void 0===t||t.forEach((e=>{e.removeClass("dx-calendar-selected-date")})),this._$selectedCells=e.map((e=>this._getCellByDate(e))),this._$selectedCells.forEach((e=>{e.addClass("dx-calendar-selected-date")})))},_renderRange(){var e,t,i,n,o,r,s,a;const{allowValueSelection:l,value:c,range:d}=this.option();l&&this._isRangeMode()&&this._isMonthView()&&(null===(e=this._$rangeCells)||void 0===e||e.forEach((e=>{e.removeClass("dx-calendar-cell-in-range")})),null===(t=this._$hoveredRangeCells)||void 0===t||t.forEach((e=>{e.removeClass("dx-calendar-cell-range-hover")})),null===(i=this._$rangeStartHoverCell)||void 0===i||i.removeClass("dx-calendar-cell-range-hover-start"),null===(n=this._$rangeEndHoverCell)||void 0===n||n.removeClass("dx-calendar-cell-range-hover-end"),null===(o=this._$rangeStartDateCell)||void 0===o||o.removeClass("dx-calendar-range-start-date"),null===(r=this._$rangeEndDateCell)||void 0===r||r.removeClass("dx-calendar-range-end-date"),this._$rangeCells=d.map((e=>this._getCellByDate(e))),this._$rangeStartDateCell=this._getCellByDate(c[0]),this._$rangeEndDateCell=this._getCellByDate(c[1]),this._$rangeCells.forEach((e=>{e.addClass("dx-calendar-cell-in-range")})),null===(s=this._$rangeStartDateCell)||void 0===s||s.addClass("dx-calendar-range-start-date"),null===(a=this._$rangeEndDateCell)||void 0===a||a.addClass("dx-calendar-range-end-date"))},_renderHoveredRange(){var e,t,i,n,o;const{allowValueSelection:r,hoveredRange:s}=this.option();r&&this._isRangeMode()&&this._isMonthView()&&(null===(e=this._$hoveredRangeCells)||void 0===e||e.forEach((e=>{e.removeClass("dx-calendar-cell-range-hover")})),null===(t=this._$rangeStartHoverCell)||void 0===t||t.removeClass("dx-calendar-cell-range-hover-start"),null===(i=this._$rangeEndHoverCell)||void 0===i||i.removeClass("dx-calendar-cell-range-hover-end"),this._$hoveredRangeCells=s.map((e=>this._getCellByDate(e))),this._$rangeStartHoverCell=this._getCellByDate(s[0]),this._$rangeEndHoverCell=this._getCellByDate(s[s.length-1]),this._$hoveredRangeCells.forEach((e=>{e.addClass("dx-calendar-cell-range-hover")})),null===(n=this._$rangeStartHoverCell)||void 0===n||n.addClass("dx-calendar-cell-range-hover-start"),null===(o=this._$rangeEndHoverCell)||void 0===o||o.addClass("dx-calendar-cell-range-hover-end"))},_isMonthView(){return"month"===this.option("zoomLevel")},_isRangeMode(){return this.option("selectionMode")===Uh},_getCurrentDateFormat:()=>null,getCellAriaLabel(e){const t=this._getViewName(),i=this._isTodayCell(e),n=this._getCurrentDateFormat(),o=n?Bh.Z.format(e,n):this._getCellText(e);return i?`${o}. ${Kh[t]}`:o},_getFirstAvailableDate(){let e=this.option("date");const t=this.option("min");return e=Rh.default.getViewFirstCellDate(this._getViewName(),e),new Date(t&&e<t?t:e)},_getCellByDate:Lh,isBoundary:Lh,_optionChanged(e){const{name:t,value:i}=e;switch(t){case"value":this._renderValue(),this._updateTableAriaLabel();break;case"range":this._renderRange();break;case"hoveredRange":this._renderHoveredRange();break;case"contouredDate":this._renderContouredDate(i);break;case"onCellClick":this._createCellClickAction();break;case"onCellHover":this._createCellHoverAction();break;case"min":case"max":case"disabledDates":case"cellTemplate":case"selectionMode":this._invalidate();break;case"_todayDate":this._renderBody();break;default:this.callBase(e)}}}),Yh={month:Gh.inherit({_getViewName:()=>"month",_getCurrentDateFormat:()=>"longdate",_getDefaultOptions(){return(0,f.l)(this.callBase(),{firstDayOfWeek:0,rowCount:6,colCount:7})},_renderImpl(){this.callBase(),this._renderHeader()},_renderBody(){this.callBase(),this._$table.find(".dx-calendar-other-view").addClass("dx-calendar-other-month")},_renderFocusTarget:u.noop,_renderHeader(){const e=(0,c.Z)("<tr>"),t=(0,c.Z)("<thead>").append(e);this._$table.prepend(t);for(let t=0,i=this.option("colCount");t<i;t++)this._renderHeaderCell(t,e);this.option("showWeekNumbers")&&this._renderWeekHeaderCell(e)},_renderHeaderCell(e,t){const{firstDayOfWeek:i}=this.option(),{full:n,abbreviated:o}=this._getDayCaption(i+e),r=(0,c.Z)("<th>").attr({scope:"col",abbr:n}).text(o);t.append(r)},_renderWeekHeaderCell(e){const t=(0,c.Z)("<th>").attr({scope:"col",abbr:"WeekNumber",class:"dx-week-number-header"});e.prepend(t)},_renderWeekNumberCell(e){const{showWeekNumbers:t,cellTemplate:i,selectionMode:n,selectWeekOnClick:o}=this.option();if(!t)return;const r=this._getWeekNumber(e.prevCellDate),s=Fe.Z.createElement("td"),a=(0,c.Z)(s);s.className="dx-calendar-week-number-cell","single"!==n&&o&&a.addClass("dx-calendar-week-selection"),i?i.render(this._prepareCellTemplateData(r,-1,a)):s.innerHTML=r,e.row.prepend(s),this.setAria({role:"gridcell",label:`Week ${r}`},a)},_getWeekNumber(e){const{weekNumberRule:t,firstDayOfWeek:i}=this.option();return"auto"===t?Rh.default.getWeekNumber(e,i,1===i?"firstFourDays":"firstDay"):Rh.default.getWeekNumber(e,i,t)},getNavigatorCaption(){return Bh.Z.format(this.option("date"),"monthandyear")},_isTodayCell(e){const t=this.option("_todayDate")();return Rh.default.sameDate(e,t)},_isDateOutOfRange(e){const t=this.option("min"),i=this.option("max");return!Rh.default.dateInRange(e,t,i,"date")},_isOtherView(e){return e.getMonth()!==this.option("date").getMonth()},_isStartDayOfMonth(e){return Rh.default.sameDate(e,Rh.default.getFirstMonthDate(this.option("date")))},_isEndDayOfMonth(e){return Rh.default.sameDate(e,Rh.default.getLastMonthDate(this.option("date")))},_getCellText:e=>Bh.Z.format(e,"d"),_getDayCaption(e){const t=e%this.option("colCount");return{full:Bh.Z.getDayNames()[t],abbreviated:Bh.Z.getDayNames("abbreviated")[t]}},_getFirstCellData(){const{firstDayOfWeek:e}=this.option(),t=Rh.default.getFirstMonthDate(this.option("date"));let i=e-t.getDay();const n=this.option("colCount");return i>=0&&(i-=n),t.setDate(t.getDate()+i),t},_getNextCellData:e=>((e=new Date(e)).setDate(e.getDate()+1),e),_getCellByDate(e){return this._$table.find(`td[data-value='${$h.Z.serializeDate(e,Rh.default.getShortDateFormat())}']`)},isBoundary(e){return Rh.default.sameMonthAndYear(e,this.option("min"))||Rh.default.sameMonthAndYear(e,this.option("max"))},_getDefaultDisabledDatesHandler:e=>function(t){if(e.some((e=>Rh.default.sameDate(e,t.date))))return!0}}),year:Gh.inherit({_getViewName:()=>"year",_getCurrentDateFormat:()=>"monthandyear",_isTodayCell(e){const t=this.option("_todayDate")();return Rh.default.sameMonthAndYear(e,t)},_isDateOutOfRange(e){return!Rh.default.dateInRange(e,Rh.default.getFirstMonthDate(this.option("min")),Rh.default.getLastMonthDate(this.option("max")))},_isOtherView:()=>!1,_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText:e=>Bh.Z.getMonthNames("abbreviated")[e.getMonth()],_getFirstCellData(){const e=this.option("date"),t=new Date(e);return t.setDate(1),t.setMonth(0),t},_getNextCellData:e=>((e=new Date(e)).setMonth(e.getMonth()+1),e),_getCellByDate(e){const t=new Date(e);return t.setDate(1),this._$table.find(`td[data-value='${$h.Z.serializeDate(t,Rh.default.getShortDateFormat())}']`)},getNavigatorCaption(){return Bh.Z.format(this.option("date"),"yyyy")},isBoundary(e){return Rh.default.sameYear(e,this.option("min"))||Rh.default.sameYear(e,this.option("max"))},_renderWeekNumberCell:u.noop}),decade:Gh.inherit({_getViewName:()=>"decade",_isTodayCell(e){const t=this.option("_todayDate")();return Rh.default.sameYear(e,t)},_isDateOutOfRange(e){const t=this.option("min"),i=this.option("max");return!Rh.default.dateInRange(e.getFullYear(),t&&t.getFullYear(),i&&i.getFullYear())},_isOtherView(e){const t=new Date(e);return t.setMonth(1),!Rh.default.sameDecade(t,this.option("date"))},_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText:e=>Bh.Z.format(e,"yyyy"),_getFirstCellData(){const e=Rh.default.getFirstYearInDecade(this.option("date"))-1;return Rh.default.createDateWithFullYear(e,0,1)},_getNextCellData:e=>((e=new Date(e)).setFullYear(e.getFullYear()+1),e),getNavigatorCaption(){const e=this.option("date"),t=Rh.default.getFirstYearInDecade(e),i=new Date(e),n=new Date(e);return i.setFullYear(t),n.setFullYear(t+9),`${Bh.Z.format(i,"yyyy")}-${Bh.Z.format(n,"yyyy")}`},_isValueOnCurrentView:(e,t)=>Rh.default.sameDecade(e,t),_getCellByDate(e){const t=new Date(e);return t.setDate(1),t.setMonth(0),this._$table.find(`td[data-value='${$h.Z.serializeDate(t,Rh.default.getShortDateFormat())}']`)},isBoundary(e){return Rh.default.sameDecade(e,this.option("min"))||Rh.default.sameDecade(e,this.option("max"))},_renderWeekNumberCell:u.noop}),century:Gh.inherit({_getViewName:()=>"century",_isTodayCell(e){const t=this.option("_todayDate")();return Rh.default.sameDecade(e,t)},_isDateOutOfRange(e){const t=Rh.default.getFirstYearInDecade(e),i=Rh.default.getFirstYearInDecade(this.option("min")),n=Rh.default.getFirstYearInDecade(this.option("max"));return!Rh.default.dateInRange(t,i,n)},_isOtherView(e){const t=new Date(e);return t.setMonth(1),!Rh.default.sameCentury(t,this.option("date"))},_isStartDayOfMonth:()=>!1,_isEndDayOfMonth:()=>!1,_getCellText(e){const t=Bh.Z.format(e,"yyyy"),i=new Date(e);return i.setFullYear(i.getFullYear()+9),`${t} - ${Bh.Z.format(i,"yyyy")}`},_getFirstCellData(){const e=Rh.default.getFirstDecadeInCentury(this.option("date"))-10;return Rh.default.createDateWithFullYear(e,0,1)},_getNextCellData:e=>((e=new Date(e)).setFullYear(e.getFullYear()+10),e),_getCellByDate(e){const t=new Date(e);return t.setDate(1),t.setMonth(0),t.setFullYear(Rh.default.getFirstYearInDecade(t)),this._$table.find(`td[data-value='${$h.Z.serializeDate(t,Rh.default.getShortDateFormat())}']`)},getNavigatorCaption(){const e=this.option("date"),t=Rh.default.getFirstDecadeInCentury(e),i=new Date(e),n=new Date(e);return i.setFullYear(t),n.setFullYear(t+99),`${Bh.Z.format(i,"yyyy")}-${Bh.Z.format(n,"yyyy")}`},isBoundary(e){return Rh.default.sameCentury(e,this.option("min"))||Rh.default.sameCentury(e,this.option("max"))},_renderWeekNumberCell:u.noop})},Qh=Yh,Xh=(0,v.addNamespace)(mn.u,"dxCalendar"),Jh={month:3,year:2,decade:1,century:0},eu="month",tu="year",iu="decade",nu="century",ou={SingleSelection:class extends Zh{constructor(e){super(e),this.NAME="SingleSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"single"}}selectValue(e,t){this.skipNavigate(),this.dateValue(e,t)}updateAriaSelected(e,t){e??(e=[this.dateOption("value")]),t??(t=[]),super.updateAriaSelected(e,t)}getDefaultCurrentDate(){return this.dateOption("value")}restoreValue(){this.calendar.option("value",null)}_updateViewsValue(e){this._updateViewsOption("value",e[0])}},MultipleSelection:class extends Zh{constructor(e){super(e),this.NAME="MultiSelection"}getViewOptions(){return{value:this.dateOption("value"),range:[],selectionMode:"multiple",onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,t){const i=[...this.dateOption("value")],n=i.findIndex((t=>(null==t?void 0:t.toDateString())===e.toDateString()));n>-1?i.splice(n,1):i.push(e),this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,this.dateValue(i,t)}updateAriaSelected(e,t){e??(e=this.dateOption("value")),t??(t=[]),super.updateAriaSelected(e,t)}getDefaultCurrentDate(){const e=this.dateOption("value").filter((e=>e));return this._getLowestDateInArray(e)}restoreValue(){this.calendar.option("value",[])}_weekNumberClickHandler(e){let{rowDates:t,event:i}=e;const n=t.filter((e=>!this._isDateDisabled(e)));this.dateValue(n,i)}},RangeSelection:class extends Zh{constructor(e){super(e),this.NAME="RangeSelection"}getViewOptions(){const e=this._getValue();return{value:e,range:this._getDaysInRange(e[0],e[1]),selectionMode:"range",onCellHover:this._cellHoverHandler.bind(this),onWeekNumberClick:this._shouldHandleWeekNumberClick()?this._weekNumberClickHandler.bind(this):null}}selectValue(e,t){const[i,n]=this._getValue();this.skipNavigate(),this._updateCurrentDate(e),this._currentDateChanged=!0,!0===this.calendar.option("_allowChangeSelectionOrder")?(this.calendar._valueSelected=!0,"startDate"===this.calendar.option("_currentSelection")?this.calendar._convertToDate(e)>this.calendar._convertToDate(n)?this.dateValue([e,null],t):this.dateValue([e,n],t):this.calendar._convertToDate(e)>=this.calendar._convertToDate(i)?this.dateValue([i,e],t):this.dateValue([e,null],t)):!i||n?this.dateValue([e,null],t):this.dateValue(i<e?[i,e]:[e,i],t)}updateAriaSelected(e,t){e??(e=this._getValue()),t??(t=[]),super.updateAriaSelected(e,t)}processValueChanged(e,t){super.processValueChanged(e,t);const i=this._getRange();this._updateViewsOption("range",i)}getDefaultCurrentDate(){const{_allowChangeSelectionOrder:e,_currentSelection:t}=this.calendar.option(),i=this.dateOption("value");if(e){if("startDate"===t&&i[0])return i[0];if("endDate"===t&&i[1])return i[1]}const n=i.filter((e=>e));return this._getLowestDateInArray(n)}restoreValue(){this.calendar.option("value",[null,null])}_getValue(){const e=this.dateOption("value");if(!e.length)return e;let[t,i]=e;return t&&i&&t>i&&([t,i]=[i,t]),[t,i]}_getRange(){const[e,t]=this._getValue();return this._getDaysInRange(e,t)}_getDaysInRange(e,t){if(!e||!t)return[];const{currentDate:i,viewsCount:n}=this.calendar.option(),o=this.calendar._isAdditionalViewDate(i),r=Rh.default.getFirstMonthDate(Rh.default.addDateInterval(i,"month",o?-2:-1)),s=Rh.default.getLastMonthDate(Rh.default.addDateInterval(i,"month",o?1:n)),a=new Date(Math.max(r,e)),l=new Date(Math.min(s,t));return[...Rh.default.getDatesOfInterval(a,l,864e5),l]}_cellHoverHandler(e){const t=this._isMaxZoomLevel(),[i,n]=this._getValue(),{_allowChangeSelectionOrder:o,_currentSelection:r}=this.calendar.option();if(t){if(!i||n||o&&"startDate"===r){if(i||!n||o&&"endDate"===r){if(i&&n){if("startDate"===r&&e.value<i)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,i));if("endDate"===r&&e.value>n)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(n,e.value))}}else if(e.value<n)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(e.value,n))}else if(e.value>i)return void this._updateViewsOption("hoveredRange",this._getDaysInRange(i,e.value));this._updateViewsOption("hoveredRange",[])}}_weekNumberClickHandler(e){let{rowDates:t,event:i}=e;const n=t.filter((e=>!this._isDateDisabled(e))),o=n.length?[n[0],n[n.length-1]]:[null,null];this.dateValue(o,i)}}},ru=me.inherit({_activeStateUnit:".dx-calendar-cell",_getDefaultOptions(){return(0,f.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,currentDate:new Date,value:null,dateSerializationFormat:void 0,min:new Date(1e3,0),max:new Date(3e3,0),firstDayOfWeek:void 0,viewsCount:1,zoomLevel:eu,maxZoomLevel:eu,minZoomLevel:nu,selectionMode:"single",selectWeekOnClick:!0,showTodayButton:!1,showWeekNumbers:!1,weekNumberRule:"auto",cellTemplate:"cell",disabledDates:null,onCellClick:null,onContouredChanged:null,skipFocusCheck:!1,_todayDate:()=>new Date})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===a.default.real().deviceType&&!a.default.isSimulator(),options:{focusStateEnabled:!0}}])},_supportedKeys(){return(0,f.l)(this.callBase(),{rightArrow(e){e.preventDefault(),(0,v.isCommandKeyPressed)(e)?this._waitRenderView(1):this._moveCurrentDateByOffset(1*this._getRtlCorrection())},leftArrow(e){e.preventDefault(),(0,v.isCommandKeyPressed)(e)?this._waitRenderView(-1):this._moveCurrentDateByOffset(-1*this._getRtlCorrection())},upArrow(e){if(e.preventDefault(),(0,v.isCommandKeyPressed)(e))this._navigateUp();else{if(mo.default.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(-1*this._view.option("colCount"))}},downArrow(e){if(e.preventDefault(),(0,v.isCommandKeyPressed)(e))this._navigateDown();else{if(mo.default.isAnimating(this._view.$element()))return;this._moveCurrentDateByOffset(1*this._view.option("colCount"))}},home(e){e.preventDefault();const t=this.option("zoomLevel"),i=this.option("currentDate"),n=this._dateOption("min");if(this._view.isDateDisabled(i))return;const o=Rh.default.sameView(t,i,n)?n:Rh.default.getViewFirstCellDate(t,i);this._moveToClosestAvailableDate(o)},end(e){e.preventDefault();const t=this.option("zoomLevel"),i=this.option("currentDate"),n=this._dateOption("max");if(this._view.isDateDisabled(i))return;const o=Rh.default.sameView(t,i,n)?n:Rh.default.getViewLastCellDate(t,i);this._moveToClosestAvailableDate(o)},pageUp(e){e.preventDefault(),this._waitRenderView(-1*this._getRtlCorrection())},pageDown(e){e.preventDefault(),this._waitRenderView(1*this._getRtlCorrection())},tab:u.noop,enter:this._enterKeyHandler})},_enterKeyHandler(e){if(this._isMaxZoomLevel()){if(!this._view.isDateDisabled(this.option("currentDate"))){const t=this._updateTimeComponent(this.option("currentDate"));this._selectionStrategy.selectValue(t,e)}}else this._navigateDown()},_getSerializationFormat(e){const t=this.option(e||"value");return this.option("dateSerializationFormat")?this.option("dateSerializationFormat"):(0,_.kE)(t)?"number":(0,_.HD)(t)?$h.Z.getDateSerializationFormat(t):void 0},_convertToDate:e=>$h.Z.deserializeDate(e),_dateValue(e,t){if(t){if("keydown"===t.type){const e=this._view._getContouredCell().get(0);t.target=e}this._saveValueChangeEvent(t)}this._dateOption("value",e)},_dateOption(e,t){const i="value"===e&&!this._isSingleMode(),n=this.option("value");if(1===arguments.length)return i?(n??[]).map((e=>this._convertToDate(e))):this._convertToDate(this.option(e));const o=this._getSerializationFormat(e),r=i?(null==t?void 0:t.map((e=>$h.Z.serializeDate(e,o))))||[]:$h.Z.serializeDate(t,o);this.option(e,r)},_isSingleMode(){return"single"===this.option("selectionMode")},_shiftDate(e,t,i,n){switch(e){case eu:t.setDate(t.getDate()+i*n);break;case tu:t.setMonth(t.getMonth()+i*n);break;case iu:t.setFullYear(t.getFullYear()+i*n);break;case nu:t.setFullYear(t.getFullYear()+10*i*n)}},_moveCurrentDateByOffset(e){const t=this.option("currentDate");let i=new Date(t);const n=this.option("zoomLevel");this._shiftDate(n,i,e,1);const o=this._getMaxDate(),r=this._getMinDate();let s=this._areDatesInNeighborView(n,i,t),a=(0,ul.Z2)(i,r,o)&&s;const l=new Date(i);for(;a;){if(!this._view.isDateDisabled(l)){i=l;break}this._shiftDate(n,l,e,1),s=this._areDatesInNeighborView(n,l,t),a=(0,ul.Z2)(l,r,o)&&s}if(this._view.isDateDisabled(t)||this._view.isDateDisabled(i)){const t=e>0?1:-1;(1===t?this._isNextViewDisabled():this._isPrevViewDisabled())?this._moveToClosestAvailableDate(i):this._waitRenderView(t)}else this._skipNavigate=!0,this.option("currentDate",i)},_isNextViewDisabled(){return this._navigator._nextButton.option("disabled")},_isPrevViewDisabled(){return this._navigator._prevButton.option("disabled")},_areDatesInSameView(e,t,i){switch(e){case eu:return t.getMonth()===i.getMonth();case tu:return t.getYear()===i.getYear();case iu:return parseInt(t.getYear()/10)===parseInt(i.getYear()/10);case nu:return parseInt(t.getYear()/100)===parseInt(i.getYear()/100)}},_areDatesInNeighborView(e,t,i){switch(e){case eu:return((e,t)=>{const i=Math.abs(e-t);return Math.min(i,12-i)})(t.getMonth(),i.getMonth())<=1;case tu:return Math.abs(t.getYear()-i.getYear())<=1;case iu:return Math.abs(t.getYear()-i.getYear())<=10;case nu:return Math.abs(t.getYear()-i.getYear())<=100}},_moveToClosestAvailableDate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.option("currentDate"),t=new Date(e);const i=this.option("zoomLevel"),n=!this._isDateNotAvailable(t);let o,r,s=n,a=n;const l=new Date(t),c=new Date(t);do{if(s){t=l;break}if(a){t=c;break}this._shiftDate(i,l,1,1),this._shiftDate(i,c,1,-1),o=this._areDatesInSameView(i,l,e),r=this._areDatesInSameView(i,c,e),s=o&&!this._isDateNotAvailable(l),a=r&&!this._isDateNotAvailable(c)}while(o||r);this.option("currentDate",t)},_isDateNotAvailable(e){const t=this._getMaxDate(),i=this._getMinDate();return!(0,ul.Z2)(e,i,t)||this._view.isDateDisabled(e)},_init(){this.callBase(),this._initSelectionStrategy(),this._correctZoomLevel(),this._initCurrentDate(),this._initActions()},_initSelectionStrategy(){const e=this._getSelectionStrategyName(),t=ou[e];this._selectionStrategy&&this._selectionStrategy.NAME===e||(this._selectionStrategy=new t(this))},_refreshSelectionStrategy(){this._initSelectionStrategy(),this._selectionStrategy.restoreValue(),this._refresh()},_getSelectionStrategyName(){switch(this.option("selectionMode")){case"multiple":return"MultipleSelection";case"range":return"RangeSelection";default:return"SingleSelection"}},_correctZoomLevel(){const e=this.option("minZoomLevel"),t=this.option("maxZoomLevel"),i=this.option("zoomLevel");Jh[t]<Jh[e]||(Jh[i]>Jh[t]?this.option("zoomLevel",t):Jh[i]<Jh[e]&&this.option("zoomLevel",e))},_initCurrentDate(){const e=this._getNormalizedDate(this._selectionStrategy.getDefaultCurrentDate())??this._getNormalizedDate(this.option("currentDate"));this.option("currentDate",e)},_getNormalizedDate(e){return e=Rh.default.normalizeDate(e,this._getMinDate(),this._getMaxDate()),(0,_.$K)(e)?this._getDate(e):e},_initActions(){this._cellClickAction=this._createActionByOption("onCellClick"),this._onContouredChanged=this._createActionByOption("onContouredChanged")},_initTemplates(){this._templateManager.addDefaultTemplates({cell:new Hc.k((e=>{const t=e.model;(0,c.Z)(e.container).append((0,c.Z)("<span>").text(t&&t.text||String(t)))}))}),this.callBase()},_updateCurrentDate(e){if(mo.default.isAnimating(this._$viewsWrapper)&&mo.default.stop(this._$viewsWrapper,!0),this._getMinDate()>this._getMaxDate())return void this.option("currentDate",new Date);const t=this._getNormalizedDate(e);if(e.getTime()!==t.getTime())return void this.option("currentDate",new Date(t));let i=this._getViewsOffset(this._view.option("date"),t);0!==i&&!this._isMaxZoomLevel()&&this._isOtherViewCellClicked&&(i=0),this._view&&0!==i&&!this._suppressNavigation?this._additionalView?i>2||i<-1?(this._refreshViews(),this._setViewContoured(t),this._updateAriaId(t),this._renderNavigator()):1===i&&this._skipNavigate?(this._setViewContoured(t),this._updateAriaId(t)):this._navigate(i,t):this._navigate(i,t):(this._renderNavigator(),this._setViewContoured(t),this._updateAriaId(t)),this._skipNavigate=!1},_isAdditionalViewDate(e){return!!this._additionalView&&e>=this._additionalView._getFirstAvailableDate()},_getActiveView(e){return this._isAdditionalViewDate(e)?this._additionalView:this._view},_setViewContoured(e){var t;(this.option("skipFocusCheck")||(0,c.Z)(this._$viewsWrapper).is(":focus"))&&(this._view.option("contouredDate",null),null===(t=this._additionalView)||void 0===t||t.option("contouredDate",null),(this._isAdditionalViewDate(e)?this._additionalView:this._view).option("contouredDate",e))},_getMinDate(){return this.option("_rangeMin")||(this.min||(this.min=this._dateOption("min")||new Date(1e3,0)),this.min)},_getMaxDate(){return this.option("_rangeMax")||(this.max||(this.max=this._dateOption("max")||new Date(3e3,0)),this.max)},_getViewsOffset(e,t){const i=this.option("zoomLevel");if(i===eu)return this._getMonthsOffset(e,t);let n;switch(i){case nu:n=100;break;case iu:n=10;break;default:n=1}return parseInt(t.getFullYear()/n)-parseInt(e.getFullYear()/n)},_getMonthsOffset:(e,t)=>12*(t.getFullYear()-e.getFullYear())+(t.getMonth()-e.getMonth()),_waitRenderView(e){if(this._alreadyViewRender)return;this._alreadyViewRender=!0;const t=this._getDateByOffset(e*this._getRtlCorrection());this._moveToClosestAvailableDate(t),this._waitRenderViewTimeout=setTimeout((()=>{this._alreadyViewRender=!1}))},_getRtlCorrection(){return this.option("rtlEnabled")?-1:1},_getDateByOffset(e,t){const i=(t=this._getDate(t??this.option("currentDate"))).getDate(),n=Rh.default.getDifferenceInMonth(this.option("zoomLevel"))*e;t.setDate(1),t.setMonth(t.getMonth()+n);const o=Rh.default.getLastMonthDate(t).getDate();return t.setDate(i>o?o:i),t},_focusTarget(){return this._$viewsWrapper},_focusEventTarget(){return this.$element()},_initMarkup(){this._renderSubmitElement();const e=this.$element();e.addClass("dx-calendar"),e.toggleClass("dx-calendar-range","range"===this.option("selectionMode")),this._renderBody(),e.append(this.$body),this._renderViews(),this._renderNavigator(),this.callBase(),this._renderEvents(),e.prepend(this._navigator.$element()),this._renderSwipeable(),this._renderFooter(),this._selectionStrategy.updateAriaSelected(),this._updateAriaId(),this._updateNavigatorLabels(),this.setAria("role","application"),this._moveToClosestAvailableDate()},_render(){this.callBase(),this._setViewContoured(this.option("currentDate"))},_renderBody(){this._$viewsWrapper||(this.$body=(0,c.Z)("<div>").addClass("dx-calendar-body"),this._$viewsWrapper=(0,c.Z)("<div>").addClass("dx-calendar-views-wrapper"),this.$body.append(this._$viewsWrapper))},_setAriaReadonly:u.noop,_getKeyboardListeners(){return this.callBase().concat([this._view])},_renderViews(){this.$element().addClass(`dx-calendar-view-${this.option("zoomLevel")}`);const{currentDate:e,viewsCount:t}=this.option();if(this.$element().toggleClass("dx-calendar-multiview",t>1),this._view=this._renderSpecificView(e),(0,Z.hasWindow)()){const i=this._getDateByOffset(-1,e);this._beforeView=this._isViewAvailable(i)?this._renderSpecificView(i):null;const n=this._getDateByOffset(t,e);n.setDate(1),this._afterView=this._isViewAvailable(n)?this._renderSpecificView(n):null}t>1&&(this._additionalView=this._renderSpecificView(this._getDateByOffset(1,e))),this._translateViews()},_renderSpecificView(e){const{zoomLevel:t}=this.option(),i=Qh[t],n=(0,c.Z)("<div>").appendTo(this._$viewsWrapper),o=this._viewConfig(e);return this._createComponent(n,i,o)},_viewConfig(e){let t=this.option("disabledDates");return t=(0,_.mf)(t)?this._injectComponent(t.bind(this)):t,(0,n.Z)({},this._selectionStrategy.getViewOptions(),{date:e,min:this._getMinDate(),max:this._getMaxDate(),firstDayOfWeek:this.option("firstDayOfWeek")??Bh.Z.firstDayOfWeekIndex(),showWeekNumbers:this.option("showWeekNumbers"),selectWeekOnClick:this.option("selectWeekOnClick"),weekNumberRule:this.option("weekNumberRule"),zoomLevel:this.option("zoomLevel"),tabIndex:void 0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),disabledDates:t,onCellClick:this._cellClickHandler.bind(this),cellTemplate:this._getTemplateByOption("cellTemplate"),allowValueSelection:this._isMaxZoomLevel(),_todayDate:this.option("_todayDate")})},_renderEvents(){m.Z.off(this._$viewsWrapper,Xh),"range"===this.option("selectionMode")&&m.Z.on(this._$viewsWrapper,Xh,null,(()=>{this._updateViewsOption("hoveredRange",[])}))},_injectComponent(e){const t=this;return function(i){return(0,f.l)(i,{component:t}),e(i)}},_isViewAvailable(e){const t=this.option("zoomLevel"),i=Rh.default.getViewMinBoundaryDate(t,this._getMinDate()),n=Rh.default.getViewMaxBoundaryDate(t,this._getMaxDate());return Rh.default.dateInRange(e,i,n)},_translateViews(){const{viewsCount:e}=this.option();(0,Ws.pB)(this._view.$element(),{left:0,top:0}),this._moveViewElement(this._beforeView,-1),this._moveViewElement(this._afterView,e),this._moveViewElement(this._additionalView,1)},_moveViewElement(e,t){e&&(0,Ws.pB)(e.$element(),{left:this._getViewPosition(t),top:0})},_getViewPosition(e){return 100*e*(this.option("rtlEnabled")?-1:1)+"%"},_cellClickHandler(e){const t=this.option("zoomLevel"),i=Rh.default.getViewDown(t),n=this._isMaxZoomLevel();if(i&&!n)this._navigateDown(e.event.currentTarget);else{const t=this._updateTimeComponent(e.value);this._selectionStrategy.selectValue(t,e.event),this._cellClickAction(e)}},_updateTimeComponent(e){const t=new Date(e),i=this._dateOption("value");return i&&this._isSingleMode()&&(t.setHours(i.getHours()),t.setMinutes(i.getMinutes()),t.setSeconds(i.getSeconds()),t.setMilliseconds(i.getMilliseconds())),t},_isMaxZoomLevel(){return this.option("zoomLevel")===this.option("maxZoomLevel")},_navigateDown(e){const t=this.option("zoomLevel");if(this._isMaxZoomLevel())return;const i=Rh.default.getViewDown(t);if(!i)return;let n=this._view.option("contouredDate")||this._view.option("date");e&&(n=(0,c.Z)(e).data("dxDateValueKey")),this._isOtherViewCellClicked=!0,this.option("currentDate",n),this.option("zoomLevel",i),this._isOtherViewCellClicked=!1,this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate")))},_renderNavigator(){this._navigator||(this._navigator=new Hh((0,c.Z)("<div>"),this._navigatorConfig())),this._navigator.option("text",this._getViewsCaption(this._view,this._additionalView)),this._updateButtonsVisibility()},_navigatorConfig(){const{focusStateEnabled:e,rtlEnabled:t}=this.option();return{text:this._getViewsCaption(this._view,this._additionalView),onClick:this._navigatorClickHandler.bind(this),onCaptionClick:this._navigateUp.bind(this),focusStateEnabled:e,rtlEnabled:t,tabIndex:void 0}},_navigatorClickHandler(e){const{currentDate:t,viewsCount:i}=this.option();let n=e.direction;if(i>1){const e=this._isAdditionalViewDate(t);(e&&n<0||!e&&n>0)&&(n*=2)}const o=this._getDateByOffset(n,t);this._moveToClosestAvailableDate(o)},_navigateUp(){const e=this.option("zoomLevel"),t=Rh.default.getViewUp(e);t&&!this._isMinZoomLevel(e)&&(this.option("zoomLevel",t),this._renderNavigator(),this._animateShowView(),this._moveToClosestAvailableDate(),this._setViewContoured(this._getNormalizedDate(this.option("currentDate"))))},_isMinZoomLevel(e){const t=this._getMinDate(),i=this._getMaxDate();return Rh.default.sameView(e,t,i)||this.option("minZoomLevel")===e},_updateButtonsVisibility(){this._navigator.toggleButton("next",!(0,_.$K)(this._afterView)),this._navigator.toggleButton("prev",!(0,_.$K)(this._beforeView))},_renderSwipeable(){this._swipeable||(this._swipeable=this._createComponent(this.$element(),Fh,{onStart:this._swipeStartHandler.bind(this),onUpdated:this._swipeUpdateHandler.bind(this),onEnd:this._swipeEndHandler.bind(this),itemSizeFunc:this._viewWidth.bind(this)}))},_swipeStartHandler(e){mo.default.stop(this._$viewsWrapper,!0);const{viewsCount:t}=this.option();this._toggleGestureCoverCursor("grabbing"),e.event.maxLeftOffset=this._getRequiredView("next")?1/t:0,e.event.maxRightOffset=this._getRequiredView("prev")?1/t:0},_toggleGestureCoverCursor(e){(0,c.Z)(".dx-gesture-cover").css("cursor",e)},_getRequiredView(e){let t;const i=this.option("rtlEnabled");return"next"===e?t=i?this._beforeView:this._afterView:"prev"===e&&(t=i?this._afterView:this._beforeView),t},_swipeUpdateHandler(e){const{offset:t}=e.event;(0,Ws.pB)(this._$viewsWrapper,{left:t*this._viewWidth(),top:0}),this._updateNavigatorCaption(t)},_swipeEndHandler(e){this._toggleGestureCoverCursor("auto");const{currentDate:t,rtlEnabled:i}=this.option(),{targetOffset:n}=e.event,o=n?n/Math.abs(n):0,r=this._isAdditionalViewDate(t)&&(i?-1===o:1===o);if(0===o)return void this._animateWrapper(0,250);const s=-o*this._getRtlCorrection()*(r?2:1);let a=this._getDateByOffset(s);this._isDateInInvalidRange(a)&&(a=o>=0?new Date(this._getMinDate()):new Date(this._getMaxDate())),this.option("currentDate",a)},_viewWidth(){return this._viewWidthValue||(this._viewWidthValue=(0,oe.dz)(this.$element())/this.option("viewsCount")),this._viewWidthValue},_updateNavigatorCaption(e){e*=this._getRtlCorrection();const t=this.option("viewsCount")>1;let i,n;e>.5&&this._beforeView?(i=this._beforeView,n=t&&this._view):e<-.5&&this._afterView?(i=t?this._additionalView:this._afterView,n=t?this._afterView:null):(i=this._view,n=t?this._additionalView:null),this._navigator.option("text",this._getViewsCaption(i,n))},_getViewsCaption(e,t){let i=e.getNavigatorCaption();const{viewsCount:n}=this.option();return n>1&&t&&(i=`${i} - ${t.getNavigatorCaption()}`),i},_isDateInInvalidRange(e){if(this._view.isBoundary(e))return;const t=this._getMinDate(),i=this._getMaxDate(),n=Rh.default.normalizeDate(e,t,i);return n===t||n===i},_renderFooter(){const e=this.option("showTodayButton");if(e){const e=this._createComponent((0,c.Z)("<div>"),_o,{focusStateEnabled:this.option("focusStateEnabled"),text:z.Z.format("dxCalendar-todayButtonText"),onClick:e=>{this._toTodayView(e)},type:(0,Sn.dC)()?"normal":"default",stylingMode:(0,Sn.dC)()?"outlined":"text",integrationOptions:{}}).$element().addClass("dx-calendar-today-button");this._$footer=(0,c.Z)("<div>").addClass("dx-calendar-footer").append(e),this.$element().append(this._$footer)}this.$element().toggleClass("dx-calendar-with-footer",e)},_renderSubmitElement(){this._$submitElement=(0,c.Z)("<input>").attr("type","hidden").appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue(e){const t=this._convertToDate(e);this._getSubmitElement().val($h.Z.serializeDate(t,"yyyy-MM-dd"))},_getSubmitElement(){return this._$submitElement},_animateShowView(){mo.default.stop(this._view.$element(),!0),this._popAnimationView(this._view,.6,1,250),this.option("viewsCount")>1&&(mo.default.stop(this._additionalView.$element(),!0),this._popAnimationView(this._additionalView,.6,1,250))},_popAnimationView:(e,t,i,n)=>mo.default.animate(e.$element(),{type:"pop",from:{scale:t,opacity:t},to:{scale:i,opacity:i},duration:n}),_navigate(e,t){if(0!==e&&1!==Math.abs(e)&&this._isViewAvailable(t)){const i=this._renderSpecificView(t);e>0?(this._afterView&&this._afterView.$element().remove(),this._afterView=i):(this._beforeView&&this._beforeView.$element().remove(),this._beforeView=i),this._translateViews()}const i=-this._getRtlCorrection()*(e>0?1:e<0?-1:0)*this._viewWidth();this._$viewsWrapper.position().left!==i&&(this._preventViewChangeAnimation?this._wrapperAnimationEndHandler(e,t):this._animateWrapper(i,250).done(this._wrapperAnimationEndHandler.bind(this,e,t)))},_animateWrapper(e,t){return mo.default.animate(this._$viewsWrapper,{type:"slide",from:{left:this._$viewsWrapper.position().left},to:{left:e},duration:t})},_getDate:e=>new Date(e),_toTodayView(e){const t=new Date;this._isMaxZoomLevel()?this._selectionStrategy.selectValue(t,e.event):(this._preventViewChangeAnimation=!0,this.option("zoomLevel",this.option("maxZoomLevel")),this._selectionStrategy.selectValue(t,e.event),this._animateShowView(),this._preventViewChangeAnimation=!1)},_wrapperAnimationEndHandler(e,t){this._rearrangeViews(e),this._translateViews(),this._resetLocation(),this._renderNavigator(),this._setViewContoured(t),this._updateAriaId(t),this._selectionStrategy.updateAriaSelected()},_rearrangeViews(e){var t;if(0===e)return;const{viewsCount:i}=this.option();let n,o,r,s,a;if(e<0?(n=1,o="_beforeView",r="_afterView",s="_view",a=1===i?"_view":"_additionalView"):(n=-1,o="_afterView",r="_beforeView",s=1===i?"_view":"_additionalView",a="_view"),!this[o])return;const l=this[o].option("date");null===(t=this[r])||void 0===t||t.$element().remove(),this[r]=this._renderSpecificView(this._getDateByOffset(n*i,l)),this[a].$element().remove(),1===i?this[a]=this[o]:(this[a]=this[s],this[s]=this[o]);const c=this._getDateByOffset(-n,l);this[o]=this._isViewAvailable(c)?this._renderSpecificView(c):null},_resetLocation(){(0,Ws.pB)(this._$viewsWrapper,{left:0,top:0})},_clean(){this.callBase(),this._clearViewWidthCache(),delete this._$viewsWrapper,delete this._navigator,delete this._$footer},_clearViewWidthCache(){delete this._viewWidthValue},_disposeViews(){this._view.$element().remove(),this._beforeView&&this._beforeView.$element().remove(),this._additionalView&&this._additionalView.$element().remove(),this._afterView&&this._afterView.$element().remove(),delete this._view,delete this._additionalView,delete this._beforeView,delete this._afterView,delete this._skipNavigate},_dispose(){clearTimeout(this._waitRenderViewTimeout),this.callBase()},_refreshViews(){this._resetActiveState(),this._disposeViews(),this._renderViews()},_visibilityChanged(){this._translateViews()},_shouldSkipFocusEvent(e){const{target:t,relatedTarget:i}=e;return(0,c.Z)(t).parents(".dx-calendar").length&&(0,c.Z)(i).parents(".dx-calendar").length},_focusInHandler(e){(0,c.Z)(e.target).is(this._$viewsWrapper)&&this._setViewContoured(this.option("currentDate")),this._shouldSkipFocusEvent(e)||(this.callBase.apply(this,arguments),this._toggleFocusClass(!0,this.$element()))},_focusOutHandler(e){var t;(0,c.Z)(e.target).is(this._$viewsWrapper)&&(this._view.option("contouredDate",null),null===(t=this._additionalView)||void 0===t||t.option("contouredDate",null)),this._shouldSkipFocusEvent(e)||(this.callBase.apply(this,arguments),this._toggleFocusClass(!1,this.$element()))},_updateViewsOption(e,t){var i,n,o;this._view.option(e,t),null===(i=this._additionalView)||void 0===i||i.option(e,t),null===(n=this._beforeView)||void 0===n||n.option(e,t),null===(o=this._afterView)||void 0===o||o.option(e,t)},_setViewsMinOption(e){this._restoreViewsMinMaxOptions(),this.option("_rangeMin",this._convertToDate(e)),this._updateViewsOption("min",this._getMinDate())},_setViewsMaxOption(e){this._restoreViewsMinMaxOptions(),this.option("_rangeMax",this._convertToDate(e)),this._updateViewsOption("max",this._getMaxDate())},_restoreViewsMinMaxOptions(){this._resetActiveState(),this.option({_rangeMin:null,_rangeMax:null}),this._updateViewsOption("min",this._getMinDate()),this._updateViewsOption("max",this._getMaxDate())},_updateNavigatorLabels(){let e=this.option("zoomLevel");e=e.charAt(0).toUpperCase()+e.slice(1);const t=this._navigator._caption.option("text"),i=z.Z.format(`dxCalendar-previous${e}ButtonLabel`),n=z.Z.format(`dxCalendar-caption${e}Label`),o=z.Z.format(`dxCalendar-next${e}ButtonLabel`);this.setAria("label",i,this._navigator._prevButton.$element()),this.setAria("label",`${t}. ${n}`,this._navigator._caption.$element()),this.setAria("label",o,this._navigator._nextButton.$element())},_updateAriaSelected(e,t){t.forEach((e=>{this.setAria("selected",!1,this._view._getCellByDate(e))})),e.forEach((e=>{this.setAria("selected",!0,this._view._getCellByDate(e))})),this.option("viewsCount")>1&&(t.forEach((e=>{this.setAria("selected",!1,this._additionalView._getCellByDate(e))})),e.forEach((e=>{this.setAria("selected",!0,this._additionalView._getCellByDate(e))})))},_updateAriaId(e){e=e??this.option("currentDate");const t=`dx-${new V.Z}`,i=this._getActiveView(e)._getCellByDate(e);this.setAria("id",t,i),this.setAria("activedescendant",t),this._onContouredChanged(t)},_suppressingNavigation(e,t){this._suppressNavigation=!0,e.apply(this,t),delete this._suppressNavigation},_optionChanged(e){const{value:t,previousValue:i}=e;switch(e.name){case"width":this.callBase(e),this._clearViewWidthCache();break;case"min":case"max":this.min=void 0,this.max=void 0,this._suppressingNavigation(this._updateCurrentDate,[this.option("currentDate")]),this._refreshViews(),this._renderNavigator();break;case"selectionMode":this._refreshSelectionStrategy(),this._initCurrentDate();break;case"selectWeekOnClick":case"_todayDate":case"showWeekNumbers":case"weekNumberRule":this._refreshViews();break;case"firstDayOfWeek":this._refreshViews(),this._updateButtonsVisibility();break;case"focusStateEnabled":case"disabledDates":case"dateSerializationFormat":case"cellTemplate":case"showTodayButton":this._invalidate();break;case"currentDate":this.setAria("id",void 0,this._view._getCellByDate(i)),this._updateCurrentDate(t);break;case"zoomLevel":this.$element().removeClass(`dx-calendar-view-${i}`),this._correctZoomLevel(),this._refreshViews(),this._renderNavigator(),this._updateAriaId(),this._updateNavigatorLabels();break;case"minZoomLevel":case"maxZoomLevel":this._correctZoomLevel(),this._updateButtonsVisibility();break;case"value":this._selectionStrategy.processValueChanged(t,i),this._setSubmitValue(t),this.callBase(e);break;case"viewsCount":this._refreshViews(),this._renderNavigator();break;case"onCellClick":this._view.option("onCellClick",t);break;case"onContouredChanged":this._onContouredChanged=this._createActionByOption("onContouredChanged");break;case"skipFocusCheck":break;default:this.callBase(e)}},getContouredDate(){return this._view.option("contouredDate")}});(0,r.default)("dxCalendar",ru);const su=ru,{abstract:au}=g.default,lu=g.default.inherit({ctor(e){this.dateBox=e},widgetOption(){return this._widget&&this._widget.option.apply(this._widget,arguments)},_renderWidget(e){e=e||(0,c.Z)("<div>"),this._widget=this._createWidget(e),this._widget.$element().appendTo(this._getWidgetContainer())},_createWidget(e){const t=this._getWidgetName(),i=this._getWidgetOptions();return this.dateBox._createComponent(e,t,i)},_getWidgetOptions:au,_getWidgetName:au,getDefaultOptions:()=>({mode:"text"}),getDisplayFormat:au,supportedKeys:u.noop,getKeyboardListener:u.noop,customizeButtons:u.noop,getParsedText:(e,t)=>Bh.Z.parse(e,t)||Bh.Z.parse(e),renderInputMinMax:u.noop,renderOpenedState(){this._updateValue()},popupConfig:au,_dimensionChanged(){var e;null===(e=this._getPopup())||void 0===e||e.repaint()},renderPopupContent(){const e=this._getPopup();this._renderWidget();const t=e.$content().parent();m.Z.off(t,"mousedown"),m.Z.on(t,"mousedown",this._preventFocusOnPopup.bind(this))},_preventFocusOnPopup(e){e.preventDefault()},_getWidgetContainer(){return this._getPopup().$content()},_getPopup(){return this.dateBox._popup},popupShowingHandler:u.noop,popupHiddenHandler:u.noop,_updateValue(){this._widget&&this._widget.option("value",this.dateBoxValue())},useCurrentDateByDefault:u.noop,getDefaultDate:()=>new Date,textChangedHandler:u.noop,renderValue(){this.dateBox.option("opened")&&this._updateValue()},getValue(){return this._widget.option("value")},isAdaptivityChanged:()=>!1,dispose(){const e=this._getPopup();e&&e.$content().empty()},dateBoxValue(){return arguments.length?this.dateBox.dateValue.apply(this.dateBox,arguments):this.dateBox.dateOption.apply(this.dateBox,["value"])}}),cu=lu,du=cu.inherit({NAME:"Calendar",getDefaultOptions(){return(0,f.l)(this.callBase(),{todayButtonText:z.Z.format("dxCalendar-todayButtonText")})},supportedKeys(){const e=function(e){return!!this.option("opened")&&(e.preventDefault(),!0)};return{rightArrow(){if(this.option("opened"))return!0},leftArrow(){if(this.option("opened"))return!0},enter:function(e){if(this.dateBox.option("opened")){if(e.preventDefault(),this._widget.option("zoomLevel")===this._widget.option("maxZoomLevel")){const t=this._getContouredValue(),i=this._lastActionElement,n=this._closeDropDownByEnter();return n&&t&&"calendar"===i&&this.dateBoxValue(t,e),n&&this.dateBox.close(),this.dateBox._valueChangeEventHandler(e),!n}return!0}this.dateBox._valueChangeEventHandler(e)}.bind(this),home:e,end:e}},getDisplayFormat:e=>e||"shortdate",_closeDropDownByEnter:()=>!0,_getWidgetName:()=>su,_getContouredValue(){return this._widget._view.option("contouredDate")},getKeyboardListener(){return this._widget},_getWidgetOptions(){const e=this.dateBox.option("disabledDates");return(0,f.l)(this.dateBox.option("calendarOptions"),{value:this.dateBoxValue()||null,selectionMode:"single",dateSerializationFormat:null,min:this.dateBox.dateOption("min"),max:this.dateBox.dateOption("max"),onValueChanged:this._valueChangedHandler.bind(this),onCellClick:this._cellClickHandler.bind(this),disabledDates:(0,_.mf)(e)?this._injectComponent(e.bind(this.dateBox)):e,onContouredChanged:this._refreshActiveDescendant.bind(this),skipFocusCheck:!0})},_injectComponent(e){const t=this;return function(i){return(0,f.l)(i,{component:t.dateBox}),e(i)}},_refreshActiveDescendant(e){this._lastActionElement="calendar",this.dateBox.setAria("activedescendant",e.actionValue)},_getTodayButtonConfig(){const e=this.dateBox.option("buttonsLocation"),t="default"===e?["bottom","center"]:(0,u.splitPair)(e),i=(0,Sn.x2)()?"text":"outlined";return{widget:"dxButton",toolbar:t[0],location:"after"===t[1]?"before":t[1],options:{onClick:e=>{this._widget._toTodayView(e)},text:this.dateBox.option("todayButtonText"),elementAttr:{class:"dx-button-today"},stylingMode:i}}},_isCalendarVisible(){const{calendarOptions:e}=this.dateBox.option();return(0,_.Qr)(e)||!1!==e.visible},_getPopupToolbarItems(e){return"useButtons"===this.dateBox.option("applyValueMode")&&this._isCalendarVisible()?[this._getTodayButtonConfig(),...e]:e},popupConfig:e=>(0,f.l)(!0,e,{position:{collision:"flipfit flip"},width:"auto"}),_valueChangedHandler(e){const{value:t}=e,i=e.previousValue;Rh.default.sameDate(t,i)&&Rh.default.sameHoursAndMinutes(t,i)||"instantly"===this.dateBox.option("applyValueMode")&&this.dateBoxValue(this.getValue(),e.event)},_updateValue(){this._widget&&this._widget.option("value",this.dateBoxValue())},textChangedHandler(){this._lastActionElement="input",this.dateBox.option("opened")&&this._widget&&this._updateValue(!0)},_cellClickHandler(e){const{dateBox:t}=this;"instantly"===t.option("applyValueMode")&&(t.option("opened",!1),this.dateBoxValue(this.getValue(),e.event))}}),hu=du,uu={row:"minWidth",col:"minHeight"},pu={row:"maxWidth",col:"maxHeight"},fu={start:"flex-start",end:"flex-end",center:"center","space-between":"space-between","space-around":"space-around"},_u={start:"flex-start",end:"flex-end",center:"center",stretch:"stretch"},mu={row:"row",col:"column"},gu=(e,t,i)=>{if(i=(0,Qn.bh)(t,i),e.style[(0,Qn.Hj)(t)]=i,!(0,Z.hasWindow)()){if(""===i||!(0,_.$K)(i))return;const n=`${(0,En.dasherize)(t)}: ${i};`;(0,Qn.A_)(e,n,!1)}};class vu{constructor(e,t){this._$element=e,this._option=t}renderBox(){this._$element.css({display:`${(0,Qn.gC)("flexDirection")}flex`}),gu(this._$element.get(0),"flexDirection",mu[this._option("direction")])}renderAlign(){this._$element.css({justifyContent:this._normalizedAlign()})}_normalizedAlign(){const e=this._option("align");return e in fu?fu[e]:e}renderCrossAlign(){this._$element.css({alignItems:this._normalizedCrossAlign()})}_normalizedCrossAlign(){const e=this._option("crossAlign");return e in _u?_u[e]:e}renderItems(e){const t=(0,Qn.gC)("flexDirection"),i=this._option("direction");(0,j.each)(e,(function(){const e=(0,c.Z)(this),n=e.data("dxBoxItemData");e.css({display:`${t}flex`}).css(pu[i],n.maxSize||"none").css(uu[i],n.minSize||"0"),gu(e.get(0),"flexBasis",n.baseSize||0),gu(e.get(0),"flexGrow",n.ratio),gu(e.get(0),"flexShrink",(0,_.$K)(n.shrink)?n.shrink:1),e.children().each(((e,t)=>{(0,c.Z)(t).css({width:"auto",height:"auto",display:`${(0,Qn.gC)("flexDirection")}flex`,flexBasis:0}),gu(t,"flexGrow",1),gu(t,"flexDirection",(0,c.Z)(t)[0].style.flexDirection||"column")}))}))}}class bu extends wr{_getDefaultOptions(){return(0,f.l)(super._getDefaultOptions(),{direction:"row",align:"start",crossAlign:"stretch",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,_queue:void 0})}_itemClass(){return"dx-box-item"}_itemDataKey(){return"dxBoxItemData"}_itemElements(){return this._itemContainer().children(this._itemSelector())}_init(){super._init(),this.$element().addClass("dx-box-flex"),this._initLayout(),this._initBoxQueue()}_initLayout(){this._layout=new vu(this.$element(),this.option.bind(this))}_initBoxQueue(){this._queue=this.option("_queue")||[]}_queueIsNotEmpty(){return!this.option("_queue")&&!!this._queue.length}_pushItemToQueue(e,t){this._queue.push({$item:e,config:t})}_shiftItemFromQueue(){return this._queue.shift()}_initMarkup(){this.$element().addClass("dx-box"),this._layout.renderBox(),super._initMarkup(),this._renderAlign(),this._renderActions()}_renderActions(){this._onItemStateChanged=this._createActionByOption("onItemStateChanged")}_renderAlign(){this._layout.renderAlign(),this._layout.renderCrossAlign()}_renderItems(e){for(super._renderItems(e);this._queueIsNotEmpty();){const e=this._shiftItemFromQueue();this._createComponent(e.$item,bu,(0,f.l)({itemTemplate:this.option("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this.option("onItemHold"),onItemClick:this.option("onItemClick"),onItemContextMenu:this.option("onItemContextMenu"),onItemRendered:this.option("onItemRendered"),_queue:this._queue},e.config))}this._layout.renderItems(this._itemElements())}_renderItemContent(e){const t=e.itemData&&e.itemData.node;return t?this._renderItemContentByNode(e,t):super._renderItemContent(e)}_postprocessRenderItem(e){const t=e.itemData.box;t&&this._pushItemToQueue(e.itemContent,t)}_createItemByTemplate(e,t){return t.itemData.box?e.source?e.source():(0,c.Z)():super._createItemByTemplate(e,t)}_itemOptionChanged(e,t,i,n){"visible"===t&&this._onItemStateChanged({name:t,state:i,oldState:!1!==n}),super._itemOptionChanged(e,t,i)}_optionChanged(e){switch(e.name){case"_queue":case"direction":this._invalidate();break;case"align":this._layout.renderAlign();break;case"crossAlign":this._layout.renderCrossAlign();break;default:super._optionChanged(e)}}_itemOptions(){const e=super._itemOptions();return e.fireItemStateChangedAction=e=>{this._onItemStateChanged(e)},e}}bu.ItemClass=class extends hr{_renderVisible(e,t){super._renderVisible(e),(0,_.$K)(t)&&this._options.fireItemStateChangedAction({name:"visible",state:e,oldState:t})}},(0,r.default)("dxBox",bu);const yu=bu,Cu=["year","day","month","day"],wu=["hours","minutes","seconds","milliseconds"],xu={SUPPORTED_FORMATS:["date","time","datetime"],ONE_MINUTE:6e4,ONE_DAY:864e5,ONE_YEAR:31536e6,MIN_DATEVIEW_DEFAULT_DATE:new Date(1900,0,1),MAX_DATEVIEW_DEFAULT_DATE:function(){const e=new Date;return new Date(e.getFullYear()+50,e.getMonth(),e.getDate(),23,59,59)}(),FORMATS_INFO:{date:{getStandardPattern:()=>"yyyy-MM-dd",components:Cu},time:{getStandardPattern:()=>"HH:mm",components:wu},datetime:{getStandardPattern(){let e;return function(){const t=(0,c.Z)("<input>").attr("type","datetime");t.val("2000-01-01T01:01Z"),t.val()&&(e="yyyy-MM-ddTHH:mmZ")}(),e||(e="yyyy-MM-ddTHH:mm:ssZ"),xu.FORMATS_INFO.datetime.getStandardPattern=function(){return e},e},components:[...Cu,...wu]},"datetime-local":{getStandardPattern:()=>"yyyy-MM-ddTHH:mm:ss",components:[...Cu,"hours","minutes","seconds"]}},FORMATS_MAP:{date:"shortdate",time:"shorttime",datetime:"shortdateshorttime"},SUBMIT_FORMATS_MAP:{date:"date",time:"time",datetime:"datetime-local"},toStandardDateFormat(e,t){const i=xu.FORMATS_INFO[t].getStandardPattern();return $h.Z.serializeDate(e,i)},fromStandardDateFormat(e){const t=$h.Z.dateParser(e);return(0,_.J_)(t)?t:void 0},getMaxMonthDay:(e,t)=>new Date(e,t+1,0).getDate(),mergeDates(e,t,i){if(!t)return t||null;if(!e||isNaN(e.getTime())){const t=new Date(null);e=new Date(t.getFullYear(),t.getMonth(),t.getDate())}const n=new Date(e.valueOf()),o=xu.FORMATS_INFO[i];return(0,j.each)(o.components,(function(){const e=xu.DATE_COMPONENTS_INFO[this];n[e.setter](t[e.getter]())})),n},getLongestCaptionIndex(e){let t,i=0,n=0;for(t=0;t<e.length;++t)e[t].length>n&&(i=t,n=e[t].length);return i},formatUsesMonthName:e=>Bh.Z.formatUsesMonthName(e),formatUsesDayName:e=>Bh.Z.formatUsesDayName(e),getLongestDate(e,t,i){const n=function(e){const t=typeof e;return"string"===t?"format":"object"===t&&void 0!==e.type?e.type:null}(e);let o=9;n&&!xu.formatUsesMonthName(n)||(o=xu.getLongestCaptionIndex(t));const r=new Date(1888,o,21,23,59,59,999);if(!n||xu.formatUsesDayName(n)){const e=r.getDate()-r.getDay()+xu.getLongestCaptionIndex(i);r.setDate(e)}return r},normalizeTime(e){e.setSeconds(0),e.setMilliseconds(0)}};xu.DATE_COMPONENTS_INFO={year:{getter:"getFullYear",setter:"setFullYear",formatter(e,t){const i=new Date(t.getTime());return i.setFullYear(e),Bh.Z.format(i,"yyyy")},startValue:void 0,endValue:void 0},day:{getter:"getDate",setter:"setDate",formatter(e,t){const i=new Date(t.getTime());return i.setDate(e),Bh.Z.format(i,"d")},startValue:1,endValue:void 0},month:{getter:"getMonth",setter:"setMonth",formatter:e=>Bh.Z.getMonthNames()[e],startValue:0,endValue:11},hours:{getter:"getHours",setter:"setHours",formatter:e=>Bh.Z.format(new Date(0,0,0,e),"hour"),startValue:0,endValue:23},minutes:{getter:"getMinutes",setter:"setMinutes",formatter:e=>Bh.Z.format(new Date(0,0,0,0,e),"minute"),startValue:0,endValue:59},seconds:{getter:"getSeconds",setter:"setSeconds",formatter:e=>Bh.Z.format(new Date(0,0,0,0,0,e),"second"),startValue:0,endValue:59},milliseconds:{getter:"getMilliseconds",setter:"setMilliseconds",formatter:e=>Bh.Z.format(new Date(0,0,0,0,0,0,e),"millisecond"),startValue:0,endValue:999}};const Su=xu,Iu=me.inherit({_supportedKeys(){return(0,f.l)(this.callBase(),{space:function(e){e.preventDefault(),this._clickAction({event:e})}})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{hoverStateEnabled:!0,activeStateEnabled:!0,value:!1})},_canValueBeChangedByClick:()=>!0,_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===a.default.real().deviceType&&!a.default.isSimulator(),options:{focusStateEnabled:!0}}])},_init(){this.callBase(),this.$element().addClass("dx-radiobutton")},_initMarkup(){this.callBase(),this._renderIcon(),this._renderCheckedState(this.option("value")),this._renderClick(),this.setAria("role","radio")},_renderIcon(){this._$icon=(0,c.Z)("<div>").addClass("dx-radiobutton-icon"),(0,c.Z)("<div>").addClass("dx-radiobutton-icon-dot").appendTo(this._$icon),this.$element().append(this._$icon)},_renderCheckedState(e){this.$element().toggleClass("dx-radiobutton-checked",e).find(".dx-radiobutton-icon").toggleClass("dx-radiobutton-icon-checked",e),this.setAria("checked",e)},_renderClick(){const e=(0,v.addNamespace)(He.name,this.NAME);this._clickAction=this._createAction((e=>{this._clickHandler(e.event)})),m.Z.off(this.$element(),e),m.Z.on(this.$element(),e,(e=>{this._clickAction({event:e})}))},_clickHandler(e){this._saveValueChangeEvent(e),this.option("value",!0)},_optionChanged(e){"value"===e.name?(this._renderCheckedState(e.value),this.callBase(e)):this.callBase(e)}});(0,r.default)("dxRadioButton",Iu);const ku=Iu,Eu="dxListEditDecorator",Ou=(0,v.addNamespace)(Ms,Eu),Tu=(0,v.addNamespace)(Rs,Eu),Du=(0,v.addNamespace)($s,Eu),Bu=g.default.inherit({ctor(e){this._list=e,this._init()},_init:u.noop,_shouldHandleSwipe:!1,_attachSwipeEvent(e){const t={itemSizeFunc:function(){return this._clearSwipeCache&&(this._itemWidthCache=(0,oe.dz)(this._list.$element()),this._clearSwipeCache=!1),this._itemWidthCache}.bind(this)};m.Z.on(e.$itemElement,Ou,t,this._itemSwipeStartHandler.bind(this)),m.Z.on(e.$itemElement,Tu,this._itemSwipeUpdateHandler.bind(this)),m.Z.on(e.$itemElement,Du,this._itemSwipeEndHandler.bind(this))},_itemSwipeStartHandler(e){const t=(0,c.Z)(e.currentTarget);t.is(".dx-state-disabled, .dx-state-disabled *")?e.cancel=!0:(clearTimeout(this._list._inkRippleTimer),this._swipeStartHandler(t,e))},_itemSwipeUpdateHandler(e){const t=(0,c.Z)(e.currentTarget);this._swipeUpdateHandler(t,e)},_itemSwipeEndHandler(e){const t=(0,c.Z)(e.currentTarget);this._swipeEndHandler(t,e),this._clearSwipeCache=!0},beforeBag:u.noop,afterBag:u.noop,_commonOptions(){return{activeStateEnabled:this._list.option("activeStateEnabled"),hoverStateEnabled:this._list.option("hoverStateEnabled"),focusStateEnabled:this._list.option("focusStateEnabled")}},modifyElement(e){this._shouldHandleSwipe&&(this._attachSwipeEvent(e),this._clearSwipeCache=!0)},afterRender:u.noop,handleClick:u.noop,handleKeyboardEvents:u.noop,handleEnterPressing:u.noop,handleContextMenu:u.noop,_swipeStartHandler:u.noop,_swipeUpdateHandler:u.noop,_swipeEndHandler:u.noop,visibilityChange:u.noop,getExcludedSelectors:u.noop,dispose:u.noop}),Au="dx-list-select-decorator-enabled",Pu=(0,v.addNamespace)(He.name,"dxListEditDecorator");!function(e,t,i){const n=Wa,o={};o[e]=n[e]?n[e]:{},o[e].default=i,(0,f.l)(n,o)}("selection",0,Bu.inherit({_init(){this.callBase.apply(this,arguments);const e=this._list.option("selectionMode");this._singleStrategy="single"===e,this._containerClass=this._singleStrategy?"dx-list-select-radiobutton-container":"dx-list-select-checkbox-container",this._controlClass=this._singleStrategy?"dx-list-select-radiobutton":"dx-list-select-checkbox",this._controlWidget=this._singleStrategy?ku:Dh,this._list.$element().addClass(Au)},beforeBag(e){const{$itemElement:t}=e,i=e.$container.addClass(this._containerClass),n=(0,c.Z)("<div>").addClass(this._controlClass).appendTo(i);new this._controlWidget(n,(0,f.l)(this._commonOptions(),{value:this._isSelected(t),elementAttr:{"aria-label":z.Z.format("CheckState")},focusStateEnabled:!1,hoverStateEnabled:!1,onValueChanged:function(e){e.event&&this._list._saveSelectionChangeEvent(e.event),this._processCheckedState(t,e.value),e.event&&e.event.stopPropagation()}.bind(this)}))},modifyElement(e){this.callBase.apply(this,arguments);const{$itemElement:t}=e,i=this._controlWidget.getInstance(t.find(`.${this._controlClass}`));m.Z.on(t,"stateChanged",((e,t)=>{i.option("value",t)}))},_updateSelectAllState(){this._$selectAll&&this._selectAllCheckBox.option("value",this._list.isSelectAll())},afterRender(){"all"===this._list.option("selectionMode")&&(this._$selectAll?this._updateSelectAllState():this._renderSelectAll())},handleKeyboardEvents(e,t){const i=!t,n=this._list,o=this._$selectAll,r=n._getLastItemIndex();return!(!o||!(t&&0===e||i&&e===r)||(n.option("focusedElement",o),n.scrollToItem(n.option("focusedElement")),0))},handleEnterPressing(e){if(this._$selectAll&&this._$selectAll.hasClass("dx-state-focused"))return e.target=this._$selectAll.get(0),this._list._saveSelectionChangeEvent(e),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value")),!0},_renderSelectAll(){this._$selectAll=(0,c.Z)("<div>").addClass("dx-list-select-all");const e=this._list._supportedKeys().downArrow.bind(this._list),t=(0,c.Z)("<div>").addClass("dx-list-select-all-checkbox").appendTo(this._$selectAll);this._selectAllCheckBox=this._list._createComponent(t,Dh,{elementAttr:{"aria-label":z.Z.format("dxList-selectAll")},focusStateEnabled:!1,hoverStateEnabled:!1}),this._selectAllCheckBox.registerKeyHandler("downArrow",e),(0,c.Z)("<div>").addClass("dx-list-select-all-label").text(this._list.option("selectAllText")).appendTo(this._$selectAll),this._list.itemsContainer().prepend(this._$selectAll),this._updateSelectAllState(),this._updateSelectAllAriaLabel(),this._attachSelectAllHandler()},_attachSelectAllHandler(){this._selectAllCheckBox.option("onValueChanged",this._selectAllHandler.bind(this)),m.Z.off(this._$selectAll,Pu),m.Z.on(this._$selectAll,Pu,this._selectAllClickHandler.bind(this))},_updateSelectAllAriaLabel(){if(!this._$selectAll)return;const{value:e}=this._selectAllCheckBox.option(),t=void 0===e?"indeterminate":e?"checked":"notChecked",i=`${z.Z.format("dxList-selectAll")}, ${z.Z.format(`dxList-selectAll-${t}`)}`;this._$selectAll.attr({"aria-label":i})},_selectAllHandler(e){e.event&&e.event.stopPropagation(),e.event&&this._list._saveSelectionChangeEvent(e.event);const{value:t}=this._selectAllCheckBox.option();t?this._selectAllItems():!1===t&&this._unselectAllItems(),this._updateSelectAllAriaLabel(),this._list._createActionByOption("onSelectAllValueChanged")({value:t})},_checkSelectAllCapability(){const e=this._list,t=e._dataController;return!("allPages"===e.option("selectAllMode")&&e.option("grouped")&&!t.group()&&(ge.Z.log("W1010"),1))},_selectAllItems(){this._checkSelectAllCapability()&&this._list._selection.selectAll("page"===this._list.option("selectAllMode"))},_unselectAllItems(){this._checkSelectAllCapability()&&this._list._selection.deselectAll("page"===this._list.option("selectAllMode"))},_selectAllClickHandler(e){this._list._saveSelectionChangeEvent(e),this._selectAllCheckBox.option("value",!this._selectAllCheckBox.option("value"))},_isSelected(e){return this._list.isItemSelected(e)},_processCheckedState(e,t){t?this._list.selectItem(e):this._list.unselectItem(e)},dispose(){this._disposeSelectAll(),this._list.$element().removeClass(Au),this.callBase.apply(this,arguments)},_disposeSelectAll(){this._$selectAll&&(this._$selectAll.remove(),this._$selectAll=null)}}));var Mu=i(1258),Ru=i(3677);const $u=(0,f.l)({},Qo.Z,{_dataExpressionDefaultOptions:()=>({items:[],dataSource:null,itemTemplate:"item",value:null,valueExpr:"this",displayExpr:void 0}),_initDataExpressions(){this._compileValueGetter(),this._compileDisplayGetter(),this._initDynamicTemplates(),this._initDataSource(),this._itemsToDataSource()},_itemsToDataSource(){this.option("dataSource")||(this._dataSource=new Vo.o({store:new Ru.Z(this.option("items")),pageSize:0}),this._initDataController())},_compileDisplayGetter(){this._displayGetter=(0,hn.vb)(this._displayGetterExpr())},_displayGetterExpr(){return this.option("displayExpr")},_compileValueGetter(){this._valueGetter=(0,hn.vb)(this._valueGetterExpr())},_valueGetterExpr(){return this.option("valueExpr")||"this"},_loadValue(e){const t=(0,p.BH)();return e=this._unwrappedValue(e),(0,_.$K)(e)?(this._loadSingle(this._valueGetterExpr(),e).done((i=>{this._isValueEquals(this._valueGetter(i),e)?t.resolve(i):t.reject()})).fail((()=>{t.reject()})),this._loadValueDeferred=t,t.promise()):t.reject().promise()},_rejectValueLoading(){var e;null===(e=this._loadValueDeferred)||void 0===e||e.reject({shouldSkipCallback:!0})},_getCurrentValue(){return this.option("value")},_unwrappedValue(e){return(e=e??this._getCurrentValue())&&this._dataSource&&"this"===this._valueGetterExpr()&&(e=this._getItemKey(e)),Mu.Z.unwrap(e)},_getItemKey(e){const t=this._dataSource.key();if(Array.isArray(t)){const i={};for(let n=0,o=t.length;n<o;n++)i[t[n]]=e[t[n]];return i}return t&&"object"==typeof e&&(e=e[t]),e},_isValueEquals(e,t){const i=this._dataSource&&this._dataSource.key();let n=this._compareValues(e,t);return!n&&i&&(0,_.$K)(e)&&(0,_.$K)(t)&&(n=Array.isArray(i)?this._compareByCompositeKey(e,t,i):this._compareByKey(e,t,i)),n},_compareByCompositeKey(e,t,i){const n=_.Kn;if(!n(e)||!n(t))return!1;for(let n=0,o=i.length;n<o;n++)if(e[i[n]]!==t[i[n]])return!1;return!0},_compareByKey(e,t,i){const n=Mu.Z.unwrap,o=(0,u.ensureDefined)(n(e[i]),e),r=(0,u.ensureDefined)(n(t[i]),t);return this._compareValues(o,r)},_compareValues:(e,t)=>(0,hn.Ex)(e,!0)===(0,hn.Ex)(t,!0),_initDynamicTemplates:u.noop,_setCollectionWidgetItemTemplate(){this._initDynamicTemplates(),this._setCollectionWidgetOption("itemTemplate",this.option("itemTemplate"))},_getCollectionKeyExpr(){const e=this.option("valueExpr");return(0,_.HD)(e)&&"this"!==e||(0,_.mf)(e)?e:null},_dataExpressionOptionChanged(e){switch(e.name){case"items":this._itemsToDataSource(),this._setCollectionWidgetOption("items");break;case"dataSource":this._initDataSource();break;case"itemTemplate":this._setCollectionWidgetItemTemplate();break;case"valueExpr":this._compileValueGetter();break;case"displayExpr":this._compileDisplayGetter(),this._initDynamicTemplates(),this._setCollectionWidgetOption("displayExpr")}}}),Nu=$u,Vu=(0,Z.getWindow)(),Fu=["startswith","contains","endwith","notcontains"],Zu="android"!==a.default.real().platform,Hu=Gc.inherit({_supportedKeys(){const e=this.callBase();return(0,f.l)({},e,{tab(t){if(this._allowSelectItemByTab()){this._saveValueChangeEvent(t);const e=(0,c.Z)(this._list.option("focusedElement"));e.length&&this._setSelectedElement(e)}e.tab.apply(this,arguments)},space:u.noop,home:u.noop,end:u.noop})},_allowSelectItemByTab(){return this.option("opened")&&"instantly"===this.option("applyValueMode")},_setSelectedElement(e){const t=this._valueGetter(this._list._getItemData(e));this._setValue(t)},_setValue(e){this.option("value",e)},_getDefaultOptions(){return(0,f.l)(this.callBase(),(0,f.l)(Nu._dataExpressionDefaultOptions(),{displayValue:void 0,searchEnabled:!1,searchMode:"contains",searchTimeout:500,minSearchLength:0,searchExpr:null,valueChangeEvent:"input change keyup",selectedItem:null,noDataText:z.Z.format("dxCollectionWidget-noDataText"),encodeNoDataText:!1,onSelectionChanged:null,onItemClick:u.noop,showDataBeforeSearch:!1,grouped:!1,groupTemplate:"group",popupPosition:{my:"left top",at:"left bottom",offset:{h:0,v:0},collision:"flip"},wrapItemText:!1,useItemTextAsTitle:!1}))},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{popupPosition:{offset:{v:-1}}}},{device:{platform:"generic"},options:{buttonsLocation:"bottom center"}}])},_setOptionsByReference(){this.callBase(),(0,f.l)(this._optionsByReference,{value:!0,selectedItem:!0,displayValue:!0})},_init(){this.callBase(),this._initDataExpressions(),this._initActions(),this._setListDataSource(),this._validateSearchMode(),this._clearSelectedItem(),this._initItems()},_setListFocusedElementOptionChange(){this._list._updateParentActiveDescendant=this._updateActiveDescendant.bind(this)},_initItems(){const{items:e}=this.option();e&&!e.length&&this._dataSource&&(this.option().items=this._dataSource.items())},_initActions(){this._initContentReadyAction(),this._initSelectionChangedAction(),this._initItemClickAction()},_initContentReadyAction(){this._contentReadyAction=this._createActionByOption("onContentReady",{excludeValidators:["disabled","readOnly"]})},_initSelectionChangedAction(){this._selectionChangedAction=this._createActionByOption("onSelectionChanged",{excludeValidators:["disabled","readOnly"]})},_initItemClickAction(){this._itemClickAction=this._createActionByOption("onItemClick")},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new Rl.s("item")})},_isEditable(){return this.callBase()||this.option("searchEnabled")},_saveFocusOnWidget(){this._list&&this._list.initialOption("focusStateEnabled")&&this._focusInput()},_fitIntoRange:(e,t,i)=>e>i?t:e<t?i:e,_items(){const e=this._getPlainItems(!this._list&&this._dataSource.items());return new Zo.Z(e).filter("disabled","<>",!0).toArray()},_calcNextItem(e){const t=this._items();return t[this._fitIntoRange(this._getSelectedIndex()+e,0,t.length-1)]},_getSelectedIndex(){const e=this._items(),t=this.option("selectedItem");let i=-1;return(0,j.each)(e,((e,n)=>{if(this._isValueEquals(n,t))return i=e,!1})),i},_createPopup(){this.callBase(),this._updateCustomBoundaryContainer(),this._popup.$wrapper().addClass(this._popupWrapperClass());const e=this._popup.$content();m.Z.off(e,"mouseup"),m.Z.on(e,"mouseup",this._saveFocusOnWidget.bind(this))},_updateCustomBoundaryContainer(){const e=this.option("dropDownOptions.container"),t=e&&(0,c.Z)(e);if(t&&t.length&&!(0,_.FJ)(t.get(0))){const e=[].slice.call(t.parents());e.unshift(t.get(0)),(0,j.each)(e,((e,t)=>t!==(0,c.Z)("body").get(0)&&("hidden"===Vu.getComputedStyle(t).overflowY?(this._$customBoundaryContainer=(0,c.Z)(t),!1):void 0)))}},_popupWrapperClass:()=>"dx-dropdownlist-popup-wrapper",_renderInputValue(){const e=this._getCurrentValue();return this._rejectValueLoading(),this._loadInputValue(e,this._setSelectedItem.bind(this)).always(this.callBase.bind(this,e))},_loadInputValue(e,t){return this._loadItem(e).always(t)},_getItemFromPlain(e,t){let i,n;return t&&"object"!=typeof e&&(t.itemByValue||(t.itemByValue={},i=this._getPlainItems(),i.forEach((function(e){t.itemByValue[this._valueGetter(e)]=e}),this)),n=t.itemByValue[e]),n||(i=this._getPlainItems(),n=(0,u.grep)(i,(t=>this._isValueEquals(this._valueGetter(t),e)))[0]),n},_loadItem(e,t){const i=this._getItemFromPlain(e,t);return void 0!==i?(0,p.BH)().resolve(i).promise():this._loadValue(e)},_getPlainItems(e){let t=[];e=e||this.option("items")||this._dataSource.items()||[];for(let i=0;i<e.length;i++)e[i]&&e[i].items?t=t.concat(e[i].items):t.push(e[i]);return t},_updateActiveDescendant(e){var t;const i=this.option("opened"),n=null===(t=this._list)||void 0===t?void 0:t.getFocusedItemId(),o=(0,c.Z)(`#${n}`).length>0,r=i&&o&&n;this.setAria({activedescendant:r||null},e)},_setSelectedItem(e){const t=this._displayValue(e);this.option("selectedItem",(0,u.ensureDefined)(e,null)),this.option("displayValue",t)},_displayValue(e){return this._displayGetter(e)},_refreshSelected(){const e={};this._listItemElements().each(((t,i)=>{const n=(0,c.Z)(i),o=this._valueGetter(n.data("dxListItemData"));this._isSelectedValue(o,e)?this._list.selectItem(n):this._list.unselectItem(n)}))},_popupShownHandler(){this.callBase(),this._setFocusPolicy()},_setFocusPolicy(){this.option("focusStateEnabled")&&this._list&&this._list.option("focusedElement",null)},_isSelectedValue(e){return this._isValueEquals(e,this.option("value"))},_validateSearchMode(){const e=this.option("searchMode"),t=e.toLowerCase();if(!Fu.includes(t))throw ge.Z.Error("E1019",e)},_clearSelectedItem(){this.option("selectedItem",null)},_processDataSourceChanging(){this._initDataController(),this._setListOption("_dataController",this._dataController),this._setListDataSource(),this._renderInputValue().fail((()=>{this._isCustomValueAllowed()||this._clearSelectedItem()}))},_isCustomValueAllowed(){return this.option("displayCustomValue")},clear(){this.callBase(),this._clearFilter(),this._clearSelectedItem()},_listItemElements(){return this._$list?this._$list.find(".dx-list-item"):(0,c.Z)()},_popupConfig(){return(0,f.l)(this.callBase(),{templatesRenderAsynchronously:!1,autoResizeEnabled:!1,maxHeight:this._getMaxHeight.bind(this)})},_renderPopupContent(){this.callBase(),this._renderList()},_getKeyboardListeners(){const e=this._canListHaveFocus();return this.callBase().concat([!e&&this._list])},_renderList(){this._listId=`dx-${(new V.Z)._value}`;const e=(0,c.Z)("<div>").attr("id",this._listId).appendTo(this._popup.$content());this._$list=e,this._list=this._createComponent(e,il,this._listConfig()),this._refreshList(),this._renderPreventBlurOnListClick(),this._setListFocusedElementOptionChange()},_renderPreventBlurOnListClick(){const e=(0,v.addNamespace)("mousedown","dxDropDownList");m.Z.off(this._$list,e),m.Z.on(this._$list,e,(e=>e.preventDefault()))},_getControlsAria(){return this._list&&this._listId},_renderOpenedState(){this.callBase(),this._list&&this._updateActiveDescendant(),this.setAria("owns",this._popup&&this._popupContentId)},_getAriaHasPopup:()=>"listbox",_refreshList(){this._list&&this._shouldRefreshDataSource()&&this._setListDataSource()},_shouldRefreshDataSource(){return!!this._list.option("dataSource")!==this._needPassDataSourceToList()},_isDesktopDevice:()=>"desktop"===a.default.real().deviceType,_listConfig(){const e={selectionMode:"single",_templates:this.option("_templates"),templateProvider:this.option("templateProvider"),noDataText:this.option("noDataText"),encodeNoDataText:this.option("encodeNoDataText"),grouped:this.option("grouped"),wrapItemText:this.option("wrapItemText"),useItemTextAsTitle:this.option("useItemTextAsTitle"),onContentReady:this._listContentReadyHandler.bind(this),itemTemplate:this.option("itemTemplate"),indicateLoading:!1,keyExpr:this._getCollectionKeyExpr(),displayExpr:this._displayGetterExpr(),groupTemplate:this.option("groupTemplate"),onItemClick:this._listItemClickAction.bind(this),dataSource:this._getDataSource(),_dataController:this._dataController,hoverStateEnabled:!!this._isDesktopDevice()&&this.option("hoverStateEnabled"),focusStateEnabled:!!this._isDesktopDevice()&&this.option("focusStateEnabled")};return this._canListHaveFocus()||(e.tabIndex=null),e},_canListHaveFocus:()=>!1,_getDataSource(){return this._needPassDataSourceToList()?this._dataSource:null},_dataSourceOptions:()=>({paginate:!1}),_getGroupedOption(){return this.option("grouped")},_dataSourceFromUrlLoadMode:()=>"raw",_listContentReadyHandler(){this._list=this._list||this._$list.dxList("instance"),this.option("deferRendering")||this._refreshSelected(),this._updatePopupWidth(),this._updateListDimensions(),this._contentReadyAction()},_setListOption(e,t){this._setWidgetOption("_list",arguments)},_listItemClickAction(e){this._listItemClickHandler(e),this._itemClickAction(e)},_listItemClickHandler:u.noop,_setListDataSource(){this._list&&(this._setListOption("dataSource",this._getDataSource()),this._needPassDataSourceToList()||this._setListOption("items",[]))},_needPassDataSourceToList(){return this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded()},_isMinSearchLengthExceeded(){return this._searchValue().toString().length>=this.option("minSearchLength")},_needClearFilter(){return!this._canKeepDataSource()&&this._needPassDataSourceToList()},_canKeepDataSource(){const e=this._isMinSearchLengthExceeded();return this._dataController.isLoaded()&&this.option("showDataBeforeSearch")&&this.option("minSearchLength")&&!e&&!this._isLastMinSearchLengthExceeded},_searchValue(){return this._input().val()||""},_getSearchEvent(){return(0,v.addNamespace)("input",`${this.NAME}Search`)},_getCompositionStartEvent(){return(0,v.addNamespace)("compositionstart",`${this.NAME}CompositionStart`)},_getCompositionEndEvent(){return(0,v.addNamespace)("compositionend",`${this.NAME}CompositionEnd`)},_getSetFocusPolicyEvent(){return(0,v.addNamespace)("input",`${this.NAME}FocusPolicy`)},_renderEvents(){this.callBase(),m.Z.on(this._input(),this._getSetFocusPolicyEvent(),(()=>{this._setFocusPolicy()})),this._shouldRenderSearchEvent()&&(m.Z.on(this._input(),this._getSearchEvent(),(e=>{this._searchHandler(e)})),Zu&&(m.Z.on(this._input(),this._getCompositionStartEvent(),(()=>{this._isTextCompositionInProgress(!0)})),m.Z.on(this._input(),this._getCompositionEndEvent(),(e=>{this._isTextCompositionInProgress(void 0),this._searchHandler(e,this._searchValue())}))))},_shouldRenderSearchEvent(){return this.option("searchEnabled")},_refreshEvents(){m.Z.off(this._input(),this._getSearchEvent()),m.Z.off(this._input(),this._getSetFocusPolicyEvent()),Zu&&(m.Z.off(this._input(),this._getCompositionStartEvent()),m.Z.off(this._input(),this._getCompositionEndEvent())),this.callBase()},_isTextCompositionInProgress(e){if(!arguments.length)return this._isTextComposition;this._isTextComposition=e},_searchHandler(e,t){if(this._isTextCompositionInProgress())return;if(!this._isMinSearchLengthExceeded())return void this._searchCanceled();const i=this.option("searchTimeout");i?(this._clearSearchTimer(),this._searchTimer=setTimeout((()=>{this._searchDataSource(t)}),i)):this._searchDataSource(t)},_searchCanceled(){this._clearSearchTimer(),this._needClearFilter()&&this._filterDataSource(null),this._refreshList()},_searchDataSource(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._searchValue();this._filterDataSource(e)},_filterDataSource(e){this._clearSearchTimer();const t=this._dataController;t.searchExpr(this.option("searchExpr")||this._displayGetterExpr()),t.searchOperation(this.option("searchMode")),t.searchValue(e),t.load().done(this._dataSourceFiltered.bind(this,e))},_clearFilter(){const e=this._dataController;e.searchValue()&&e.searchValue(null)},_dataSourceFiltered(){this._isLastMinSearchLengthExceeded=this._isMinSearchLengthExceeded(),this._refreshList(),this._refreshPopupVisibility()},_shouldOpenPopup(){return this._hasItemsToShow()},_refreshPopupVisibility(){if(this.option("readOnly")||!this._searchValue())return;const e=this._shouldOpenPopup();e&&!this._isFocused()||(this.option("opened",e),e&&(this._updatePopupWidth(),this._updateListDimensions()))},_dataSourceChangedHandler(e){0===this._dataController.pageIndex()?this.option().items=e:this.option().items=this.option().items.concat(e)},_hasItemsToShow(){const e=(this._dataController.items()||[]).length;return!(!this._needPassDataSourceToList()||!e)},_clearSearchTimer(){clearTimeout(this._searchTimer),delete this._searchTimer},_popupShowingHandler(){this._updatePopupWidth(),this._updateListDimensions()},_dimensionChanged(){this.callBase(),this._updateListDimensions()},_needPopupRepaint(){const e=this._dataController,t=e.pageIndex(),i=(0,_.$K)(this._pageIndex)&&t<=this._pageIndex||e.isLastPage()&&!this._list._scrollViewIsFull();return this._pageIndex=t,i},_updateListDimensions(){this._popup&&(this._needPopupRepaint()&&this._popup.repaint(),this._list&&this._list.updateDimensions())},_getMaxHeight(){const e=this.$element(),t=this._$customBoundaryContainer,i=e.offset().top-(t?t.offset().top:0),n=(0,oe.zp)(Vu),o=t?Math.min((0,oe.zp)(t),n):n,r=Math.max(i,o-i-(0,oe.zp)(e));return Math.min(.5*o,r)},_clean(){this._list&&delete this._list,delete this._isLastMinSearchLengthExceeded,this.callBase()},_dispose(){this._clearSearchTimer(),this.callBase()},_setCollectionWidgetOption(){this._setListOption.apply(this,arguments)},_setSubmitValue(){const e=this.option("value"),t=this._shouldUseDisplayValue(e)?this._displayGetter(e):e;this._getSubmitElement().val(t)},_shouldUseDisplayValue(e){return"this"===this.option("valueExpr")&&(0,_.Kn)(e)},_optionChanged(e){switch(this._dataExpressionOptionChanged(e),e.name){case"hoverStateEnabled":case"focusStateEnabled":this._isDesktopDevice()&&this._setListOption(e.name,e.value),this.callBase(e);break;case"items":this.option("dataSource")||this._processDataSourceChanging();break;case"dataSource":this._processDataSourceChanging();break;case"valueExpr":this._renderValue(),this._setListOption("keyExpr",this._getCollectionKeyExpr());break;case"displayExpr":this._renderValue(),this._setListOption("displayExpr",this._displayGetterExpr());break;case"searchMode":this._validateSearchMode();break;case"minSearchLength":this._refreshList();break;case"searchEnabled":case"showDataBeforeSearch":case"searchExpr":this._invalidate();break;case"onContentReady":this._initContentReadyAction();break;case"onSelectionChanged":this._initSelectionChangedAction();break;case"onItemClick":this._initItemClickAction();break;case"grouped":case"groupTemplate":case"wrapItemText":case"noDataText":case"encodeNoDataText":case"useItemTextAsTitle":this._setListOption(e.name);break;case"displayValue":this.option("text",e.value);break;case"itemTemplate":case"searchTimeout":break;case"selectedItem":e.previousValue!==e.value&&this._selectionChangedAction({selectedItem:e.value});break;default:this.callBase(e)}}}).include(Nu,Ha);(0,r.default)("dxDropDownList",Hu);const Lu=Hu.inherit({_supportedKeys(){const e=this,t=this.callBase(),i=function(e){this._isEditable()?this._valueSubstituted()&&(this._preventFiltering=!0):this.option("showClearButton")&&(e.preventDefault(),this.clear()),this._savedTextRemoveEvent=e,this._preventSubstitution=!0},n=function(){e.option("searchEnabled")&&e._valueSubstituted()&&e._searchHandler()};return(0,f.l)({},t,{tab(){this.option("opened")&&!this._popup.getFocusableElements().length&&this._resetCaretPosition(!0),t.tab&&t.tab.apply(this,arguments),this._cancelSearchIfNeed()},upArrow(e){if(t.upArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(e),!0},downArrow(e){if(t.downArrow.apply(this,arguments))return this.option("opened")||this._setNextValue(e),!0},leftArrow(){var e;n(),null===(e=t.leftArrow)||void 0===e||e.apply(this,arguments)},rightArrow(){n(),t.rightArrow&&t.rightArrow.apply(this,arguments)},home(){n(),t.home&&t.home.apply(this,arguments)},end(){n(),t.end&&t.end.apply(this,arguments)},escape(){const e=t.escape&&t.escape.apply(this,arguments);return this._cancelEditing(),e??!0},enter(e){const i=this.option("opened"),n=this._input().val().trim(),o=n&&this._list&&!this._list.option("focusedElement");if(!n&&(0,_.$K)(this.option("value"))&&this.option("allowClearing"))this._saveValueChangeEvent(e),this.option({selectedItem:null,value:null}),this.close();else{if(this.option("acceptCustomValue"))return e.preventDefault(),o&&(i&&this._toggleOpenState(),this._valueChangeEventHandler(e)),i;if(t.enter&&t.enter.apply(this,arguments))return i}},space(e){const t=this.option("opened"),i=this.option("searchEnabled"),n=this.option("acceptCustomValue");if(t&&!i&&!n)return e.preventDefault(),this._valueChangeEventHandler(e),!0},backspace:i,del:i})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{placeholder:z.Z.format("Select"),fieldTemplate:null,customItemCreateEvent:"change",valueChangeEvent:"change",acceptCustomValue:!1,onCustomItemCreating(e){(0,_.$K)(e.customItem)||(e.customItem=e.text)},showSelectionControls:!1,allowClearing:!0,tooltipEnabled:!1,openOnFieldClick:!0,showDropDownButton:!0,displayCustomValue:!1,useHiddenSubmitElement:!0})},_init(){this.callBase(),this._initCustomItemCreatingAction()},_initMarkup(){this.$element().addClass("dx-selectbox"),this._renderTooltip(),this.callBase(),this._$container.addClass("dx-selectbox-container")},_createPopup(){this.callBase(),this._popup.$element().addClass("dx-selectbox-popup"),this._popup.$overlayContent().attr("tabindex",-1)},_popupWrapperClass(){return`${this.callBase()} dx-selectbox-popup-wrapper`},_setDeprecatedOptions(){this.callBase(),(0,f.l)(this._deprecatedOptions,{valueChangeEvent:{since:"22.2",alias:"customItemCreateEvent"}})},_cancelEditing(){!this.option("searchEnabled")&&this._list&&(this._focusListElement(null),this._updateField(this.option("selectedItem")))},_renderOpenedState(){this.callBase(),this.option("opened")&&(this._scrollToSelectedItem(),this._focusSelectedElement())},_focusSelectedElement(){if(!this._searchValue())return void this._focusListElement(null);const{items:e,selectedItem:t}=this.option(),i=this._list._itemElements(),n=(null==e?void 0:e.indexOf(t))??-1,o=-1===n||this._isCustomItemSelected()?null:i.eq(n);this._focusListElement(o)},_renderFocusedElement(){if(!this._list)return;if(!this._searchValue()||this.option("acceptCustomValue"))return void this._focusListElement(null);const e=this._list._itemElements().not(".dx-state-disabled").eq(0);this._focusListElement(e)},_focusListElement(e){this._preventInputValueRender=!0,this._list.option("focusedElement",(0,l.uD)(e)),delete this._preventInputValueRender},_scrollToSelectedItem(){this._list&&this._list.scrollToItem(this._list.option("selectedItem"))},_listContentReadyHandler(){this.callBase(),this._dataController.paginate()&&this._needPopupRepaint()||this._scrollToSelectedItem()},_renderValue(){return this._renderInputValue(),this._setSubmitValue(),(0,p.BH)().resolve()},_renderInputValue(){return this.callBase().always((()=>{this._renderInputValueAsync()}))},_renderInputValueAsync(){this._renderTooltip(),this._renderInputValueImpl().always((()=>{this._refreshSelected()}))},_renderInputValueImpl(){return this._renderField(),(0,p.BH)().resolve()},_setNextItem(e){const t=this._calcNextItem(e),i=this._valueGetter(t);this._setValue(i)},_setNextValue(e){(this._dataController.isLoaded()?(0,p.BH)().resolve():this._dataController.load()).done((()=>{const t=this._getSelectedIndex(),i=this._dataController.pageSize(),n=this._dataController.isLastPage(),o=t===this._items().length-1;this._saveValueChangeEvent(e);const r="downArrow"===(0,v.normalizeKeyName)(e)?1:-1;i&&!n&&o&&r>0?(this._popup||this._createPopup(),this._dataController.isLoading()||this._list._loadNextPage().done(this._setNextItem.bind(this,r))):this._setNextItem(r)}))},_setSelectedItem(e){const t=!this._isCustomValueAllowed()&&void 0===e;this.callBase(t?null:e),t||this._isEditable()&&!this._isCustomItemSelected()||this._setListOption("selectedItem",this.option("selectedItem"))},_isCustomValueAllowed(){return this.option("acceptCustomValue")||this.callBase()},_displayValue(e){return e=!(0,_.$K)(e)&&this._isCustomValueAllowed()?this.option("value"):e,this.callBase(e)},_listConfig(){const e=(0,f.l)(this.callBase(),{pageLoadMode:"scrollBottom",onSelectionChanged:this._getSelectionChangeHandler(),selectedItem:this.option("selectedItem"),onFocusedItemChanged:this._listFocusedItemChangeHandler.bind(this)});return this.option("showSelectionControls")&&(0,f.l)(e,{showSelectionControls:!0,selectByClick:!0}),e},_listFocusedItemChangeHandler(e){if(this._preventInputValueRender)return;const t=e.component,i=(0,c.Z)(t.option("focusedElement")),n=t._getItemData(i);this._updateField(n)},_updateField(e){if(!this._getTemplateByOption("fieldTemplate")||!this.option("fieldTemplate")){const t=this._displayGetter(e);return this.option("text",t),void this._renderDisplayText(t)}this._renderField()},_getSelectionChangeHandler(){return this.option("showSelectionControls")?this._selectionChangeHandler.bind(this):u.noop},_selectionChangeHandler(e){(0,j.each)(e.addedItems||[],((e,t)=>{this._setValue(this._valueGetter(t))}))},_getActualSearchValue(){return this._dataController.searchValue()},_isInlineAutocompleteEnabled(){return this.option("searchEnabled")&&!this.option("acceptCustomValue")&&"startswith"===this.option("searchMode")},_getAriaAutocomplete(){const{disabled:e,readOnly:t,searchEnabled:i}=this.option();return!i||t||e?"none":this._isInlineAutocompleteEnabled()?"both":"list"},_toggleOpenState(e){if(!this.option("disabled")){if((e=arguments.length?e:!this.option("opened"))||this._shouldClearFilter()||this._restoreInputText(!0),this._wasSearch()&&e)if(this._wasSearch(!1),(this.option("showDataBeforeSearch")||this._isMinSearchLengthExceeded())&&this._dataController.getDataSource()){if(this._searchTimer)return;const e=this._getActualSearchValue();e&&this._wasSearch(!0),this._filterDataSource(e||null)}else this._setListOption("items",[]);e&&this._scrollToSelectedItem(),this.callBase(e)}},_renderTooltip(){this.option("tooltipEnabled")&&this.$element().attr("title",this.option("displayValue"))},_renderDimensions(){this.callBase(),this._updatePopupWidth(),this._updateListDimensions()},_isValueEqualInputText(){const e=this.option("selectedItem");if(null===e)return!1;const t=this._displayGetter(e);return(t?String(t):"")===this._searchValue()},_popupHidingHandler(){this._isValueEqualInputText()&&this._cancelEditing(),this.callBase()},_popupHiddenHandler(){this.callBase(),this._shouldCancelSearch()&&(this._wasSearch(!1),this._searchCanceled(),this._shouldCancelSearch(!1))},_restoreInputText(e){this.option("readOnly")||this._loadItemDeferred&&this._loadItemDeferred.always((()=>{const{acceptCustomValue:t,text:i,selectedItem:n}=this.option();t?e||this._isValueChanging||(this._updateField(n??this._createCustomItem(i)),this._clearFilter()):this.option("searchEnabled")&&!this._searchValue()&&this.option("allowClearing")?this._clearTextValue():this._isValueEqualInputText()||this._renderInputValue().always((e=>{const t=(0,u.ensureDefined)(e,n);this._setSelectedItem(t),this._updateField(t),this._clearFilter()}))}))},_valueChangeEventIncludesBlur(){return this.option(this._getValueChangeEventOptionName()).includes("blur")},_isPreventedFocusOutEvent(e){return this._preventNestedFocusEvent(e)||this._valueChangeEventIncludesBlur()},_focusOutHandler(e){this._isPreventedFocusOutEvent(e)||(this._isOverlayNestedTarget(e.relatedTarget)||(this._restoreInputText(),this._clearSearchTimer()),this._cancelSearchIfNeed(e)),e.target=this._input().get(0),this.callBase(e)},_cancelSearchIfNeed(e){const{searchEnabled:t}=this.option(),i=this._isOverlayNestedTarget(null==e?void 0:e.relatedTarget);if(this._wasSearch()&&t&&!i){var n;const e=null===(n=this._popup)||void 0===n?void 0:n._hideAnimationProcessing;this._clearSearchTimer(),e?this._shouldCancelSearch(!0):(this._wasSearch(!1),this._searchCanceled())}},_shouldCancelSearch(e){if(!arguments.length)return this._shouldCancelSearchValue;this._shouldCancelSearchValue=e},_isOverlayNestedTarget:e=>!!(0,c.Z)(e).closest(".dx-selectbox-popup-wrapper").length,_clearTextValue(){const e=this.option("selectedItem"),t=this._displayGetter(e);e&&""!==t&&(this._savedTextRemoveEvent&&this._saveValueChangeEvent(this._savedTextRemoveEvent),this.option("value",null)),delete this._savedTextRemoveEvent},_shouldOpenPopup(){return this._needPassDataSourceToList()&&this._wasSearch()},_isFocused(){const e=Fe.Z.getActiveElement(this.element());return this.callBase()&&(0,c.Z)(e).closest(this._input()).length>0},_getValueChangeEventOptionName:()=>"customItemCreateEvent",_renderValueChangeEvent(){this._isEditable()&&this.callBase()},_fieldRenderData(){const e=this._list&&this.option("opened")&&(0,c.Z)(this._list.option("focusedElement"));return e&&e.length?this._list._getItemData(e):this.option("selectedItem")},_isSelectedValue(e){return this._isValueEquals(e,this.option("value"))},_shouldCloseOnItemClick(){return!(this.option("showSelectionControls")&&"single"!==this.option("selectionMode"))},_listItemClickHandler(e){const t=this._getCurrentValue();this._focusListElement((0,c.Z)(e.itemElement)),this._saveValueChangeEvent(e.event),this._completeSelection(this._valueGetter(e.itemData)),this._shouldCloseOnItemClick()&&this.option("opened",!1),this.option("searchEnabled")&&t===this._valueGetter(e.itemData)&&this._updateField(e.itemData),this._shouldClearFilter()&&this._cancelSearchIfNeed()},_shouldClearFilter(){return this._wasSearch()},_completeSelection(e){this._setValue(e)},_loadItem(e,t){const i=this,n=(0,p.BH)();return this.callBase(e,t).done((e=>{n.resolve(e)})).fail((t=>{if(null!=t&&t.shouldSkipCallback)return;const o=i.option("selectedItem");i.option("acceptCustomValue")&&e===i._valueGetter(o)?n.resolve(o):n.reject()})),n.promise()},_loadInputValue(e,t){return this._loadItemDeferred=this._loadItem(e).always(t),this._loadItemDeferred},_isCustomItemSelected(){const e=this.option("selectedItem"),t=this._searchValue(),i=this._displayGetter(e);return!i||t!==i.toString()},_valueChangeEventHandler(e){this.option("acceptCustomValue")&&this._isCustomItemSelected()&&!this._isValueChanging&&(this._isValueChanging=!0,this._customItemAddedHandler(e))},_initCustomItemCreatingAction(){this._customItemCreatingAction=this._createActionByOption("onCustomItemCreating")},_createCustomItem(e){const t={text:e},i=this._customItemCreatingAction(t),n=(0,u.ensureDefined)(i,t.customItem);return(0,_.$K)(i)&&H.default.log("W0015","onCustomItemCreating","customItem"),n},_customItemAddedHandler(e){const t=this._searchValue(),i=this._createCustomItem(t);if(this._saveValueChangeEvent(e),void 0===i)throw this._renderValue(),H.default.Error("E0121");(0,_.tI)(i)?(0,p.p4)(i).done(this._setCustomItem.bind(this)).fail(this._setCustomItem.bind(this,null)):this._setCustomItem(i)},_setCustomItem(e){this._disposed||(e=e||null,this.option("selectedItem",e),this._cancelSearchIfNeed(),this._setValue(this._valueGetter(e)),this._renderDisplayText(this._displayGetter(e)),this._isValueChanging=!1)},_clearValueHandler(e){return this._preventFiltering=!0,this.callBase(e),this._searchCanceled(),!1},_wasSearch(e){if(!arguments.length)return!!this._wasSearchValue;this._wasSearchValue=e},_searchHandler(){this._preventFiltering?delete this._preventFiltering:(this._needPassDataSourceToList()&&this._wasSearch(!0),this.callBase(arguments))},_dataSourceFiltered(e){this.callBase(),null!==e&&(this._renderInputSubstitution(),this._renderFocusedElement())},_valueSubstituted(){const e=this._input().get(0),t=this._searchValue().length,i=0===e.selectionStart&&e.selectionEnd===t,n=e.selectionStart!==e.selectionEnd,o=t===e.selectionEnd;return this._wasSearch()&&n&&!i&&o&&this._shouldSubstitutionBeRendered()},_shouldSubstitutionBeRendered(){return!this._preventSubstitution&&this._isInlineAutocompleteEnabled()},_renderInputSubstitution(){if(!this._shouldSubstitutionBeRendered())return void delete this._preventSubstitution;const e=this._list&&this._getPlainItems(this._list.option("items"))[0];if(!e)return;const t=this._input(),i=t.val().length;if(0===i)return;const n=t.get(0),o=this._displayGetter(e).toString();n.value=o,this._caret({start:i,end:o.length})},_dispose(){this._renderInputValueAsync=u.noop,delete this._loadItemDeferred,this.callBase()},_optionChanged(e){switch(e.name){case"customItemCreateEvent":this._refreshValueChangeEvent(),this._refreshFocusEvent(),this._refreshEvents();break;case"onCustomItemCreating":this._initCustomItemCreatingAction();break;case"tooltipEnabled":this._renderTooltip();break;case"readOnly":case"disabled":case"searchMode":this.callBase(e),this._setDefaultAria();break;case"displayCustomValue":case"acceptCustomValue":case"showSelectionControls":this._invalidate();break;case"allowClearing":break;default:this.callBase(e)}}});(0,r.default)("dxSelectBox",Lu);const ju=Lu,zu=function(e,t,i){Wu(e,t,i)},Wu=function(e,t,i){e.css("transform",`rotate(${t}deg) translate(0,${i}px)`)},Ku=me.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{value:new Date(Date.now()),use24HourFormat:!0,_showClock:!0,_arrowOffset:5,stylingMode:void 0})},_getValue(){return this.option("value")||new Date},_init(){this.callBase(),this.$element().addClass("dx-timeview")},_render(){this.callBase(),this._renderBox(),this._updateTime()},_renderBox(){const e=(0,c.Z)("<div>").appendTo(this.$element()),t=[];this.option("_showClock")&&t.push({ratio:1,shrink:0,baseSize:"auto",template:this._renderClock.bind(this)}),t.push({ratio:0,shrink:0,baseSize:"auto",template:this._renderField.bind(this)}),this._createComponent(e,yu,{height:"100%",width:"100%",direction:"col",items:t})},_renderClock(e,t,i){this._$hourArrow=(0,c.Z)("<div>").addClass("dx-timeview-hourarrow"),this._$minuteArrow=(0,c.Z)("<div>").addClass("dx-timeview-minutearrow");const n=(0,c.Z)(i);n.addClass("dx-timeview-clock").append(this._$hourArrow).append(this._$minuteArrow),this.setAria("role","presentation",n)},_updateClock(){const e=this._getValue(),t=e.getHours()/12*360+e.getMinutes()/60*30,i=e.getMinutes()/60*360;zu(this._$hourArrow,t,this.option("_arrowOffset")),zu(this._$minuteArrow,i,this.option("_arrowOffset"))},_getBoxItems(e){const t=[{ratio:0,shrink:0,baseSize:"auto",template:()=>this._hourBox.$element()},{ratio:0,shrink:0,baseSize:"auto",template:(0,c.Z)("<div>").addClass("dx-timeview-time-separator").text(Bh.Z.getTimeSeparator())},{ratio:0,shrink:0,baseSize:"auto",template:()=>this._minuteBox.$element()}];return e&&t.push({ratio:0,shrink:0,baseSize:"auto",template:()=>this._format12.$element()}),t},_renderField(){const e=!this.option("use24HourFormat");return this._createHourBox(e),this._createMinuteBox(),e&&this._createFormat12Box(),this._createComponent((0,c.Z)("<div>").addClass("dx-timeview-field"),yu,{direction:"row",align:"center",crossAlign:"center",items:this._getBoxItems(e)}).$element()},_createHourBox(e){(this._hourBox=this._createComponent((0,c.Z)("<div>"),$d,(0,f.l)({min:-1,max:e?13:24,value:this._getValue().getHours(),onValueChanged:this._onHourBoxValueChanged.bind(this),onKeyboardHandled:e=>this._keyboardHandler(e)},this._getNumberBoxConfig()))).setAria("label","hours")},_isPM(){return!this.option("use24HourFormat")&&1===this._format12.option("value")},_onHourBoxValueChanged(e){let{value:t,component:i}=e;const n=this._getValue(),o=new Date(n);let r=this._convertMaxHourToMin(t);i.option("value",r),this._isPM()&&(r+=12),o.setHours(r),Su.normalizeTime(o),this.option("value",o)},_convertMaxHourToMin(e){const t=this.option("use24HourFormat")?24:12;return(t+e)%t},_createMinuteBox(){const e=this._minuteBox=this._createComponent((0,c.Z)("<div>"),$d,(0,f.l)({min:-1,max:60,value:this._getValue().getMinutes(),onKeyboardHandled:e=>this._keyboardHandler(e),onValueChanged:e=>{let{value:t,component:i}=e;const n=(60+t)%60;i.option("value",n);const o=new Date(this._getValue());o.setMinutes(n),Su.normalizeTime(o),this.option("value",o)}},this._getNumberBoxConfig()));e.setAria("label","minutes")},_createFormat12Box(){const e=Bh.Z.getPeriodNames();(this._format12=this._createComponent((0,c.Z)("<div>").addClass("dx-timeview-format12"),ju,{items:[{value:-1,text:e[0]},{value:1,text:e[1]}],valueExpr:"value",displayExpr:"text",onKeyboardHandled:e=>this._keyboardHandler(e),onValueChanged:e=>{let{value:t}=e;const i=this._getValue().getHours(),n=new Date(this._getValue()),o=(i+12*t)%24;n.setHours(o),this.option("value",n)},value:this._getValue().getHours()>=12?1:-1,stylingMode:this.option("stylingMode")})).setAria("label","type")},_refreshFormat12(){if(this.option("use24HourFormat"))return;const e=this._getValue().getHours()>=12?1:-1;this._silentEditorValueUpdate(this._format12,e)},_silentEditorValueUpdate(e,t){e&&(e._suppressValueChangeAction(),e.option("value",t),e._resumeValueChangeAction())},_getNumberBoxConfig(){return{showSpinButtons:!0,displayValueFormatter:e=>(e<10?"0":"")+e,stylingMode:this.option("stylingMode")}},_normalizeHours(e){return this.option("use24HourFormat")?e:e%12||12},_updateField(){const e=this._normalizeHours(this._getValue().getHours());this._silentEditorValueUpdate(this._hourBox,e),this._silentEditorValueUpdate(this._minuteBox,this._getValue().getMinutes()),this._refreshFormat12()},_updateTime(){this.option("_showClock")&&this._updateClock(),this._updateField()},_visibilityChanged(e){e&&this._updateTime()},_optionChanged(e){switch(e.name){case"value":this._updateTime(),this.callBase(e);break;case"_arrowOffset":break;case"use24HourFormat":case"_showClock":case"stylingMode":this._invalidate();break;default:this.callBase(e)}}});(0,r.default)("dxTimeView",Ku);const qu=Ku,Uu=(0,Z.getWindow)(),Gu="dx-datebox-datetime-time-side",Yu=hu.inherit({NAME:"CalendarWithTime",getDefaultOptions(){return(0,f.l)(this.callBase(),{applyValueMode:"useButtons",buttonsLocation:"bottom after","dropDownOptions.showTitle":!1})},_closeDropDownByEnter(){return Rh.default.sameDate(this._getContouredValue(),this.widgetOption("value"))},getDisplayFormat:e=>e||"shortdateshorttime",_is24HourFormat(){return Bh.Z.is24HourFormat(this.getDisplayFormat(this.dateBox.option("displayFormat")))},_getContouredValue(){const e=this.callBase();return this._updateDateTime(e)},_renderWidget(){this.callBase(),this._timeView=this.dateBox._createComponent((0,c.Z)("<div>"),qu,{value:this.dateBoxValue(),_showClock:!this._isShrinkView(),use24HourFormat:this._is24HourFormat(),onValueChanged:this._valueChangedHandler.bind(this),stylingMode:this.dateBox.option("stylingMode")})},renderOpenedState(){this.callBase();const e=this._getPopup();e&&e.$wrapper().toggleClass("dx-datebox-adaptivity-mode",this._isSmallScreen()),clearTimeout(this._repaintTimer),this._repaintTimer=setTimeout((()=>{this._getPopup()&&this._getPopup().repaint()}),0)},isAdaptivityChanged(){const e=this._isShrinkView(),t=this._currentAdaptiveMode;return e!==t?(this._currentAdaptiveMode=e,void 0!==t):this.callBase()},_updateValue(e){let t=this.dateBoxValue();t||e||(t=new Date,Su.normalizeTime(t)),this.callBase(),this._timeView&&(t&&this._timeView.option("value",t),this._timeView.option("use24HourFormat",this._is24HourFormat()))},_isSmallScreen:()=>(0,oe.dz)(Uu)<=573,_isShrinkView(){return!this.dateBox.option("showAnalogClock")||this.dateBox.option("adaptivityEnabled")&&this._isSmallScreen()},_getBoxItems(){const e=[{ratio:0,shrink:0,baseSize:"auto",name:"calendar"}];return this._isShrinkView()||e.push({ratio:0,shrink:0,baseSize:"auto",name:"time"}),e},renderPopupContent(){this.callBase(),this._currentAdaptiveMode=this._isShrinkView();const e=this._getPopup().$content();this._box=this.dateBox._createComponent((0,c.Z)("<div>").appendTo(e),yu,{direction:"row",crossAlign:"stretch",items:this._getBoxItems(),itemTemplate:function(e,t,i){const n=(0,c.Z)("<div>");switch(e.name){case"calendar":n.append(this._widget.$element()),this._isShrinkView()&&(this._timeView.$element().addClass(Gu),n.append(this._timeView.$element()));break;case"time":n.append(this._timeView.$element()),(0,c.Z)(i).addClass(Gu)}return n}.bind(this)})},popupConfig(e){const t=this.callBase(e);return(0,f.l)(t,{width:"auto"})},_preventFocusOnPopup(e){(0,c.Z)(e.target).hasClass("dx-texteditor-input")||(this.callBase.apply(this,arguments),this.dateBox._hasFocusClass()||this.dateBox.focus())},_updateDateTime(e){const t=this._timeView.option("value");return e.setHours(t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()),e},getValue(){let e=this._widget.option("value")??this._widget.getContouredDate();return e=e?new Date(e):new Date,this._updateDateTime(e)},dispose(){clearTimeout(this._removeMinWidthTimer),clearTimeout(this._repaintTimer),this.callBase()}}),Qu=Yu;class Xu{constructor(e){this.DIRECTION_HORIZONTAL="horizontal",this.DIRECTION_VERTICAL="vertical",this.DIRECTION_BOTH="both",this.direction=e??Ea}get isHorizontal(){return"horizontal"===this.direction||this.direction===Oa}get isVertical(){return this.direction===Ea||this.direction===Oa}get isBoth(){return this.direction===Oa}}class Ju extends Ra{_getDefaultOptions(){return(0,f.l)(super._getDefaultOptions(),{showScrollbar:"never",useNative:!1,selectedIndex:0,bounceEnabled:!1,items:[],showOnClick:!1,onClick:null,onSelectedIndexChanged:null,scrollByContent:!0})}_init(){super._init(),this.option("onVisibilityChange",this._visibilityChangedHandler.bind(this)),this.option("onEnd",this._endActionHandler.bind(this))}_render(){super._render(),this._renderSelectedItemFrame(),this.$element().addClass("dx-dateviewroller"),this._renderContainerClick(),this._renderItems(),this._renderSelectedValue(),this._renderItemsClick(),this._renderWheelEvent(),this._renderSelectedIndexChanged()}_renderSelectedIndexChanged(){this._selectedIndexChanged=this._createActionByOption("onSelectedIndexChanged")}_renderWheelEvent(){m.Z.on((0,c.Z)(this.container()),"dxmousewheel",(e=>{this._isWheelScrolled=!0}))}_renderContainerClick(){if(!this.option("showOnClick"))return;const e=(0,v.addNamespace)(He.name,this.NAME),t=this._createActionByOption("onClick");m.Z.off((0,c.Z)(this.container()),e),m.Z.on((0,c.Z)(this.container()),e,(e=>{t({event:e})}))}_renderItems(){const e=this.option("items")||[];let t=(0,c.Z)();(0,c.Z)(this.content()).empty(),e.forEach((e=>{t=t.add((0,c.Z)("<div>").addClass("dx-dateview-item").append(e))})),(0,c.Z)(this.content()).append(t),this._$items=t,this.update()}_renderSelectedItemFrame(){(0,c.Z)("<div>").addClass("dx-dateview-item-selected-frame").append((0,c.Z)("<div>").addClass("dx-dateview-item-selected-border")).appendTo((0,c.Z)(this.container()))}_renderSelectedValue(e){const t=this._fitIndex(e??this.option("selectedIndex"));this._moveTo({top:this._getItemPosition(t)}),this._renderActiveStateItem()}_fitIndex(e){const t=(this.option("items")||[]).length;return e>=t?t-1:e<0?0:e}_getItemPosition(e){return Math.round(this._itemHeight()*e)}_renderItemsClick(){const e=this._getItemSelector(),t=(0,v.addNamespace)(He.name,this.NAME);m.Z.off(this.$element(),t,e),m.Z.on(this.$element(),t,e,this._itemClickHandler.bind(this))}_getItemSelector(){return".dx-dateview-item"}_itemClickHandler(e){this.option("selectedIndex",this._itemElementIndex(e.currentTarget))}_itemElementIndex(e){return this._itemElements().index(e)}_itemElements(){return this.$element().find(this._getItemSelector())}_renderActiveStateItem(){const e=this.option("selectedIndex");(0,j.each)(this._$items,(function(t){(0,c.Z)(this).toggleClass("dx-dateview-item-selected",e===t)}))}_shouldScrollToNeighborItem(){return"desktop"===a.default.real().deviceType&&this._isWheelScrolled}_moveTo(e){const{top:t,left:i}=function(e,t){if((0,_.PO)(e)){const t=(0,u.ensureDefined)(e.left,e.x),i=(0,u.ensureDefined)(e.top,e.y);return{left:(0,_.$K)(t)?t:void 0,top:(0,_.$K)(i)?i:void 0}}const{isHorizontal:i,isVertical:n}=new Xu(void 0);return{left:i&&(0,_.$K)(e)?e:void 0,top:n&&(0,_.$K)(e)?e:void 0}}(e),n=this.scrollOffset(),o={x:n.left-i,y:n.top-t};if(this._isVisible()&&(o.x||o.y))if(this._prepareDirections(!0),this._animation&&!this._shouldScrollToNeighborItem()){const e=this;mo.default.stop((0,c.Z)(this.content())),mo.default.animate((0,c.Z)(this.content()),{duration:200,type:"slide",to:{top:Math.floor(o.y)},complete(){(0,Ws.Kx)((0,c.Z)(e.content())),e.handleMove({delta:o})}}),delete this._animation}else this.handleMove({delta:o})}_validate(e){return this._moveIsAllowed(e)}_fitSelectedIndexInRange(e){const t=this.option("items").length;return Math.max(Math.min(e,t-1),0)}_isInNullNeighborhood(e){return-.1<=e&&e<=.1}_getSelectedIndexAfterScroll(e){const t=this.scrollOffset().top-e*this._itemHeight();if(this._isInNullNeighborhood(t))return e;const i=t>0?1:-1;return this._fitSelectedIndexInRange(e+i)}_getNewSelectedIndex(e){if(this._shouldScrollToNeighborItem())return this._getSelectedIndexAfterScroll(e);this._animation=!0;const t=this.scrollOffset().top/this._itemHeight();return Math.round(t)}_endActionHandler(){const e=this.option("selectedIndex"),t=this._getNewSelectedIndex(e);t===e?this._renderSelectedValue(t):this.option("selectedIndex",t),this._isWheelScrolled=!1}_itemHeight(){const e=this._$items.first();return(0,oe.Cr)(e)}_toggleActive(e){this.$element().toggleClass("dx-state-active",e)}_isVisible(){return(0,c.Z)(this.container()).is(":visible")}_fireSelectedIndexChanged(e,t){this._selectedIndexChanged({value:e,previousValue:t,event:void 0})}_visibilityChanged(e){super._visibilityChanged(e),this._visibilityChangedHandler(e)}_visibilityChangedHandler(e){e&&(this._visibilityTimer=setTimeout((()=>{this._renderSelectedValue(this.option("selectedIndex"))}))),this.toggleActiveState(!1)}toggleActiveState(e){this.$element().toggleClass("dx-dateviewroller-current",e)}_refreshSelectedIndex(){const e=this.option("selectedIndex"),t=this._fitIndex(e);t===e?this._renderActiveStateItem():this.option("selectedIndex",t)}_optionChanged(e){switch(e.name){case"selectedIndex":this._fireSelectedIndexChanged(e.value,e.previousValue),this._renderSelectedValue(e.value);break;case"items":this._renderItems(),this._refreshSelectedIndex();break;case"onClick":case"showOnClick":this._renderContainerClick();break;case"onSelectedIndexChanged":this._renderSelectedIndexChanged();break;default:super._optionChanged(e)}}_dispose(){clearTimeout(this._visibilityTimer),super._dispose()}}(0,r.default)("dxDateViewRoller",Ju);const ep=Ju,tp="date",ip="year",np="month",op="day",rp="hours",sp=me.inherit({_valueOption(){const e=this.option("value"),t=new Date(e);return!e||isNaN(t)?this._getDefaultDate():t},_getDefaultDate(){const e=new Date;return this.option("type")===tp?new Date(e.getFullYear(),e.getMonth(),e.getDate()):e},_getDefaultOptions(){return(0,f.l)(this.callBase(),{minDate:Su.MIN_DATEVIEW_DEFAULT_DATE,maxDate:Su.MAX_DATEVIEW_DEFAULT_DATE,type:tp,value:new Date,applyCompactClass:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:e=>"desktop"!==e.deviceType,options:{applyCompactClass:!0}}])},_render(){this.callBase(),this.$element().addClass("dx-dateview"),this._toggleFormatClasses(this.option("type")),this._toggleCompactClass()},_toggleFormatClasses(e,t){this.$element().addClass(`dx-dateview-${e}`),t&&this.$element().removeClass(`dx-dateview-${t}`)},_toggleCompactClass(){this.$element().toggleClass("dx-dateview-compact",this.option("applyCompactClass"))},_wrapper(){return this._$wrapper},_renderContentImpl(){this._$wrapper=(0,c.Z)("<div>").addClass("dx-dateview-wrapper"),this._renderRollers(),this._$wrapper.appendTo(this.$element())},_renderRollers(){this._$rollersContainer||(this._$rollersContainer=(0,c.Z)("<div>").addClass("dx-dateview-rollers")),this._$rollersContainer.empty(),this._createRollerConfigs(),this._rollers={};const e=this;(0,j.each)(e._rollerConfigs,(t=>{const i=(0,c.Z)("<div>").appendTo(e._$rollersContainer).addClass(`dx-dateviewroller-${e._rollerConfigs[t].type}`);e._rollers[e._rollerConfigs[t].type]=e._createComponent(i,ep,{items:e._rollerConfigs[t].displayItems,selectedIndex:e._rollerConfigs[t].selectedIndex,showScrollbar:"never",scrollByContent:!0,onStart(i){const n=i.component;n._toggleActive(!0),e._setActiveRoller(e._rollerConfigs[t],n.option("selectedIndex"))},onEnd(e){e.component._toggleActive(!1)},onClick(i){const n=i.component;n._toggleActive(!0),e._setActiveRoller(e._rollerConfigs[t],n.option("selectedIndex")),e._setRollerState(e._rollerConfigs[t],n.option("selectedIndex")),n._toggleActive(!1)},onSelectedIndexChanged(i){const n=i.component;e._setRollerState(e._rollerConfigs[t],n.option("selectedIndex"))}})})),e._$rollersContainer.appendTo(e._wrapper())},_createRollerConfigs(e){const t=this;e=e||t.option("type"),t._rollerConfigs={},Bh.Z.getFormatParts(Su.FORMATS_MAP[e]).forEach((e=>{t._createRollerConfig(e)}))},_createRollerConfig(e){const t=Su.DATE_COMPONENTS_INFO[e],i=this._calculateRollerConfigValueRange(e),{startValue:n}=i,{endValue:o}=i,{formatter:r}=t,s=this._getCurrentDate(),a={type:e,setValue:t.setter,valueItems:[],displayItems:[],getIndex:e=>e[t.getter]()-n};for(let e=n;e<=o;e++)a.valueItems.push(e),a.displayItems.push(r(e,s));a.selectedIndex=a.getIndex(s),this._rollerConfigs[e]=a},_setActiveRoller(e){const t=e&&this._rollers[e.type];(0,j.each)(this._rollers,(function(){this.toggleActiveState(this===t)}))},_updateRollersPosition(){const e=this;(0,j.each)(this._rollers,(function(t){const i=e._rollerConfigs[t].getIndex(e._getCurrentDate());this.option("selectedIndex",i)}))},_setRollerState(e,t){if(t!==e.selectedIndex){const i=e.valueItems[t],{setValue:n}=e;let o=new Date(this._getCurrentDate()),r=o.getDate();const s=this.option("minDate"),a=this.option("maxDate");e.type===np?r=Math.min(r,Su.getMaxMonthDay(o.getFullYear(),i)):e.type===ip&&(r=Math.min(r,Su.getMaxMonthDay(i,o.getMonth()))),o.setDate(r),o[n](i);const l=Rh.default.normalizeDate(o,s,a);o=Su.mergeDates(l,o,"time"),o=Rh.default.normalizeDate(o,s,a),this.option("value",o),e.selectedIndex=t}e.type===ip&&this._refreshRollers(),e.type===np&&(this._refreshRoller(op),this._refreshRoller(rp))},_refreshRoller(e){const t=this._rollers[e];if(t){this._createRollerConfig(e);const i=this._rollerConfigs[e];e!==op&&i.displayItems.toString()===t.option("items").toString()||t.option({items:i.displayItems,selectedIndex:i.selectedIndex})}},_getCurrentDate(){const e=this._valueOption(),t=this.option("minDate"),i=this.option("maxDate");return Rh.default.normalizeDate(e,t,i)},_calculateRollerConfigValueRange(e){const t=this._getCurrentDate(),i=this.option("minDate"),n=this.option("maxDate"),o=Rh.default.sameYear(t,i),r=o&&t.getMonth()===i.getMonth(),s=Rh.default.sameYear(t,n),a=s&&t.getMonth()===n.getMonth(),l=r&&t.getDate()===i.getDate(),c=a&&t.getDate()===n.getDate(),d=Su.DATE_COMPONENTS_INFO[e];let{startValue:h}=d,{endValue:u}=d;return e===ip&&(h=i.getFullYear(),u=n.getFullYear()),e===np&&(o&&(h=i.getMonth()),s&&(u=n.getMonth())),e===op&&(u=Su.getMaxMonthDay(t.getFullYear(),t.getMonth()),o&&r&&(h=i.getDate()),s&&a&&(u=n.getDate())),e===rp&&(h=l?i.getHours():h,u=c?n.getHours():u),{startValue:h,endValue:u}},_refreshRollers(){this._refreshRoller(np),this._refreshRoller(op),this._refreshRoller(rp)},_optionChanged(e){switch(e.name){case"minDate":case"maxDate":case"type":this._renderRollers(),this._toggleFormatClasses(e.value,e.previousValue);break;case"visible":this.callBase(e),e.value&&this._renderRollers();break;case"value":this.option("value",this._valueOption()),this._refreshRollers(),this._updateRollersPosition();break;default:this.callBase(e)}},_clean(){this.callBase(),delete this._$rollersContainer}});(0,r.default)("dxDateView",sp);const ap=sp,lp=(0,Z.getWindow)(),cp=cu.inherit({NAME:"DateView",getDefaultOptions(){return(0,f.l)(this.callBase(),{openOnFieldClick:!0,applyButtonText:z.Z.format("OK"),"dropDownOptions.showTitle":!0})},getDisplayFormat(e){return e||Su.FORMATS_MAP[this.dateBox.option("type")]},popupConfig(e){return{toolbarItems:this.dateBox._popupToolbarItemsConfig(),onInitialized:e.onInitialized,defaultOptionsRules:[{device:{platform:"android"},options:{width:333,height:331}},{device(e){const{platform:t}=e;return"generic"===t||"ios"===t},options:{width:"auto",height:"auto"}},{device(e){const{platform:t}=e,{phone:i}=e;return"generic"===t&&i},options:{width:333,maxWidth:"100%",maxHeight:"100%",height:"auto",position:{collision:"flipfit flip"}}},{device:{platform:"ios",phone:!0},options:{width:"100%",position:{my:"bottom",at:"bottom",of:lp}}}]}},_renderWidget(){if((0,Xo.inputType)(this.dateBox.option("mode"))&&this.dateBox._isNativeType()||this.dateBox.option("readOnly"))return void(this._widget&&(this._widget.$element().remove(),this._widget=null));const e=this._getPopup();if(this._widget)this._widget.option(this._getWidgetOptions());else{const t=(0,c.Z)("<div>").appendTo(e.$content());this._widget=this._createWidget(t)}this._widget.$element().appendTo(this._getWidgetContainer())},_getWidgetName:()=>ap,renderOpenedState(){this.callBase(),this._widget&&this._widget.option("value",this._widget._getCurrentDate())},_getWidgetOptions(){return{value:this.dateBoxValue()||new Date,type:this.dateBox.option("type"),minDate:this.dateBox.dateOption("min")||new Date(1900,0,1),maxDate:this.dateBox.dateOption("max")||new Date(Date.now()+50*Su.ONE_YEAR),onDisposing:function(){this._widget=null}.bind(this)}}}),dp=cp,hp=(0,Z.getWindow)(),up={min:new Date(0,0,0,0,0),max:new Date(0,0,0,23,59)},pp=cu.inherit({NAME:"List",supportedKeys:()=>({space:u.noop,home:u.noop,end:u.noop}),getDefaultOptions(){return(0,f.l)(this.callBase(),{applyValueMode:"instantly"})},getDisplayFormat:e=>e||"shorttime",popupConfig:e=>e,getValue(){const e=this._widget.option("selectedIndex");if(-1===e)return this.dateBox.option("value");const t=this._widgetItems[e];return this._getDateByItemData(t)},useCurrentDateByDefault:()=>!0,getDefaultDate:()=>new Date(null),popupShowingHandler(){this.dateBox._dimensionChanged()},_renderWidget(){this.callBase(),this._refreshItems()},_getWidgetName:()=>il,_getWidgetOptions(){return{itemTemplate:this._timeListItemTemplate.bind(this),onItemClick:this._listItemClickHandler.bind(this),tabIndex:-1,onFocusedItemChanged:this._refreshActiveDescendant.bind(this),selectionMode:"single"}},_refreshActiveDescendant(e){this.dateBox.setAria("activedescendant",""),this.dateBox.setAria("activedescendant",e.actionValue)},_refreshItems(){this._widgetItems=this._getTimeListItems(),this._widget.option("items",this._widgetItems)},renderOpenedState(){this._widget&&(this._widget.option("focusedElement",null),this._setSelectedItemsByValue(),this._widget.option("templatesRenderAsynchronously")?this._asyncScrollTimeout=setTimeout(this._scrollToSelectedItem.bind(this)):this._scrollToSelectedItem())},dispose(){this.callBase(),clearTimeout(this._asyncScrollTimeout)},_updateValue(){this._widget&&(this._refreshItems(),this._setSelectedItemsByValue(),this._scrollToSelectedItem())},_setSelectedItemsByValue(){const e=this.dateBoxValue(),t=this._getDateIndex(e);-1===t?this._widget.option("selectedItems",[]):this._widget.option("selectedIndex",t)},_scrollToSelectedItem(){this._widget.scrollToItem(this._widget.option("selectedIndex"))},_getDateIndex(e){let t=-1;for(let i=0,n=this._widgetItems.length;i<n;i++)if(this._areDatesEqual(e,this._widgetItems[i])){t=i;break}return t},_areDatesEqual:(e,t)=>(0,_.J_)(e)&&(0,_.J_)(t)&&e.getHours()===t.getHours()&&e.getMinutes()===t.getMinutes(),_getTimeListItems(){let e=this.dateBox.dateOption("min")||this._getBoundaryDate("min");const t=this.dateBox.dateOption("max")||this._getBoundaryDate("max"),i=this.dateBox.dateOption("value")||null;let n=t-e;const o=e.getMinutes()%this.dateBox.option("interval");return n<0?[]:(n>Su.ONE_DAY&&(n=Su.ONE_DAY),i-e<Su.ONE_DAY||(e=this._getBoundaryDate("min"),e.setMinutes(o),i&&Math.abs(i-t)<Su.ONE_DAY&&(n=(60*t.getHours()+Math.abs(t.getMinutes()-o))*Su.ONE_MINUTE)),this._getRangeItems(e,new Date(e),n))},_getRangeItems(e,t,i){const n=[],o=this.dateBox.option("interval");for(;t-e<=i;)n.push(new Date(t)),t.setMinutes(t.getMinutes()+o);return n},_getBoundaryDate(e){const t=up[e],i=new Date((0,u.ensureDefined)(this.dateBox.dateOption("value"),0));return new Date(i.getFullYear(),i.getMonth(),i.getDate(),t.getHours(),t.getMinutes())},_timeListItemTemplate(e){const t=this.dateBox.option("displayFormat");return Bh.Z.format(e,this.getDisplayFormat(t))},_listItemClickHandler(e){if("useButtons"===this.dateBox.option("applyValueMode"))return;const t=this._getDateByItemData(e.itemData);this.dateBox.option("opened",!1),this.dateBoxValue(t,e.event)},_getDateByItemData(e){let t=this.dateBox.option("value");const i=e.getHours(),n=e.getMinutes(),o=e.getSeconds(),r=e.getFullYear(),s=e.getMonth(),a=e.getDate();return t?(t=this.dateBox.option("dateSerializationFormat")?$h.Z.deserializeDate(t):new Date(t),t.setHours(i),t.setMinutes(n),t.setSeconds(o),t.setFullYear(r),t.setMonth(s),t.setDate(a)):t=new Date(r,s,a,i,n,0,0),t},getKeyboardListener(){return this._widget},_updatePopupHeight(){const e=zc(this.dateBox.option("dropDownOptions.height"));if(void 0===e||"auto"===e){this.dateBox._setPopupOption("height","auto");const e=(0,oe.zp)(this._widget.$element()),t=.45*(0,oe.Cr)(hp);this.dateBox._setPopupOption("height",Math.min(e,t))}this.dateBox._timeList&&this.dateBox._timeList.updateDimensions()},getParsedText(e,t){let i=this.callBase(e,t);return i&&(i=Su.mergeDates(i,new Date(null),"date")),i}}),fp=pp,_p=cu.inherit({NAME:"Native",popupConfig:e=>(0,f.l)({},e,{width:"auto"}),getParsedText(e){return e?"datetime"===this.dateBox.option("type")?new Date(e.replace(/-/g,"/").replace("T"," ").split(".")[0]):Su.fromStandardDateFormat(e):null},renderPopupContent:u.noop,_getWidgetName:u.noop,_getWidgetOptions:u.noop,_getDateBoxType(){let e=this.dateBox.option("type");return Su.SUPPORTED_FORMATS.includes(e)?"datetime"!==e||(0,Xo.inputType)(e)||(e="datetime-local"):e="date",e},customizeButtons(){const e=this.dateBox.getButton("dropDown");a.default.real().android&&e&&e.on("click",(()=>{this.dateBox._input().get(0).click()}))},getDefaultOptions(){return{mode:this._getDateBoxType()}},getDisplayFormat(e){const t=this._getDateBoxType();return e||Su.FORMATS_MAP[t]},renderInputMinMax(e){e.attr({min:$h.Z.serializeDate(this.dateBox.dateOption("min"),"yyyy-MM-dd"),max:$h.Z.serializeDate(this.dateBox.dateOption("max"),"yyyy-MM-dd")})}}),mp=_p,gp=(0,Z.getWindow)(),vp={calendar:"calendar",rollers:"rollers",list:"list",native:"native"},bp={date:"date",datetime:"datetime",time:"time"},yp={Calendar:hu,DateView:dp,Native:mp,CalendarWithTime:Qu,List:fp},Cp=Gc.inherit({_supportedKeys(){return(0,f.l)(this.callBase(),this._strategy.supportedKeys())},_renderButtonContainers(){this.callBase.apply(this,arguments),this._strategy.customizeButtons()},_getDefaultOptions(){return(0,f.l)(this.callBase(),{type:"date",showAnalogClock:!0,value:null,dateSerializationFormat:void 0,min:void 0,max:void 0,displayFormat:null,interval:30,disabledDates:null,pickerType:vp.calendar,invalidDateMessage:z.Z.format("dxDateBox-validation-datetime"),dateOutOfRangeMessage:z.Z.format("validation-range"),applyButtonText:z.Z.format("OK"),adaptivityEnabled:!1,calendarOptions:{},useHiddenSubmitElement:!0,_showValidationIcon:!0})},_defaultOptionsRules(){return this.callBase().concat([{device:{platform:"ios"},options:{"dropDownOptions.showTitle":!0}},{device:{platform:"android"},options:{buttonsLocation:"bottom after"}},{device(){const e=a.default.real(),{platform:t}=e;return"ios"===t||"android"===t},options:{pickerType:vp.native}},{device:{platform:"generic",deviceType:"desktop"},options:{buttonsLocation:"bottom after"}}])},_initOptions(e){this._userOptions=(0,f.l)({},e),this.callBase(e),this._updatePickerOptions()},_updatePickerOptions(){let e=this.option("pickerType");const t=this.option("type");e!==vp.list||t!==bp.datetime&&t!==bp.date||(e=vp.calendar),t===bp.time&&e===vp.calendar&&(e=vp.list),this._pickerType=e,this._setShowDropDownButtonOption()},_setShowDropDownButtonOption(){const{platform:e}=a.default.real(),t="android"===e&&Be.default.mozilla,i=this._isNativeType();let n="generic"!==e||!i;i&&t&&(n=!1),this.option({showDropDownButton:n})},_init(){this._initStrategy(),this.option((0,f.l)({},this._strategy.getDefaultOptions(),this._userOptions)),delete this._userOptions,this.callBase()},_toLowerCaseFirstLetter:e=>e.charAt(0).toLowerCase()+e.substr(1),_initStrategy(){const e=this._getStrategyName(this._getFormatType()),t=yp[e];this._strategy&&this._strategy.NAME===e||(this._strategy=new t(this))},_getFormatType(){const e=this.option("type"),t=/h|m|s/g.test(e);let i="";return/d|M|Y/g.test(e)&&(i+=bp.date),t&&(i+=bp.time),i},_getStrategyName(e){const t=this._pickerType;return t===vp.rollers?"DateView":t===vp.native?"Native":e===bp.date?"Calendar":e===bp.datetime?"CalendarWithTime":"List"},_initMarkup(){this.$element().addClass("dx-datebox"),this.callBase(),this._refreshFormatClass(),this._refreshPickerTypeClass(),this._strategy.renderInputMinMax(this._input())},_render(){this.callBase(),this._formatValidationIcon()},_renderDimensions(){this.callBase(),this.$element().toggleClass("dx-auto-width",!this.option("width")),this._updatePopupWidth(),this._updatePopupHeight()},_dimensionChanged(){this.callBase(),this._updatePopupHeight()},_updatePopupHeight(){var e,t;this._popup&&(null===(e=(t=this._strategy)._updatePopupHeight)||void 0===e||e.call(t))},_refreshFormatClass(){const e=this.$element();(0,j.each)(bp,((t,i)=>{e.removeClass(`dx-datebox-${i}`)})),e.addClass(`dx-datebox-${this.option("type")}`)},_refreshPickerTypeClass(){const e=this.$element();(0,j.each)(vp,((t,i)=>{e.removeClass(`dx-datebox-${i}`)})),e.addClass(`dx-datebox-${this._pickerType}`)},_formatValidationIcon(){if(!(0,Z.hasWindow)())return;const e=this._input().get(0),t=this.option("rtlEnabled"),i=this._getClearButtonWidth(),n=this._getLongestElementDimensions(),o=parseFloat(gp.getComputedStyle(e).width)-i,r=n.width>o,{style:s}=e;this.$element().toggleClass("dx-show-invalid-badge",!r&&this.option("_showValidationIcon")),r?(void 0===this._storedPadding&&(this._storedPadding=t?n.leftPadding:n.rightPadding),t?s.paddingLeft=0:s.paddingRight=0):t?s.paddingLeft=`${this._storedPadding}px`:s.paddingRight=`${this._storedPadding}px`},_getClearButtonWidth(){let e=0;if(this._isClearButtonVisible()&&""===this._input().val()){const t=this.$element().find(".dx-clear-button-area").get(0);e=parseFloat(gp.getComputedStyle(t).width)}return e},_getLongestElementDimensions(){const e=this._strategy.getDisplayFormat(this.option("displayFormat")),t=Bh.Z.format(Su.getLongestDate(e,Bh.Z.getMonthNames(),Bh.Z.getDayNames()),e),i=this._input(),n=i.get(0),o=(0,F.createTextElementHiddenCopy)(i,t),r=void 0!==this._storedPadding?this._storedPadding:0;o.appendTo(this.$element());const s=parseFloat(gp.getComputedStyle(o.get(0)).width),a=parseFloat(gp.getComputedStyle(n).paddingRight),l=parseFloat(gp.getComputedStyle(n).paddingLeft),c=s+l+a+r;return o.remove(),{width:c,leftPadding:l,rightPadding:a}},_getKeyboardListeners(){return this.callBase().concat([this._strategy&&this._strategy.getKeyboardListener()])},_renderPopup(){this.callBase(),this._popup.$wrapper().addClass("dx-datebox-wrapper"),this._renderPopupWrapper()},_getPopupToolbarItems(){var e,t;const i=this.callBase();return(null===(e=(t=this._strategy)._getPopupToolbarItems)||void 0===e?void 0:e.call(t,i))??i},_popupConfig(){const e=this.callBase();return(0,f.l)(this._strategy.popupConfig(e),{title:this._getPopupTitle(),dragEnabled:!1})},_renderPopupWrapper(){if(!this._popup)return;const e=this.$element(),t=(0,f.l)({},bp,vp);(0,j.each)(t,((t,i)=>{e.removeClass(`dx-datebox-wrapper-${i}`)})),this._popup.$wrapper().addClass(`dx-datebox-wrapper-${this.option("type")}`).addClass(`dx-datebox-wrapper-${this._pickerType}`).addClass("dx-dropdowneditor-overlay")},_renderPopupContent(){this.callBase(),this._strategy.renderPopupContent()},_popupShowingHandler(){this.callBase(),this._strategy.popupShowingHandler()},_popupShownHandler(){this.callBase(),this._strategy.renderOpenedState()},_popupHiddenHandler(){this.callBase(),this._strategy.renderOpenedState(),this._strategy.popupHiddenHandler()},_visibilityChanged(e){e&&this._formatValidationIcon()},_clearValueHandler(e){this.option("text",""),this.callBase(e)},_readOnlyPropValue(){if(this._pickerType===vp.rollers)return!0;const{platform:e}=a.default.real();return!this._isNativeType()||"ios"!==e&&"android"!==e?this.callBase():this.option("readOnly")},_isClearButtonVisible(){return this.callBase()&&!this._isNativeType()},_renderValue(){const e=this.dateOption("value");return this.option("text",this._getDisplayedText(e)),this._strategy.renderValue(),this.callBase()},_setSubmitValue(){const e=this.dateOption("value"),t=this.option("dateSerializationFormat"),i=Su.SUBMIT_FORMATS_MAP[this.option("type")],n=t?$h.Z.serializeDate(e,t):Su.toStandardDateFormat(e,i);this._getSubmitElement().val(n)},_getDisplayedText(e){const t=this.option("mode");let i;if("text"===t){const t=this._strategy.getDisplayFormat(this.option("displayFormat"));i=Bh.Z.format(e,t)}else{const n=this._getFormatByMode(t);i=n?Bh.Z.format(e,n):Su.toStandardDateFormat(e,t)}return i},_getFormatByMode:e=>(0,Xo.inputType)(e)?null:Su.FORMATS_MAP[e],_valueChangeEventHandler(e){const{text:t,type:i,validationError:n}=this.option(),o=this.dateOption("value");if(t===this._getDisplayedText(o))return void this._recallInternalValidation(o,n);const r=this._getParsedDate(t),s=o??this._getDateByDefault(),a=Su.mergeDates(s,r,i),l=r&&"time"===i?a:r;if(this._applyInternalValidation(l).isValid){const i=this._getDisplayedText(a);s&&a&&s.getTime()===a.getTime()&&i!==t?this._renderValue():this.dateValue(a,e)}},_recallInternalValidation(e,t){t&&!t.editorSpecific||(this._applyInternalValidation(e),this._applyCustomValidation(e))},_getDateByDefault(){return this._strategy.useCurrentDateByDefault()&&this._strategy.getDefaultDate()},_getParsedDate(e){const t=this._strategy.getDisplayFormat(this.option("displayFormat"));return this._strategy.getParsedText(e,t)??void 0},_applyInternalValidation(e){const t=!!this.option("text")&&null!==e,i=!!e&&(0,_.J_)(e)&&!isNaN(e.getTime()),n=i&&Rh.default.dateInRange(e,this.dateOption("min"),this.dateOption("max"),this.option("type")),o=!t&&!e||n;let r="";return i?n||(r=this.option("dateOutOfRangeMessage")):r=this.option("invalidDateMessage"),this._updateInternalValidationState(o,r),{isValid:o,isDate:i}},_updateInternalValidationState(e,t){this.option({isValid:e,validationError:e?null:{editorSpecific:!0,message:t}})},_applyCustomValidation(e){this.validationRequest.fire({editor:this,value:this._serializeDate(e)})},_isValueChanged(e){const t=this.dateOption("value");return(t&&t.getTime())!==(e&&e.getTime())},_isTextChanged(e){return this.option("text")!==(e&&this._getDisplayedText(e)||"")},_renderProps(){this.callBase(),this._input().attr("autocomplete","off")},_renderOpenedState(){this._isNativeType()||this.callBase(),this._strategy.isAdaptivityChanged()&&this._refreshStrategy()},_getPopupTitle(){const e=this.option("placeholder");if(e)return e;const t=this.option("type");return t===bp.time?z.Z.format("dxDateBox-simulatedDataPickerTitleTime"):t===bp.date||t===bp.datetime?z.Z.format("dxDateBox-simulatedDataPickerTitleDate"):""},_refreshStrategy(){this._strategy.dispose(),this._initStrategy(),this.option(this._strategy.getDefaultOptions()),this._refresh()},_applyButtonHandler(e){const t=this._strategy.getValue();this.dateValue(t,e.event),this.callBase()},_dispose(){var e;this.callBase(),null===(e=this._strategy)||void 0===e||e.dispose()},_isNativeType(){return this._pickerType===vp.native},_updatePopupTitle(){var e;null===(e=this._popup)||void 0===e||e.option("title",this._getPopupTitle())},_optionChanged(e){switch(e.name){case"showClearButton":case"buttons":case"isValid":case"readOnly":this.callBase.apply(this,arguments),this._formatValidationIcon();break;case"pickerType":this._updatePickerOptions({pickerType:e.value}),this._refreshStrategy(),this._refreshPickerTypeClass(),this._invalidate();break;case"type":this._updatePickerOptions({format:e.value}),this._refreshStrategy(),this._refreshFormatClass(),this._renderPopupWrapper(),this._formatValidationIcon(),this._updateValue();break;case"placeholder":this.callBase.apply(this,arguments),this._updatePopupTitle();break;case"min":case"max":{const e=this.option("isValid");this._applyInternalValidation(this.dateOption("value")),e||this._applyCustomValidation(this.dateOption("value")),this._invalidate();break}case"dateSerializationFormat":case"interval":case"disabledDates":case"calendarOptions":this._invalidate();break;case"displayFormat":this.option("text",this._getDisplayedText(this.dateOption("value"))),this._renderInputValue();break;case"text":this._strategy.textChangedHandler(e.value),this.callBase.apply(this,arguments);break;case"showDropDownButton":this._formatValidationIcon(),this.callBase.apply(this,arguments);break;case"todayButtonText":this._setPopupOption("toolbarItems",this._getPopupToolbarItems());break;case"invalidDateMessage":case"dateOutOfRangeMessage":case"adaptivityEnabled":case"showAnalogClock":case"_showValidationIcon":break;default:this.callBase.apply(this,arguments)}},_getSerializationFormat(){const e=this.option("value");return this.option("dateSerializationFormat")&&(0,s.default)().forceIsoDateParsing?this.option("dateSerializationFormat"):(0,_.kE)(e)?"number":(0,_.HD)(e)?$h.Z.getDateSerializationFormat(e):void 0},_updateValue(e){this.callBase(),this._applyInternalValidation(e??this.dateOption("value"))},dateValue(e,t){const i=this._isValueChanged(e);return i&&t&&this._saveValueChangeEvent(t),i||(this._isTextChanged(e)?this._updateValue(e):""===this.option("text")&&this._applyCustomValidation(e)),this.dateOption("value",e)},dateOption(e,t){if(1===arguments.length)return $h.Z.deserializeDate(this.option(e));this.option(e,this._serializeDate(t))},_serializeDate(e){const t=this._getSerializationFormat();return $h.Z.serializeDate(e,t)},_clearValue(){const e=this.option("value");this.callBase(),null===e&&this._applyCustomValidation(null)},clear(){const e=this.option("value");this.callBase(),null===e&&this._applyInternalValidation(null)}}),wp=Cp,xp=e=>e.getMonth()+1,Sp=(e,t)=>{const i=e.getDate(),n=Op("M",e),o=(0,ul.n$)(parseInt(t),n.min,n.max);e.setMonth(o-1,1);const{min:r,max:s}=Op("dM",e),a=(0,ul.n$)(i,r,s);e.setDate(a)},Ip={a:e=>e.getHours()<12?0:1,E:"getDay",y:"getFullYear",M:xp,L:xp,d:"getDate",H:"getHours",h:"getHours",m:"getMinutes",s:"getSeconds",S:"getMilliseconds",x:"getTimezoneOffset"},kp=(0,f.l)({},(0,Mh.xe)(),{a:(e,t)=>{const i=e.getHours();i>=12!=!!parseInt(t)&&e.setHours((i+12)%24)},d:(e,t)=>{t>Op("dM",e).max&&e.setMonth(e.getMonth()+1),e.setDate(t)},h:(e,t)=>{const i=e.getHours()>=12;e.setHours(+t%12+(i?12:0))},M:Sp,L:Sp,E:(e,t)=>{t<0||e.setDate(e.getDate()-e.getDay()+parseInt(t))},y:(e,t)=>{const i=e.getFullYear(),n=String(t).length,o=String(Op("y",e).max).length,r=parseInt(String(i).substr(0,o-n)+t);e.setFullYear(r)},x:e=>e}),Ep=e=>Ip[e]||(()=>e),Op=(e,t,i)=>{const n={y:{min:0,max:9999},M:{min:1,max:12},L:{min:1,max:12},d:{min:1,max:31},dM:{min:1,max:new Date(t.getFullYear(),t.getMonth()+1,0).getDate()},E:{min:0,max:6},H:{min:0,max:23},h:{min:1,max:12},m:{min:0,max:59},s:{min:0,max:59},S:{min:0,max:999},a:{min:0,max:1},x:{min:0,max:0}};return n[i||e]||n.getAmPm},Tp=wp.inherit({_supportedKeys(e){const t=this.callBase(e),i=e=>{const i=t[(0,v.normalizeKeyName)(e)];return i&&i.apply(this,[e])},n=(e,t)=>this._shouldUseOriginalHandler(e)?i.apply(this,[e]):t.apply(this,[e]);return(0,f.l)({},t,{del:e=>n(e,(e=>{this._revertPart(1),this._isAllSelected()||e.preventDefault()})),backspace:e=>n(e,(e=>{this._revertPart(-1),this._isAllSelected()||e.preventDefault()})),home:e=>n(e,(e=>{this._selectFirstPart(),e.preventDefault()})),end:e=>n(e,(e=>{this._selectLastPart(),e.preventDefault()})),escape:e=>n(e,(e=>{this._revertChanges(e)})),enter:e=>n(e,(()=>{this._enterHandler()})),leftArrow:e=>n(e,(e=>{this._selectNextPart(-1),e.preventDefault()})),rightArrow:e=>n(e,(e=>{this._selectNextPart(1),e.preventDefault()})),upArrow:e=>n(e,(e=>{this._upDownArrowHandler(1),e.preventDefault()})),downArrow:e=>n(e,(e=>{this._upDownArrowHandler(-1),e.preventDefault()}))})},_shouldUseOriginalHandler(e){const t=this.option("opened")&&e&&!["backspace","del"].includes((0,v.normalizeKeyName)(e));return!this._useMaskBehavior()||t||e&&e.altKey},_upDownArrowHandler(e){this._setNewDateIfEmpty();const t=this._getActivePartValue(this._initialMaskValue),i=this._getActivePartValue()-t;this._loadMaskValue(this._initialMaskValue),this._changePartValue(i+e,!0)},_changePartValue(e,t){const i=this._getActivePartProp("pattern");/^a{1,5}$/.test(i)?this._toggleAmPm():this._partIncrease(e,t)},_toggleAmPm(){const e=this._getActivePartProp("text"),t=1^Ah.Z.getPeriodNames().indexOf(e);this._setActivePartValue(t)},_getDefaultOptions(){return(0,f.l)(this.callBase(),{useMaskBehavior:!1,emptyDateValue:new Date(2e3,0,1,0,0,0)})},_isSingleCharKey(e){let{originalEvent:t,alt:i}=e;const n=t.data||t.key;return"string"==typeof n&&1===n.length&&!i&&!(0,v.isCommandKeyPressed)(t)},_isSingleDigitKey(e){var t;const i=null===(t=e.originalEvent)||void 0===t?void 0:t.data;return 1===(null==i?void 0:i.length)&&parseInt(i,10)},_useBeforeInputEvent:()=>a.default.real().android,_keyInputHandler(e,t){const i=this._input().val();this._processInputKey(t),e.preventDefault(),i!==this._input().val()&&m.Z.trigger(this._input(),"input")},_keyboardHandler(e){let{key:t}=e.originalEvent;const i=this.callBase(e);return!this._useMaskBehavior()||this._useBeforeInputEvent()||(Be.default.chrome&&"Process"===e.key&&0===e.code.indexOf("Digit")?(t=e.code.replace("Digit",""),this._processInputKey(t),this._maskInputHandler=()=>{this._renderSelectedPart()}):this._isSingleCharKey(e)&&this._keyInputHandler(e.originalEvent,t)),i},_maskBeforeInputHandler(e){this._maskInputHandler=null;const{inputType:t}=e.originalEvent;"insertCompositionText"===t&&(this._maskInputHandler=()=>{this._renderSelectedPart()});const i="deleteContentBackward"===t;if(i||"deleteContentForward"===t){const e=i?-1:1;this._maskInputHandler=()=>{this._revertPart(),this._selectNextPart(e)}}if(!this._useMaskBehavior()||!this._isSingleCharKey(e))return;const n=e.originalEvent.data;return this._keyInputHandler(e,n),!0},_keyPressHandler(e){const{originalEvent:t}=e;"insertCompositionText"===(null==t?void 0:t.inputType)&&this._isSingleDigitKey(e)&&(this._processInputKey(t.data),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()),this.callBase(e),this._maskInputHandler&&(this._maskInputHandler(),this._maskInputHandler=null)},_processInputKey(e){this._isAllSelected()&&(this._activePartIndex=0),this._setNewDateIfEmpty(),isNaN(parseInt(e))?this._searchString(e):this._searchNumber(e)},_isAllSelected(){const e=this._caret();return e.end-e.start===this.option("text").length},_getFormatPattern(){if(this._formatPattern)return this._formatPattern;const e=this._strategy.getDisplayFormat(this.option("displayFormat")),t=(0,_.HD)(e)&&!Bh.Z._getPatternByFormat(e);return this._formatPattern=t?e:(0,Ph.y)((t=>Bh.Z.format(t,e))),this._formatPattern},_setNewDateIfEmpty(){if(!this._maskValue){const e="time"===this.option("type")?new Date(null):new Date;this._maskValue=e,this._initialMaskValue=e,this._renderDateParts()}},_partLimitsReached(e){const t=String(e).length,i=this._getActivePartProp("pattern").length,n=1===i?t:Math.min(i,t),o=this._searchValue.length===n,r=parseInt(`${this._searchValue}0`)>e;return o||r},_searchNumber(e){const{max:t}=this._getActivePartLimits(),i=String(t).length;this._searchValue=(this._searchValue+e).substr(-i),isNaN(this._searchValue)&&(this._searchValue=e),this._setActivePartValue(this._searchValue),this._partLimitsReached(t)&&this._selectNextPart(1)},_searchString(e){if(!isNaN(parseInt(this._getActivePartProp("text"))))return;const t=this._getActivePartProp("limits")(this._maskValue),i=this._searchValue+e.toLowerCase(),n=t.max-t.min;for(let e=0;e<=n;e++)if(this._loadMaskValue(this._initialMaskValue),this._changePartValue(e+1),0===this._getActivePartProp("text").toLowerCase().indexOf(i))return void(this._searchValue=i);this._setNewDateIfEmpty(),this._searchValue&&(this._clearSearchValue(),this._searchString(e))},_clearSearchValue(){this._searchValue=""},_revertPart(e){if(!this._isAllSelected()){const t=this._getActivePartValue(this.option("emptyDateValue"));this._setActivePartValue(t),this._selectNextPart(e)}this._clearSearchValue()},_useMaskBehavior(){return this.option("useMaskBehavior")&&"text"===this.option("mode")},_prepareRegExpInfo(){this._regExpInfo=(0,Mh.oo)(this._getFormatPattern(),Bh.Z);const{regexp:e}=this._regExpInfo,{source:t}=e,{flags:i}=e,n=new RegExp(/(\{[0-9]+,?[0-9]*\})/),o=t.split(n).map((e=>n.test(e)?e:W.Z.convertDigits(e,!1))).join("");this._regExpInfo.regexp=new RegExp(o,i)},_initMaskState(){this._activePartIndex=0,this._formatPattern=null,this._prepareRegExpInfo(),this._loadMaskValue()},_renderMask(){this.callBase(),this._detachMaskEvents(),this._clearMaskState(),this._useMaskBehavior()&&(this._attachMaskEvents(),this._initMaskState(),this._renderDateParts())},_renderDateParts(){if(!this._useMaskBehavior())return;const e=this.option("text")||this._getDisplayedText(this._maskValue);e&&(this._dateParts=((e,t)=>{const i=t.regexp.exec(e);let n=0,o=0;const r=[];for(let e=1;e<i.length;e++){n=o,o=n+i[e].length;const s=t.patterns[e-1].replace(/^'|'$/g,""),a=Ep(s[0]);r.push({index:e-1,isStub:s===i[e],caret:{start:n,end:o},pattern:s,text:i[e],limits:function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return Op(s[0],...t)},setter:kp[s[0]]||u.noop,getter:a})}return r})(e,this._regExpInfo),this._input().is(":hidden")||this._selectNextPart())},_detachMaskEvents(){m.Z.off(this._input(),".dateBoxMask")},_attachMaskEvents(){m.Z.on(this._input(),(0,v.addNamespace)("dxclick","dateBoxMask"),this._maskClickHandler.bind(this)),m.Z.on(this._input(),(0,v.addNamespace)("paste","dateBoxMask"),this._maskPasteHandler.bind(this)),m.Z.on(this._input(),(0,v.addNamespace)("drop","dateBoxMask"),(()=>{this._renderSelectedPart()})),m.Z.on(this._input(),(0,v.addNamespace)("compositionend","dateBoxMask"),this._maskCompositionEndHandler.bind(this)),this._useBeforeInputEvent()&&m.Z.on(this._input(),(0,v.addNamespace)("beforeinput","dateBoxMask"),this._maskBeforeInputHandler.bind(this))},_renderSelectedPart(){this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._selectNextPart()},_selectLastPart(){this.option("text")&&(this._activePartIndex=this._dateParts.length,this._selectNextPart(-1))},_selectFirstPart(){this.option("text")&&(this._activePartIndex=-1,this._selectNextPart(1))},_onMouseWheel(e){this._useMaskBehavior()&&this._partIncrease(e.delta>0?1:-1,e)},_selectNextPart(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.option("text")||this._disposed)return;e&&(this._initialMaskValue=new Date(this._maskValue));let t=(0,ul.n$)(this._activePartIndex+e,0,this._dateParts.length-1);if(this._dateParts[t].isStub){if(!(0===t&&e<0||t===this._dateParts.length-1&&e>0))return void this._selectNextPart(e>=0?e+1:e-1);t=this._activePartIndex}this._activePartIndex!==t&&this._clearSearchValue(),this._activePartIndex=t,this._caret(this._getActivePartProp("caret"))},_getRealLimitsPattern(){if("d"===this._getActivePartProp("pattern")[0])return"dM"},_getActivePartLimits(e){return this._getActivePartProp("limits")(this._maskValue,e&&this._getRealLimitsPattern())},_getActivePartValue(e){e=e||this._maskValue;const t=this._getActivePartProp("getter");return(0,_.mf)(t)?t(e):e[t]()},_addLeadingZeroes(e){const t=this._searchValue.match(/^0+/),i=this._getActivePartLimits(),n=String(i.max).length;return((t&&t[0]||"")+String(e)).substr(-n)},_setActivePartValue(e,t){t=t||this._maskValue;const i=this._getActivePartProp("setter"),n=this._getActivePartLimits();e=(0,ul.Z2)(e,n.min,n.max)?e:e%10,e=this._addLeadingZeroes((0,ul.n$)(e,n.min,n.max)),(0,_.mf)(i)?i(t,e):t[i](e),this._renderDisplayText(this._getDisplayedText(t)),this._renderDateParts()},_getActivePartProp(e){if(this._dateParts&&this._dateParts[this._activePartIndex])return this._dateParts[this._activePartIndex][e]},_loadMaskValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.dateOption("value");this._maskValue=e&&new Date(e),this._initialMaskValue=e&&new Date(e)},_saveMaskValue(){const e=this._maskValue&&new Date(this._maskValue);e&&"date"===this.option("type")&&e.setHours(0,0,0,0),this._initialMaskValue=new Date(e),this.dateOption("value",e)},_revertChanges(){this._loadMaskValue(),this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts()},_renderDisplayText(e){this.callBase(e),this._useMaskBehavior()&&this.option("text",e)},_partIncrease(e,t){this._setNewDateIfEmpty();const{max:i,min:n}=this._getActivePartLimits(t);let o=e+this._getActivePartValue();o>i?o=this._applyLimits(o,{limitBase:n,limitClosest:i,max:i}):o<n&&(o=this._applyLimits(o,{limitBase:i,limitClosest:n,max:i})),this._setActivePartValue(o)},_applyLimits(e,t){let{limitBase:i,limitClosest:n,max:o}=t;const r=(e-n)%o;return r?i+r-1*(0,ul.Xx)(r):n},_maskClickHandler(){this._loadMaskValue(this._maskValue),this.option("text")&&(this._activePartIndex=((e,t)=>{for(let i=0;i<e.length;i++){const n=e[i].caret.end>=t;if(!e[i].isStub&&n)return i}return null})(this._dateParts,this._caret().start),this._isAllSelected()||((0,_.$K)(this._activePartIndex)?this._caret(this._getActivePartProp("caret")):this._selectLastPart()))},_maskCompositionEndHandler(e){this._input().val(this._getDisplayedText(this._maskValue)),this._selectNextPart(),this._maskInputHandler=()=>{this._renderSelectedPart()}},_maskPasteHandler(e){const t=this._replaceSelectedText(this.option("text"),this._caret(),(0,F.clipboardText)(e)),i=Bh.Z.parse(t,this._getFormatPattern());i&&this._isDateValid(i)&&(this._maskValue=i,this._renderDisplayText(this._getDisplayedText(this._maskValue)),this._renderDateParts(),this._selectNextPart()),e.preventDefault()},_isDateValid:e=>(0,_.J_)(e)&&!isNaN(e),_isValueDirty(){const e=this.dateOption("value");return(this._maskValue&&this._maskValue.getTime())!==(e&&e.getTime())},_fireChangeEvent(){this._clearSearchValue(),this._isValueDirty()&&m.Z.trigger(this._input(),"change")},_enterHandler(){this._fireChangeEvent(),this._selectNextPart(1)},_focusOutHandler(e){this._useMaskBehavior()&&!e.isDefaultPrevented()?(this._fireChangeEvent(),this.callBase(e),this._selectFirstPart(e)):this.callBase(e)},_valueChangeEventHandler(e){const t=this.option("text");this._useMaskBehavior()?(this._saveValueChangeEvent(e),t?null===this._maskValue&&this._loadMaskValue(t):this._maskValue=null,this._saveMaskValue()):this.callBase(e)},_optionChanged(e){switch(e.name){case"useMaskBehavior":this._renderMask();break;case"displayFormat":case"mode":this.callBase(e),this._renderMask();break;case"value":this._loadMaskValue(),this.callBase(e),this._renderDateParts();break;case"emptyDateValue":break;default:this.callBase(e)}},_clearMaskState(){this._clearSearchValue(),delete this._dateParts,delete this._activePartIndex,delete this._maskValue},clear(){this._clearMaskState(),this._activePartIndex=0,this.callBase()},_clean(){this.callBase(),this._detachMaskEvents(),this._clearMaskState()}}),Dp=Tp;(0,r.default)("dxDateBox",Dp);const Bp="dx-responsivebox-screen-",Ap=wr.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{rows:[],cols:[],screenByWidth:null,singleColumnScreen:"",height:"100%",width:"100%",activeStateEnabled:!1,focusStateEnabled:!1,onItemStateChanged:void 0,onLayoutChanged:null,currentScreenFactor:void 0})},_init(){this.option("screenByWidth")||this._options.silent("screenByWidth",Z.defaultScreenFactorFunc),this.callBase(),this._initLayoutChangedAction()},_initLayoutChangedAction(){this._layoutChangedAction=this._createActionByOption("onLayoutChanged",{excludeValidators:["disabled","readonly"]})},_itemClass:()=>"dx-box-item",_itemDataKey:()=>"dxBoxItemData",_initMarkup(){this.callBase(),this.$element().addClass("dx-responsivebox")},_renderItems(){this._setScreenSize(),this._screenItems=this._itemsByScreen(),this._prepareGrid(),this._spreadItems(),this._layoutItems(),this._linkNodeToItem()},_itemOptionChanged(e){const t=this._findItemElementByItem(e);t.length&&(this._refreshItem(t,e),this._clearItemNodeTemplates(),this._update(!0))},_setScreenSize(){const e=this._getCurrentScreen();this._removeScreenSizeClass(),this.$element().addClass(Bp+e),this.option("currentScreenFactor",e)},_removeScreenSizeClass(){const e=this.option("currentScreenFactor");e&&this.$element().removeClass(Bp+e)},_prepareGrid(){const e=this._grid=[];this._prepareRowsAndCols(),(0,j.each)(this._rows,(()=>{const t=[];e.push(t),(0,j.each)(this._cols,(()=>{t.push(this._createEmptyCell())}))}))},getSingleColumnRows(){const e=this.option("rows"),t=this._screenItems.length;if(e.length){const i=this._filterByScreen(e),n=[];for(let e=0;e<t;e++){const t=this._defaultSizeConfig();e<i.length&&(0,_.$K)(i[e].shrink)&&(t.shrink=i[e].shrink),n.push(t)}return n}return this._defaultSizeConfig(t)},_prepareRowsAndCols(){this._isSingleColumnScreen()?(this._prepareSingleColumnScreenItems(),this._rows=this.getSingleColumnRows(),this._cols=this._defaultSizeConfig(1)):(this._rows=this._sizesByScreen(this.option("rows")),this._cols=this._sizesByScreen(this.option("cols")))},_isSingleColumnScreen(){return this._screenRegExp().test(this.option("singleColumnScreen"))||!this.option("rows").length||!this.option("cols").length},_prepareSingleColumnScreenItems(){this._screenItems.sort(((e,t)=>e.location.row-t.location.row||e.location.col-t.location.col)),(0,j.each)(this._screenItems,((e,t)=>{(0,f.l)(t.location,{row:e,col:0,rowspan:1,colspan:1})}))},_sizesByScreen(e){return(0,j.map)(this._filterByScreen(e),(e=>(0,f.l)(this._defaultSizeConfig(),e)))},_createDefaultSizeConfig:()=>({ratio:1,baseSize:0,minSize:0,maxSize:0}),_defaultSizeConfig(e){const t=this._createDefaultSizeConfig();if(!arguments.length)return t;const i=[];for(let n=0;n<e;n++)i.push(t);return i},_filterByScreen(e){const t=this._screenRegExp();return(0,u.grep)(e,(e=>!e.screen||t.test(e.screen)))},_screenRegExp(){const e=this._getCurrentScreen();return new RegExp(`(^|\\s)${e}($|\\s)`,"i")},_getCurrentScreen(){const e=this._screenWidth();return this.option("screenByWidth")(e)},_screenWidth:()=>(0,Z.hasWindow)()?(0,oe.dz)((0,Z.getWindow)()):1920,_createEmptyCell:()=>({item:{},location:{colspan:1,rowspan:1}}),_spreadItems(){(0,j.each)(this._screenItems,((e,t)=>{const i=t.location||{},n=i.col,o=i.row,r=this._grid[o],s=r&&r[n];this._occupyCells(s,t)}))},_itemsByScreen(){return this.option("items").reduce(((e,t)=>{let i=t.location||{};return i=(0,_.PO)(i)?[i]:i,this._filterByScreen(i).forEach((i=>{e.push({item:t,location:(0,f.l)({rowspan:1,colspan:1},i)})})),e}),[])},_occupyCells(e,t){e&&!this._isItemCellOccupied(e,t)&&((0,f.l)(e,t),this._markSpanningCell(e))},_isItemCellOccupied(e,t){if(!(0,_.Qr)(e.item))return!0;let i=!1;return this._loopOverSpanning(t.location,(e=>{i=i||!(0,_.Qr)(e.item)})),i},_loopOverSpanning(e,t){const i=e.row+e.rowspan-1,n=e.col+e.colspan-1,o=Math.min(i,this._rows.length-1),r=Math.min(n,this._cols.length-1);e.rowspan-=i-o,e.colspan-=n-r;for(let i=e.row;i<=o;i++)for(let n=e.col;n<=r;n++)i===e.row&&n===e.col||t(this._grid[i][n])},_markSpanningCell(e){this._loopOverSpanning(e.location,(t=>{(0,f.l)(t,{item:e.item,spanningCell:e})}))},_linkNodeToItem(){(0,j.each)(this._itemElements(),((e,t)=>{const i=(0,c.Z)(t),n=i.data("dxBoxItemData");n.box||(n.node=i.children())}))},_layoutItems(){const e=this._grid.length,t=e&&this._grid[0].length;if(!e&&!t)return;const i=this._layoutBlock({direction:"col",row:{start:0,end:e-1},col:{start:0,end:t-1}}),n=this._prepareBoxConfig(i.box||{direction:"row",items:[(0,f.l)(i,{ratio:1})]});(0,f.l)(n,this._rootBoxConfig(n.items)),this._$root=(0,c.Z)("<div>").appendTo(this._itemContainer()),this._createComponent(this._$root,yu,n)},_rootBoxConfig(e){return{width:"100%",height:"100%",items:(0,j.each)(e,((e,t)=>{this._needApplyAutoBaseSize(t)&&(0,f.l)(t,{baseSize:"auto"})})),itemTemplate:this._getTemplateByOption("itemTemplate"),itemHoldTimeout:this.option("itemHoldTimeout"),onItemHold:this._createActionByOption("onItemHold"),onItemClick:this._createActionByOption("onItemClick"),onItemContextMenu:this._createActionByOption("onItemContextMenu"),onItemRendered:this._createActionByOption("onItemRendered")}},_needApplyAutoBaseSize:e=>!(e.baseSize||e.minSize&&"auto"!==e.minSize||e.maxSize&&"auto"!==e.maxSize),_prepareBoxConfig(e){return(0,f.l)(e||{},{crossAlign:"stretch",onItemStateChanged:this.option("onItemStateChanged")})},_layoutBlock(e){return this._isSingleItem(e)?this._itemByCell(e.row.start,e.col.start):this._layoutDirection(e)},_isSingleItem(e){const t=this._grid[e.row.start][e.col.start].location,i=e.row.end-e.row.start==t.rowspan-1,n=e.col.end-e.col.start==t.colspan-1;return i&&n},_itemByCell(e,t){const i=this._grid[e][t];return i.spanningCell?null:i.item},_layoutDirection(e){const t=[],{direction:i}=e,n=this._crossDirection(i);let o;for(;o=this._nextBlock(e);){if(this._isBlockIndivisible(e.prevBlockOptions,o))throw ge.Z.Error("E1025");const i=this._layoutBlock({direction:n,row:o.row,col:o.col,prevBlockOptions:e});i&&((0,f.l)(i,this._blockSize(o,n)),t.push(i)),e[n].start=o[n].end+1}return{box:this._prepareBoxConfig({direction:i,items:t})}},_isBlockIndivisible:(e,t)=>e&&e.col.start===t.col.start&&e.col.end===t.col.end&&e.row.start===t.row.start&&e.row.end===t.row.end,_crossDirection:e=>"col"===e?"row":"col",_nextBlock(e){const{direction:t}=e,i=this._crossDirection(t),n=e[t].start,o=e[t].end,r=e[i].start;if(r>e[i].end)return null;let s=1;for(let e=r;e<r+s;e++){let a=1;for(let r=n;r<=o;r++){const n=this._cellByDirection(t,r,e);a=Math.max(a,n.location[`${i}span`])}const l=e+a,c=r+s;l>c&&(s+=l-c)}const a={};return a[t]={start:n,end:o},a[i]={start:r,end:r+s-1},a},_cellByDirection(e,t,i){return"col"===e?this._grid[i][t]:this._grid[t][i]},_blockSize(e,t){const i="row"===t?"auto":0,n="row"===t?this._rows:this._cols,o=(0,f.l)(this._createDefaultSizeConfig(),{ratio:0});for(let i=e[t].start;i<=e[t].end;i++){const e=n[i];o.ratio+=e.ratio,o.baseSize+=e.baseSize,o.minSize+=e.minSize,o.maxSize+=e.maxSize,(0,_.$K)(e.shrink)&&(o.shrink=e.shrink)}return o.minSize=o.minSize?o.minSize:i,o.maxSize=o.maxSize?o.maxSize:"auto",this._isSingleColumnScreen()&&(o.baseSize="auto"),o},_update(e){const t=this._$root;this._renderItems(),t&&(e?t.remove():(t.detach(),this._saveAssistantRoot(t))),this._layoutChangedAction()},_saveAssistantRoot(e){this._assistantRoots=this._assistantRoots||[],this._assistantRoots.push(e)},_dispose(){this._clearItemNodeTemplates(),this._cleanUnusedRoots(),this.callBase.apply(this,arguments)},_cleanUnusedRoots(){this._assistantRoots&&(0,j.each)(this._assistantRoots,((e,t)=>{(0,c.Z)(t).remove()}))},_clearItemNodeTemplates(){(0,j.each)(this.option("items"),(function(){delete this.node}))},_attachClickEvent:u.noop,_optionChanged(e){switch(e.name){case"rows":case"cols":case"screenByWidth":case"singleColumnScreen":this._clearItemNodeTemplates(),this._invalidate();break;case"width":case"height":this.callBase(e),this._update();break;case"onLayoutChanged":this._initLayoutChangedAction();break;case"itemTemplate":this._clearItemNodeTemplates(),this.callBase(e);break;case"currentScreenFactor":break;default:this.callBase(e)}},_dimensionChanged(){this._getCurrentScreen()!==this.option("currentScreenFactor")&&this._update()},repaint(){this._update()}});(0,r.default)("dxResponsiveBox",Ap);const Pp=Ap;function Mp(e){let{$parent:t,rootElementCssClassList:i}=e;return(0,c.Z)("<div>").addClass("dx-field-empty-item").html("&nbsp;").addClass(i.join(" ")).appendTo(t)}const Rp=g.default.inherit({ctor(e,t){this.editor=e,this.validator=t,this.validationRequestsCallbacks=[];const i=e=>{this.validationRequestsCallbacks.forEach((t=>t(e)))};e.validationRequest.add(i),e.on("disposing",(()=>{e.validationRequest.remove(i)}))},getValue(){return this.editor.option("value")},getCurrentValidationError(){return this.editor.option("validationError")},bypass(){return this.editor.option("disabled")},applyValidationResults(e){this.editor.option({validationErrors:e.brokenRules,validationStatus:e.status})},reset(){this.editor.clear()},focus(){this.editor.focus()}}),$p=Rp,Np=sn.default.inherit({_initOptions(e){this.callBase.apply(this,arguments),this.option(te.initValidationOptions(e))},_getDefaultOptions(){return(0,f.l)(this.callBase(),{validationRules:[]})},_init(){this.callBase(),this._initGroupRegistration(),this.focused=(0,h.Z)(),this._initAdapter(),this._validationInfo={result:null,deferred:null,skipValidation:!1}},_initGroupRegistration(){const e=this._findGroup();this._groupWasInit||this.on("disposing",(e=>{te.removeRegisteredValidator(e.component._validationGroup,e.component)})),this._groupWasInit&&this._validationGroup===e||(te.removeRegisteredValidator(this._validationGroup,this),this._groupWasInit=!0,this._validationGroup=e,te.registerValidatorInGroup(e,this))},_setOptionsByReference(){this.callBase(),(0,f.l)(this._optionsByReference,{validationGroup:!0})},_getEditor(){const e=this.$element()[0];return(0,N.aT)(e,"dx-validation-target")},_initAdapter(){const e=this._getEditor();let t=this.option("adapter");if(!t){if(e)return t=new $p(e,this),t.validationRequestsCallbacks.push((e=>{this._validationInfo.skipValidation||this.validate(e)})),void this.option("adapter",t);throw ge.Z.Error("E0120")}const i=t.validationRequestsCallbacks;i&&i.push((e=>{this.validate(e)}))},_toggleRTLDirection(e){var t;const i=(null===(t=this.option("adapter"))||void 0===t||null===(t=t.editor)||void 0===t?void 0:t.option("rtlEnabled"))??e;this.callBase(i)},_initMarkup(){this.$element().addClass("dx-validator"),this.callBase()},_render(){this.callBase(),this._toggleAccessibilityAttributes()},_toggleAccessibilityAttributes(){const e=this._getEditor();if(e){const t=(this.option("validationRules")||[]).some((e=>{let{type:t}=e;return"required"===t}))||null;e.isInitialized()&&e.setAria("required",t),e.option("_onMarkupRendered",(()=>{e.setAria("required",t)}))}},_visibilityChanged(e){e&&this._initGroupRegistration()},_optionChanged(e){switch(e.name){case"validationGroup":return void this._initGroupRegistration();case"validationRules":return this._resetValidationRules(),this._toggleAccessibilityAttributes(),void(void 0!==this.option("isValid")&&this.validate());case"adapter":this._initAdapter();break;case"isValid":case"validationStatus":this.option(te.synchronizeValidationOptions(e,this.option()));break;default:this.callBase(e)}},_getValidationRules(){return this._validationRules||(this._validationRules=(0,j.map)(this.option("validationRules"),((e,t)=>(0,f.l)({},e,{validator:this,index:t})))),this._validationRules},_findGroup(){const e=this.$element();return this.option("validationGroup")||te.findGroup(e,this._modelByElement(e))},_resetValidationRules(){delete this._validationRules},validate(e){const t=this.option("adapter"),i=this.option("name"),n=t.bypass&&t.bypass(),o=e&&void 0!==e.value?e.value:t.getValue(),r=t.getCurrentValidationError&&t.getCurrentValidationError(),s=this._getValidationRules(),a=this._validationInfo&&this._validationInfo.result;if(a&&"pending"===a.status&&a.value===o)return(0,f.l)({},a);let l;return n?l={isValid:!0,status:"valid"}:r&&r.editorSpecific?(r.validator=this,l={isValid:!1,status:"invalid",brokenRule:r,brokenRules:[r]}):l=te.validate(o,s,i),l.id=(new V.Z).toString(),this._applyValidationResult(l,t),l.complete&&l.complete.then((e=>{e.id===this._validationInfo.result.id&&this._applyValidationResult(e,t)})),(0,f.l)({},this._validationInfo.result)},reset(){const e=this.option("adapter");this._validationInfo.skipValidation=!0,e.reset(),this._validationInfo.skipValidation=!1,this._resetValidationRules(),this._applyValidationResult({id:null,isValid:!0,brokenRule:null,brokenRules:null,pendingRules:null,status:"valid",complete:null},e)},_updateValidationResult(e){if(this._validationInfo.result&&this._validationInfo.result.id===e.id)for(const t in e)"id"!==t&&"complete"!==t&&(this._validationInfo.result[t]=e[t]);else{const t=this._validationInfo.deferred&&this._validationInfo.result.complete;this._validationInfo.result=(0,f.l)({},e,{complete:t})}},_applyValidationResult(e,t){const i=this._createActionByOption("onValidated",{excludeValidators:["readOnly"]});if(e.validator=this,this._updateValidationResult(e),t.applyValidationResults&&t.applyValidationResults(this._validationInfo.result),this.option({validationStatus:this._validationInfo.result.status}),"pending"===this._validationInfo.result.status)return this._validationInfo.deferred||(this._validationInfo.deferred=(0,p.BH)(),this._validationInfo.result.complete=this._validationInfo.deferred.promise()),void this._eventsStrategy.fireEvent("validating",[this._validationInfo.result]);"pending"!==this._validationInfo.result.status&&(i(e),this._validationInfo.deferred&&(this._validationInfo.deferred.resolve(e),this._validationInfo.deferred=null))},focus(){const e=this.option("adapter");e&&e.focus&&e.focus()},_useTemplates:()=>!1});(0,r.default)("dxValidator",Np);const Vp=Np,Fp=Vp,Zp="dx-form-group",Hp="dx-col-",Lp="dx-field-item",jp="dx-layout-manager-one-col",zp="dx-field-item-label-content",Wp="dx-field-item-label",Kp="dx-field-item-content",qp="dx-root-simple-item",Up="dx-field-item-tab",Gp="dx-group-colcount-",Yp="group-col-count",Qp="simple",Xp=["dxTagBox","dxRangeSlider","dxDateRangeBox"],Jp=["dxRangeSlider","dxSlider"],ef=["dxCalendar","dxCheckBox","dxHtmlEditor","dxRadioGroup","dxRangeSlider","dxSlider","dxSwitch"];function tf(e,t){let{showRequiredMark:i,requiredMark:n,showOptionalMark:o,optionalMark:r}=e;return{showRequiredMark:i&&t,requiredMark:n,showOptionalMark:o&&!t,optionalMark:r}}const nf="dx-field-item-required-mark",of="dx-field-item-optional-mark";function rf(e){let t=0;const i=e.children.length;for(let n=0;n<i;n++)t+=e.children[n].offsetWidth;return t}const sf="dx-field-item-content-wrapper",af="dx-template-wrapper",lf="dx-validation-target",cf="dx-invalid";function df(e){let{$parent:t,rootElementCssClassList:i,formOrLayoutManager:n,createComponentCallback:o,labelOptions:r,labelNeedBaselineAlign:s,labelLocation:a,needRenderLabel:d,formLabelLocation:h,item:u,editorOptions:p,isSimpleItem:f,isRequired:g,template:v,helpID:b,labelID:y,name:C,helpText:w,requiredMessageTemplate:x,validationGroup:S}=e;const I=(0,c.Z)("<div>").addClass(i.join(" ")).appendTo(t);I.addClass(g?"dx-field-item-required":"dx-field-item-optional"),f&&I.addClass("dx-flex-layout"),f&&s&&I.addClass("dx-field-item-label-align");const k=(0,c.Z)("<div>");k.data("dx-form-item",u),k.addClass(Kp).addClass("dx-field-item-content-location-"+{right:"left",left:"right",top:"bottom"}[h]);let E,O=null;if(d&&(r.labelTemplate&&(r.labelTemplateData=pf(u,p,n)),O=function(e){let{text:t,id:i,location:n,alignment:o,labelID:r=null,markOptions:s={},labelTemplate:a,labelTemplateData:d,onLabelTemplateRendered:h}=e;if((!(0,_.$K)(t)||t.length<=0)&&!(0,_.$K)(a))return null;const u=(0,c.Z)("<label>").addClass(`${Wp} dx-field-item-label-location-${n}`).attr("for",i).attr("id",r).css("textAlign",o),p=(0,c.Z)("<span>").addClass(zp);let f=(0,c.Z)("<span>").addClass("dx-field-item-label-text").text(t);return a&&(f=(0,c.Z)("<div>").addClass("dx-field-item-custom-label-content"),d.text=t,a.render({container:(0,l.uD)(f),model:d,onRendered(){null==h||h()}})),u.append(p.append(f,function(e){const t=function(e){let{showRequiredMark:t,requiredMark:i,showOptionalMark:n,optionalMark:o}=e;return t||n?String.fromCharCode(160)+(t?i:o):""}(e);return""===t?null:(0,c.Z)("<span>").addClass(e.showRequiredMark?nf:of).text(t)}(s)))}(r)),O){const{editorType:e}=u;I.append(O),"top"!==a&&"left"!==a||I.append(k),"right"===a&&I.prepend(k),"top"===a?I.addClass("dx-label-v-align"):I.addClass("dx-label-h-align"),"dxCheckBox"!==e&&"dxSwitch"!==e||m.Z.on(O,He.name,(()=>{m.Z.trigger(k.children(),He.name)}));const t=["dxCheckBox","dxSwitch","dxRadioGroup"].includes(e),i=r.alignment;!v&&t&&"top"===a&&("left"===i||!i)&&k.addClass("dx-toggle-controls-paddings")}else I.append(k);if(v)v.render({container:(0,l.uD)(k),model:pf(u,p,n),onRendered(){const e=function(e){var t;return(null==e?void 0:e.data(lf))||(null==e||null===(t=e.parent)||void 0===t||null===(t=t.call(e))||void 0===t?void 0:t.data(lf))}(hf(k));uf(e)}});else{const e=(0,c.Z)("<div>").appendTo(k);try{E=o(e,u.editorType,p),E.setAria("describedby",b),y&&E.setAria("labelledby",y),E.setAria("required",g)}catch(e){ge.Z.log("E1035",e.message)}}const T=hf(k),D=T&&T.data(lf);if(D){const e=u.label&&u.label.text,t=e?null:C,i=e?u.label.text:t&&(0,En.captionize)(t);let n;if(f)if(u.validationRules)n=u.validationRules;else{const e=(0,re.format)(x,i||"");n=u.isRequired?[{type:"required",message:e}]:null}Array.isArray(n)&&n.length&&o(T,Fp,{validationRules:n,validationGroup:S,dataGetter:()=>({formItem:u})}),uf(D)}return w&&f&&k.parent().append((0,c.Z)("<div>").addClass(sf).append(k).append((0,c.Z)("<div>").addClass("dx-field-item-help-text").attr("id",b).text(w))),{$fieldEditorContainer:k,$rootElement:I,widgetInstance:E}}function hf(e){const t=e.children().first();return t.hasClass(af)?t.children().first():t}function uf(e){if(e&&(0,Sn.yj)()){const t=`.${sf}`,i=e=>{let{element:i,component:n}=e;const{isValid:o,validationMessageMode:r}=n.option();(0,c.Z)(i).parents(t).toggleClass(cf,!1===o&&(n._isFocused()||"always"===r))};e.on("optionChanged",(e=>{"isValid"===e.name&&i(e)})),e.on("focusIn",i).on("focusOut",i).on("enterKey",i)}}function pf(e,t,i){return{dataField:e.dataField,editorType:e.editorType,editorOptions:t,component:i,name:e.name}}class ff{constructor(){this._map={}}_findWidgetInstance(e){let t;return(0,j.each)(this._map,((i,n)=>{let{widgetInstance:o,item:r}=n;if(e(r))return t=o,!1})),t}_findFieldByCondition(e,t){let i;return(0,j.each)(this._map,((n,o)=>{if(e(o))return i="guid"===t?n:o[t],!1})),i}clear(){this._map={}}removeItemsByItems(e){(0,j.each)(e.getItems(),(e=>this.removeItemByKey(e)))}removeItemByKey(e){delete this._map[e]}add(e){const t=e.guid||new V.Z;return this._map[t]=e,t}addItemsOrExtendFrom(e){e.each(((e,t)=>{this._map[e]?(t.widgetInstance&&(this._map[e].widgetInstance=t.widgetInstance),this._map[e].$itemContainer=t.$itemContainer):this.add({item:t.item,widgetInstance:t.widgetInstance,guid:e,$itemContainer:t.$itemContainer})}))}extendRunTimeItemInfoByKey(e,t){this._map[e]&&(this._map[e]=(0,f.l)(this._map[e],t))}findWidgetInstanceByItem(e){return this._findWidgetInstance((t=>t===e))}findGroupOrTabLayoutManagerByPath(e){return this._findFieldByCondition((t=>{let{path:i}=t;return i===e}),"layoutManager")}findKeyByPath(e){return this._findFieldByCondition((t=>{let{path:i}=t;return i===e}),"guid")}findWidgetInstanceByName(e){return this._findWidgetInstance((t=>e===t.name))}findWidgetInstanceByDataField(e){return this._findWidgetInstance((t=>e===((0,_.HD)(t)?t:t.dataField)))}findItemContainerByItem(e){for(const t in this._map)if(this._map[t].item===e)return this._map[t].$itemContainer;return null}findItemIndexByItem(e){return this._findFieldByCondition((t=>{let{item:i}=t;return i===e}),"itemIndex")}findPreparedItemByItem(e){return this._findFieldByCondition((t=>{let{item:i}=t;return i===e}),"preparedItem")}getItems(){return this._map}each(e){(0,j.each)(this._map,((t,i)=>{e(t,i)}))}removeItemsByPathStartWith(e){Object.keys(this._map).filter((t=>!!this._map[t].path&&this._map[t].path.indexOf(e,0)>-1)).forEach((e=>this.removeItemByKey(e)))}}const _f=de.default.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{layoutData:{},readOnly:!1,colCount:1,colCountByScreen:void 0,labelLocation:"left",onFieldDataChanged:null,onEditorEnterKey:null,customizeItem:null,alignItemLabels:!0,minColWidth:200,showRequiredMark:!0,screenByWidth:null,showOptionalMark:!1,requiredMark:"*",labelMode:"outside",optionalMark:z.Z.format("dxForm-optionalMark"),requiredMessage:z.Z.getFormatter("dxForm-requiredMessage")})},_setOptionsByReference(){this.callBase(),(0,f.l)(this._optionsByReference,{layoutData:!0,validationGroup:!0})},_init(){const e=this.option("layoutData");this.callBase(),this._itemWatchers=[],this._itemsRunTimeInfo=new ff,this._updateReferencedOptions(e),this._initDataAndItems(e)},_dispose(){this.callBase(),this._cleanItemWatchers()},_initDataAndItems(e){this._syncDataWithItems(),this._updateItems(e)},_syncDataWithItems(){const e=this.option("layoutData"),t=this.option("items");(0,_.$K)(t)&&t.forEach((t=>{if(t.dataField&&void 0===this._getDataByField(t.dataField)){let i;t.editorOptions&&(i=t.editorOptions.value),((0,_.$K)(i)||t.dataField in e)&&this._updateFieldValue(t.dataField,i)}}))},_getDataByField(e){return e?this.option(`layoutData.${e}`):null},_isCheckboxUndefinedStateEnabled(e){let{allowIndeterminateState:t,editorType:i,dataField:n}=e;if(!0===t&&"dxCheckBox"===i){const e=["layoutData",...n.split(".")],t=e.pop(),i=this.option(e.join("."));return i&&t in i}return!1},_updateFieldValue(e,t){const i=this.option("layoutData");let n=t;!Mu.Z.isWrapped(i[e])&&(0,_.$K)(e)?this.option(`layoutData.${e}`,n):Mu.Z.isWritableWrapped(i[e])&&(n=(0,_.mf)(n)?n():n,i[e](n)),this._triggerOnFieldDataChanged({dataField:e,value:n})},_triggerOnFieldDataChanged(e){this._createActionByOption("onFieldDataChanged")(e)},_updateItems(e){const t=this,i=this.option("items"),n=(0,_.$K)(i),o=t.option("customizeItem"),r=n?i:this._generateItemsByData(e);if((0,_.$K)(r)){const e=[];(0,j.each)(r,((i,n)=>{t._isAcceptableItem(n)&&(n=t._processItem(n),o&&o(n),(0,_.Kn)(n)&&!1!==Mu.Z.unwrap(n.visible)&&e.push(n))})),t._itemWatchers.length&&n||t._updateItemWatchers(r),this._setItems(e),this._sortItems()}},_cleanItemWatchers(){this._itemWatchers.forEach((e=>{e()})),this._itemWatchers=[]},_updateItemWatchers(e){const t=this,i=t._getWatch();e.forEach((e=>{(0,_.Kn)(e)&&(0,_.$K)(e.visible)&&(0,_.mf)(i)&&t._itemWatchers.push(i((()=>Mu.Z.unwrap(e.visible)),(()=>{t._updateItems(t.option("layoutData")),t.repaint()}),{skipImmediate:!0}))}))},_generateItemsByData(e){const t=[];return(0,_.$K)(e)&&(0,j.each)(e,(e=>{t.push({dataField:e})})),t},_isAcceptableItem(e){const t=e.dataField||e,i=this._getDataByField(t);return!((0,_.mf)(i)&&!Mu.Z.isWrapped(i))},_processItem(e){if("string"==typeof e&&(e={dataField:e}),"object"!=typeof e||e.itemType||(e.itemType=Qp),!(0,_.$K)(e.editorType)&&(0,_.$K)(e.dataField)){const t=this._getDataByField(e.dataField);e.editorType=(0,_.$K)(t)?this._getEditorTypeByDataType((0,_.dt)(t)):"dxTextBox"}return"dxCheckBox"===e.editorType&&(e.allowIndeterminateState=e.allowIndeterminateState??!0),e},_getEditorTypeByDataType(e){switch(e){case"number":return"dxNumberBox";case"date":return"dxDateBox";case"boolean":return"dxCheckBox";default:return"dxTextBox"}},_sortItems(){(0,jo.Sq)(this._items,"visibleIndex"),this._sortIndexes()},_sortIndexes(){this._items.sort(((e,t)=>{const i=e.visibleIndex,n=t.visibleIndex;let o;return o=i>n?1:i<n?-1:0,o}))},_initMarkup(){this._itemsRunTimeInfo.clear(),this.$element().addClass("dx-layout-manager"),this.callBase(),this._renderResponsiveBox()},_renderResponsiveBox(){const e=this,t=[];if(e._items&&e._items.length){const i=e._getColCount(),n=(0,c.Z)("<div>").appendTo(e.$element());e._prepareItemsWithMerging(i);const o=e._generateLayoutItems();e._responsiveBox=e._createComponent(n,Pp,e._getResponsiveBoxConfig(o,i,t)),(0,Z.hasWindow)()||e._renderTemplates(t)}},_itemStateChangedHandler(e){this._refresh()},_renderTemplates(e){const t=this;let i=0;e.forEach((e=>{var t;let{item:n}=e;null!=n&&null!==(t=n.label)&&void 0!==t&&t.template&&i++})),(0,j.each)(e,((e,n)=>{switch(n.itemType){case"empty":Mp(n);break;case"button":t._renderButtonItem(n);break;default:t._renderFieldItem(n,i)}}))},_getResponsiveBoxConfig(e,t,i){const n=this,o=n.option("colCountByScreen"),r=o&&o.xs;return{onItemStateChanged:this._itemStateChangedHandler.bind(this),onLayoutChanged(){const e=n.option("onLayoutChanged"),t=n.isSingleColumnMode();e&&(n.$element().toggleClass(jp,t),e(t))},onContentReady(e){(0,Z.hasWindow)()&&n._renderTemplates(i),n.option("onLayoutChanged")&&n.$element().toggleClass(jp,n.isSingleColumnMode(e.component))},itemTemplate(e,o,r){if(!e.location)return;const s=(0,c.Z)(r),a=e.location.row*t,l=n._items[e.location.col+a];if(!l)return;const d=[l.cssClass];s.toggleClass("dx-single-column-item-content",n.isSingleColumnMode(this)),0===e.location.row&&d.push("dx-first-row"),0===e.location.col&&d.push("dx-first-col"),l.itemType===Qp&&n.option("isRoot")&&s.addClass(qp);const h=e.location.col===t-1||e.location.col+e.location.colspan===t,u=n._getRowsCount(),p=e.location.row===u-1;h&&d.push("dx-last-col"),p&&d.push("dx-last-row"),"empty"!==l.itemType&&(d.push(Lp),d.push(n.option("cssItemClass")),(0,_.$K)(l.col)&&d.push(`dx-col-${l.col}`)),i.push({itemType:l.itemType,item:l,$parent:s,rootElementCssClassList:d})},cols:n._generateRatio(t),rows:n._generateRatio(n._getRowsCount(),!0),dataSource:e,screenByWidth:n.option("screenByWidth"),singleColumnScreen:!r&&"xs"}},_getColCount(){let e=this.option("colCount");const t=this.option("colCountByScreen");if(t){let i=this.option("form").getTargetScreenFactor();i||(i=(0,Z.hasWindow)()?(0,Z.getCurrentScreenFactor)(this.option("screenByWidth")):"lg"),e=t[i]||e}if("auto"===e){if(this._cashedColCount)return this._cashedColCount;this._cashedColCount=e=this._getMaxColCount()}return e<1?1:e},_getMaxColCount(){if(!(0,Z.hasWindow)())return 1;const e=this.option("minColWidth"),t=(0,oe.dz)(this.$element()),i=this._items.length,n=Math.floor(t/e)||1;return i<n?i:n},isCachedColCountObsolete(){return this._cashedColCount&&this._getMaxColCount()!==this._cashedColCount},_prepareItemsWithMerging(e){const t=this._items.slice(0);let i,n,o,r,s=[];for(r=0;r<t.length;r++)if(i=t[r],s.push(i),(this.option("alignItemLabels")||i.alignItemLabels||i.colSpan)&&(i.col=this._getColByIndex(s.length-1,e)),i.colSpan>1&&i.col+i.colSpan<=e){for(n=[],o=0;o<i.colSpan-1;o++)n.push({merged:!0});s=s.concat(n)}else delete i.colSpan;this._setItems(s)},_getColByIndex:(e,t)=>e%t,_setItems(e){this._items=e,this._cashedColCount=null},_generateLayoutItems(){const e=this._items,t=this._getColCount(),i=[];let n,o;for(o=0;o<e.length;o++)if(n=e[o],!n.merged){const e={location:{row:parseInt(o/t),col:this._getColByIndex(o,t)}};(0,_.$K)(n.disabled)&&(e.disabled=n.disabled),(0,_.$K)(n.visible)&&(e.visible=n.visible),(0,_.$K)(n.colSpan)&&(e.location.colspan=n.colSpan),(0,_.$K)(n.rowSpan)&&(e.location.rowspan=n.rowSpan),i.push(e)}return i},_renderEmptyItem(e){Mp({$container:e})},_renderButtonItem(e){let{item:t,$parent:i,rootElementCssClassList:n}=e;const{$rootElement:o,buttonInstance:r}=function(e){let{item:t,$parent:i,rootElementCssClassList:n,validationGroup:o,createComponentCallback:r}=e;const s=(0,c.Z)("<div>").appendTo(i).addClass(n.join(" ")).addClass("dx-field-button-item").css("textAlign",(a=t.horizontalAlignment,(0,_.$K)(a)?a:"right"));var a;return i.css("justifyContent",function(e){switch(e){case"center":return"center";case"bottom":return"flex-end";default:return"flex-start"}}(t.verticalAlignment)),{$rootElement:s,buttonInstance:r((0,c.Z)("<div>").appendTo(s),"dxButton",(0,f.l)({validationGroup:o},t.buttonOptions))}}({item:t,$parent:i,rootElementCssClassList:n,validationGroup:this.option("validationGroup"),createComponentCallback:this._createComponent.bind(this)});this._itemsRunTimeInfo.add({item:t,widgetInstance:r,guid:t.guid,$itemContainer:o})},_renderFieldItem(e,t){var i,n;let{item:o,$parent:r,rootElementCssClassList:s}=e;const a=this._getDataByField(o.dataField);let l=!1;if(void 0===a){const{allowIndeterminateState:e,editorType:t,dataField:i}=o;l=this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:e,editorType:t,dataField:i})}const c=o.dataField||o.name,d=this._getFormOrThis(),{$fieldEditorContainer:h,widgetInstance:u,$rootElement:p}=df(function(e){let{$parent:t,rootElementCssClassList:i,formOrLayoutManager:n,createComponentCallback:o,item:r,template:s,labelTemplate:a,name:l,formLabelLocation:c,requiredMessageTemplate:d,validationGroup:h,editorValue:u,canAssignUndefinedValueToEditor:p,editorValidationBoundary:m,editorStylingMode:g,showColonAfterLabel:v,managerLabelLocation:b,itemId:y,managerMarkOptions:C,labelMode:w,onLabelTemplateRendered:x}=e;const S=(0,_.$K)(r.isRequired)?r.isRequired:!!function(e){let t;return e&&e.length&&(0,j.each)(e,((e,i)=>{if("required"===i.type)return t=!0,!1})),t}(r.validationRules),I=r.itemType===Qp,k=r.helpText?`dx-${new V.Z}`:null,E=function(e){let{item:t,id:i,isRequired:n,managerMarkOptions:o,showColonAfterLabel:r,labelLocation:s,labelTemplate:a,formLabelMode:l,onLabelTemplateRendered:c}=e;const d=ef.includes(t.editorType),h=(0,f.l)({showColon:r,location:s,id:i,visible:"outside"===l||d&&"hidden"!==l,isRequired:n},t?t.label:{},{markOptions:tf(o,n),labelTemplate:a,onLabelTemplateRendered:c});return["dxRadioGroup","dxCheckBox","dxLookup","dxSlider","dxRangeSlider","dxSwitch","dxHtmlEditor","dxDateRangeBox"].includes(t.editorType)&&(h.labelID=`dx-label-${new V.Z}`),!h.text&&t.dataField&&(h.text=(0,En.captionize)(t.dataField)),h.text&&(h.textWithoutColon=h.text,h.text+=h.showColon?":":""),h}({item:r,id:y,isRequired:S,managerMarkOptions:C,showColonAfterLabel:v,labelLocation:b,formLabelMode:w,labelTemplate:a,onLabelTemplateRendered:x}),O=E.visible&&(E.text||E.labelTemplate&&I),{location:T,labelID:D}=E,B="top"!==T&&["dxTextArea","dxRadioGroup","dxCalendar","dxHtmlEditor"].includes(r.editorType),A=function(e){let{editorType:t,defaultEditorName:i,editorValue:n,canAssignUndefinedValueToEditor:o,externalEditorOptions:r,editorInputId:s,editorValidationBoundary:a,editorStylingMode:l,formLabelMode:c,labelText:d,labelMark:h}=e;const u={};(void 0!==n||o)&&(u.value=n),Xp.includes(t)&&(u.value=u.value||[]);let p=null==r?void 0:r.labelMode;(0,_.$K)(p)||(p="outside"===c?"hidden":c);const m=(null==r?void 0:r.stylingMode)||l,g=Jp.includes(t),v=(0,f.l)(!0,u,r,{inputAttr:{id:s},validationBoundary:a,stylingMode:m,label:g?null==r?void 0:r.label:d,labelMode:p,labelMark:h});return r&&(v.dataSource&&(v.dataSource=r.dataSource),v.items&&(v.items=r.items)),i&&!v.name&&(v.name=i),v}({editorType:r.editorType,editorValue:u,defaultEditorName:r.dataField,canAssignUndefinedValueToEditor:p,externalEditorOptions:r.editorOptions,editorInputId:y,editorValidationBoundary:m,editorStylingMode:g,formLabelMode:w,labelText:E.textWithoutColon,labelMark:E.markOptions.showRequiredMark?String.fromCharCode(160)+E.markOptions.requiredMark:""});return{$parent:t,rootElementCssClassList:i,formOrLayoutManager:n,createComponentCallback:o,labelOptions:E,labelNeedBaselineAlign:B,labelLocation:T,needRenderLabel:O,item:r,isSimpleItem:I,isRequired:S,template:s,helpID:k,labelID:D,name:l,helpText:!E.markOptions.showOptionalMark||E.visible||"hidden"===A.labelMode||(0,_.$K)(r.helpText)?r.helpText:E.markOptions.optionalMark,formLabelLocation:c,requiredMessageTemplate:d,validationGroup:h,editorOptions:A}}({$parent:r,rootElementCssClassList:s,item:o,name:c,editorValue:a,canAssignUndefinedValueToEditor:l,formOrLayoutManager:this._getFormOrThis(),createComponentCallback:this._createComponent.bind(this),formLabelLocation:this.option("labelLocation"),requiredMessageTemplate:this.option("requiredMessage"),validationGroup:this.option("validationGroup"),editorValidationBoundary:this.option("validationBoundary"),editorStylingMode:this.option("form")&&this.option("form").option("stylingMode"),showColonAfterLabel:this.option("showColonAfterLabel"),managerLabelLocation:this.option("labelLocation"),template:o.template?this._getTemplate(o.template):null,labelTemplate:null!==(i=o.label)&&void 0!==i&&i.template?this._getTemplate(o.label.template):null,itemId:this.option("form")&&this.option("form").getItemID(c),managerMarkOptions:this._getMarkOptions(),labelMode:this.option("labelMode"),onLabelTemplateRendered:()=>{this._incTemplateRenderedCallCount(),this._shouldAlignLabelsOnTemplateRendered(d,t)&&d._alignLabels(this,this.isSingleColumnMode(d))}}));null===(n=this.option("onFieldItemRendered"))||void 0===n||n(),u&&o.dataField&&this._bindDataField(u,o.dataField,o.editorType,h),this._itemsRunTimeInfo.add({item:o,widgetInstance:u,guid:o.guid,$itemContainer:p})},_incTemplateRenderedCallCount(){this._labelTemplateRenderedCallCount=(this._labelTemplateRenderedCallCount??0)+1},_shouldAlignLabelsOnTemplateRendered(e,t){return e.option("templatesRenderAsynchronously")&&this._labelTemplateRenderedCallCount===t},_getMarkOptions(){return{showRequiredMark:this.option("showRequiredMark"),requiredMark:this.option("requiredMark"),showOptionalMark:this.option("showOptionalMark"),optionalMark:this.option("optionalMark")}},_getFormOrThis(){return this.option("form")||this},_bindDataField(e,t,i,n){const o=this._getFormOrThis();e.on("enterKey",(e=>{o._createActionByOption("onEditorEnterKey")((0,f.l)(e,{dataField:t}))})),this._createWatcher(e,n,t),this.linkEditorToDataField(e,t,i)},_createWatcher(e,t,i){const n=this,o=n._getWatch();if(!(0,_.mf)(o))return;const r=o((()=>n._getDataByField(i)),(()=>{const t=n._getDataByField(i);if("dxTagBox"===e.NAME){const i=e.option("value");if(t!==i&&function(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}(t,i))return}e.option("value",t)}),{deep:!0,skipImmediate:!0},{createWatcherDataField:i});m.Z.on(t,$o.x,r)},_getWatch(){if(!(0,_.$K)(this._watch)){const e=this.option("form");this._watch=e&&e.option("integrationOptions.watchMethod")}return this._watch},_createComponent(e,t,i){const o=this.option("readOnly");let r=Object.hasOwn(i,"readOnly");const s=this.callBase(e,t,(0,n.Z)({},i,{readOnly:r?i.readOnly:o}));let a=!1;return s.on("optionChanged",(e=>{"readOnly"!==e.name||a||(r=!0)})),this.on("optionChanged",(e=>{"readOnly"!==e.name||r||(a=!0,s.option(e.name,e.value),a=!1)})),s},_generateRatio(e,t){const i=[];let n,o;for(o=0;o<e;o++)n={ratio:1},t&&(n.baseSize="auto"),i.push(n);return i},_getRowsCount(){return Math.ceil(this._items.length/this._getColCount())},_updateReferencedOptions(e){const t=this.option("layoutData");(0,_.Kn)(t)&&Object.getOwnPropertyNames(t).forEach((e=>delete this._optionsByReference[`layoutData.${e}`])),(0,_.Kn)(e)&&Object.getOwnPropertyNames(e).forEach((e=>this._optionsByReference[`layoutData.${e}`]=!0))},_clearWidget(e){this._disableEditorValueChangedHandler=!0,e.clear(),this._disableEditorValueChangedHandler=!1,e.option("isValid",!0)},_optionChanged(e){if(0!==e.fullName.search("layoutData."))switch(e.name){case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":this._cashedRequiredConfig=null,this._invalidate();break;case"layoutData":this._updateReferencedOptions(e.value),this.option("items")?(0,_.Qr)(e.value)||this._itemsRunTimeInfo.each(((t,i)=>{if((0,_.$K)(i.item)){const{dataField:t}=i.item;if(t&&(0,_.$K)(i.widgetInstance)){const n=(0,hn.vb)(t)(e.value),{allowIndeterminateState:o,editorType:r}=i.item;void 0!==n||this._isCheckboxUndefinedStateEnabled({allowIndeterminateState:o,editorType:r,dataField:t})?i.widgetInstance.option("value",n):this._clearWidget(i.widgetInstance)}}})):(this._initDataAndItems(e.value),this._invalidate());break;case"items":this._cleanItemWatchers(),this._initDataAndItems(e.value),this._invalidate();break;case"alignItemLabels":case"labelLocation":case"labelMode":case"requiredMessage":this._invalidate();break;case"customizeItem":this._updateItems(this.option("layoutData")),this._invalidate();break;case"colCount":case"colCountByScreen":this._resetColCount();break;case"minColWidth":"auto"===this.option("colCount")&&this._resetColCount();break;case"readOnly":case"onFieldDataChanged":break;case"width":this.callBase(e),"auto"===this.option("colCount")&&this._resetColCount();break;default:this.callBase(e)}},_resetColCount(){this._cashedColCount=null,this._invalidate()},linkEditorToDataField(e,t){this.on("optionChanged",(i=>{i.fullName===`layoutData.${t}`&&e._setOptionWithoutOptionChange("value",i.value)})),e.on("valueChanged",(e=>{const i=(0,_.Kn)(e.value)||Array.isArray(e.value);this._disableEditorValueChangedHandler||i&&e.value===e.previousValue||this._updateFieldValue(t,e.value)}))},_dimensionChanged(){"auto"===this.option("colCount")&&this.isCachedColCountObsolete()&&this._eventsStrategy.fireEvent("autoColCountChanged")},updateData(e,t){const i=this;(0,_.Kn)(e)?(0,j.each)(e,((e,t)=>{i._updateFieldValue(e,t)})):"string"==typeof e&&i._updateFieldValue(e,t)},getEditor(e){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(e)||this._itemsRunTimeInfo.findWidgetInstanceByName(e)},isSingleColumnMode(e){const t=this._responsiveBox||e;if(t)return t.option("currentScreenFactor")===t.option("singleColumnScreen")},getItemsRunTimeInfo(){return this._itemsRunTimeInfo}});(0,r.default)("dxLayoutManager",_f);const mf=wr.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{focusStateEnabled:!1,noDataText:null})},_setOptionsByReference(){this.callBase(),(0,f.l)(this._optionsByReference,{validationGroup:!0})},_init(){this.callBase(),this._initGroupRegistration()},_initGroupRegistration(){const e=this.$element(),t=this.option("validationGroup")||te.findGroup(e,this._modelByElement(e)),i=te.addGroup(t,!0);this._unsubscribeGroup(),this._groupWasInit=!0,this._validationGroup=t,this.groupSubscription=this._groupValidationHandler.bind(this),i.on("validated",this.groupSubscription)},_unsubscribeGroup(){const e=te.getGroupConfig(this._validationGroup);e&&e.off("validated",this.groupSubscription)},_getOrderedItems(e,t){let i=[];return(0,j.each)(e,((e,n)=>{const o=(0,u.grep)(t,(e=>{if(e.validator===n)return!0}));o.length&&(i=i.concat(o))})),i},_groupValidationHandler(e){const t=this._getOrderedItems(e.validators,(0,j.map)(e.brokenRules,(e=>({text:e.message,validator:e.validator,index:e.index}))));this.validators=e.validators,(0,j.each)(this.validators,((e,t)=>{if(t._validationSummary!==this){let e=this._itemValidationHandler.bind(this);const i=function(){t.off("validated",e),t._validationSummary=null,e=null};t.on("validated",e),t.on("disposing",i),t._validationSummary=this}})),this.option("items",t)},_itemValidationHandler(e){let{isValid:t,validator:i,brokenRules:n}=e,o=this.option("items"),r=!1,s=0;for(;s<o.length;){const e=o[s];if(e.validator===i){const i=(0,u.grep)(n||[],(t=>t.index===e.index))[0];if(t||!i){o.splice(s,1),r=!0;continue}i.message!==e.text&&(e.text=i.message,r=!0)}s++}(0,j.each)(n,((e,t)=>{(0,u.grep)(o,(e=>e.validator===i&&e.index===t.index))[0]||(o.push({text:t.message,validator:i,index:t.index}),r=!0)})),r&&(o=this._getOrderedItems(this.validators,o),this.option("items",o))},_initMarkup(){this.$element().addClass("dx-validationsummary"),this.callBase()},_optionChanged(e){"validationGroup"===e.name?this._initGroupRegistration():this.callBase(e)},_itemClass:()=>"dx-validationsummary-item",_itemDataKey:()=>"dx-validationsummary-item-data",_postprocessRenderItem(e){m.Z.on(e.itemElement,"click",(()=>{e.itemData.validator&&e.itemData.validator.focus&&e.itemData.validator.focus()}))},_dispose(){this.callBase(),this._unsubscribeGroup()},refreshValidationGroup(){this._initGroupRegistration()}});(0,r.default)("dxValidationSummary",mf);const gf=mf;class vf extends sn.default{_getDefaultOptions(){return super._getDefaultOptions()}_init(){super._init(),te.addGroup(this,!1)}_initMarkup(){const e=this.$element();e.addClass("dx-validationgroup"),e.find(".dx-validator").each(((e,t)=>{Vp.getInstance((0,c.Z)(t))._initGroupRegistration()})),e.find(".dx-validationsummary").each(((e,t)=>{gf.getInstance((0,c.Z)(t)).refreshValidationGroup()})),super._initMarkup()}validate(){return te.validateGroup(this)}reset(){return te.resetGroup(this)}_dispose(){te.removeGroup(this),this.$element().removeClass("dx-validationgroup"),super._dispose()}_useTemplates(){return!1}}(0,r.default)("dxValidationGroup",vf);const bf={move(e,t){(0,Ws.pB)(e,{left:t})}},yf={moveTo(e,t,i,n){mo.default.animate(e,{type:"slide",to:{left:t},duration:i,complete:n})},complete(e){mo.default.stop(e,!0)}},Cf=e=>+e,wf=js.inherit({_activeStateUnit:".dx-multiview-item",_supportedKeys(){return(0,f.l)(this.callBase(),{pageUp:u.noop,pageDown:u.noop})},_getDefaultOptions(){return(0,f.l)(this.callBase(),{selectedIndex:0,swipeEnabled:!0,animationEnabled:!0,loop:!1,deferRendering:!0,loopItemFocus:!1,selectOnFocus:!0,selectionMode:"single",selectionRequired:!0,selectByClick:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>"desktop"===a.default.real().deviceType&&!a.default.isSimulator(),options:{focusStateEnabled:!0}}])},_itemClass:()=>"dx-multiview-item",_itemDataKey:()=>"dxMultiViewItemData",_itemContainer(){return this._$itemContainer},_itemElements(){return this._itemContainer().children(this._itemSelector())},_itemWidth(){return this._itemWidthValue||(this._itemWidthValue=(0,oe.dz)(this._$wrapper)),this._itemWidthValue},_clearItemWidthCache(){delete this._itemWidthValue},_itemsCount(){return this.option("items").length},_normalizeIndex(e){const t=this._itemsCount();return e<0&&(e+=t),e>=t&&(e-=t),e},_getRTLSignCorrection(){return this.option("rtlEnabled")?-1:1},_init(){this.callBase.apply(this,arguments);const e=this.$element();e.addClass("dx-multiview"),this._$wrapper=(0,c.Z)("<div>").addClass("dx-multiview-wrapper"),this._$wrapper.appendTo(e),this._$itemContainer=(0,c.Z)("<div>").addClass("dx-multiview-item-container"),this._$itemContainer.appendTo(this._$wrapper),this.option("loopItemFocus",this.option("loop")),this._findBoundaryIndices(),this._initSwipeable()},_initMarkup(){this._deferredItems=[],this.callBase();const e=this._getSelectedItemIndices();this._updateItemsVisibility(e[0]),this._setElementAria(),this._setItemsAria()},_afterItemElementDeleted(e,t){this.callBase(e,t),this._deferredItems&&this._deferredItems.splice(t.itemIndex,1)},_beforeItemElementInserted(e){this.callBase.apply(this,arguments),this._deferredItems&&this._deferredItems.splice(e.index,0,null)},_executeItemRenderAction(e,t,i){e=(this.option("items")||[]).indexOf(t),this.callBase(e,t,i)},_renderItemContent(e){const t=(0,p.BH)(),i=this,{callBase:n}=this,o=(0,p.BH)();return o.done((()=>{const o=n.call(i,e);t.resolve(o)})),this._deferredItems[e.index]=o,this.option("deferRendering")||o.resolve(),t.promise()},_render(){this.callBase(),(0,u.deferRender)((()=>{const e=this._getSelectedItemIndices();this._updateItems(e[0])}))},_getElementAria:()=>({role:"group",roledescription:z.Z.format("dxMultiView-elementAriaRoleDescription"),label:z.Z.format("dxMultiView-elementAriaLabel")}),_setElementAria(){const e=this._getElementAria();this.setAria(e,this.$element())},_setItemsAria(){const e=this._itemElements(),t=this._itemsCount();e.each(((e,i)=>{const n=this._getItemAria({itemIndex:e,itemsCount:t});this.setAria(n,(0,c.Z)(i))}))},_getItemAria(e){let{itemIndex:t,itemsCount:i}=e;return{role:"group",roledescription:z.Z.format("dxMultiView-itemAriaRoleDescription"),label:z.Z.format("dxMultiView-itemAriaLabel",t+1,i)}},_updateItems(e,t){this._updateItemsPosition(e,t),this._updateItemsVisibility(e,t)},_modifyByChanges(){this.callBase.apply(this,arguments);const e=this._getSelectedItemIndices();this._updateItemsVisibility(e[0])},_updateItemsPosition(e,t){const i=this._itemElements(),n=(0,_.$K)(t)?-this._animationDirection(t,e):void 0,o=i.eq(e);bf.move(o,0),(0,_.$K)(t)&&bf.move(i.eq(t),100*n+"%")},_updateItemsVisibility(e,t){this._itemElements().each(((i,n)=>{const o=(0,c.Z)(n),r=i!==e&&i!==t;r||this._renderSpecificItem(i),o.toggleClass("dx-multiview-item-hidden",r),this.setAria("hidden",r||void 0,o)}))},_renderSpecificItem(e){const t=this._itemElements().eq(e),i=t.find(this._itemContentClass()).length>0;(0,_.$K)(e)&&!i&&(this._deferredItems[e].resolve(),(0,hl.U_)(t))},_refreshItem(e,t){this.callBase(e,t),this._updateItemsVisibility(this.option("selectedIndex"))},_setAriaSelectionAttribute:u.noop,_updateSelection(e,t){const i=e[0],n=t[0];yf.complete(this._$itemContainer),this._updateItems(n,i);const o=this._animationDirection(i,n);this._animateItemContainer(o*this._itemWidth(),(()=>{bf.move(this._$itemContainer,0),this._updateItems(i),(0,oe.dz)(this._$itemContainer)}))},_animateItemContainer(e,t){const i=this.option("animationEnabled")?200:0;yf.moveTo(this._$itemContainer,e,i,t)},_animationDirection(e,t){const i=(n=this._$itemContainer,(0,Ws.jt)(n).left);var n;const o=(t-e)*this._getRTLSignCorrection()*this._getItemFocusLoopSignCorrection(),r=0!==i?i:o;return(0,ul.Xx)(r)},_getSwipeDisabledState(){return!this.option("swipeEnabled")||this._itemsCount()<=1},_initSwipeable(){this._createComponent(this.$element(),Fh,{disabled:this._getSwipeDisabledState(),elastic:!1,itemSizeFunc:this._itemWidth.bind(this),onStart:e=>this._swipeStartHandler(e.event),onUpdated:e=>this._swipeUpdateHandler(e.event),onEnd:e=>this._swipeEndHandler(e.event)})},_findBoundaryIndices(){const e=this.option("items");let t,i;e.forEach(((e,n)=>{Boolean(null==e?void 0:e.disabled)||(t??(t=n),i=n)})),this._boundaryIndices={firstAvailableIndex:t??0,lastAvailableIndex:i??e.length-1,firstTrueIndex:0,lastTrueIndex:e.length-1}},_swipeStartHandler(e){yf.complete(this._$itemContainer);const t=this.option("selectedIndex"),i=this.option("loop"),{firstAvailableIndex:n,lastAvailableIndex:o}=this._boundaryIndices,r=this.option("rtlEnabled");e.maxLeftOffset=Cf(i||(r?t>n:t<o)),e.maxRightOffset=Cf(i||(r?t<o:t>n)),this._swipeDirection=null},_swipeUpdateHandler(e){const{offset:t}=e,i=(0,ul.Xx)(t)*this._getRTLSignCorrection();if(bf.move(this._$itemContainer,t*this._itemWidth()),i!==this._swipeDirection){this._swipeDirection=i;const e=this.option("selectedIndex"),t=this._normalizeIndex(e-i);this._updateItems(e,t)}},_findNextAvailableIndex(e,t){const{items:i,loop:n}=this.option(),{firstAvailableIndex:o,lastAvailableIndex:r,firstTrueIndex:s,lastTrueIndex:a}=this._boundaryIndices,l=[s,o].includes(e),c=[a,r].includes(e);if(n){if(l&&t<0)return r;if(c&&t>0)return o}for(let n=e+t;n>=o&&n<=r;n+=t)if(!Boolean(i[n].disabled))return n;return e},_swipeEndHandler(e){const t=e.targetOffset*this._getRTLSignCorrection();if(t){const e=this._findNextAvailableIndex(this.option("selectedIndex"),-t);this.option("selectedIndex",e);const i=this.itemElements().filter(".dx-item-selected");this.option("focusStateEnabled")&&this.option("focusedElement",(0,l.uD)(i))}else this._animateItemContainer(0,u.noop)},_getItemFocusLoopSignCorrection(){return this._itemFocusLooped?-1:1},_moveFocus(){this.callBase.apply(this,arguments),this._itemFocusLooped=!1},_prevItem(e){const t=this.callBase.apply(this,arguments);return this._itemFocusLooped=t.is(e.last()),t},_nextItem(e){const t=this.callBase.apply(this,arguments);return this._itemFocusLooped=t.is(e.first()),t},_dimensionChanged(){this._clearItemWidthCache()},_visibilityChanged(e){e&&this._dimensionChanged()},_updateSwipeDisabledState(){const e=this._getSwipeDisabledState();Fh.getInstance(this.$element()).option("disabled",e)},_dispose(){delete this._boundaryIndices,this.callBase()},_optionChanged(e){const{value:t}=e;switch(e.name){case"loop":this.option("loopItemFocus",t);break;case"animationEnabled":break;case"swipeEnabled":this._updateSwipeDisabledState();break;case"deferRendering":this._invalidate();break;case"items":this._updateSwipeDisabledState(),this._findBoundaryIndices(),this.callBase(e);break;default:this.callBase(e)}}});(0,r.default)("dxMultiView",wf);const xf=wf;function Sf(e){return e.scrollWidth-e.clientWidth}const If="dx-tabs-expanded",kf=hr.inherit({_renderWatchers(){this.callBase(),this._startWatcher("badge",this._renderBadge.bind(this))},_renderBadge(e){if(this._$element.children(".dx-badge").remove(),!e)return;const t=(0,c.Z)("<div>").addClass("dx-tabs-item-badge").addClass("dx-badge").text(e);this._$element.append(t)}}),Ef={top:"dx-tab-indicator-position-top",right:"dx-tab-indicator-position-right",bottom:"dx-tab-indicator-position-bottom",left:"dx-tab-indicator-position-left"},Of={top:"dx-tabs-icon-position-top",end:"dx-tabs-icon-position-end",bottom:"dx-tabs-icon-position-bottom",start:"dx-tabs-icon-position-start"},Tf={primary:"dx-tabs-styling-mode-primary",secondary:"dx-tabs-styling-mode-secondary"},Df="vertical",Bf="bottom",Af="top",Pf=js.inherit({_activeStateUnit:".dx-tab",_getDefaultOptions(){return(0,f.l)(this.callBase(),{hoverStateEnabled:!0,showNavButtons:!0,scrollByContent:!0,scrollingEnabled:!0,selectionMode:"single",orientation:"horizontal",iconPosition:"start",stylingMode:"primary",activeStateEnabled:!0,selectionRequired:!1,selectOnFocus:!0,loopItemFocus:!1,useInkRipple:!1,badgeExpr:e=>e?e.badge:void 0,_itemAttributes:{role:"tab"},_indicatorPosition:null})},_defaultOptionsRules(){const e=(0,Sn.Vk)();return this.callBase().concat([{device:()=>"desktop"!==a.default.real().deviceType,options:{showNavButtons:!1}},{device:{deviceType:"desktop"},options:{scrollByContent:!1}},{device:()=>"desktop"===a.default.real().deviceType&&!a.default.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>(0,Sn.dC)(e),options:{iconPosition:Af,stylingMode:"secondary"}},{device:()=>(0,Sn.x2)(e),options:{useInkRipple:!0,selectOnFocus:!1,iconPosition:Af}}])},_init(){const{orientation:e,stylingMode:t,scrollingEnabled:i}=this.option(),n=this._getIndicatorPosition();this.callBase(),this.setAria("role","tablist"),this.$element().addClass("dx-tabs"),this._toggleScrollingEnabledClass(i),this._toggleOrientationClass(e),this._toggleIndicatorPositionClass(n),this._toggleIconPositionClass(),this._toggleStylingModeClass(t),this._renderWrapper(),this._renderMultiple(),this._feedbackHideTimeout=100},_prepareDefaultItemTemplate(e,t){const i=(0,_.PO)(e)?null==e?void 0:e.text:e;if((0,_.$K)(i)){const e=(0,c.Z)("<span>").addClass("dx-tab-text-span");e.text(i);const n=(0,c.Z)("<span>").addClass("dx-tab-text-span-pseudo");n.text(i),n.appendTo(e),e.appendTo(t)}(0,_.$K)(e.html)&&t.html(e.html)},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({item:new No(((e,t)=>{this._prepareDefaultItemTemplate(t,e);const i=Cn(t.icon);i&&i.prependTo(e);const n=(0,c.Z)("<div>").addClass("dx-tab-text");e.wrapInner(n)}),["text","html","icon"],this.option("integrationOptions.watchMethod"))})},_createItemByTemplate:function(e,t){const{itemData:i,container:n,index:o}=t;return this._deferredTemplates[o]=(0,p.BH)(),e.render({model:i,container:n,index:o,onRendered:()=>this._deferredTemplates[o].resolve()})},_itemClass:()=>"dx-tab",_selectedItemClass:()=>"dx-tab-selected",_itemDataKey:()=>"dxTabData",_initMarkup(){this._deferredTemplates=[],this.callBase(),this.option("useInkRipple")&&this._renderInkRipple(),this.$element().addClass("dx-overflow-hidden")},_render(){this.callBase(),this._deferRenderScrolling()},_deferRenderScrolling(){p.gx.apply(this,this._deferredTemplates).done((()=>this._renderScrolling()))},_renderScrolling(){const e=["dx-tabs-stretched",If,"dx-overflow-hidden"];if(this.$element().removeClass(e.join(" ")),this.option("scrollingEnabled")&&this._isItemsSizeExceeded()){this._scrollable||(this._renderScrollable(),this._renderNavButtons());const e=this.getScrollable();if(e.update(),this.option("rtlEnabled")){const t=Sf((0,c.Z)(this.getScrollable().container()).get(0));e.scrollTo({left:t})}this._updateNavButtonsState(),this._scrollToItem(this.option("selectedItem"))}this.option("scrollingEnabled")&&this._isItemsSizeExceeded()||(this._cleanScrolling(),this._needStretchItems()&&this.$element().addClass("dx-tabs-stretched"),this.$element().removeClass("dx-tabs-nav-buttons").addClass(If))},_isVertical(){return this.option("orientation")===Df},_isItemsSizeExceeded(){return this._isVertical()?this._isItemsHeightExceeded():this._isItemsWidthExceeded()},_isItemsWidthExceeded(){const e=this._getVisibleItems(),t=this._getSummaryItemsSize("width",e,!0),i=(0,oe.dz)(this.$element());return![t,i].includes(0)&&t>i-1},_isItemsHeightExceeded(){const e=this._getVisibleItems();return this._getSummaryItemsSize("height",e,!0)-1>(0,oe.Cr)(this.$element())},_needStretchItems(){const e=this._getVisibleItems(),t=(0,oe.dz)(this.$element()),i=[];return(0,j.each)(e,((e,t)=>{i.push((0,oe.Y_)(t,!0))})),Math.max.apply(null,i)>t/e.length+1},_cleanNavButtons(){this._leftButton&&this._rightButton&&(this._leftButton.$element().remove(),this._rightButton.$element().remove(),this._leftButton=null,this._rightButton=null)},_cleanScrolling(){this._scrollable&&(this._$wrapper.appendTo(this.$element()),this._scrollable.$element().remove(),this._scrollable=null,this._cleanNavButtons())},_renderInkRipple(){this._inkRipple=Pn()},_getPointerEvent:()=>$.Z.up,_toggleActiveState(e,t,i){if(this.callBase.apply(this,arguments),!this._inkRipple)return;const n={element:e,event:i};t?this._inkRipple.showWave(n):this._inkRipple.hideWave(n)},_renderMultiple(){"multiple"===this.option("selectionMode")&&this.option("selectOnFocus",!1)},_renderWrapper(){this._$wrapper=(0,c.Z)("<div>").addClass("dx-tabs-wrapper"),this.$element().append(this._$wrapper)},_itemContainer(){return this._$wrapper},_getScrollableDirection(){return this._isVertical()?"vertical":"horizontal"},_updateScrollable(){this.getScrollable()&&this._cleanScrolling(),this._renderScrolling()},_renderScrollable(){const e=this.$element().wrapInner((0,c.Z)("<div>").addClass("dx-tabs-scrollable")).children();this._scrollable=this._createComponent(e,ec,{direction:this._getScrollableDirection(),showScrollbar:"never",useKeyboard:!1,useNative:!1,scrollByContent:this.option("scrollByContent"),onScroll:()=>{this._updateNavButtonsState()}}),this.$element().append(this._scrollable.$element())},_scrollToItem(e){if(!this._scrollable)return;const t=this._editStrategy.getItemElement(e);this._scrollable.scrollToElement(t)},_renderNavButtons(){const{showNavButtons:e,rtlEnabled:t}=this.option();if(this.$element().toggleClass("dx-tabs-nav-buttons",e),!e)return;this._leftButton=this._createNavButton(-30,t?"chevronnext":"chevronprev");const i=this._leftButton.$element();i.addClass("dx-tabs-nav-button-left"),this.$element().prepend(i),this._rightButton=this._createNavButton(30,t?"chevronprev":"chevronnext");const n=this._rightButton.$element();n.addClass("dx-tabs-nav-button-right"),this.$element().append(n)},_updateNavButtonsAriaDisabled(){[this._leftButton,this._rightButton].forEach((e=>{null==e||e.$element().attr({"aria-disabled":null})}))},_updateNavButtonsState(){const e=this._isVertical(),t=this.getScrollable();var i,n,o,r,s,a;e?(null===(i=this._leftButton)||void 0===i||i.option("disabled",(s=t.scrollTop(),a=1,Math.round(s)<=a)),null===(n=this._rightButton)||void 0===n||n.option("disabled",function(e,t,i,n){return Math.round(function(e){return e.scrollHeight-e.clientHeight}(e)-t-i)<=n}((0,c.Z)(t.container()).get(0),t.scrollTop(),0,1))):(null===(o=this._leftButton)||void 0===o||o.option("disabled",function(e,t){return Math.round(e)<=t}(t.scrollLeft(),1)),null===(r=this._rightButton)||void 0===r||r.option("disabled",function(e,t,i){return Math.round(Sf(e)-t)<=i}((0,c.Z)(t.container()).get(0),t.scrollLeft(),1))),this._updateNavButtonsAriaDisabled()},_updateScrollPosition(e,t){this._scrollable.update(),this._scrollable.scrollBy(e/t)},_createNavButton(e,t){const i=this._createAction((()=>{this._holdInterval=setInterval((()=>{this._updateScrollPosition(e,5)}),5)})),n=(0,v.addNamespace)(nr,"dxNavButton"),o=(0,v.addNamespace)($.Z.up,"dxNavButton"),r=(0,v.addNamespace)($.Z.out,"dxNavButton"),s=this._createComponent((0,c.Z)("<div>").addClass("dx-tabs-nav-button"),_o,{focusStateEnabled:!1,icon:t,integrationOptions:{},elementAttr:{role:null,"aria-label":null,"aria-disabled":null},onClick:()=>{this._updateScrollPosition(e,1)}}),a=s.$element();return m.Z.on(a,n,{timeout:300},(e=>{i({event:e})})),m.Z.on(a,o,(()=>{this._clearInterval()})),m.Z.on(a,r,(()=>{this._clearInterval()})),s},_clearInterval(){this._holdInterval&&clearInterval(this._holdInterval)},_updateSelection(e){this._scrollable&&this._scrollable.scrollToElement(this.itemElements().eq(e[0]))},_visibilityChanged(e){e&&this._dimensionChanged()},_dimensionChanged(){this._renderScrolling()},_itemSelectHandler(e){"single"===this.option("selectionMode")&&this.isItemSelected(e.currentTarget)||this.callBase(e)},_clean(){this._deferredTemplates=[],this._cleanScrolling(),this.callBase()},_toggleTabsVerticalClass(e){this.$element().toggleClass("dx-tabs-vertical",e)},_toggleTabsHorizontalClass(e){this.$element().toggleClass("dx-tabs-horizontal",e)},_getIndicatorPositionClass:e=>Ef[e],_getIndicatorPosition(){const{_indicatorPosition:e,rtlEnabled:t}=this.option();if(e)return e;const i=this._isVertical();return t?i?"left":Bf:i?"right":Bf},_toggleIndicatorPositionClass(e){const t=this._getIndicatorPositionClass(e);this._toggleElementClasses(Ef,t)},_toggleScrollingEnabledClass(e){this.$element().toggleClass("dx-tabs-scrolling-enabled",Boolean(e))},_toggleOrientationClass(e){const t=e===Df;this._toggleTabsVerticalClass(t),this._toggleTabsHorizontalClass(!t)},_getTabsIconPositionClass(){switch(this.option("iconPosition")){case Af:return Of.top;case"end":return Of.end;case"bottom":return Of.bottom;default:return Of.start}},_toggleIconPositionClass(){const e=this._getTabsIconPositionClass();this._toggleElementClasses(Of,e)},_toggleStylingModeClass(e){const t=Tf[e]??Tf.primary;this._toggleElementClasses(Tf,t)},_toggleElementClasses(e,t){for(const t in e)this.$element().removeClass(e[t]);this.$element().addClass(t)},_toggleFocusedDisabledNextClass(e,t){this._itemElements().eq(e).toggleClass("dx-focused-disabled-next-tab",t)},_toggleFocusedDisabledPrevClass(e,t){this._itemElements().eq(e).toggleClass("dx-focused-disabled-prev-tab",t)},_toggleFocusedDisabledClasses(e){const{selectedIndex:t}=this.option();this._itemElements().removeClass("dx-focused-disabled-next-tab").removeClass("dx-focused-disabled-prev-tab");const i=t-1,n=t+1,o=(0,c.Z)(e).index(),r=this._itemElements().eq(n).hasClass("dx-state-disabled")&&o===n,s=this._itemElements().eq(i).hasClass("dx-state-disabled")&&o===i;this._toggleFocusedDisabledNextClass(t,r),this._toggleFocusedDisabledPrevClass(t,s)},_updateFocusedElement(){const{focusStateEnabled:e,selectedIndex:t}=this.option(),i=this._itemElements();if(e&&i.length){const e=i.get(t);this.option({focusedElement:e})}},_optionChanged(e){switch(e.name){case"useInkRipple":case"scrollingEnabled":this._toggleScrollingEnabledClass(e.value),this._invalidate();break;case"showNavButtons":case"badgeExpr":this._invalidate();break;case"scrollByContent":this._scrollable&&this._scrollable.option(e.name,e.value);break;case"width":case"height":this.callBase(e),this._dimensionChanged();break;case"selectionMode":this._renderMultiple(),this.callBase(e);break;case"focusedElement":this._toggleFocusedDisabledClasses(e.value),this.callBase(e),this._scrollToItem(e.value);break;case"rtlEnabled":{this.callBase(e);const t=this._getIndicatorPosition();this._toggleIndicatorPositionClass(t);break}case"orientation":{this._toggleOrientationClass(e.value);const t=this._getIndicatorPosition();this._toggleIndicatorPositionClass(t),(0,Z.hasWindow)()&&this._updateScrollable();break}case"iconPosition":this._toggleIconPositionClass(),(0,Z.hasWindow)()&&this._dimensionChanged();break;case"stylingMode":this._toggleStylingModeClass(e.value),(0,Z.hasWindow)()&&this._dimensionChanged();break;case"_indicatorPosition":this._toggleIndicatorPositionClass(e.value);break;case"selectedIndex":case"selectedItem":case"selectedItems":this.callBase(e),this._updateFocusedElement();break;default:this.callBase(e)}},_afterItemElementInserted(){this.callBase(),this._deferRenderScrolling()},_afterItemElementDeleted(e,t){this.callBase(e,t),this._renderScrolling()},getScrollable(){return this._scrollable}});Pf.ItemClass=kf,(0,r.default)("dxTabs",Pf);const Mf=Pf,Rf={top:"dx-tabpanel-tabs-position-top",right:"dx-tabpanel-tabs-position-right",bottom:"dx-tabpanel-tabs-position-bottom",left:"dx-tabpanel-tabs-position-left"},$f={top:"top",right:"right",bottom:"bottom",left:"left"},Nf={top:"bottom",right:"left",bottom:"top",left:"right"},Vf=xf.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{itemTitleTemplate:"title",hoverStateEnabled:!0,showNavButtons:!1,scrollByContent:!0,scrollingEnabled:!0,tabsPosition:$f.top,iconPosition:"start",stylingMode:"primary",onTitleClick:null,onTitleHold:null,onTitleRendered:null,badgeExpr:e=>e?e.badge:void 0,_tabsIndicatorPosition:null})},_defaultOptionsRules(){const e=(0,Sn.Vk)();return this.callBase().concat([{device:()=>"desktop"===a.default.real().deviceType&&!a.default.isSimulator(),options:{focusStateEnabled:!0}},{device:()=>!Xo.touch,options:{swipeEnabled:!1}},{device:{platform:"generic"},options:{animationEnabled:!1}},{device:()=>(0,Sn.dC)(e),options:{stylingMode:"secondary"}},{device:()=>(0,Sn.yj)(e),options:{iconPosition:"top"}}])},_init(){this.callBase(),this.$element().addClass("dx-tabpanel"),this._toggleTabPanelTabsPositionClass()},_getElementAria:()=>({role:"tabpanel"}),_getItemAria:()=>({role:"tabpanel"}),_initMarkup(){this.callBase(),this._createTitleActions(),this._renderLayout()},_prepareTabsItemTemplate(e,t){const i=Cn(null==e?void 0:e.icon);i&&t.append(i);const n=(0,_.PO)(e)?null==e?void 0:e.title:e;if((0,_.$K)(n)&&!(0,_.PO)(n)){const e=(0,c.Z)("<span>").addClass("dx-tab-text-span");e.append(Fe.Z.createTextNode(n));const i=(0,c.Z)("<span>").addClass("dx-tab-text-span-pseudo");i.append(Fe.Z.createTextNode(n)),i.appendTo(e),e.appendTo(t)}},_initTemplates(){this.callBase(),this._templateManager.addDefaultTemplates({title:new No(((e,t)=>{this._prepareTabsItemTemplate(t,e);const i=(0,c.Z)("<div>").addClass("dx-tab-text");e.wrapInner(i)}),["title","icon"],this.option("integrationOptions.watchMethod"))})},_createTitleActions(){this._createTitleClickAction(),this._createTitleHoldAction(),this._createTitleRenderedAction()},_createTitleClickAction(){this._titleClickAction=this._createActionByOption("onTitleClick")},_createTitleHoldAction(){this._titleHoldAction=this._createActionByOption("onTitleHold")},_createTitleRenderedAction(){this._titleRenderedAction=this._createActionByOption("onTitleRendered")},_renderLayout(){if(this._tabs)return;const e=this.$element();this._$tabContainer=(0,c.Z)("<div>").addClass("dx-tabpanel-tabs").appendTo(e);const t=(0,c.Z)("<div>").appendTo(this._$tabContainer);this._tabs=this._createComponent(t,Mf,this._tabConfig()),this._$container=(0,c.Z)("<div>").addClass("dx-tabpanel-container").appendTo(e),this._$container.append(this._$wrapper)},_refreshActiveDescendant(){if(!this._tabs)return;const e=this._tabs,t=e.itemElements(),i=(0,c.Z)(t[e.option("selectedIndex")]),n=this.getFocusedItemId();this.setAria("controls",void 0,(0,c.Z)(t)),this.setAria("controls",n,i)},_getTabsIndicatorPosition(){const{_tabsIndicatorPosition:e,tabsPosition:t}=this.option();return e??Nf[t]},_tabConfig(){const e=this._getTabsIndicatorPosition();return{selectOnFocus:!0,focusStateEnabled:this.option("focusStateEnabled"),hoverStateEnabled:this.option("hoverStateEnabled"),repaintChangesOnly:this.option("repaintChangesOnly"),tabIndex:this.option("tabIndex"),selectedIndex:this.option("selectedIndex"),badgeExpr:this.option("badgeExpr"),onItemClick:this._titleClickAction.bind(this),onItemHold:this._titleHoldAction.bind(this),itemHoldTimeout:this.option("itemHoldTimeout"),onSelectionChanged:function(e){this.option("selectedIndex",e.component.option("selectedIndex")),this._refreshActiveDescendant()}.bind(this),onItemRendered:this._titleRenderedAction.bind(this),itemTemplate:this._getTemplateByOption("itemTitleTemplate"),items:this.option("items"),noDataText:null,scrollingEnabled:this.option("scrollingEnabled"),scrollByContent:this.option("scrollByContent"),showNavButtons:this.option("showNavButtons"),itemTemplateProperty:"tabTemplate",loopItemFocus:this.option("loop"),selectionRequired:!0,onOptionChanged:function(e){if("focusedElement"===e.name)if(e.value){const t=(0,c.Z)(e.value),i=this._itemElements().eq(t.index());this.option("focusedElement",(0,l.uD)(i))}else this.option("focusedElement",e.value)}.bind(this),onFocusIn:function(e){this._focusInHandler(e.event)}.bind(this),onFocusOut:function(e){this._isFocusOutHandlerExecuting||this._focusOutHandler(e.event)}.bind(this),orientation:this._getTabsOrientation(),iconPosition:this.option("iconPosition"),stylingMode:this.option("stylingMode"),_itemAttributes:{class:"dx-tabpanel-tab"},_indicatorPosition:e}},_renderFocusTarget(){this._focusTarget().attr("tabIndex",-1)},_getTabsOrientation(){const{tabsPosition:e}=this.option();return[$f.right,$f.left].includes(e)?"vertical":"horizontal"},_getTabPanelTabsPositionClass(){switch(this.option("tabsPosition")){case $f.right:return Rf.right;case $f.bottom:return Rf.bottom;case $f.left:return Rf.left;case $f.top:default:return Rf.top}},_toggleTabPanelTabsPositionClass(){for(const e in Rf)this.$element().removeClass(Rf[e]);const e=this._getTabPanelTabsPositionClass();this.$element().addClass(e)},_updateTabsOrientation(){const e=this._getTabsOrientation();this._setTabsOption("orientation",e)},_toggleWrapperFocusedClass(e){this._toggleFocusClass(e,this._$wrapper)},_toggleDisabledFocusedClass(e){this._focusTarget().toggleClass("dx-disabled-focused-tab",e)},_updateFocusState(e,t){this.callBase(e,t);const i=e.target===this._tabs._focusTarget().get(0),n=e.target===this._focusTarget().get(0);if(i&&this._toggleFocusClass(t,this._focusTarget()),i||n){const e=this._isDisabled(this.option("focusedElement"));this._toggleWrapperFocusedClass(t&&!e),this._toggleDisabledFocusedClass(t&&e)}n&&this._toggleFocusClass(t,this._tabs.option("focusedElement"))},_focusOutHandler(e){this._isFocusOutHandlerExecuting=!0,this.callBase.apply(this,arguments),this._tabs._focusOutHandler(e),this._isFocusOutHandlerExecuting=!1},_setTabsOption(e,t){this._tabs&&this._tabs.option(e,t)},_visibilityChanged(e){e&&this._tabs._dimensionChanged()},registerKeyHandler(e,t){this.callBase(e,t),this._tabs&&this._tabs.registerKeyHandler(e,t)},repaint(){this.callBase(),this._tabs.repaint()},_updateTabsIndicatorPosition(){const e=this._getTabsIndicatorPosition();this._setTabsOption("_indicatorPosition",e)},_optionChanged(e){const{name:t,value:i,fullName:n}=e;switch(t){case"dataSource":default:this.callBase(e);break;case"items":this._setTabsOption(t,this.option(t)),this.option("repaintChangesOnly")||this._tabs.repaint(),this.callBase(e);break;case"width":this.callBase(e),this._tabs.repaint();break;case"selectedIndex":case"selectedItem":if(this._setTabsOption(n,i),this.callBase(e),!0===this.option("focusStateEnabled")){const e=this.option("selectedIndex"),t=this._itemElements().eq(e);this.option("focusedElement",(0,l.uD)(t))}break;case"itemHoldTimeout":case"focusStateEnabled":case"hoverStateEnabled":this._setTabsOption(n,i),this.callBase(e);break;case"scrollingEnabled":case"scrollByContent":case"showNavButtons":this._setTabsOption(n,i);break;case"focusedElement":{const t=i?(0,c.Z)(i).index():i,n=i?this._tabs._itemElements().eq(t):i;if(this._setTabsOption("focusedElement",(0,l.uD)(n)),i){const e=this._isDisabled(i);this._toggleWrapperFocusedClass(!e),this._toggleDisabledFocusedClass(e)}this.callBase(e);break}case"itemTitleTemplate":this._setTabsOption("itemTemplate",this._getTemplateByOption("itemTitleTemplate"));break;case"onTitleClick":this._createTitleClickAction(),this._setTabsOption("onItemClick",this._titleClickAction.bind(this));break;case"onTitleHold":this._createTitleHoldAction(),this._setTabsOption("onItemHold",this._titleHoldAction.bind(this));break;case"onTitleRendered":this._createTitleRenderedAction(),this._setTabsOption("onItemRendered",this._titleRenderedAction.bind(this));break;case"loop":this._setTabsOption("loopItemFocus",i);break;case"badgeExpr":this._invalidate();break;case"tabsPosition":this._toggleTabPanelTabsPositionClass(),this._updateTabsIndicatorPosition(),this._updateTabsOrientation();break;case"iconPosition":this._setTabsOption("iconPosition",i);break;case"stylingMode":this._setTabsOption("stylingMode",i);break;case"_tabsIndicatorPosition":this._setTabsOption("_indicatorPosition",i)}}});Vf.ItemClass=class extends hr{_renderWatchers(){return this._startWatcher("badge",u.noop),super._renderWatchers()}},(0,r.default)("dxTabPanel",Vf);const Ff=Vf;class Zf{constructor(e){this._options=e,this._itemsRunTimeInfo=this._options.itemsRunTimeInfo}findInstance(){return this._itemsRunTimeInfo.findWidgetInstanceByItem(this._options.item)}findItemContainer(){return this._itemsRunTimeInfo.findItemContainerByItem(this._options.item)}findPreparedItem(){return this._itemsRunTimeInfo.findPreparedItemByItem(this._options.item)}tryExecute(){g.default.abstract()}}const Hf=(e,t)=>`${t?"tabs":"items"}[${e}]`,Lf=(e,t)=>(0,_.$K)(e)&&(0,_.$K)(t)?`${e}.${t}`:e||t,jf=e=>e?e.replace(/\s/g,""):void 0,zf=(e,t)=>`${e}.${t}`,Wf=e=>{const t=e.split(".");return t[t.length-1].replace(/\[\d+]/,"")},Kf=e=>e.indexOf("tabs")>-1,qf=(e,t,i)=>{const n=e.indexOf(t);if(n>-1)return Hf(n,i);for(let n=0;n<e.length;n++){const o=e[n],r=o.tabs||o.items;if(r){const e=qf(r,t,o.tabs);if(e)return Lf(Hf(n,i),e)}}};class Uf extends Zf{tryExecute(){const{value:e}=this._options,t=this.findInstance();return!!t&&(t.option(e),!0)}}class Gf extends Zf{tryExecute(){const e=this.findInstance();if(e){const{optionName:t,item:i,value:n}=this._options,o=this._itemsRunTimeInfo.findItemIndexByItem(i);if(o>=0)return e.option(zf(`items[${o}]`,t),n),!0}return!1}}class Yf extends Zf{tryExecute(){return!1}}class Qf extends Zf{tryExecute(){const e=this.findPreparedItem();return!(null==e||!e._prepareGroupItemTemplate||!e._renderGroupContentTemplate||(e._prepareGroupItemTemplate(this._options.item.template),e._renderGroupContentTemplate(),0))}}class Xf extends Zf{tryExecute(){const e=this.findInstance();if(e){const{value:t}=this._options;return e.option("dataSource",t),!0}return!1}}class Jf extends Zf{tryExecute(){const{item:e}=this._options,t=this.findInstance(),i=t&&(0,N.aT)(t.$element()[0],"dxValidator");if(i&&e){const t=e=>"required"===e.type,n=(i.option("validationRules")||[]).some(t),o=(e.validationRules||[]).some(t);if(!n&&!o||n&&o)return i.option("validationRules",e.validationRules),!0}return!1}}class e_ extends Zf{tryExecute(){const e=this.findItemContainer(),{previousValue:t,value:i}=this._options;return!!e&&(e.removeClass(t).addClass(i),!0)}}const t_=["items","isRequired","validationRules","visible"],i_=de.default.inherit({_init(){this.callBase(),this._dirtyFields=new Set,this._cachedColCountOptions=[],this._itemsRunTimeInfo=new ff,this._groupsColCount=[],this._attachSyncSubscriptions()},_getDefaultOptions(){return(0,f.l)(this.callBase(),{formID:`dx-${new V.Z}`,formData:{},colCount:1,screenByWidth:Z.defaultScreenFactorFunc,colCountByScreen:void 0,labelLocation:"left",readOnly:!1,onFieldDataChanged:null,customizeItem:null,onEditorEnterKey:null,minColWidth:200,alignItemLabels:!0,alignItemLabelsInAllGroups:!0,alignRootItemLabels:!0,showColonAfterLabel:!0,showRequiredMark:!0,showOptionalMark:!1,requiredMark:"*",optionalMark:z.Z.format("dxForm-optionalMark"),requiredMessage:z.Z.getFormatter("dxForm-requiredMessage"),showValidationSummary:!1,items:void 0,scrollingEnabled:!1,validationGroup:void 0,stylingMode:(0,s.default)().editorStylingMode,labelMode:"outside",isDirty:!1})},_defaultOptionsRules(){return this.callBase().concat([{device:()=>(0,Sn.yj)(),options:{labelLocation:"top"}},{device:()=>(0,Sn.x2)(),options:{showColonAfterLabel:!1}}])},_setOptionsByReference(){this.callBase(),(0,f.l)(this._optionsByReference,{formData:!0,validationGroup:!0})},_getGroupColCount:e=>parseInt(e.attr(Yp)),_applyLabelsWidthByCol(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};!function(e,t,i){const n=`${t} > .${Wp}:not(.dx-field-item-label-location-top) > .${zp}`,o=e.find(n),r=o.length;let s,a,l=0;for(a=0;a<r;a++)s=rf(o[a]),s>l&&(l=s);for(a=0;a<r;a++)o[a].style.width=`${l}px`}(e,`.${i.inOneColumn?Lp:Hp+t}${i.excludeTabbed?`:not(.${Up})`:""}`)},_applyLabelsWidth(e,t,i,n,o){n=i?1:n||this._getGroupColCount(e);const r={excludeTabbed:t,inOneColumn:i};let s;for(s=0;s<n;s++)this._applyLabelsWidthByCol(e,s,r,o)},_getGroupElementsInColumn(e,t,i){const n=(0,_.$K)(i)?`.${Gp}${i}`:"",o=`.${Hp}${t} > .${Kp} > .${Zp}${n}`;return e.find(o)},_applyLabelsWidthWithGroups(e,t,i,n){if(!0===this.option("alignRootItemLabels")){const o=e.find(`.${qp}`);for(let e=0;e<t;e++)this._applyLabelsWidthByCol(o,e,i,n)}if(this.option("alignItemLabelsInAllGroups"))this._applyLabelsWidthWithNestedGroups(e,t,i,n);else{const e=this.$element().find(`.${Zp}`);let t;for(t=0;t<e.length;t++)this._applyLabelsWidth(e.eq(t),i,void 0,void 0,n)}},_applyLabelsWidthWithNestedGroups(e,t,i,n){const o={excludeTabbed:i};let r,s,a,l;for(r=0;r<t;r++)for(l=this._getGroupElementsInColumn(e,r),this._applyLabelsWidthByCol(l,0,o,n),s=0;s<this._groupsColCount.length;s++){l=this._getGroupElementsInColumn(e,r,this._groupsColCount[s]);const t=this._getGroupColCount(l);for(a=1;a<t;a++)this._applyLabelsWidthByCol(l,a,o,n)}},_labelLocation(){return this.option("labelLocation")},_alignLabelsInColumn(e){let{layoutManager:t,inOneColumn:i,$container:n,excludeTabbed:o,items:r}=e;if(!(0,Z.hasWindow)()||"top"===this._labelLocation())return;const s=tf(t._getMarkOptions());i?this._applyLabelsWidth(n,o,!0,void 0,s):this._checkGrouping(r)?this._applyLabelsWidthWithGroups(n,t._getColCount(),o,s):this._applyLabelsWidth(n,o,!1,t._getColCount(),s)},_prepareFormData(){(0,_.$K)(this.option("formData"))||this.option("formData",{})},_setStylingModeClass(){"underlined"===this.option("stylingMode")&&this.$element().addClass("dx-form-styling-mode-underlined")},_initMarkup(){ie.addGroup(this._getValidationGroup(),!1),this._clearCachedInstances(),this._prepareFormData(),this.$element().addClass("dx-form"),this._setStylingModeClass(),this.callBase(),this.setAria("role","form",this.$element()),this.option("scrollingEnabled")&&this._renderScrollable(),this._renderLayout(),this._renderValidationSummary(),this._lastMarkupScreenFactor=this._targetScreenFactor||this._getCurrentScreenFactor(),this._attachResizeObserverSubscription()},_attachResizeObserverSubscription(){if((0,Z.hasWindow)()){const e=this.$element().get(0);Tr.Z.unobserve(e),Tr.Z.observe(e,(()=>{this._resizeHandler()}))}},_resizeHandler(){this._cachedLayoutManagers.length&&(0,j.each)(this._cachedLayoutManagers,((e,t)=>{var i;null===(i=t.option("onLayoutChanged"))||void 0===i||i(t.isSingleColumnMode())}))},_getCurrentScreenFactor(){return(0,Z.hasWindow)()?(0,Z.getCurrentScreenFactor)(this.option("screenByWidth")):"lg"},_clearCachedInstances(){this._itemsRunTimeInfo.clear(),this._cachedLayoutManagers=[]},_alignLabels(e,t){this._alignLabelsInColumn({$container:this.$element(),layoutManager:e,excludeTabbed:!0,items:this.option("items"),inOneColumn:t}),(0,hl.U_)(this.$element().find(`.${ol}`))},_clean(){this._clearValidationSummary(),this.callBase(),this._groupsColCount=[],this._cachedColCountOptions=[],this._lastMarkupScreenFactor=void 0,Tr.Z.unobserve(this.$element().get(0))},_renderScrollable(){const e=this.option("useNativeScrolling");this._scrollable=new ec(this.$element(),{useNative:!!e,useSimulatedScrollbar:!e,useKeyboard:!1,direction:"both",bounceEnabled:!1})},_getContent(){return this.option("scrollingEnabled")?(0,c.Z)(this._scrollable.content()):this.$element()},_clearValidationSummary(){var e;null===(e=this._$validationSummary)||void 0===e||e.remove(),this._$validationSummary=void 0,this._validationSummary=void 0},_renderValidationSummary(){this._clearValidationSummary(),this.option("showValidationSummary")&&(this._$validationSummary=(0,c.Z)("<div>").addClass("dx-form-validation-summary").appendTo(this._getContent()),this._validationSummary=this._$validationSummary.dxValidationSummary({validationGroup:this._getValidationGroup()}).dxValidationSummary("instance"))},_prepareItems(e,t,i,o){if(e){const r=[];for(let s=0;s<e.length;s++){let a=e[s];const l=Lf(i,Hf(s,o)),c={item:a,itemIndex:s,path:l},d=this._itemsRunTimeInfo.add(c);if((0,_.HD)(a)&&(a={dataField:a}),(0,_.Kn)(a)){const e=(0,n.Z)({},a);c.preparedItem=e,e.guid=d,this._tryPrepareGroupItemCaption(e),this._tryPrepareGroupItem(e),this._tryPrepareTabbedItem(e,l),this._tryPrepareItemTemplate(e),t&&(e.cssItemClass=Up),e.items&&(e.items=this._prepareItems(e.items,t,l)),r.push(e)}else r.push(a)}return r}},_tryPrepareGroupItemCaption(e){"group"===e.itemType&&(e._prepareGroupCaptionTemplate=t=>{e.captionTemplate&&(e.groupCaptionTemplate=this._getTemplate(t)),e.captionTemplate=this._itemGroupTemplate.bind(this,e)},e._prepareGroupCaptionTemplate(e.captionTemplate))},_tryPrepareGroupItem(e){"group"===e.itemType&&(e.alignItemLabels=(0,u.ensureDefined)(e.alignItemLabels,!0),e._prepareGroupItemTemplate=t=>{e.template&&(e.groupContentTemplate=this._getTemplate(t)),e.template=this._itemGroupTemplate.bind(this,e)},e._prepareGroupItemTemplate(e.template))},_tryPrepareTabbedItem(e,t){"tabbed"===e.itemType&&(e.template=this._itemTabbedTemplate.bind(this,e),e.tabs=this._prepareItems(e.tabs,!0,t,!0))},_tryPrepareItemTemplate(e){e.template&&(e.template=this._getTemplate(e.template))},_checkGrouping(e){if(e)for(let t=0;t<e.length;t++)if("group"===e[t].itemType)return!0},_renderLayout(){const e=this;let t=e.option("items");const i=e._getContent();t=e._prepareItems(t),e._rootLayoutManager=e._renderLayoutManager(i,this._createLayoutManagerOptions(t,{isRoot:!0,colCount:e.option("colCount"),alignItemLabels:e.option("alignItemLabels"),screenByWidth:this.option("screenByWidth"),colCountByScreen:this.option("colCountByScreen"),onLayoutChanged(t){e._alignLabels.bind(e)(e._rootLayoutManager,t)},onContentReady(t){e._alignLabels(t.component,t.component.isSingleColumnMode())}}))},_tryGetItemsForTemplate:e=>e.items||[],_itemTabbedTemplate(e,t,i){const n=(0,c.Z)("<div>").appendTo(i),o=(0,f.l)({},e.tabPanelOptions,{dataSource:e.tabs,onItemRendered:t=>{var i,n;null===(i=e.tabPanelOptions)||void 0===i||null===(n=i.onItemRendered)||void 0===n||n.call(i,t),(0,hl.Uo)(t.itemElement)},itemTemplate:(e,t,i)=>{const n=(0,c.Z)(i),o=(0,u.ensureDefined)(e.alignItemLabels,!0),r=this._renderLayoutManager(n,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(e),{colCount:e.colCount,alignItemLabels:o,screenByWidth:this.option("screenByWidth"),colCountByScreen:e.colCountByScreen,cssItemClass:e.cssItemClass,onLayoutChanged:t=>{this._alignLabelsInColumn({$container:n,layoutManager:r,items:e.items,inOneColumn:t})}}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(e.guid,{layoutManager:r}),o&&this._alignLabelsInColumn({$container:n,layoutManager:r,items:e.items,inOneColumn:r.isSingleColumnMode()})}}),r=(e,t)=>{Array.isArray(e)&&e.forEach((e=>this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(e.guid,{widgetInstance:t})))},s=this._createComponent(n,Ff,o);(0,c.Z)(i).parent().addClass("dx-field-item-has-tabs"),s.on("optionChanged",(e=>{"dataSource"===e.fullName&&r(e.value,e.component)})),r([{guid:e.guid},...e.tabs??[]],s)},_itemGroupCaptionTemplate(e,t,i){if(e.groupCaptionTemplate){const n=(0,c.Z)("<div>").addClass("dx-form-group-custom-caption").attr("id",i).appendTo(t);return e._renderGroupCaptionTemplate=()=>{const t={component:this,caption:e.caption,name:e.name};e.groupCaptionTemplate.render({model:t,container:(0,l.uD)(n)})},void e._renderGroupCaptionTemplate()}e.caption&&(0,c.Z)("<span>").addClass("dx-form-group-caption").text(e.caption).attr("id",i).appendTo(t)},_itemGroupContentTemplate(e,t){const i=(0,c.Z)("<div>").addClass("dx-form-group-content").appendTo(t);if(e.groupContentTemplate)e._renderGroupContentTemplate=()=>{i.empty();const t={formData:this.option("formData"),component:this};e.groupContentTemplate.render({model:t,container:(0,l.uD)(i)})},e._renderGroupContentTemplate();else{const n=this._renderLayoutManager(i,this._createLayoutManagerOptions(this._tryGetItemsForTemplate(e),{colCount:e.colCount,colCountByScreen:e.colCountByScreen,alignItemLabels:e.alignItemLabels,cssItemClass:e.cssItemClass}));this._itemsRunTimeInfo&&this._itemsRunTimeInfo.extendRunTimeItemInfoByKey(e.guid,{layoutManager:n});const o=n._getColCount();this._groupsColCount.includes(o)||this._groupsColCount.push(o),t.addClass(Gp+o),t.attr(Yp,o)}},_itemGroupTemplate(e,t,i){const{id:n}=t.editorOptions.inputAttr,o=(0,c.Z)("<div>").toggleClass("dx-form-group-with-caption",(0,_.$K)(e.caption)&&e.caption.length).addClass(Zp).appendTo(i),r={role:"group",labelledby:n};this.setAria(r,o),(0,c.Z)(i).parent().addClass("dx-field-item-has-group"),this._itemGroupCaptionTemplate(e,o,n),this._itemGroupContentTemplate(e,o)},_createLayoutManagerOptions(e,t){return function(e){let{form:t,$formElement:i,formOptions:n,items:o,validationGroup:r,extendedLayoutManagerOptions:s,onFieldDataChanged:a,onContentReady:l,onDisposing:c,onFieldItemRendered:d}=e;const h={form:t,items:o,$formElement:i,validationGroup:r,onFieldDataChanged:a,onContentReady:l,onDisposing:c,onFieldItemRendered:d,validationBoundary:n.scrollingEnabled?i:void 0,scrollingEnabled:n.scrollingEnabled,showRequiredMark:n.showRequiredMark,showOptionalMark:n.showOptionalMark,requiredMark:n.requiredMark,optionalMark:n.optionalMark,requiredMessage:n.requiredMessage,screenByWidth:n.screenByWidth,layoutData:n.formData,labelLocation:n.labelLocation,customizeItem:n.customizeItem,minColWidth:n.minColWidth,showColonAfterLabel:n.showColonAfterLabel,onEditorEnterKey:n.onEditorEnterKey,labelMode:n.labelMode};return(0,f.l)(h,{isRoot:s.isRoot,colCount:s.colCount,alignItemLabels:s.alignItemLabels,cssItemClass:s.cssItemClass,colCountByScreen:s.colCountByScreen,onLayoutChanged:s.onLayoutChanged,width:s.width})}({form:this,formOptions:this.option(),$formElement:this.$element(),items:e,validationGroup:this._getValidationGroup(),extendedLayoutManagerOptions:t,onFieldDataChanged:e=>{this._isDataUpdating||this._triggerOnFieldDataChanged(e)},onContentReady:e=>{this._itemsRunTimeInfo.addItemsOrExtendFrom(e.component._itemsRunTimeInfo),t.onContentReady&&t.onContentReady(e)},onDisposing:e=>{let{component:t}=e;const i=t.getItemsRunTimeInfo();this._itemsRunTimeInfo.removeItemsByItems(i)},onFieldItemRendered:()=>{var e;null===(e=this._validationSummary)||void 0===e||e.refreshValidationGroup()}})},_renderLayoutManager(e,t){const i={lg:t.colCount,md:t.colCount,sm:t.colCount,xs:1};this._cachedColCountOptions.push({colCountByScreen:(0,f.l)(i,t.colCountByScreen)});const n=(0,c.Z)("<div>");n.appendTo(e);const o=this._createComponent(n,"dxLayoutManager",t);return o.on("autoColCountChanged",(()=>{this._clearAutoColCountChangedTimeout(),this.autoColCountChangedTimeoutId=setTimeout((()=>!this._disposed&&this._refresh()),0)})),this._cachedLayoutManagers.push(o),o},_getValidationGroup(){return this.option("validationGroup")||this},_createComponent(e,t,i){return i=i||{},this._extendConfig(i,{readOnly:this.option("readOnly")}),this.callBase(e,t,i)},_attachSyncSubscriptions(){const e=this;e.on("optionChanged",(t=>{const i=t.fullName;"formData"===i&&((0,_.$K)(t.value)||e._options.silent("formData",t.value={}),e._triggerOnFieldDataChangedByDataSet(t.value)),e._cachedLayoutManagers.length&&(0,j.each)(e._cachedLayoutManagers,((n,o)=>{"formData"===i&&(e._isDataUpdating=!0,o.option("layoutData",t.value),e._isDataUpdating=!1),"readOnly"!==t.name&&"disabled"!==t.name||o.option(i,t.value)}))}))},_optionChanged(e){const t=e.fullName.split(".");t.length>1&&-1!==t[0].search("items")&&this._itemsOptionChangedHandler(e)||t.length>1&&-1!==t[0].search("formData")&&this._formDataOptionChangedHandler(e)||this._defaultOptionChangedHandler(e)},_defaultOptionChangedHandler(e){switch(e.name){case"formData":this.option("items")?(0,_.Qr)(e.value)&&this._clear():this._invalidate();break;case"onFieldDataChanged":case"alignRootItemLabels":case"readOnly":case"isDirty":break;case"items":case"colCount":case"onEditorEnterKey":case"labelLocation":case"labelMode":case"alignItemLabels":case"showColonAfterLabel":case"customizeItem":case"alignItemLabelsInAllGroups":case"showRequiredMark":case"showOptionalMark":case"requiredMark":case"optionalMark":case"requiredMessage":case"scrollingEnabled":case"formID":case"colCountByScreen":case"screenByWidth":case"stylingMode":this._invalidate();break;case"showValidationSummary":this._renderValidationSummary();break;case"minColWidth":"auto"===this.option("colCount")&&this._invalidate();break;case"width":this.callBase(e),this._rootLayoutManager.option(e.name,e.value),this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode());break;case"validationGroup":ie.removeGroup(e.previousValue||this),this._invalidate();break;default:this.callBase(e)}},_itemsOptionChangedHandler(e){const t=e.fullName.split("."),{value:i}=e,n=this._getItemPath(t),o=this.option(n),r=e.fullName.replace(`${n}.`,""),s=r.split(".")[0].replace(/\[\d+]/,""),a=this._tryCreateItemOptionAction(s,o,o[s],e.previousValue,n);let l=this._tryExecuteItemOptionAction(a)||this._tryChangeLayoutManagerItemOption(e.fullName,i);if(!l&&o){this._changeItemOption(o,r,i);const e=this._generateItemsFromData(this.option("items"));this.option("items",e),l=!0}return l},_formDataOptionChangedHandler(e){const t=e.fullName.split("."),{value:i}=e,n=t.slice(1).join("."),o=this.getEditor(n);return o?o.option("value",i):this._triggerOnFieldDataChanged({dataField:n,value:i}),!0},_tryCreateItemOptionAction(e,t,i,n,o){return"tabs"===e&&(this._itemsRunTimeInfo.removeItemsByPathStartWith(`${o}.tabs`),i=this._prepareItems(i,!0,o,!0)),((e,t)=>{switch(e){case"editorOptions":case"buttonOptions":return new Uf(t);case"validationRules":return new Jf(t);case"cssClass":return new e_(t);case"badge":case"disabled":case"icon":case"tabTemplate":case"title":return new Gf((0,f.l)(t,{optionName:e}));case"tabs":return new Xf(t);case"template":{var i,n;const o=(null==t||null===(i=t.item)||void 0===i?void 0:i.itemType)??(null===(n=t.itemsRunTimeInfo.findPreparedItemByItem(null==t?void 0:t.item))||void 0===n?void 0:n.itemType);return"simple"===o?new Yf(t):"group"===o?new Qf(t):new Gf((0,f.l)(t,{optionName:e}))}default:return null}})(e,{item:t,value:i,previousValue:n,itemsRunTimeInfo:this._itemsRunTimeInfo})},_tryExecuteItemOptionAction:e=>e&&e.tryExecute(),_updateValidationGroupAndSummaryIfNeeded(e){const t=Wf(e);var i;t_.includes(t)&&(ie.addGroup(this._getValidationGroup(),!1),this.option("showValidationSummary")&&(null===(i=this._validationSummary)||void 0===i||i.refreshValidationGroup()))},_setLayoutManagerItemOption(e,t,i,n){if(this._updateLockCount>0){!e._updateLockCount&&e.beginUpdate();const t=this._itemsRunTimeInfo.findKeyByPath(n);this.postponedOperations.add(t,(()=>(!e._disposed&&e.endUpdate(),(0,p.BH)().resolve())))}const o=e=>{if(e.component.off("contentReady",o),Kf(n)){const e=(e=>{const t=e.split("."),i=[...t];for(let e=t.length-1;e>=0;e--){if(Kf(t[e]))return i.join(".");i.splice(e,1)}return""})(n),t=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(e);t&&this._alignLabelsInColumn({items:t.option("items"),layoutManager:t,$container:t.$element(),inOneColumn:t.isSingleColumnMode()})}else this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())};e.on("contentReady",o),e.option(t,i),this._updateValidationGroupAndSummaryIfNeeded(t)},_tryChangeLayoutManagerItemOption(e,t){const i=e.split("."),n=Wf(e);if("items"===n&&i.length>1){const e=this._getItemPath(i),o=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(e);if(o){this._itemsRunTimeInfo.removeItemsByItems(o.getItemsRunTimeInfo());const i=this._prepareItems(t,!1,e);return this._setLayoutManagerItemOption(o,n,i,e),!0}}else if(i.length>2){const e=i.length-2,o=this._getItemPath(i.slice(0,e)),r=this._itemsRunTimeInfo.findGroupOrTabLayoutManagerByPath(o);if(r){const s=zf(i[e],n);if("editorType"===n&&r.option(s)!==t)return!1;if("visible"===n){const e=this.option(zf(o,"items"));if(e&&e.length){const t=r.option("items");e.forEach(((e,i)=>{t[i].visibleIndex=e.visibleIndex}))}}return this._setLayoutManagerItemOption(r,s,t,o),!0}}return!1},_tryChangeLayoutManagerItemOptions(e,t){let i;return this.beginUpdate(),(0,j.each)(t,((t,n)=>{if(i=this._tryChangeLayoutManagerItemOption(zf(e,t),n),!i)return!1})),this.endUpdate(),i},_getItemPath(e){let t,i=e[0];for(t=1;t<e.length&&-1!==e[t].search(/items\[\d+]|tabs\[\d+]/);t++)i+=`.${e[t]}`;return i},_triggerOnFieldDataChanged(e){this._updateIsDirty(e.dataField),this._createActionByOption("onFieldDataChanged")(e)},_triggerOnFieldDataChangedByDataSet(e){e&&(0,_.Kn)(e)&&Object.keys(e).forEach((t=>{this._triggerOnFieldDataChanged({dataField:t,value:e[t]})}))},_updateFieldValue(e,t){if((0,_.$K)(this.option("formData"))){const i=this.getEditor(e);this.option(`formData.${e}`,t),i&&i.option("value")!==t&&i.option("value",t)}},_generateItemsFromData(e){const t=this.option("formData"),i=[];return!e&&(0,_.$K)(t)&&(0,j.each)(t,(e=>{i.push({dataField:e})})),e&&(0,j.each)(e,((e,t)=>{(0,_.Kn)(t)?i.push(t):i.push({dataField:t})})),i},_getItemByField(e,t){const i=this,n=(0,_.Kn)(e)?e:i._getFieldParts(e),{fieldName:o}=n,{fieldPath:r}=n;let s;return t.length&&(0,j.each)(t,((e,t)=>{const{itemType:n}=t;if(r.length){const e=r.slice();t=i._getItemByFieldPath(e,o,t)}else if("group"===n&&!t.caption&&!t.name||"tabbed"===n&&!t.name){const e=i._getSubItemField(n);t.items=i._generateItemsFromData(t.items),t=i._getItemByField({fieldName:o,fieldPath:r},t[e])}if(((e,t)=>!!e&&(e.dataField===t||e.name===t||jf(e.title)===t||"group"===e.itemType&&jf(e.caption)===t))(t,o))return s=t,!1})),s},_getFieldParts(e){let t=e,i=t.indexOf(".");const n=[];for(;-1!==i;)n.push(t.substr(0,i)),t=t.substr(i+1),i=t.indexOf(".");return{fieldName:t,fieldPath:n.reverse()}},_getItemByFieldPath(e,t,i){const n=this,{itemType:o}=i,r=n._getSubItemField(o),s="group"===o||"tabbed"===o||i.title;let a;do{if(!s)break;{const o=i.name||i.caption||i.title,s=(0,_.$K)(o),l=jf(o);let c;if(i[r]=n._generateItemsFromData(i[r]),s&&(c=e.pop()),!e.length&&(a=n._getItemByField(t,i[r]),a))break;(!s||s&&l===c)&&e.length&&(a=n._searchItemInEverySubItem(e,t,i[r]))}}while(e.length&&!(0,_.$K)(a));return a},_getSubItemField:e=>"tabbed"===e?"tabs":"items",_searchItemInEverySubItem(e,t,i){const n=this;let o;return(0,j.each)(i,((i,r)=>{if(o=n._getItemByFieldPath(e.slice(),t,r),o)return!1})),o||(o=!1),o},_changeItemOption(e,t,i){(0,_.Kn)(e)&&(e[t]=i)},_dimensionChanged(){const e=this._getCurrentScreenFactor();this._lastMarkupScreenFactor!==e&&(this._isColCountChanged(this._lastMarkupScreenFactor,e)&&(this._targetScreenFactor=e,this._refresh(),this._targetScreenFactor=void 0),this._lastMarkupScreenFactor=e)},_isColCountChanged(e,t){let i=!1;return(0,j.each)(this._cachedColCountOptions,((n,o)=>{if(o.colCountByScreen[e]!==o.colCountByScreen[t])return i=!0,!1})),i},_refresh(){m.Z.trigger(this.$element().find(".dx-state-focused > :not(.dx-dropdowneditor-input-wrapper) input, .dx-state-focused textarea"),"change"),this.callBase()},_updateIsDirty(e){const t=this.getEditor(e);t&&(t.option("isDirty")?this._dirtyFields.add(e):this._dirtyFields.delete(e),this.option("isDirty",!!this._dirtyFields.size))},updateRunTimeInfoForEachEditor(e){this._itemsRunTimeInfo.each(((t,i)=>{const{widgetInstance:n}=i;(0,_.$K)(n)&&me.isEditor(n)&&e(n)}))},_clear(){this.updateRunTimeInfoForEachEditor((e=>{e.clear(),e.option("isValid",!0)})),ie.resetGroup(this._getValidationGroup())},_updateData(e,t,i){const n=this,o=i?t:e;(0,_.Kn)(o)?(0,j.each)(o,((t,o)=>{n._updateData(i?`${e}.${t}`:t,o,(0,_.Kn)(o))})):(0,_.HD)(e)&&n._updateFieldValue(e,t)},registerKeyHandler(e,t){this.callBase(e,t),this._itemsRunTimeInfo.each(((i,n)=>{(0,_.$K)(n.widgetInstance)&&n.widgetInstance.registerKeyHandler(e,t)}))},_focusTarget(){return this.$element().find(`.${Kp} [tabindex]`).first()},_visibilityChanged(){this._alignLabels(this._rootLayoutManager,this._rootLayoutManager.isSingleColumnMode())},_clearAutoColCountChangedTimeout(){this.autoColCountChangedTimeoutId&&(clearTimeout(this.autoColCountChangedTimeoutId),this.autoColCountChangedTimeoutId=void 0)},_dispose(){this._clearAutoColCountChangedTimeout(),ie.removeGroup(this._getValidationGroup()),this.callBase()},clear(){this._clear()},resetValues(){this._clear()},reset(e){this.updateRunTimeInfoForEachEditor((t=>{const i=t.option("name");e&&i in e?t.reset(e[i]):t.reset()})),this._renderValidationSummary()},updateData(e,t){this._updateData(e,t)},getEditor(e){return this._itemsRunTimeInfo.findWidgetInstanceByDataField(e)||this._itemsRunTimeInfo.findWidgetInstanceByName(e)},getButton(e){return this._itemsRunTimeInfo.findWidgetInstanceByName(e)},updateDimensions(){const e=this,t=(0,p.BH)();return e._scrollable?e._scrollable.update().done((()=>{t.resolveWith(e)})):t.resolveWith(e),t.promise()},itemOption(e,t,i){const n=this._generateItemsFromData(this.option("items")),o=this._getItemByField(e,n),r=qf(n,o);if(o)switch(arguments.length){case 1:return o;case 3:{const e=this._tryCreateItemOptionAction(t,o,i,o[t],r);this._changeItemOption(o,t,i);const s=zf(r,t);this._tryExecuteItemOptionAction(e)||this._tryChangeLayoutManagerItemOption(s,i)||this.option("items",n);break}default:if((0,_.Kn)(t)&&!this._tryChangeLayoutManagerItemOptions(r,t)){let e;(0,j.each)(t,((t,i)=>{const n=this._tryCreateItemOptionAction(t,o,i,o[t],r);this._changeItemOption(o,t,i),e||this._tryExecuteItemOptionAction(n)||(e=!0)})),e&&this.option("items",n)}}},validate(){return ie.validateGroup(this._getValidationGroup())},getItemID(e){return`dx_${this.option("formID")}_${e||new V.Z}`},getTargetScreenFactor(){return this._targetScreenFactor}});(0,r.default)("dxForm",i_);const n_=i_,o_=400,r_=["none","hidden","dotted","dashed","solid","double","groove","ridge","inset","outset"].map((e=>({id:e,value:z.Z.format(`dxHtmlEditor-borderStyle${(0,En.camelize)(e,!0)}`)}))),s_="user",a_="silent",l_="dxHtmlEditor-dialogColorCaption",c_="dxHtmlEditor-dialogBackgroundCaption",d_="dxHtmlEditor-dialogLinkCaption",h_="dxHtmlEditor-dialogInsertTableCaption",u_="dxHtmlEditor-dialogLinkUrlField",p_="dxHtmlEditor-dialogLinkTextField",f_="dxHtmlEditor-dialogLinkTargetField",__="dx-formdialog-field-target",m_="dxHtmlEditor-dialogInsertTableRowsField",g_="dxHtmlEditor-dialogInsertTableColumnsField",v_={insertHeaderRow:"header",clear:"clearformat"};function b_(e){return{clear:t=>{let{event:i}=t;const n=e.quill.getSelection();var o;n&&(e.saveValueChangeEvent(i),e.quill.removeFormat(n),null===(o=T_(e))||void 0===o||o.updateFormatWidgets())},link:S_(e),image:I_(e,e.editorInstance.option("imageUpload")),color:E_(e,"color"),background:E_(e,"background"),orderedList:O_(e,"list","ordered"),bulletList:O_(e,"list","bullet"),alignLeft:O_(e,"align","left"),alignCenter:O_(e,"align","center"),alignRight:O_(e,"align","right"),alignJustify:O_(e,"align","justify"),codeBlock:D_(e,"code-block"),undo:t=>{let{event:i}=t;e.saveValueChangeEvent(i),e.quill.history.undo()},redo:t=>{let{event:i}=t;e.saveValueChangeEvent(i),e.quill.history.redo()},increaseIndent:t=>{let{event:i}=t;w_(e,["indent","+1",s_],i)},decreaseIndent:t=>{let{event:i}=t;w_(e,["indent","-1",s_],i)},superscript:O_(e,"script","super"),subscript:O_(e,"script","sub"),insertTable:B_(e),insertHeaderRow:Fc(e.quill,"insertHeaderRow"),insertRowAbove:Fc(e.quill,"insertRowAbove"),insertRowBelow:Fc(e.quill,"insertRowBelow"),insertColumnLeft:Fc(e.quill,"insertColumnLeft"),insertColumnRight:Fc(e.quill,"insertColumnRight"),deleteColumn:Fc(e.quill,"deleteColumn"),deleteRow:Fc(e.quill,"deleteRow"),deleteTable:Fc(e.quill,"deleteTable"),cellProperties:C_(e,"cell"),tableProperties:C_(e,"table")}}function y_(e,t){let{contentTemplate:i,title:n,minHeight:o,minWidth:r,maxWidth:s}=t;e.formDialogOption({contentTemplate:i,title:n,minHeight:o??0,minWidth:r??0,maxWidth:s??"none"})}function C_(e,t){return i=>{var n;null!==(n=i)&&void 0!==n&&n.length||(i=(0,c.Z)(function(e,t){const i=e.quill.getModule("table").getTable();return"table"===t?i[0].domNode:i[2].domNode}(e,t)));const[o,r]=e.quill.getModule("table").getTable()??[],s=e.quill.getFormat(e.editorInstance.getSelection(!0)),a=function(e){return"cell"===e?P_:A_}(t)(e,{$element:i,formats:s,tableBlot:o,rowBlot:r}),{contentTemplate:l,title:d,minHeight:h,minWidth:u,maxWidth:p}=e.editorInstance._formDialog._popup.option(),f={contentTemplate:l,title:d,minHeight:h,minWidth:u,maxWidth:p};let _;e.editorInstance.formDialogOption({contentTemplate:t=>{const i=(0,c.Z)("<div>").appendTo(t),n=(0,c.Z)("<div>").appendTo(i);return e.editorInstance._createComponent(n,n_,a.formOptions),e.editorInstance._createComponent(i,Za,{}),_=n.dxForm("instance"),i},title:z.Z.format(`dxHtmlEditor-${t}Properties`),minHeight:o_,minWidth:Math.min(800,.9*(0,oe.dz)((0,Z.getWindow)())-1),maxWidth:.9*(0,oe.dz)((0,Z.getWindow)())});const m=e.editorInstance.showFormDialog();m.done(((t,i)=>{e.saveValueChangeEvent(i),a.applyHandler(_),y_(e.editorInstance,f)})),m.fail((()=>{e.quill.focus(),y_(e.editorInstance,f)}))}}function w_(e,t,i){e.saveValueChangeEvent(i),e.quill.format(...t)}function x_(e){return Array.isArray(e)?e[0]:e}function S_(e){return()=>{var t;e.quill.focus();let i=e.quill.getSelection();const n=i?e.quill.getFormat():{},o=void 0!==n.link&&0===(null===(t=i)||void 0===t?void 0:t.length);let r=n.link||"";if(o){const t=function(e,t){const i=ye().import("formats/link");let n,o;return[n,o]=e.quill.scroll.descendant(i,t.index),n||0!==t.length||([n,o]=e.quill.scroll.descendant(i,t.index-1),n&&(o+=1)),n?{index:t.index-o,length:n.length()}:null}(e,i);t?i=t:r=""}const s=function(e,t){return!!t&&e.quill.getText(t).length<t.length}(e,i),a={href:r,text:i&&!s?e.quill.getText(i):"",target:!Object.prototype.hasOwnProperty.call(n,"target")||!!n.target};e.editorInstance.formDialogOption("title",z.Z.format(d_));const l=e.editorInstance.showFormDialog({formData:a,items:k_(s)});l.done(((t,n)=>{if(i&&!s){const o=t.text||t.href,{index:r,length:s}=i;t.text=void 0,e.saveValueChangeEvent(n),s&&e.quill.deleteText(r,s,a_),e.quill.insertText(r,o,"link",t,s_),e.quill.setSelection(r+o.length,0,s_)}else t.text=i||t.text?t.text:t.href,w_(e,["link",t,s_],n)})),l.fail((()=>{e.quill.focus()}))}}function I_(e,t){const i=new ms(e,t);return()=>{i.render()}}function k_(e){return[{dataField:"href",label:{text:z.Z.format(u_)}},{dataField:"text",label:{text:z.Z.format(p_)},visible:!e},{dataField:"target",editorType:"dxCheckBox",editorOptions:{text:z.Z.format(f_)},cssClass:__,label:{visible:!1}}]}function E_(e,t){return()=>{const i=e.quill.getFormat(),n="color"===t?l_:c_;e.editorInstance.formDialogOption("title",z.Z.format(n));const o=e.editorInstance.showFormDialog({formData:i,items:[{dataField:t,editorType:"dxColorView",editorOptions:{focusStateEnabled:!1},label:{visible:!1}}]});o.done(((i,n)=>{w_(e,[t,i[t],s_],n)})),o.fail((()=>{e.quill.focus()}))}}function O_(e,t,i){return n=>{var o;let{event:r}=n;const s=e.quill.getFormat()[t]!==i&&i;w_(e,[t,s,s_],r),null===(o=T_(e))||void 0===o||o.updateFormatWidgets(!0)}}function T_(e){return e._updateFormatWidget?e:e.quill.getModule("toolbar")}function D_(e,t){return i=>{var n;let{event:o}=i;const r=e.quill.getFormat(),s=r[t],a=!((0,_.jn)(s)?s:(0,_.$K)(s));w_(e,[t,a,s_],o),null===(n=T_(e))||void 0===n||n._updateFormatWidget(t,a,r)}}function B_(e){return()=>{const t=e.quill.getFormat();e._tableFormats.some((e=>Object.prototype.hasOwnProperty.call(t,e)))?e.quill.focus():(e.editorInstance.formDialogOption("title",z.Z.format(h_)),e.editorInstance.showFormDialog({formData:{rows:1,columns:1},items:[{dataField:"columns",editorType:"dxNumberBox",editorOptions:{min:1},label:{text:z.Z.format(m_)}},{dataField:"rows",editorType:"dxNumberBox",editorOptions:{min:1},label:{text:z.Z.format(g_)}}]}).done(((t,i)=>{e.quill.focus();const n=e.quill.getModule("table");if(n){e.saveValueChangeEvent(i);const{columns:o,rows:r}=t;n.insertTable(o,r)}})).always((()=>{e.quill.focus()})))}}function A_(e,t){let{$element:i,formats:n,tableBlot:o}=t;const r=(0,Z.getWindow)();let s,a,l;const d=i,{editorInstance:h}=e,u=parseInt(n.tableWidth)||(0,oe.Y_)(d),p=r.getComputedStyle(d.get(0)),f="start"===p.textAlign?"left":p.textAlign;return{formOptions:{colCount:2,formData:{width:u,height:(0,_.$K)(n.tableHeight)?parseInt(n.tableHeight):(0,oe.zp)(d),backgroundColor:n.tableBackgroundColor||p.backgroundColor,borderStyle:n.tableBorderStyle||p.borderTopStyle,borderColor:n.tableBorderColor||p.borderTopColor,borderWidth:parseInt((0,_.$K)(n.tableBorderWidth)?n.tableBorderWidth:p.borderTopWidth),alignment:n.tableAlign||f},items:[{itemType:"group",caption:z.Z.format("dxHtmlEditor-border"),colCountByScreen:{xs:2},colCount:2,items:[{dataField:"borderStyle",label:{text:z.Z.format("dxHtmlEditor-style")},editorType:"dxSelectBox",editorOptions:{items:r_,valueExpr:"id",displayExpr:"value",placeholder:"Select style"}},{dataField:"borderWidth",label:{text:z.Z.format("dxHtmlEditor-borderWidth")},editorOptions:{placeholder:z.Z.format("dxHtmlEditor-pixels")}},{itemType:"simple",dataField:"borderColor",label:{text:z.Z.format("dxHtmlEditor-borderColor")},colSpan:2,template:e=>{const t=(0,c.Z)("<div>");return h._createComponent(t,Yd,{editAlphaChannel:!0,value:e.component.option("formData").borderColor,onInitialized:e=>{a=e.component}}),t}}]},{itemType:"group",caption:z.Z.format("dxHtmlEditor-dimensions"),colCountByScreen:{xs:2},colCount:2,items:[{dataField:"width",label:{text:z.Z.format("dxHtmlEditor-width")},editorOptions:{min:0,placeholder:z.Z.format("dxHtmlEditor-pixels")}},{dataField:"height",label:{text:z.Z.format("dxHtmlEditor-height")},editorOptions:{min:0,placeholder:z.Z.format("dxHtmlEditor-pixels")}}]},{itemType:"group",caption:z.Z.format("dxHtmlEditor-tableBackground"),items:[{itemType:"simple",dataField:"backgroundColor",label:{text:z.Z.format("dxHtmlEditor-borderColor")},template:e=>{const t=(0,c.Z)("<div>");return h._createComponent(t,Yd,{editAlphaChannel:!0,value:e.component.option("formData").backgroundColor,onInitialized:e=>{l=e.component}}),t}}]},{itemType:"group",caption:z.Z.format("dxHtmlEditor-alignment"),items:[{itemType:"simple",label:{text:z.Z.format("dxHtmlEditor-horizontal")},template:()=>{const e=(0,c.Z)("<div>");return h._createComponent(e,Er,{items:[{value:"left",icon:"alignleft"},{value:"center",icon:"aligncenter"},{value:"right",icon:"alignright"},{value:"justify",icon:"alignjustify"}],keyExpr:"value",selectedItemKeys:[f],onInitialized:e=>{s=e.component}}),e}}]}],showColonAfterLabel:!0,labelLocation:"top",minColWidth:400},applyHandler:t=>{const i=t.option("formData"),n=i.width===u?void 0:i.width,r=i.height;!function(e,t){let{$table:i,newHeight:n,newWidth:o,tableBlot:r}=t;if((0,_.$K)(o))if(Rc(i).length>0)e.editorInstance.format("tableWidth",`${o}px`);else{const t=Mc(i),n=(0,oe.Y_)(i);Pc(i,{tableBlot:r}),(0,j.each)(t,((t,r)=>{const s=(0,c.Z)(r),a=o/n*(0,oe.Y_)(s),l=Nc(i,s.index(),"horizontal");$c(e,{elements:l,property:"width",value:a})}))}const s=Rc(i,"vertical");if((null==s?void 0:s.length)>0)r.format("tableHeight",`${n}px`);else{const t=Vc(i),o=(0,oe.zp)(i);(0,j.each)(t,((t,r)=>{const s=(0,c.Z)(r),a=n/o*(0,oe.zp)(s),l=Nc(i,t,"vertical");$c(e,{elements:l,property:"height",value:a})}))}}(e,{$table:d,newHeight:r,newWidth:n,tableBlot:o}),e.editorInstance.format("tableBorderStyle",i.borderStyle),e.editorInstance.format("tableBorderWidth",`${i.borderWidth}px`),e.editorInstance.format("tableBorderColor",a.option("value")),e.editorInstance.format("tableBackgroundColor",l.option("value")),e.editorInstance.format("tableTextAlign",s.option("selectedItemKeys")[0])}}}function P_(e,t){let{$element:i,formats:n,tableBlot:o,rowBlot:r}=t;const s=(0,Z.getWindow)();let a,l,d,h;const u=i,p=(0,_.$K)(n.cellWidth)?parseInt(n.cellWidth):(0,oe.Y_)(u),{editorInstance:f}=e,m=s.getComputedStyle(u.get(0)),g="start"===m.textAlign?"left":m.textAlign;return{formOptions:{colCount:2,formData:{width:p,height:(0,_.$K)(n.cellHeight)?parseInt(n.cellHeight):(0,oe.zp)(u),backgroundColor:x_(n.cellBackgroundColor)||m.backgroundColor,borderStyle:n.cellBorderStyle||m.borderTopStyle,borderColor:x_(n.cellBorderColor)||m.borderTopColor,borderWidth:parseInt((0,_.$K)(n.cellBorderWidth)?n.cellBorderWidth:m.borderTopWidth),alignment:n.cellTextAlign||g,verticalAlignment:n.cellVerticalAlign||m.verticalAlign,verticalPadding:parseInt((0,_.$K)(n.cellPaddingTop)?n.cellPaddingTop:m.paddingTop),horizontalPadding:parseInt((0,_.$K)(n.cellPaddingLeft)?n.cellPaddingLeft:m.paddingLeft)},items:[{itemType:"group",caption:z.Z.format("dxHtmlEditor-border"),colCountByScreen:{xs:2},colCount:2,items:[{dataField:"borderStyle",label:{text:z.Z.format("dxHtmlEditor-style")},editorType:"dxSelectBox",editorOptions:{items:r_,valueExpr:"id",displayExpr:"value"}},{dataField:"borderWidth",label:{text:z.Z.format("dxHtmlEditor-borderWidth")},editorOptions:{placeholder:z.Z.format("dxHtmlEditor-pixels")}},{itemType:"simple",dataField:"borderColor",colSpan:2,label:{text:z.Z.format("dxHtmlEditor-borderColor")},template:e=>{const t=(0,c.Z)("<div>");return f._createComponent(t,Yd,{editAlphaChannel:!0,value:e.component.option("formData").borderColor,onInitialized:e=>{d=e.component}}),t}}]},{itemType:"group",caption:z.Z.format("dxHtmlEditor-dimensions"),colCount:2,colCountByScreen:{xs:2},items:[{dataField:"width",label:{text:z.Z.format("dxHtmlEditor-width")},editorOptions:{min:0,placeholder:z.Z.format("dxHtmlEditor-pixels")}},{dataField:"height",label:{text:z.Z.format("dxHtmlEditor-height")},editorOptions:{min:0,placeholder:z.Z.format("dxHtmlEditor-pixels")}},{dataField:"verticalPadding",label:{text:z.Z.format("dxHtmlEditor-paddingVertical")},editorOptions:{placeholder:z.Z.format("dxHtmlEditor-pixels")}},{label:{text:z.Z.format("dxHtmlEditor-paddingHorizontal")},dataField:"horizontalPadding",editorOptions:{placeholder:z.Z.format("dxHtmlEditor-pixels")}}]},{itemType:"group",caption:z.Z.format("dxHtmlEditor-tableBackground"),items:[{itemType:"simple",dataField:"backgroundColor",label:{text:z.Z.format("dxHtmlEditor-borderColor")},template:e=>{const t=(0,c.Z)("<div>");return f._createComponent(t,Yd,{editAlphaChannel:!0,value:e.component.option("formData").backgroundColor,onInitialized:e=>{h=e.component}}),t}}]},{itemType:"group",caption:z.Z.format("dxHtmlEditor-alignment"),colCount:2,items:[{itemType:"simple",label:{text:z.Z.format("dxHtmlEditor-horizontal")},template:()=>{const e=(0,c.Z)("<div>");return f._createComponent(e,Er,{items:[{value:"left",icon:"alignleft"},{value:"center",icon:"aligncenter"},{value:"right",icon:"alignright"},{value:"justify",icon:"alignjustify"}],keyExpr:"value",selectedItemKeys:[g],onInitialized:e=>{a=e.component}}),e}},{itemType:"simple",label:{text:z.Z.format("dxHtmlEditor-vertical")},template:()=>{const e=(0,c.Z)("<div>");return f._createComponent(e,Er,{items:[{value:"top",icon:"verticalaligntop"},{value:"middle",icon:"verticalaligncenter"},{value:"bottom",icon:"verticalalignbottom"}],keyExpr:"value",selectedItemKeys:[m.verticalAlign],onInitialized:e=>{l=e.component}}),e}}]}],showColonAfterLabel:!0,labelLocation:"top",minColWidth:400},applyHandler:t=>{const i=t.option("formData"),n=i.width===parseInt(p)?void 0:i.width,s=i.height;!function(e,t){let{$cell:i,newHeight:n,newWidth:o,tableBlot:r,rowBlot:s}=t;const a=(0,c.Z)(i.closest("table"));if((0,_.$K)(o)){const t=(0,c.Z)(i).index();let n=Nc(a,t);const s=o-(0,oe.Y_)(i);o>(0,oe.Y_)(a)&&Pc(a,{tableBlot:r}),$c(e,{elements:n,property:"width",value:o});const l=i.next();if(0===Rc(a).length)if(Pc(a,{tableBlot:r}),1===l.length){n=Nc(a,t+1);const i=(0,oe.Y_)(n.eq(0))-s;$c(e,{elements:n,property:"width",value:Math.max(i,0)})}else if(1===i.prev().length){n=Nc(a,t-1);const i=(0,oe.Y_)(n.eq(0))-s;$c(e,{elements:n,property:"width",value:Math.max(i,0)})}}s.children.forEach((e=>{e.format("cellHeight",`${n}px`)})),0===Rc(a,"vertical").length&&a.css("height","auto")}(e,{$cell:u,newHeight:s,newWidth:n,tableBlot:o,rowBlot:r}),e.editorInstance.format("cellBorderWidth",`${i.borderWidth}px`),e.editorInstance.format("cellBorderColor",d.option("value")),e.editorInstance.format("cellBorderStyle",i.borderStyle),e.editorInstance.format("cellBackgroundColor",h.option("value")),e.editorInstance.format("cellTextAlign",a.option("selectedItemKeys")[0]),e.editorInstance.format("cellVerticalAlign",l.option("selectedItemKeys")[0]),e.editorInstance.format("cellPaddingLeft",`${i.horizontalPadding}px`),e.editorInstance.format("cellPaddingRight",`${i.horizontalPadding}px`),e.editorInstance.format("cellPaddingTop",`${i.verticalPadding}px`),e.editorInstance.format("cellPaddingBottom",`${i.verticalPadding}px`)}}}const M_=(0,v.addNamespace)("dxcontextmenu","dxHtmlEditorTableContextMenu");let R_=Pe;const $_=e=>z.Z.format(`dxHtmlEditor-${(0,En.camelize)(e)}`);be()&&(R_=class extends Pe{constructor(e,t){super(e,t),this.enabled=!!t.enabled,this._quillContainer=this.editorInstance._getQuillContainer(),this.addCleanCallback(this.prepareCleanCallback()),this._formatHandlers=b_(this),this._tableFormats=Ac(e),this.enabled&&this._enableContextMenu(t.items)}_enableContextMenu(e){var t;null===(t=this._contextMenu)||void 0===t||t.dispose(),this._contextMenu=this._createContextMenu(e),this._attachEvents()}_attachEvents(){m.Z.on(this.editorInstance._getContent(),M_,this._prepareContextMenuHandler())}_detachEvents(){m.Z.off(this.editorInstance._getContent(),M_)}_createContextMenu(e){const t=(0,c.Z)("<div>").appendTo(this.editorInstance.$element()),i=this._getMenuConfig(e);return this.editorInstance._createComponent(t,Tc,i)}showPropertiesForm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"cell";const t=(0,c.Z)(this._targetElement).closest("cell"===e?"th, td":"table");this._contextMenu.hide(),this._formatHandlers[`${e}Properties`](t),this._targetElement=null}_isAcceptableItem(e,t){return!e||e===t}_handleObjectItem(e){if(e.name&&this._isAcceptableItem(e.widget,"dxButton")){const t=this._prepareMenuItemConfig(e.name);return(0,f.l)(!0,t,e)}return e.items?(e.items=this._prepareMenuItems(e.items),e):e}_prepareMenuItemConfig(e){const t=v_[e]??e,i=(0,En.titleize)(e);return{text:$_(i),icon:t.toLowerCase(),onClick:this._formatHandlers[e]??D_(this,e)}}_prepareMenuItems(e){const t=[];return(0,j.each)(e,((e,i)=>{let n;(0,_.Kn)(i)?n=this._handleObjectItem(i):(0,_.HD)(i)&&(n=this._prepareMenuItemConfig(i)),n&&t.push(n)})),t}_getMenuConfig(e){const t=[{text:$_("insert"),items:["insertHeaderRow","insertRowAbove","insertRowBelow",(0,f.l)(this._prepareMenuItemConfig("insertColumnLeft"),{beginGroup:!0}),"insertColumnRight"]},{text:$_("delete"),items:["deleteColumn","deleteRow","deleteTable"]},(0,f.l)(this._prepareMenuItemConfig("cellProperties"),{onClick:()=>{this.showPropertiesForm("cell")}}),(0,f.l)(this._prepareMenuItemConfig("tableProperties"),{onClick:()=>{this.showPropertiesForm("table")}})],i=this._prepareMenuItems(null!=e&&e.length?e:t);return{target:this._quillContainer,showEvent:null,hideOnParentScroll:!1,items:i}}_prepareContextMenuHandler(){return e=>{this._isTableTarget(e.target)&&(this._targetElement=e.target,this._setContextMenuPosition(e),this._contextMenu.show(),e.preventDefault())}}_setContextMenuPosition(e){const t=this._quillContainer.get(0).getBoundingClientRect();this._contextMenu.option({position:{my:"left top",at:"left top",collision:"fit fit",offset:{x:e.clientX-t.left,y:e.clientY-t.top}}})}_isTableTarget(e){return!!(0,c.Z)(e).closest(".dx-htmleditor-content td, .dx-htmleditor-content th").length}clean(){this._detachEvents()}option(e,t){if("tableContextMenu"!==e){if("enabled"===e)this.enabled=t,t?this._enableContextMenu():this.clean();else if("items"===e){var i;null===(i=this._contextMenu)||void 0===i||i.dispose(),this._contextMenu=this._createContextMenu(t)}}else this.handleOptionChangeValue(t)}prepareCleanCallback(){return()=>{this.clean()}}});const N_=R_,V_="dx-htmleditor-column-resizer",F_="dx-htmleditor-row-resizer",Z_={minColumnWidth:40,minRowHeight:24},H_="dxHtmlTableResizingModule",L_=(0,v.addNamespace)("dxpointerdown",H_),j_=(0,v.addNamespace)("scroll",H_);class z_ extends Pe{constructor(e,t){super(e,t),this.enabled=!!t.enabled,this._tableResizeFrames=[],this._minColumnWidth=this._minSizeLimit("minColumnWidth",t.minColumnWidth),this._minRowHeight=this._minSizeLimit("minRowHeight",t.minRowHeight),this._quillContainer=this.editorInstance._getQuillContainer(),this._tableData=[],this.enabled&&this._applyResizing()}_applyResizing(e){e?this._applyResizingImpl():this.editorInstance.addContentInitializedCallback(this._applyResizingImpl.bind(this)),this.addCleanCallback(this.clean.bind(this)),this._resizeHandlerWithContext=io.default.add(this._resizeHandler.bind(this))}_minSizeLimit(e,t){return(0,_.$K)(t)?Math.max(t,0):Z_[e]}_applyResizingImpl(){const e=this._findTables();e.length&&(this._fixTablesWidths(e),this._createResizeFrames(e),this._updateFramesPositions(),this._updateFramesSeparators()),this._attachEvents()}_attachEvents(){m.Z.on(this.editorInstance._getContent(),j_,this._updateFramesPositions.bind(this)),this.quill.on("text-change",this._getQuillTextChangeHandler())}_detachEvents(){m.Z.off(this.editorInstance._getContent(),H_),this.quill.off("text-change",this._quillTextChangeHandler)}_getQuillTextChangeHandler(e,t,i){return(e,t,i)=>{if(this._isTableChanging()){const e=this._findTables();this._removeResizeFrames(),"api"===i&&this._fixTablesWidths(e),this._updateTablesColumnsWidth(e),this._createResizeFrames(e),this._updateFramesPositions(),this._updateFramesSeparators()}else this._updateFramesPositions(),this._isDragging||this._updateFramesSeparators()}}_getFrameForTable(e){var t;return null===(t=this._framesForTables)||void 0===t?void 0:t.get(e.get(0))}_resizeHandler(){this._windowResizeTimeout=setTimeout((()=>{const e=this._findTables();(0,j.each)(e,((e,t)=>{const i=(0,c.Z)(t),n=this._tableResizeFrames[e],o=(0,oe.Y_)(i),r=this._tableLastWidth(n);Math.abs(o-r)>1&&(this._tableLastWidth(n,o),this._updateColumnsWidth(i,e))})),this._updateFramesPositions(),this._updateFramesSeparators()}))}_findTables(){return(0,c.Z)(this._quillContainer).find("table")}_getWidthStyleValue(e){const t=e[0].style.width;return""!==t?parseInt(t):void 0}_tableLastWidth(e,t){if(!(0,_.$K)(t))return null==e?void 0:e.lastWidth;e.lastWidth=t}_fixTablesWidths(e){(0,j.each)(e,((e,t)=>{const i=(0,c.Z)(t),n=this._getTableDeterminantElements(i,"horizontal");this._tableResizeFrames[e]||(this._tableResizeFrames[e]={lastWidth:void 0});const o=this._getFrameForTable(i);if(o||this._tableResizeFrames.push({$table:i}),0===Rc(i).length){const{columnsSum:e}=this._getColumnElementsSum(n);Pc(i,{quill:this.quill});const t=this._tableLastWidth(o)??(0,oe.Y_)(i);o&&this._tableLastWidth(o,Math.max(e,t))}}))}_createResizeFrames(e){this._framesForTables=new Map,e.each(((e,t)=>{var i;const n=(0,c.Z)(t),o=null===(i=this._tableResizeFrames[e])||void 0===i?void 0:i.$table,r=this._tableResizeFrames[e].lastWidth;this._tableResizeFrames[e]={$frame:this._createTableResizeFrame(t),$table:n,index:e,lastWidth:o&&t===o.get(0)?r:void 0,columnsCount:this._getTableDeterminantElements(n,"horizontal").length,rowsCount:this._getTableDeterminantElements(n,"vertical").length},this._framesForTables.set(t,this._tableResizeFrames[e])})),this._tableResizeFrames.length=e.length}_isTableChanging(){const e=this._findTables();let t=!1;return e.length!==this._tableResizeFrames.length?t=!0:(0,j.each)(e,((e,i)=>{const n=(0,c.Z)(i),o=this._tableResizeFrames[e],r=(null==o?void 0:o.columnsCount)!==this._getTableDeterminantElements(n,"horizontal").length,s=(null==o?void 0:o.rowsCount)!==this._getTableDeterminantElements(n,"vertical").length;if(r||s)return t=!0,!1})),t}_removeResizeFrames(e){var t;(0,j.each)(this._tableResizeFrames,((e,t)=>{if(t.$frame){var i;const e=`.${V_}, .${F_}`;this._detachSeparatorEvents(null===(i=t.$frame)||void 0===i?void 0:i.find(e)),t.$frame.remove()}})),null===(t=this._framesForTables)||void 0===t||t.clear(),e&&(this._tableResizeFrames=[])}_detachSeparatorEvents(e){e.each(((e,t)=>{m.Z.off(t,L_)}))}_createTableResizeFrame(e){return(0,c.Z)("<div>").addClass("dx-table-resize-frame").appendTo(this._quillContainer)}_updateFramesPositions(){(0,j.each)(this._tableResizeFrames,((e,t)=>{this._updateFramePosition(t.$table,t.$frame)}))}_updateFramePosition(e,t){const{height:i,width:n,top:o,left:r}=(0,ne.l)(e.get(0)),{top:s,left:a}=(0,ne.l)(this.quill.root);t.css({height:i,width:n,top:o-s,left:r-a}),(0,Ws.pB)(t,{left:0,top:0})}_updateFramesSeparators(e){(0,j.each)(this._tableResizeFrames,((t,i)=>{e?this._updateFrameSeparators(i,e):(this._updateFrameSeparators(i,"vertical"),this._updateFrameSeparators(i,"horizontal"))}))}_isDraggable(e){return e.hasClass("dx-draggable")&&e.is(":visible")}_removeDraggable(e,t){this._isDraggable(e)&&((0,c.Z)(e).dxDraggable("instance").dispose(),(0,c.Z)(e).addClass(t))}_getDirectionInfo(e){return"vertical"===e?{lineResizerClass:F_,sizeFunction:e=>(0,oe.zp)(e),positionCoordinate:"top",positionStyleProperty:"height",positionCoordinateName:"y"}:{lineResizerClass:V_,sizeFunction:e=>(0,oe.Y_)(e),positionCoordinate:this.editorInstance.option("rtlEnabled")?"right":"left",positionStyleProperty:"width",positionCoordinateName:"x"}}_getSize(e,t){return t.sizeFunction(e)}_updateFrameSeparators(e,t){const i=this._getTableDeterminantElements(e.$table,t),n=i.length-1,o=this._getDirectionInfo(t),r=e.$frame.find(`.${o.lineResizerClass}`),s={transform:"none"};let a=0;for(let l=0;l<=n;l++){a+=this._getSize(i.eq(l),o),(0,_.$K)(r[l])||(r[l]=(0,c.Z)("<div>").addClass(o.lineResizerClass).appendTo(e.$frame).get(0));const n=(0,c.Z)(r[l]);this._removeDraggable(n,o.lineResizerClass),s[o.positionCoordinate]=a-2,(0,c.Z)(n).css(s);const d={lineSeparator:r[l],index:l,$determinantElements:i,frame:e,direction:t};this._attachColumnSeparatorEvents(d)}}_getTableDeterminantElements(e,t){return"vertical"===t?e.find("th:first-child, td:first-child"):Mc(e)}_attachColumnSeparatorEvents(e){m.Z.on(e.lineSeparator,L_,(()=>{this._createDraggableElement(e)}))}_dragStartHandler(e){let{$determinantElements:t,index:i,frame:n,direction:o,lineSeparator:r}=e;const s=this._getDirectionInfo(o);this._isDragging=!0,this._fixColumnsWidth(n.$table),this._startLineSize=parseInt(this._getSize((0,c.Z)(t[i]),s)),this._startTableWidth=(0,oe.Y_)(n.$table),this._startLineSeparatorPosition=parseInt((0,c.Z)(r).css(s.positionCoordinate)),this._nextLineSize=0,t[i+1]?this._nextLineSize=parseInt(this._getSize((0,c.Z)(t[i+1]),s)):"horizontal"===o&&Pc(n.$table,{quill:this.quill})}_shouldRevertOffset(e){return"horizontal"===e&&this.editorInstance.option("rtlEnabled")}_isNextColumnWidthEnough(e,t,i){if(!this._nextLineSize)return!0;if(e>=this._minColumnWidth){const e=this._nextColumnOffsetLimit?i<this._nextColumnOffsetLimit:i<0,n=Math.abs(this._getWidthStyleValue(t)-(0,oe.Y_)(t))>3;return e||!n}return!1}_shouldSetNextColumnWidth(e){return this._nextLineSize&&e>0}_horizontalDragHandler(e){let{currentLineNewSize:t,directionInfo:i,eventOffset:n,$determinantElements:o,index:r,frame:s}=e,a=this._nextLineSize&&this._nextLineSize-n;const l=t>=this._minColumnWidth,c=Nc(s.$table,r),d=Nc(s.$table,r+1),h=(0,oe.Y_)(c.eq(0))-t;if(l)if(this._isNextColumnWidthEnough(a,o.eq(r+1),n)){$c(this,{elements:c,property:i.positionStyleProperty,value:t}),this._shouldSetNextColumnWidth(a)&&$c(this,{elements:d,property:i.positionStyleProperty,value:a});const e=Math.abs(this._startTableWidth-(0,oe.Y_)(s.$table))<3;(Math.abs(h)>3||!this._nextLineSize&&e)&&($c(this,{elements:c,property:i.positionStyleProperty,value:(0,oe.Y_)(c.eq(0))}),a+=t-(0,oe.Y_)(c.eq(0)),this._shouldSetNextColumnWidth(a)&&$c(this,{elements:d,property:i.positionStyleProperty,value:a}))}else this._nextColumnOffsetLimit=this._nextColumnOffsetLimit||n;this._$highlightedElement.css(i.positionCoordinate,`${this._startLineSeparatorPosition+n+h}px`)}_verticalDragHandler(e){let{currentLineNewSize:t,directionInfo:i,eventOffset:n,$determinantElements:o,index:r,frame:s}=e;const a=Math.max(t,this._minRowHeight);$c(this,{elements:Nc(s.$table,r,"vertical"),property:i.positionStyleProperty,value:a});const l=(0,oe.zp)(o.eq(r))-t;this._$highlightedElement.css(i.positionCoordinate,`${this._startLineSeparatorPosition+n+l}px`)}_dragMoveHandler(e,t){let{$determinantElements:i,index:n,frame:o,direction:r}=t;const s=this._getDirectionInfo(r);let a=e.offset[s.positionCoordinateName];this.editorInstance._saveValueChangeEvent(e),this._shouldRevertOffset(r)&&(a=-a);const l=this._startLineSize+a;"horizontal"===r?this._horizontalDragHandler({currentLineNewSize:l,directionInfo:s,eventOffset:a,$determinantElements:i,index:n,frame:o}):this._verticalDragHandler({currentLineNewSize:l,directionInfo:s,eventOffset:a,$determinantElements:i,index:n,frame:o}),this._updateFramePosition(o.$table,o.$frame)}_dragEndHandler(e){var t;null===(t=this._$highlightedElement)||void 0===t||t.remove(),this._isDragging=void 0,this._nextColumnOffsetLimit=void 0,this._tableLastWidth(e.frame,(0,oe.Y_)(e.frame.$table)),this._updateFramesPositions(),this._updateFramesSeparators()}_isLastColumnResizing(e){let{$determinantElements:t,index:i}=e;return!(0,_.$K)(t[i+1])}_getBoundaryConfig(e){const t={};if("vertical"===e.direction)t.boundary=e.frame.$table,t.boundOffset={bottom:(0,Z.hasWindow)()?-(0,oe.Cr)((0,Z.getWindow)()):-(0,oe.zp)(this._quillContainer),top:0,left:0,right:0};else if(this._isLastColumnResizing(e)){const e=this.editorInstance._getContent();t.boundary=e,t.boundOffset={bottom:0,top:0,left:e.css("paddingLeft"),right:e.css("paddingRight")}}else t.boundary=e.frame.$table;return t}_createDraggableElement(e){var t;const i=this._getBoundaryConfig(e),n="vertical"===e.direction?"dx-htmleditor-highlighted-row":"dx-htmleditor-highlighted-column";null===(t=this._$highlightedElement)||void 0===t||t.remove(),this._$highlightedElement=(0,c.Z)("<div>").addClass(`${n}`).insertAfter((0,c.Z)(e.lineSeparator));const o={contentTemplate:null,allowMoveByClick:!1,dragDirection:e.direction,onDragMove:t=>{let{component:i,event:n}=t;this._dragMoveHandler(n,e)},onDragStart:()=>{this._dragStartHandler(e)},onDragEnd:()=>{this._dragEndHandler(e)}};(0,f.l)(o,i),this._currentDraggableElement=this.editorInstance._createComponent(e.lineSeparator,hd,o)}_fixColumnsWidth(e){const t=this._getTableDeterminantElements(e);(0,j.each)(t,((t,i)=>{const n=(0,oe.Y_)(i);$c(this,{elements:Nc(e,t),property:"width",value:Math.max(n,this._minColumnWidth)})}))}_getColumnElementsSum(e){const t=[];let i=0;return(0,j.each)(e,((e,n)=>{const o=(0,c.Z)(n),r=this._getWidthStyleValue(o)||(0,oe.Y_)(o);t[e]=Math.max(r,this._minColumnWidth),i+=t[e]})),{columnsWidths:t,columnsSum:i}}_setColumnsRatioWidth(e,t,i,n){(0,j.each)(e,(e=>{const o=Nc(n,e);let r;r=t>0?this._minColumnWidth+Math.round((i[e]-this._minColumnWidth)*t):this._minColumnWidth,$c(this,{elements:o,property:"width",value:r})}))}_updateColumnsWidth(e,t){const i=this._getTableDeterminantElements(e);let n=this._tableResizeFrames[t];n||(this._tableResizeFrames[t]={}),n=this._tableResizeFrames[t];const o=this._tableLastWidth(n)||(0,oe.Y_)(e);let r;const{columnsWidths:s,columnsSum:a}=this._getColumnElementsSum(i),l=i.length*this._minColumnWidth;r=a>l?(o-l)/(a-l):-1,this._tableLastWidth(n,r>0?o:l),this._setColumnsRatioWidth(i,r,s,e)}_updateTablesColumnsWidth(e){(0,j.each)(e,((e,t)=>{this._updateColumnsWidth((0,c.Z)(t),e)}))}option(e,t){"tableResizing"!==e?"enabled"===e?(this.enabled=t,t?this._applyResizing(!0):this.clean()):["minColumnWidth","minRowHeight"].includes(e)&&(this[`_${e}`]=this._minSizeLimit(e,t)):this.handleOptionChangeValue(t)}clean(){this._removeResizeFrames(!0),this._detachEvents(),io.default.remove(this._resizeHandlerWithContext),clearTimeout(this._windowResizeTimeout),this._resizeHandlerWithContext=void 0,this._isDragging=void 0,this._startTableWidth=void 0,clearTimeout(this._attachResizerTimeout)}}class W_{constructor(){this._collection=[]}clear(){this._collection=[]}add(e,t){this._collection.push({name:e,instance:t})}remove(e){this._collection=this._collection.filter((t=>t.name!==e))}getByName(e){let t=null;return(0,j.each)(this._collection,((i,n)=>{let{name:o,instance:r}=n;if(o===e)return t=r,!1})),t}each(e){this._collection.forEach((t=>{let{name:i,instance:n}=t;return n&&e(i,n)}))}}let K_=Pe;if(be()){const e="dx-htmleditor-toolbar-wrapper",t="dx-htmleditor-toolbar",i="dx-htmleditor-toolbar-format",n="dx-htmleditor-toolbar-separator",o="dx-htmleditor-toolbar-menu-separator",r="dx-format-active",s="dx-state-selected",a="dx-icon",l="selection-change",d="user",h="silent",u={66:"bold",73:"italic",85:"underline"},p={b:66,i:73,u:85},g=e=>z.Z.format(`dxHtmlEditor-${(0,En.camelize)(e)}`),b=(e,t)=>"header"===t?(0,_.$K)(e)&&!1!==e?`${g("heading")} ${e}`:g("normalText"):g(e)||e;K_=class extends Pe{constructor(e,t){var i;if(super(e,t),i=this,this._toolbarWidgets=new W_,this._formatHandlers=b_(this),this._tableFormats=Ac(e),(0,_.$K)(t.items)){this._addCallbacks(),this._renderToolbar();const e=this.toolbarInstance._layoutStrategy._menu;if(e){const{_renderPopup:t}=e;e._renderPopup=function(){for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];t.apply(e,...o),e._popup.on("showing",(()=>{i._updateToolbar(!0)}))}}this.quill.on("editor-change",((e,t,i,n)=>{if(n!==h||!(0,_.Qr)(this.quill.getFormat())){const t=e===l;this._updateToolbar(t)}}))}}_addCallbacks(){this.addCleanCallback(this.clean.bind(this)),this.editorInstance.addContentInitializedCallback(this.updateHistoryWidgets.bind(this))}_updateToolbar(e){this.updateFormatWidgets(e),this.updateHistoryWidgets(),this.updateTableWidgets()}_updateFormatWidget(e,t,i){const n=this._toolbarWidgets.getByName(e);n&&(t?this._markActiveFormatWidget(e,n,i):(this._resetFormatWidget(e,n),Object.prototype.hasOwnProperty.call(e)&&delete i[e]),this._toggleClearFormatting(t||!(0,_.Qr)(i)))}_renderToolbar(){const i=this.options.container||this._getContainer();this._$toolbar=(0,c.Z)("<div>").addClass(t).appendTo(i),this._$toolbarContainer=(0,c.Z)(i).addClass(e),m.Z.on(this._$toolbarContainer,(0,v.addNamespace)("mousedown",this.editorInstance.NAME),(e=>{e.target.focus(),e.preventDefault()})),this._subscribeFormatHotKeys(),this.toolbarInstance=this.editorInstance._createComponent(this._$toolbar,Hl,this.toolbarConfig),this.editorInstance.on("optionChanged",(e=>{let{name:t}=e;"readOnly"!==t&&"disabled"!==t||this.toolbarInstance.option("disabled",this.isInteractionDisabled)}))}get toolbarConfig(){return{dataSource:this._prepareToolbarItems(),disabled:this.isInteractionDisabled,menuContainer:this._$toolbarContainer,multiline:this.isMultilineMode()}}get isInteractionDisabled(){return this.editorInstance.option("readOnly")||this.editorInstance.option("disabled")}isMultilineMode(){return this.options.multiline??!0}clean(){this._toolbarWidgets.clear(),this._$toolbarContainer&&this._$toolbarContainer.empty().removeClass(e)}repaint(){this.toolbarInstance&&this.toolbarInstance.repaint()}_getContainer(){const e=(0,c.Z)("<div>");return this.editorInstance.$element().prepend(e),e}_detectRenamedOptions(e){(0,_.Kn)(e)&&(0,j.each)([{newName:"name",oldName:"formatName"},{newName:"acceptedValues",oldName:"formatValues"}],((t,i)=>{Object.prototype.hasOwnProperty.call(e,i.oldName)&&ge.Z.log("W1016",i.oldName,i.newName)}))}_subscribeFormatHotKeys(){this.quill.keyboard.addBinding({which:p.b,shortKey:!0},this._handleFormatHotKey.bind(this)),this.quill.keyboard.addBinding({which:p.i,shortKey:!0},this._handleFormatHotKey.bind(this)),this.quill.keyboard.addBinding({which:p.u,shortKey:!0},this._handleFormatHotKey.bind(this))}_handleFormatHotKey(e,t,i){let{which:n}=i;const o=u[n];this._updateButtonState(o)}_updateButtonState(e){const t=this._toolbarWidgets.getByName(e),i=this.quill.getFormat();i[e]?this._markActiveFormatWidget(e,t,i):this._resetFormatWidget(e,t)}_prepareToolbarItems(){const e=[];return(0,j.each)(this.options.items,((t,i)=>{let n;if(this._detectRenamedOptions(i),(0,_.Kn)(i))n=this._handleObjectItem(i);else if((0,_.HD)(i)){const e=this._prepareButtonItemConfig(i);n=this._getToolbarItem(e)}n&&e.push(n)})),e}_handleObjectItem(e){if(e.name&&e.acceptedValues&&this._isAcceptableItem(e.widget,"dxSelectBox")){const t=this._prepareSelectItemConfig(e);return this._getToolbarItem(t)}if(e.name&&this._isAcceptableItem(e.widget,"dxButton")){const t=this._prepareButtonItemConfig(e.name),i=(0,f.l)(!0,t,e);return this._getToolbarItem(i)}return this._getToolbarItem(e)}_isAcceptableItem(e,t){return!e||e===t}_prepareButtonItemConfig(e){const t=v_[e]??e,i=(0,En.titleize)(e);return{widget:"dxButton",name:e,options:{hint:g(i),text:g(i),icon:t.toLowerCase(),onClick:this._formatHandlers[e]||D_(this,e),stylingMode:"text"},showText:"inMenu"}}_prepareSelectItemConfig(e){const{name:t,acceptedValues:i}=e;return(0,f.l)(!0,{widget:"dxSelectBox",name:t,options:{stylingMode:"filled",dataSource:i,displayExpr:e=>b(e,t),placeholder:g(t),onValueChanged:e=>{this._isReset||(this._hideAdaptiveMenu(),w_(this,[t,e.value,d],e.event),this._setValueSilent(e.component,e.value))}}},e)}_hideAdaptiveMenu(){this.toolbarInstance.option("overflowMenuVisible")&&this.toolbarInstance.option("overflowMenuVisible",!1)}_getToolbarItem(e){const t={options:{onInitialized:t=>{e.name&&(t.component.$element().addClass(i),t.component.$element().toggleClass(`dx-${e.name.toLowerCase()}-format`,!!e.name),this._toolbarWidgets.add(e.name,t.component))},onDisposing:()=>{this._toolbarWidgets.remove(e.name)}}};return(0,f.l)(!0,{location:"before",locateInMenu:"auto"},this._getDefaultConfig(e.name),e,t)}_getDefaultItemsConfig(){return{clear:{options:{disabled:!0}},undo:{options:{disabled:!0}},redo:{options:{disabled:!0}},insertRowAbove:{options:{disabled:!0}},insertRowBelow:{options:{disabled:!0}},insertHeaderRow:{options:{disabled:!0}},insertColumnLeft:{options:{disabled:!0}},insertColumnRight:{options:{disabled:!0}},deleteRow:{options:{disabled:!0}},deleteColumn:{options:{disabled:!0}},deleteTable:{options:{disabled:!0}},cellProperties:{options:{disabled:!0}},tableProperties:{options:{disabled:!0}},separator:{template:(e,t,i)=>{(0,c.Z)(i).addClass(n)},menuItemTemplate:(e,t,i)=>{(0,c.Z)(i).addClass(o)}}}}_getDefaultConfig(e){return this._getDefaultItemsConfig()[e]}updateHistoryWidgets(){const e=this.quill.history;if(!e)return;const{undo:t,redo:i}=e.stack;this._updateManipulationWidget(this._toolbarWidgets.getByName("undo"),Boolean(t.length)),this._updateManipulationWidget(this._toolbarWidgets.getByName("redo"),Boolean(i.length))}updateTableWidgets(){if(!this.quill.getModule("table"))return;const e=this.quill.getSelection(),t=e&&this.quill.getFormat(e)||{},i=this._tableFormats.some((e=>Boolean(t[e])));Bc.forEach((e=>{const t="insertTable"===e,n=this._toolbarWidgets.getByName(e);this._updateManipulationWidget(n,t?!i:i)}))}_updateManipulationWidget(e,t){e&&e.option("disabled",!t)}updateFormatWidgets(e){const t=this.quill.getSelection();if(!t)return;const i=this.quill.getFormat(t),n=!(0,_.Qr)(i);n&&!e||this._resetFormatWidgets();for(const e in i){const t=this._getFormatWidgetName(e,i),n=this._toolbarWidgets.getByName(t)??this._toolbarWidgets.getByName(e);n&&this._markActiveFormatWidget(e,n,i)}this._toggleClearFormatting(n||t.length>1)}_markActiveFormatWidget(e,t,i){this._isColorFormat(e)&&this._updateColorWidget(e,i[e]),"value"in t.option()?this._setValueSilent(t,i[e]):(t.$element().addClass(r),t.$element().addClass(s))}_toggleClearFormatting(e){const t=this._toolbarWidgets.getByName("clear");t&&t.option("disabled",!e)}_isColorFormat(e){return"color"===e||"background"===e}_updateColorWidget(e,t){const i=this._toolbarWidgets.getByName(e);i&&i.$element().find(`.${a}`).css("borderBottomColor",t||"transparent")}_getFormatWidgetName(e,t){let i;switch(e){case"align":i=e+(0,En.titleize)(t[e]);break;case"list":i=t[e]+(0,En.titleize)(e);break;case"code-block":i="codeBlock";break;case"script":i=t[e]+e;break;case"imageSrc":i="image";break;default:i=e}return i}_setValueSilent(e,t){this._isReset=!0,e.option("value",t),this._isReset=!1}_resetFormatWidgets(){this._toolbarWidgets.each(((e,t)=>{this._resetFormatWidget(e,t)}))}_resetFormatWidget(e,t){t.$element().removeClass(r),t.$element().removeClass(s),this._isColorFormat(e)&&this._updateColorWidget(e),"clear"===e&&t.option("disabled",!0),"dxSelectBox"===t.NAME&&this._setValueSilent(t,null)}addClickHandler(e,t){this._formatHandlers[e]=t;const i=this._toolbarWidgets.getByName(e);i&&"dxButton"===i.NAME&&i.option("onClick",t)}}}const q_=K_;let U_={};if(be()){const e=be().import("blots/embed"),t="dx-variable";U_=class extends e{static create(e){const t=super.create();let i,n;const o=e.value;return Array.isArray(e.escapeChar)?(i=(0,u.ensureDefined)(e.escapeChar[0],""),n=(0,u.ensureDefined)(e.escapeChar[1],"")):i=n=e.escapeChar,t.innerText=i+o+n,t.dataset.varStartEscChar=i,t.dataset.varEndEscChar=n,t.dataset.varValue=e.value,t}static value(e){return(0,f.l)({},{value:e.dataset.varValue,escapeChar:[e.dataset.varStartEscChar||"",e.dataset.varEndEscChar||""]})}},U_.blotName="variable",U_.tagName="span",U_.className=t}const G_=U_;let Y_=Pe;if(be()){const e="dx-variable-format",t="dx-format-active",i="dx-state-selected";be().register({"formats/variable":G_},!0),Y_=class extends Wl{constructor(n,o){super(n,o);const r=n.getModule("toolbar");r&&r.addClickHandler("variable",this.showPopup.bind(this)),n.keyboard.addBinding({key:"P",altKey:!0},this.showPopup.bind(this)),this._popup.on("shown",(n=>{const o=(0,c.Z)(n.component.option("position").of);o.hasClass(e)&&(o.addClass(t),o.addClass(i))}))}_getDefaultOptions(){const e=super._getDefaultOptions();return(0,f.l)(e,{escapeChar:""})}showPopup(e){const t=this.quill.getSelection(!0),i=t?t.index:this.quill.getLength();this.savePosition(i),this._resetPopupPosition(e,i),super.showPopup()}_resetPopupPosition(e,t){if(e&&e.element)this._popup.option("position",{of:e.element,offset:{h:0,v:0},my:"top center",at:"bottom center",collision:"fit"});else{const e=this.quill.getBounds(t),i=(0,ne.l)(this.quill.root);this._popup.option("position",{of:this.quill.root,offset:{h:e.left,v:e.bottom-i.height},my:"top center",at:"bottom left",collision:"fit flip"})}}insertEmbedContent(e){const t=this.getPosition(),i=e.component.option("selectedItem"),n=(0,f.l)({},{value:i,escapeChar:this.options.escapeChar});setTimeout((()=>{this.quill.insertEmbed(t,"variable",n),this.quill.setSelection(t+1)}))}}}const Q_=Y_;let X_;if(be()){const e=be().import("core/theme");X_=class extends e{constructor(e,t){super(e,t),this.quill.root.classList.add("dx-htmleditor-content"),this.quill.root.setAttribute("role","textbox"),this.quill.root.setAttribute("aria-label","Editor content")}}}else X_={};const J_=X_;class em{constructor(){if(this._customModules=[],em.initialized)return;const e=this.getQuill(),t=e.import("attributors/style/direction");e.register({"formats/align":we,"formats/direction":t,"formats/font":Se,"formats/size":De,"formats/extendedImage":ke,"formats/link":Oe,"modules/toolbar":q_,"modules/dropImage":Re,"modules/variables":Q_,"modules/resizing":Xl,"modules/tableResizing":z_,"modules/tableContextMenu":N_,"modules/imageUpload":Os,"modules/imageCursor":Ve,"modules/mentions":ql,"themes/basic":J_},!0),this._customModules=[],em._initialized=!0}createEditor(e,t){return new(this.getQuill())(e,t)}registerModules(e){const t=RegExp("modules/*"),i=this.getQuill(),n=e=>!!i.imports[e];for(const i in e)t.test(i)&&!n(i)&&this._customModules.push(i.slice(8));i.register(e,!0)}getRegisteredModuleNames(){return this._customModules}getQuill(){return ye()}}const tm=em,im="dx-formdialog",nm=class{constructor(e,t){this._editorInstance=e,this._popupUserConfig=t,this._renderPopup(),this._attachOptionChangedHandler()}_renderPopup(){const e=this._editorInstance,t=(0,c.Z)("<div>").addClass(im).appendTo(e.$element()),i=this._getPopupConfig();return e._createComponent(t,jl,i)}_attachOptionChangedHandler(){var e;null===(e=this._popup)||void 0===e||e.on("optionChanged",(e=>{let{name:t,value:i}=e;"title"===t&&this._updateFormLabel(i)}))}_escKeyHandler(){this._popup.hide()}_addEscapeHandler(e){e.component.registerKeyHandler("escape",this._escKeyHandler.bind(this))}_isSmallScreen(){const e=(0,Z.hasWindow)()?(0,Z.getCurrentScreenFactor)():null;return"phone"===a.default.real().deviceType||"xs"===e}_getPopupConfig(){return(0,f.l)({onInitialized:e=>{this._popup=e.component,this._popup.on("hiding",(()=>this.onHiding())),this._popup.on("shown",(()=>{this._form.focus()}))},deferRendering:!1,focusStateEnabled:!1,showCloseButton:!1,fullScreen:this._isSmallScreen(),contentTemplate:e=>{const t=(0,c.Z)("<div>").appendTo(e);this._renderForm(t,{onEditorEnterKey:e=>this.callAddButtonAction(e.event),customizeItem:e=>{"simple"===e.itemType&&(e.editorOptions=(0,f.l)(!0,{},e.editorOptions,{onInitialized:this._addEscapeHandler.bind(this)}))}})},toolbarItems:[{toolbar:"bottom",location:"after",widget:"dxButton",options:(0,n.Z)({onInitialized:this._addEscapeHandler.bind(this),text:z.Z.format("OK"),onClick:e=>this.callAddButtonAction(e.event)},(0,Sn.dC)()?{stylingMode:"contained",type:"default"}:{})},{toolbar:"bottom",location:"after",widget:"dxButton",options:(0,n.Z)({onInitialized:this._addEscapeHandler.bind(this),text:z.Z.format("Cancel"),onClick:()=>{this._popup.hide()}},(0,Sn.dC)()?{stylingMode:"outlined",type:"normal"}:{})}],_wrapperClassExternal:`${im} dx-dropdowneditor-overlay`},this._popupUserConfig)}onHiding(){this.beforeAddButtonAction=void 0,this.deferred.reject()}callAddButtonAction(e){this.beforeAddButtonAction&&!this.beforeAddButtonAction()||this.hide(this._form.option("formData"),e)}_renderForm(e,t){e.addClass("dx-formdialog-form"),this._form=this._editorInstance._createComponent(e,n_,t),this._updateFormLabel()}_updateFormLabel(e){var t;const i=e??this.popupOption("title");null===(t=this._form)||void 0===t||t.$element().attr("aria-label",i)}_getDefaultFormOptions(){return{colCount:1,width:"auto",labelLocation:(0,Sn.yj)()?"top":"left"}}formOption(e,t){return this._form.option.apply(this._form,arguments)}show(e){if(this._popup.option("visible"))return;this.deferred=(0,p.BH)();const t=(0,f.l)(this._getDefaultFormOptions(),e);return this._form.option(t),this._popup.show(),this.deferred.promise()}hide(e,t){this.deferred.resolve(e,t),this._popup.hide()}popupOption(e,t){return this._popup.option.apply(this._popup,arguments)}},om="ios"===a.default.current().platform;let rm=0;const sm=me.inherit({_getDefaultOptions(){return(0,f.l)(this.callBase(),{focusStateEnabled:!0,valueType:"html",placeholder:"",toolbar:null,variables:null,mediaResizing:null,tableResizing:null,mentions:null,customizeModules:null,tableContextMenu:null,allowSoftLineBreak:!1,formDialogOptions:null,imageUpload:null,stylingMode:(0,s.default)().editorStylingMode||"outlined"})},_init(){this._mentionKeyInTemplateStorage=rm++,this.callBase(),this._cleanCallback=(0,h.Z)(),this._contentInitializedCallback=(0,h.Z)()},_getAnonymousTemplateName:()=>"htmlContent",_initTemplates(){this._templateManager.addDefaultTemplates({htmlContent:new d.s}),this.callBase()},_focusTarget(){return this._getContent()},_getContent(){return this.$element().find(".dx-htmleditor-content")},_focusInHandler(e){let{relatedTarget:t}=e;this._shouldSkipFocusEvent(t)||(this._toggleFocusClass(!0,this.$element()),this.callBase.apply(this,arguments))},_focusOutHandler(e){let{relatedTarget:t}=e;this._shouldSkipFocusEvent(t)||(this._toggleFocusClass(!1,this.$element()),this.callBase.apply(this,arguments))},_shouldSkipFocusEvent:e=>(0,c.Z)(e).hasClass("ql-clipboard"),_initMarkup(){this._$htmlContainer=(0,c.Z)("<div>").addClass("dx-quill-container"),this.$element().attr("role","application").addClass("dx-htmleditor").wrapInner(this._$htmlContainer),this._renderStylingMode();const e=this._getTemplate("htmlContent");this._$templateResult=e&&e.render({container:(0,l.uD)(this._$htmlContainer),noModel:!0,transclude:!0}),this._renderSubmitElement(),this.callBase(),this._updateContainerMarkup()},_renderValidationState(){1===this._getContent().length&&this.callBase()},_renderSubmitElement(){this._$submitElement=(0,c.Z)("<textarea>").addClass("dx-htmleditor-submit-element").attr("hidden",!0).appendTo(this.$element()),this._setSubmitValue(this.option("value"))},_setSubmitValue(e){this._getSubmitElement().val(e)},_getSubmitElement(){return this._$submitElement},_createNoScriptFrame:()=>(0,c.Z)("<iframe>").css("display","none").attr({srcdoc:"",id:"xss-frame",sandbox:"allow-same-origin"}),_removeXSSVulnerableHtml(e){const t=this._createNoScriptFrame().appendTo("body"),i=t.get(0).contentWindow.document.body,n=ye().replaceStyleAttribute(e);i.innerHTML=n;const o=e=>{if(e.attributes)for(let t=0;t<e.attributes.length;t++){const{name:i}=e.attributes[t];i.startsWith("on")&&e.removeAttribute(i)}if(e.childNodes)for(let t=0;t<e.childNodes.length;t++)o(e.childNodes[t])};o(i),i.querySelectorAll("script").forEach((e=>{e.remove()}));const r=i.innerHTML;return t.remove(),r},_updateContainerMarkup(){let e=this.option("value");if(this._isMarkdownValue()&&(this._prepareMarkdownConverter(),e=this._markdownConverter.toHtml(e)),e){const t=this._removeXSSVulnerableHtml(e);this._$htmlContainer.html(t)}},_prepareMarkdownConverter(){const e=o.Z.getConverter("markdown");if(!e)throw ge.Z.Error("E1051","markdown");this._markdownConverter=new e},_render(){this._prepareConverters(),this.callBase(),this._toggleReadOnlyState()},_prepareQuillRegistrator(){this._quillRegistrator||(this._quillRegistrator=new tm)},_getRegistrator(){return this._prepareQuillRegistrator(),this._quillRegistrator},_prepareConverters(){if(!this._deltaConverter){const e=o.Z.getConverter("delta");e&&(this._deltaConverter=new e)}"markdown"!==this.option("valueType")||this._markdownConverter||this._prepareMarkdownConverter()},_renderContentImpl(){this._contentRenderedDeferred=(0,p.BH)();const e=this._contentRenderedDeferred.promise();return this.callBase(),this._renderHtmlEditor(),this._renderFormDialog(),this._addKeyPressHandler(),e},_pointerMoveHandler(e){om&&e.stopPropagation()},_attachFocusEvents(){(0,u.deferRender)(this.callBase.bind(this))},_addKeyPressHandler(){const e=(0,v.addNamespace)("keydown",`${this.NAME}TextChange`);m.Z.on(this._$htmlContainer,e,this._keyDownHandler.bind(this))},_keyDownHandler(e){this._saveValueChangeEvent(e)},_renderHtmlEditor(){const e=this.option("customizeModules"),t=this._getModulesConfig();(0,_.mf)(e)&&e(t),this._quillInstance=this._getRegistrator().createEditor(this._$htmlContainer[0],{placeholder:this.option("placeholder"),readOnly:this.option("readOnly")||this.option("disabled"),modules:t,theme:"basic"}),this._renderValidationState(),this._deltaConverter.setQuillInstance(this._quillInstance),this._textChangeHandlerWithContext=this._textChangeHandler.bind(this),this._quillInstance.on("text-change",this._textChangeHandlerWithContext),this._renderScrollHandler(),this._hasTranscludedContent()?this._updateContentTask=(0,u.executeAsync)((()=>{this._applyTranscludedContent()})):this._finalizeContentRendering()},_renderScrollHandler(){const e=this._getContent(),t=function(e,t){const i=(0,c.Z)(e);return{validate(n){if((0,v.isDxMouseWheelEvent)(n)&&(o=n.target,!t||(0,c.Z)(o).is(e)))return!!function(e,t,i){const n=(0,c.Z)(e),o=i?n.scrollLeft():n.scrollTop(),r=i?"Width":"Height",s=n.prop(`scroll${r}`)-n.prop(`client${r}`)-o|0;return(0!==o||0!==s)&&(!!(0===o&&t>=0||0===s&&t<=0||o>0&&s>0)||void 0)}(i,-n.delta,n.shiftKey)&&(n._needSkipEvent=!0,!0);var o}}}(e);m.Z.on(e,(0,v.addNamespace)(T,this.NAME),t,u.noop),m.Z.on(e,(0,v.addNamespace)($.Z.move,this.NAME),this._pointerMoveHandler.bind(this))},_applyTranscludedContent(){const e=this.option("value");if(!(0,_.$K)(e)){const e=this._deltaConverter.toHtml(),t=this._quillInstance.clipboard.convert({html:e});if(t.ops.length)return void this._quillInstance.setContents(t)}this._finalizeContentRendering()},_hasTranscludedContent(){return this._$templateResult&&this._$templateResult.length},_getModulesConfig(){const e=(e=>{const t=e.import("delta"),i=e.MS_LIST_DATA_KEY;return(e,n)=>{const o=n.ops.slice(),r=o[0];r.insert=r.insert.replace(/^\s+/,"");const s=r.insert.match(/^(\S+)\s+/),a=s&&function(e,t){const i=e.getAttribute(t);if(i){const e=i.replace(/\n+/g,"").match(/level(\d+)/);return e?e[1]-1:0}return!1}(e,i);return s&&!1!==a?(r.insert=r.insert.substring(s[0].length,r.insert.length),function(e){const t=e[e.length-1];t.insert=t.insert.trim()}(o),o.push({insert:"\n",attributes:{list:(l=s,l[1].match(/\S+\./)?"ordered":"bullet"),indent:a}}),new t(o)):n;var l}})(this._getRegistrator().getQuill());return(0,f.l)({},{table:!0,toolbar:this._getModuleConfigByOption("toolbar"),variables:this._getModuleConfigByOption("variables"),resizing:this._getModuleConfigByOption("mediaResizing"),tableResizing:this._getModuleConfigByOption("tableResizing"),tableContextMenu:this._getModuleConfigByOption("tableContextMenu"),imageUpload:this._getModuleConfigByOption("imageUpload"),imageCursor:this._getBaseModuleConfig(),mentions:this._getModuleConfigByOption("mentions"),uploader:{onDrop:e=>this._saveValueChangeEvent((0,R.Event)(e)),imageBlot:"extendedImage"},keyboard:{onKeydown:e=>this._saveValueChangeEvent((0,R.Event)(e))},clipboard:{onPaste:e=>this._saveValueChangeEvent((0,R.Event)(e)),onCut:e=>this._saveValueChangeEvent((0,R.Event)(e)),matchers:[["p.MsoListParagraphCxSpFirst",e],["p.MsoListParagraphCxSpMiddle",e],["p.MsoListParagraphCxSpLast",e]]},multiline:Boolean(this.option("allowSoftLineBreak"))},this._getCustomModules())},_getModuleConfigByOption(e){const t=this.option(e);let i={};if((0,_.$K)(t))return Array.isArray(t)?i[e]=t:i=t,(0,f.l)(this._getBaseModuleConfig(),i)},_getBaseModuleConfig(){return{editorInstance:this}},_getCustomModules(){const e={};return this._getRegistrator().getRegisteredModuleNames().forEach((t=>{e[t]=this._getBaseModuleConfig()})),e},_textChangeHandler(e,t,i){const n=this._deltaConverter.toHtml(),o=this._isMarkdownValue()?this._updateValueByType("markdown",n):n,r=this.option("value");r===o||this._isNullValueConverted(r,o)||(this._isEditorUpdating=!0,this.option("value",o)),this._finalizeContentRendering()},_isNullValueConverted:(e,t)=>null===e&&""===t,_finalizeContentRendering(){this._contentRenderedDeferred&&(this.clearHistory(),this._contentInitializedCallback.fire(),this._contentRenderedDeferred.resolve(),this._contentRenderedDeferred=void 0)},_updateValueByType(e,t){const i=this._markdownConverter;if(!(0,_.$K)(i))return;const n=(0,u.ensureDefined)(t,this.option("value"));return"markdown"===e?i.toMarkdown(n):i.toHtml(n)},_isMarkdownValue(){return"markdown"===this.option("valueType")},_resetEnabledState(){if(this._quillInstance){const e=!(this.option("readOnly")||this.option("disabled"));this._quillInstance.enable(e)}},_renderFormDialog(){const e=(0,f.l)(!0,{width:"auto",height:"auto",hideOnOutsideClick:!0},this.option("formDialogOptions"));this._formDialog=new nm(this,e)},_getStylingModePrefix:()=>"dx-htmleditor-",_getQuillContainer(){return this._$htmlContainer},_prepareModuleOptions(e){var t;const i=null===(t=e.fullName)||void 0===t?void 0:t.split(".");let{value:n}=e;const o=i.length>=2?i[1]:e.name;return 3===i.length&&(n={[i[2]]:n}),[o,n]},_moduleOptionChanged(e,t){const i=this.getModule(e);Boolean(i)?i.option(...this._prepareModuleOptions(t)):this._invalidate()},_optionChanged(e){switch(e.name){case"value":{if(this._quillInstance)if(this._isEditorUpdating)this._isEditorUpdating=!1;else{const t=this._isMarkdownValue()?this._updateValueByType("HTML",e.value):e.value;this._suppressValueChangeAction(),this._updateHtmlContent(t),this._resumeValueChangeAction()}else this._$htmlContainer.html(e.value);const t=this.option("value");t!==e.previousValue&&(this._setSubmitValue(t),this.callBase((0,n.Z)({},e,{value:t})));break}case"placeholder":case"variables":case"toolbar":case"mentions":case"customizeModules":case"allowSoftLineBreak":this._invalidate();break;case"tableResizing":this._moduleOptionChanged("tableResizing",e);break;case"valueType":{this._prepareConverters();const t=this._updateValueByType(e.value);"html"===e.value&&this._quillInstance?this._updateHtmlContent(t):this.option("value",t);break}case"stylingMode":this._renderStylingMode();break;case"readOnly":case"disabled":this.callBase(e),this._resetEnabledState();break;case"formDialogOptions":this._renderFormDialog();break;case"tableContextMenu":this._moduleOptionChanged("tableContextMenu",e);break;case"mediaResizing":this._moduleOptionChanged("resizing",e);break;case"width":this.callBase(e),this._repaintToolbar();break;case"imageUpload":this._moduleOptionChanged("imageUpload",e);break;default:this.callBase(e)}},_repaintToolbar(){this._applyToolbarMethod("repaint")},_updateHtmlContent(e){const t=this._quillInstance.clipboard.convert({html:e});this._quillInstance.setContents(t)},_clean(){this._quillInstance&&(m.Z.off(this._getContent(),`.${this.NAME}`),this._quillInstance.off("text-change",this._textChangeHandlerWithContext),this._cleanCallback.fire()),this._abortUpdateContentTask(),this._cleanCallback.empty(),this._contentInitializedCallback.empty(),this.callBase()},_abortUpdateContentTask(){this._updateContentTask&&(this._updateContentTask.abort(),this._updateContentTask=void 0)},_applyQuillMethod(e,t){if(this._quillInstance)return this._quillInstance[e].apply(this._quillInstance,t)},_applyQuillHistoryMethod(e){this._quillInstance&&this._quillInstance.history&&this._quillInstance.history[e]()},_applyToolbarMethod(e){var t;null===(t=this.getModule("toolbar"))||void 0===t||t[e]()},addCleanCallback(e){this._cleanCallback.add(e)},addContentInitializedCallback(e){this._contentInitializedCallback.add(e)},register(e){this._getRegistrator().registerModules(e),this._quillInstance&&this.repaint()},get(e){return this._getRegistrator().getQuill().import(e)},getModule(e){return this._applyQuillMethod("getModule",arguments)},getQuillInstance(){return this._quillInstance},getSelection(e){return this._applyQuillMethod("getSelection",arguments)},setSelection(e,t){this._applyQuillMethod("setSelection",arguments)},getText(e,t){return this._applyQuillMethod("getText",arguments)},format(e,t){this._applyQuillMethod("format",arguments)},formatText(e,t,i,n){this._applyQuillMethod("formatText",arguments)},formatLine(e,t,i,n){this._applyQuillMethod("formatLine",arguments)},getFormat(e,t){return this._applyQuillMethod("getFormat",arguments)},removeFormat(e,t){return this._applyQuillMethod("removeFormat",arguments)},clearHistory(){this._applyQuillHistoryMethod("clear"),this._applyToolbarMethod("updateHistoryWidgets")},undo(){this._applyQuillHistoryMethod("undo")},redo(){this._applyQuillHistoryMethod("redo")},getLength(){return this._applyQuillMethod("getLength")},getBounds(e,t){return this._applyQuillMethod("getBounds",arguments)},delete(e,t){this._applyQuillMethod("deleteText",arguments)},insertText(e,t,i){this._applyQuillMethod("insertText",arguments)},insertEmbed(e,t,i){this._applyQuillMethod("insertEmbed",arguments)},showFormDialog(e){return this._formDialog.show(e)},formDialogOption(e,t){return this._formDialog.popupOption.apply(this._formDialog,arguments)},focus(){this.callBase(),this._applyQuillMethod("focus")},blur(){this._applyQuillMethod("blur")},getMentionKeyInTemplateStorage(){return this._mentionKeyInTemplateStorage}});(0,r.default)("dxHtmlEditor",sm);const am=sm},944:(e,t,i)=>{"use strict";i.r(t),i.d(t,{default:()=>Z});var n=i(9186),o=i(1898),r=i(3787),s=i.n(r);function a(e,t){return Array(t+1).join(e)}var l=["ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","BODY","CANVAS","CENTER","DD","DIR","DIV","DL","DT","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","FRAMESET","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","HTML","ISINDEX","LI","MAIN","MENU","NAV","NOFRAMES","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TBODY","TD","TFOOT","TH","THEAD","TR","UL"];function c(e){return p(e,l)}var d=["AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR"];function h(e){return p(e,d)}var u=["A","TABLE","THEAD","TBODY","TFOOT","TH","TD","IFRAME","SCRIPT","AUDIO","VIDEO"];function p(e,t){return t.indexOf(e.nodeName)>=0}function f(e,t){return e.getElementsByTagName&&t.some((function(t){return e.getElementsByTagName(t).length}))}var _={};function m(e){return e?e.replace(/(\n+\s*)+/g,"\n"):""}function g(e){for(var t in this.options=e,this._keep=[],this._remove=[],this.blankRule={replacement:e.blankReplacement},this.keepReplacement=e.keepReplacement,this.defaultRule={replacement:e.defaultReplacement},this.array=[],e.rules)this.array.push(e.rules[t])}function v(e,t,i){for(var n=0;n<e.length;n++){var o=e[n];if(b(o,t,i))return o}}function b(e,t,i){var n=e.filter;if("string"==typeof n){if(n===t.nodeName.toLowerCase())return!0}else if(Array.isArray(n)){if(n.indexOf(t.nodeName.toLowerCase())>-1)return!0}else{if("function"!=typeof n)throw new TypeError("`filter` needs to be a string, array, or function");if(n.call(e,t,i))return!0}}function y(e){var t=e.nextSibling||e.parentNode;return e.parentNode.removeChild(e),t}function C(e,t,i){return e&&e.parentNode===t||i(t)?t.nextSibling||t.parentNode:t.firstChild||t.nextSibling||t.parentNode}_.paragraph={filter:"p",replacement:function(e){return"\n\n"+e+"\n\n"}},_.lineBreak={filter:"br",replacement:function(e,t,i){return i.br+"\n"}},_.heading={filter:["h1","h2","h3","h4","h5","h6"],replacement:function(e,t,i){var n=Number(t.nodeName.charAt(1));return"setext"===i.headingStyle&&n<3?"\n\n"+e+"\n"+a(1===n?"=":"-",e.length)+"\n\n":"\n\n"+a("#",n)+" "+e+"\n\n"}},_.blockquote={filter:"blockquote",replacement:function(e){return"\n\n"+(e=(e=e.replace(/^\n+|\n+$/g,"")).replace(/^/gm,"> "))+"\n\n"}},_.list={filter:["ul","ol"],replacement:function(e,t){var i=t.parentNode;return"LI"===i.nodeName&&i.lastElementChild===t?"\n"+e:"\n\n"+e+"\n\n"}},_.listItem={filter:"li",replacement:function(e,t,i){e=e.replace(/^\n+/,"").replace(/\n+$/,"\n").replace(/\n/gm,"\n    ");var n=i.bulletListMarker+"   ",o=t.parentNode;if("OL"===o.nodeName){var r=o.getAttribute("start"),s=Array.prototype.indexOf.call(o.children,t);n=(r?Number(r)+s:s+1)+".  "}return n+e+(t.nextSibling&&!/\n$/.test(e)?"\n":"")}},_.indentedCodeBlock={filter:function(e,t){return"indented"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,i){return"\n\n    "+t.firstChild.textContent.replace(/\n/g,"\n    ")+"\n\n"}},_.fencedCodeBlock={filter:function(e,t){return"fenced"===t.codeBlockStyle&&"PRE"===e.nodeName&&e.firstChild&&"CODE"===e.firstChild.nodeName},replacement:function(e,t,i){for(var n,o=((t.firstChild.getAttribute("class")||"").match(/language-(\S+)/)||[null,""])[1],r=t.firstChild.textContent,s=i.fence.charAt(0),l=3,c=new RegExp("^"+s+"{3,}","gm");n=c.exec(r);)n[0].length>=l&&(l=n[0].length+1);var d=a(s,l);return"\n\n"+d+o+"\n"+r.replace(/\n$/,"")+"\n"+d+"\n\n"}},_.horizontalRule={filter:"hr",replacement:function(e,t,i){return"\n\n"+i.hr+"\n\n"}},_.inlineLink={filter:function(e,t){return"inlined"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t){var i=t.getAttribute("href"),n=m(t.getAttribute("title"));return n&&(n=' "'+n+'"'),"["+e+"]("+i+n+")"}},_.referenceLink={filter:function(e,t){return"referenced"===t.linkStyle&&"A"===e.nodeName&&e.getAttribute("href")},replacement:function(e,t,i){var n,o,r=t.getAttribute("href"),s=m(t.getAttribute("title"));switch(s&&(s=' "'+s+'"'),i.linkReferenceStyle){case"collapsed":n="["+e+"][]",o="["+e+"]: "+r+s;break;case"shortcut":n="["+e+"]",o="["+e+"]: "+r+s;break;default:var a=this.references.length+1;n="["+e+"]["+a+"]",o="["+a+"]: "+r+s}return this.references.push(o),n},references:[],append:function(e){var t="";return this.references.length&&(t="\n\n"+this.references.join("\n")+"\n\n",this.references=[]),t}},_.emphasis={filter:["em","i"],replacement:function(e,t,i){return e.trim()?i.emDelimiter+e+i.emDelimiter:""}},_.strong={filter:["strong","b"],replacement:function(e,t,i){return e.trim()?i.strongDelimiter+e+i.strongDelimiter:""}},_.code={filter:function(e){var t=e.previousSibling||e.nextSibling,i="PRE"===e.parentNode.nodeName&&!t;return"CODE"===e.nodeName&&!i},replacement:function(e){if(!e)return"";e=e.replace(/\r?\n|\r/g," ");for(var t=/^`|^ .*?[^ ].* $|`$/.test(e)?" ":"",i="`",n=e.match(/`+/gm)||[];-1!==n.indexOf(i);)i+="`";return i+t+e+t+i}},_.image={filter:"img",replacement:function(e,t){var i=m(t.getAttribute("alt")),n=t.getAttribute("src")||"",o=m(t.getAttribute("title"));return n?"!["+i+"]("+n+(o?' "'+o+'"':"")+")":""}},g.prototype={add:function(e,t){this.array.unshift(t)},keep:function(e){this._keep.unshift({filter:e,replacement:this.keepReplacement})},remove:function(e){this._remove.unshift({filter:e,replacement:function(){return""}})},forNode:function(e){return e.isBlank?this.blankRule:(t=v(this.array,e,this.options))||(t=v(this._keep,e,this.options))||(t=v(this._remove,e,this.options))?t:this.defaultRule;var t},forEach:function(e){for(var t=0;t<this.array.length;t++)e(this.array[t],t)}};var w,x,S="undefined"!=typeof window?window:{},I=function(){var e=S.DOMParser,t=!1;try{(new e).parseFromString("","text/html")&&(t=!0)}catch(e){}return t}()?S.DOMParser:(w=function(){},function(){var e=!1;try{document.implementation.createHTMLDocument("").open()}catch(t){window.ActiveXObject&&(e=!0)}return e}()?w.prototype.parseFromString=function(e){var t=new window.ActiveXObject("htmlfile");return t.designMode="on",t.open(),t.write(e),t.close(),t}:w.prototype.parseFromString=function(e){var t=document.implementation.createHTMLDocument("");return t.open(),t.write(e),t.close(),t},w);function k(e,t){var i;return function(e){var t=e.element,i=e.isBlock,n=e.isVoid,o=e.isPre||function(e){return"PRE"===e.nodeName};if(t.firstChild&&!o(t)){for(var r=null,s=!1,a=null,l=C(a,t,o);l!==t;){if(3===l.nodeType||4===l.nodeType){var c=l.data.replace(/[ \r\n\t]+/g," ");if(r&&!/ $/.test(r.data)||s||" "!==c[0]||(c=c.substr(1)),!c){l=y(l);continue}l.data=c,r=l}else{if(1!==l.nodeType){l=y(l);continue}i(l)||"BR"===l.nodeName?(r&&(r.data=r.data.replace(/ $/,"")),r=null,s=!1):n(l)||o(l)?(r=null,s=!0):r&&(s=!1)}var d=C(a,l,o);a=l,l=d}r&&(r.data=r.data.replace(/ $/,""),r.data||y(r))}}({element:i="string"==typeof e?(x=x||new I).parseFromString('<x-turndown id="turndown-root">'+e+"</x-turndown>","text/html").getElementById("turndown-root"):e.cloneNode(!0),isBlock:c,isVoid:h,isPre:t.preformattedCode?E:null}),i}function E(e){return"PRE"===e.nodeName||"CODE"===e.nodeName}function O(e,t){return e.isBlock=c(e),e.isCode="CODE"===e.nodeName||e.parentNode.isCode,e.isBlank=function(e){return!h(e)&&!function(e){return p(e,u)}(e)&&/^\s*$/i.test(e.textContent)&&!function(e){return f(e,d)}(e)&&!function(e){return f(e,u)}(e)}(e),e.flankingWhitespace=function(e,t){if(e.isBlock||t.preformattedCode&&e.isCode)return{leading:"",trailing:""};var i,n={leading:(i=e.textContent.match(/^(([ \t\r\n]*)(\s*))(?:(?=\S)[\s\S]*\S)?((\s*?)([ \t\r\n]*))$/))[1],leadingAscii:i[2],leadingNonAscii:i[3],trailing:i[4],trailingNonAscii:i[5],trailingAscii:i[6]};return n.leadingAscii&&T("left",e,t)&&(n.leading=n.leadingNonAscii),n.trailingAscii&&T("right",e,t)&&(n.trailing=n.trailingNonAscii),{leading:n.leading,trailing:n.trailing}}(e,t),e}function T(e,t,i){var n,o,r;return"left"===e?(n=t.previousSibling,o=/ $/):(n=t.nextSibling,o=/^ /),n&&(3===n.nodeType?r=o.test(n.nodeValue):i.preformattedCode&&"CODE"===n.nodeName?r=!1:1!==n.nodeType||c(n)||(r=o.test(n.textContent))),r}var D=Array.prototype.reduce,B=[[/\\/g,"\\\\"],[/\*/g,"\\*"],[/^-/g,"\\-"],[/^\+ /g,"\\+ "],[/^(=+)/g,"\\$1"],[/^(#{1,6}) /g,"\\$1 "],[/`/g,"\\`"],[/^~~~/g,"\\~~~"],[/\[/g,"\\["],[/\]/g,"\\]"],[/^>/g,"\\>"],[/_/g,"\\_"],[/^(\d+)\. /g,"$1\\. "]];function A(e){if(!(this instanceof A))return new A(e);var t={rules:_,headingStyle:"setext",hr:"* * *",bulletListMarker:"*",codeBlockStyle:"indented",fence:"```",emDelimiter:"_",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"full",br:"  ",preformattedCode:!1,blankReplacement:function(e,t){return t.isBlock?"\n\n":""},keepReplacement:function(e,t){return t.isBlock?"\n\n"+t.outerHTML+"\n\n":t.outerHTML},defaultReplacement:function(e,t){return t.isBlock?"\n\n"+e+"\n\n":e}};this.options=function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)i.hasOwnProperty(n)&&(e[n]=i[n])}return e}({},t,e),this.rules=new g(this.options)}function P(e){var t=this;return D.call(e.childNodes,(function(e,i){var n="";return 3===(i=new O(i,t.options)).nodeType?n=i.isCode?i.nodeValue:t.escape(i.nodeValue):1===i.nodeType&&(n=R.call(t,i)),$(e,n)}),"")}function M(e){var t=this;return this.rules.forEach((function(i){"function"==typeof i.append&&(e=$(e,i.append(t.options)))})),e.replace(/^[\t\r\n]+/,"").replace(/[\t\r\n\s]+$/,"")}function R(e){var t=this.rules.forNode(e),i=P.call(this,e),n=e.flankingWhitespace;return(n.leading||n.trailing)&&(i=i.trim()),n.leading+t.replacement(i,e,this.options)+n.trailing}function $(e,t){var i=function(e){for(var t=e.length;t>0&&"\n"===e[t-1];)t--;return e.substring(0,t)}(e),n=t.replace(/^\n*/,""),o=Math.max(e.length-i.length,t.length-n.length);return i+"\n\n".substring(0,o)+n}A.prototype={turndown:function(e){if(!function(e){return null!=e&&("string"==typeof e||e.nodeType&&(1===e.nodeType||9===e.nodeType||11===e.nodeType))}(e))throw new TypeError(e+" is not a string, or an element/document/fragment node.");if(""===e)return"";var t=P.call(this,new k(e,this.options));return M.call(this,t)},use:function(e){if(Array.isArray(e))for(var t=0;t<e.length;t++)this.use(e[t]);else{if("function"!=typeof e)throw new TypeError("plugin must be a Function or an Array of Functions");e(this)}return this},addRule:function(e,t){return this.rules.add(e,t),this},keep:function(e){return this.rules.keep(e),this},remove:function(e){return this.rules.remove(e),this},escape:function(e){return B.reduce((function(e,t){return e.replace(t[0],t[1])}),e)}};const N=A;var V=i(1521);class F{constructor(){var e;const t=(0,n.getWindow)(),i=t&&t.TurndownService||N,r=t&&t.showdown||s();if(!i)throw o.Z.Error("E1041","Turndown");if(!r)throw o.Z.Error("E1041","Showdown");this._html2Markdown=new i,null!==(e=this._html2Markdown)&&void 0!==e&&e.addRule&&(this._html2Markdown.addRule("emptyLine",{filter:e=>"p"===e.nodeName.toLowerCase()&&"<br>"===e.innerHTML,replacement:()=>"<br>"}),this._html2Markdown.keep(["table"])),this._markdown2Html=new r.Converter({simpleLineBreaks:!0,strikethrough:!0,tables:!0})}toMarkdown(e){return this._html2Markdown.turndown(e||"")}toHtml(e){let t=this._markdown2Html.makeHtml(e);return t&&(t=t.replace(new RegExp("\\r?\\n","g"),"")),t}}V.Z.addConverter("markdown",F);const Z=F},1853:function(e){var t;t=()=>(()=>{var e={1674:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var n=i(1233),o=i(3866),r=i(3398);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},l.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(f,e);var t,i,n,h,u,p=(h=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(h);if(u){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(e,t){var i,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{allowedTags:[]};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(n=p.call(this,e,t,o)).allowedTags=null!==(i=o.allowedTags)&&void 0!==i?i:[],n}return t=f,n=[{key:"keys",value:function(e){return(0,o.dj)(l(d(f),"keys",this),e,r.WT.attribute)}}],(i=[{key:"add",value:function(e,t){return o.Mx.call(this,l(d(f.prototype),"add",this),e,t)}},{key:"remove",value:function(e){return o.Mx.call(this,l(d(f.prototype),"remove",this),e)}},{key:"value",value:function(e){return o.Mx.call(this,l(d(f.prototype),"value",this),e)}},{key:"canAdd",value:function(e,t){return o.ud.call(this,l(d(f.prototype),"canAdd",this),e,t)}}])&&a(t.prototype,i),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.Attributor)},3866:(e,t,i)=>{"use strict";i.d(t,{Mx:()=>o,dj:()=>s,ud:()=>r});var n=i(3398);function o(e){var t=this.keyName;this.keyName=(0,n.mQ)(this.keyName);for(var i=arguments.length,o=new Array(i>1?i-1:0),r=1;r<i;r++)o[r-1]=arguments[r];var s=e.call.apply(e,[this].concat(o));return this.keyName=t,s}function r(e,t,i){return this.allowedTags.indexOf(t.tagName)>-1&&e.call(this,t,i)}function s(e,t,i){return e(t).map((function(e){return(0,n.jf)(t.tagName,e,i)}))}},4569:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var n=i(1233),o=i(3866),r=i(3398);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},l.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(f,e);var t,i,n,h,u,p=(h=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(h);if(u){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(e,t){var i,n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{allowedTags:[]};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(n=p.call(this,e,t,o)).allowedTags=null!==(i=o.allowedTags)&&void 0!==i?i:[],n}return t=f,n=[{key:"keys",value:function(e){return(0,o.dj)(l(d(f),"keys",this),e,r.WT.style)}}],(i=[{key:"add",value:function(e,t){return o.Mx.call(this,l(d(f.prototype),"add",this),e,t)}},{key:"remove",value:function(e){return o.Mx.call(this,l(d(f.prototype),"remove",this),e)}},{key:"value",value:function(e){return o.Mx.call(this,l(d(f.prototype),"value",this),e)}},{key:"canAdd",value:function(e,t){return o.ud.call(this,l(d(f.prototype),"canAdd",this),e,t)}}])&&a(t.prototype,i),n&&a(t,n),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.StyleAttributor)},3398:(e,t,i)=>{"use strict";i.d(t,{WT:()=>l,jf:()=>d,mQ:()=>h});var n=i(19),o=i(8252);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?s(Object(i),!0).forEach((function(t){var n,o,s;n=e,o=t,s=i[t],(o=function(e){var t=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===r(t)?t:String(t)}(o))in n?Object.defineProperty(n,o,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[o]=s})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):s(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var l={attribute:"attr",style:"style"},c=a(a({},n.Sp.allowedTags.reduce((function(e,t){return e[t]={name:n.Sp.name,keyNamesSet:n.bc},e}),{})),o.Pw.allowedTags.reduce((function(e,t){return e[t]={name:o.Pw.name,keyNamesSet:o.fU},e}),{}));function d(e,t,i){var n=c[e];return n&&n.keyNamesSet.has(t)?"".concat(i).concat(n.name,"_").concat(t):t}function h(e){return e.replace(/([^]*_)/,"")}},6446:(e,t,i)=>{"use strict";i.d(t,{i2:()=>S,qz:()=>I,E2:()=>k,ZP:()=>x});var n=i(9098),o=i.n(n),r=i(1233),s=i(4122),a=i(6603),l=i(8222),c=i(3398);function d(e,t,i,n){return i.map((i=>{const o=n?(0,c.jf)(e,i,n):i;return t.scroll.query(o,r.Scope.ATTRIBUTE)})).filter((e=>e instanceof r.Attributor)).reduce(((e,t)=>(e[t.attrName]=t,e)),{})}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function p(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach((function(t){var n,o,r;n=e,o=t,r=i[t],(o=g(o))in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,g(n.key),n)}}function m(e,t,i){return t&&_(e.prototype,t),i&&_(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e){var t=function(e,t){if("object"!==h(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===h(t)?t:String(t)}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},v.apply(this,arguments)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=w(e);if(t){var o=w(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}r.AttributorStore.prototype.build=function(){const{tagName:e}=this.domNode,t=r.Registry.find(this.domNode);if(null==t)return;const i=r.Attributor.keys(this.domNode),n=r.ClassAttributor.keys(this.domNode),o=r.StyleAttributor.keys(this.domNode);this.attributes={...d(e,t,i,c.WT.attribute),...d(e,t,n),...d(e,t,o,c.WT.style)}};var x=function(e){b(i,e);var t=C(i);function i(e,n){var o;return f(this,i),(o=t.call(this,e,n)).cache={},o}return m(i,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=I(this)),this.cache.delta}},{key:"deleteAt",value:function(e,t){v(w(i.prototype),"deleteAt",this).call(this,e,t),this.cache={}}},{key:"formatAt",value:function(e,t,n,o){t<=0||(this.scroll.query(n,r.Scope.BLOCK)?e+t===this.length()&&this.format(n,o):v(w(i.prototype),"formatAt",this).call(this,e,Math.min(t,this.length()-e-1),n,o),this.cache={})}},{key:"insertAt",value:function(e,t,n){if(null!=n)return v(w(i.prototype),"insertAt",this).call(this,e,t,n),void(this.cache={});if(0!==t.length){var o=t.split("\n"),r=o.shift();r.length>0&&(e<this.length()-1||null==this.children.tail?v(w(i.prototype),"insertAt",this).call(this,Math.min(e,this.length()-1),r):this.children.tail.insertAt(this.children.tail.length(),r),this.cache={});var s=this;o.reduce((function(e,t){return(s=s.split(e,!0)).insertAt(0,t),t.length}),e+r.length)}}},{key:"insertBefore",value:function(e,t){var n=this.children.head;t&&!this.domNode.contains(t.domNode)||v(w(i.prototype),"insertBefore",this).call(this,e,t),n instanceof s.Z&&n.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=v(w(i.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(e,t){v(w(i.prototype),"moveChildren",this).call(this,e,t),this.cache={}}},{key:"optimize",value:function(e){v(w(i.prototype),"optimize",this).call(this,e),this.cache={}}},{key:"path",value:function(e){return v(w(i.prototype),"path",this).call(this,e,!0)}},{key:"removeChild",value:function(e){v(w(i.prototype),"removeChild",this).call(this,e),this.cache={}}},{key:"split",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(t&&(0===e||e>=this.length()-1)){var n=this.clone();return 0===e?(this.parent.insertBefore(n,this),this):(this.parent.insertBefore(n,this.next),n)}var o=v(w(i.prototype),"split",this).call(this,e,t);return this.cache={},o}}]),i}(r.BlockBlot);x.blotName="block",x.tagName="P",x.defaultChild=s.Z,x.allowedChildren=[s.Z,a.Z,r.EmbedBlot,l.Z];var S=function(e){b(i,e);var t=C(i);function i(){return f(this,i),t.apply(this,arguments)}return m(i,[{key:"attach",value:function(){v(w(i.prototype),"attach",this).call(this),this.attributes=new r.AttributorStore(this.domNode)}},{key:"delta",value:function(){return(new(o())).insert(this.value(),p(p({},this.formats()),this.attributes.values()))}},{key:"format",value:function(e,t){var i=this.scroll.query(e,r.Scope.BLOCK_ATTRIBUTE);null!=i&&this.attributes.attribute(i,t)}},{key:"formatAt",value:function(e,t,i,n){this.format(i,n)}},{key:"insertAt",value:function(e,t,n){if("string"==typeof t&&t.endsWith("\n")){var o=this.scroll.create(x.blotName);this.parent.insertBefore(o,0===e?this:this.next),o.insertAt(0,t.slice(0,-1))}else v(w(i.prototype),"insertAt",this).call(this,e,t,n)}}]),i}(r.EmbedBlot);function I(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.descendants(r.LeafBlot).reduce((function(e,i){return 0===i.length()?e:e.insert(i.value(),k(i,{},t))}),new(o())).insert("\n",k(e))}function k(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==e?t:("function"==typeof e.formats&&(t=p(p({},t),e.formats()),i&&delete t["code-token"]),null==e.parent||"scroll"===e.parent.statics.blotName||e.parent.statics.scope!==e.statics.scope?t:k(e.parent,t,i))}S.scope=r.Scope.BLOCK_BLOT},4122:(e,t,i)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}var r}function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}i.d(t,{Z:()=>l});var a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(h,e);var t,i,a,l,c,d=(l=h,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=s(l);if(c){var i=s(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function h(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),d.apply(this,arguments)}return t=h,a=[{key:"value",value:function(){}}],(i=[{key:"optimize",value:function(){(this.prev||this.next)&&this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}])&&o(t.prototype,i),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),h}(i(1233).EmbedBlot);a.blotName="break",a.tagName="BR";const l=a},3553:(e,t,i)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}i.d(t,{Z:()=>a});var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,i,s,a=(i=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=r(i);if(s){var o=r(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,Object.defineProperty(t,"prototype",{writable:!1}),t}(i(1233).ContainerBlot);const a=s},3657:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var n=i(1233),o=i(8222);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===r(o)?o:String(o)),n)}var o}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},a.apply(this,arguments)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(f,e);var t,i,d,h,u,p=(h=f,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(h);if(u){var i=c(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(e,t,i){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(n=p.call(this,e,t)).selection=i,n.textNode=document.createTextNode(f.CONTENTS),n.domNode.appendChild(n.textNode),n.savedLength=0,n}return t=f,d=[{key:"value",value:function(){}}],(i=[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(e,t){if(0===this.savedLength){for(var i=this,o=0;null!=i&&i.statics.scope!==n.Scope.BLOCK_BLOT;)o+=i.offset(i.parent),i=i.parent;null!=i&&(this.savedLength=f.CONTENTS.length,i.optimize(),i.formatAt(o,f.CONTENTS.length,e,t),this.savedLength=0)}else a(c(f.prototype),"format",this).call(this,e,t)}},{key:"index",value:function(e,t){return e===this.textNode?0:a(c(f.prototype),"index",this).call(this,e,t)}},{key:"length",value:function(){return this.savedLength}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){a(c(f.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(this.selection.composing||null==this.parent)return null;for(var e=this.selection.getNativeRange();null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);var t,i=this.prev instanceof o.Z?this.prev:null,n=i?i.length():0,r=this.next instanceof o.Z?this.next:null,s=r?r.text:"",a=this.textNode,l=a.data.split(f.CONTENTS).join("");if(a.data=f.CONTENTS,i)t=i,(l||r)&&(i.insertAt(i.length(),l+s),r&&r.remove());else if(r)t=r,r.insertAt(0,l);else{var c=document.createTextNode(l);t=this.scroll.create(c),this.parent.insertBefore(t,this)}if(this.remove(),e){var d=function(e,t){return i&&e===i.domNode?t:e===a?n+t-1:r&&e===r.domNode?n+l.length+t:null},h=d(e.start.node,e.start.offset),u=d(e.end.node,e.end.offset);if(null!==h&&null!==u)return{startNode:t.domNode,startOffset:h,endNode:t.domNode,endOffset:u}}return null}},{key:"update",value:function(e,t){var i=this;if(e.some((function(e){return"characterData"===e.type&&e.target===i.textNode}))){var n=this.restore();n&&(t.range=n)}}},{key:"value",value:function(){return""}}])&&s(t.prototype,i),d&&s(t,d),Object.defineProperty(t,"prototype",{writable:!1}),f}(n.EmbedBlot);d.blotName="cursor",d.className="ql-cursor",d.tagName="span",d.CONTENTS="\ufeff";const h=d},7452:(e,t,i)=>{"use strict";i.d(t,{Z:()=>h});var n=i(1233),o=i(8222);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===r(o)?o:String(o)),n)}var o}function a(){return a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=c(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},a.apply(this,arguments)}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function c(e){return c=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},c(e)}var d="\ufeff";const h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}(p,e);var t,i,n,h,u=(n=p,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=c(n);if(h){var i=c(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function p(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),(i=u.call(this,e,t)).contentNode=document.createElement("span"),i.contentNode.setAttribute("contenteditable",!1),Array.from(i.domNode.childNodes).forEach((function(e){i.contentNode.appendChild(e)})),i.leftGuard=document.createTextNode(d),i.rightGuard=document.createTextNode(d),i.domNode.appendChild(i.leftGuard),i.domNode.appendChild(i.contentNode),i.domNode.appendChild(i.rightGuard),i}return t=p,(i=[{key:"index",value:function(e,t){return e===this.leftGuard?0:e===this.rightGuard?1:a(c(p.prototype),"index",this).call(this,e,t)}},{key:"restore",value:function(e){var t,i,n=e.data.split(d).join("");if(e===this.leftGuard)if(this.prev instanceof o.Z){var r=this.prev.length();this.prev.insertAt(r,n),t={startNode:this.prev.domNode,startOffset:r+n.length}}else i=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(i),this),t={startNode:i,startOffset:n.length};else e===this.rightGuard&&(this.next instanceof o.Z?(this.next.insertAt(0,n),t={startNode:this.next.domNode,startOffset:n.length}):(i=document.createTextNode(n),this.parent.insertBefore(this.scroll.create(i),this.next),t={startNode:i,startOffset:n.length}));return e.data=d,t}},{key:"update",value:function(e,t){var i=this;e.forEach((function(e){if("characterData"===e.type&&(e.target===i.leftGuard||e.target===i.rightGuard)){var n=i.restore(e.target);n&&(t.range=n)}}))}}])&&s(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),p}(n.EmbedBlot)},6603:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var n=i(1233),o=i(4122),r=i(8222);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},l.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(p,e);var t,i,o,r,h,u=(r=p,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(h){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function p(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),u.apply(this,arguments)}return t=p,o=[{key:"compare",value:function(e,t){var i=p.order.indexOf(e),n=p.order.indexOf(t);return i>=0||n>=0?i-n:e===t?0:e<t?-1:1}}],(i=[{key:"formatAt",value:function(e,t,i,o){if(p.compare(this.statics.blotName,i)<0&&this.scroll.query(i,n.Scope.BLOT)){var r=this.isolate(e,t);o&&r.wrap(i,o)}else l(d(p.prototype),"formatAt",this).call(this,e,t,i,o)}},{key:"optimize",value:function(e){if(l(d(p.prototype),"optimize",this).call(this,e),this.parent instanceof p&&p.compare(this.statics.blotName,this.parent.statics.blotName)>0){var t=this.parent.isolate(this.offset(),this.length());this.moveChildren(t),t.wrap(this)}}}])&&a(t.prototype,i),o&&a(t,o),Object.defineProperty(t,"prototype",{writable:!1}),p}(n.InlineBlot);h.allowedChildren=[h,o.Z,n.EmbedBlot,r.Z],h.order=["cursor","inline","link","underline","strike","italic","bold","script","code"];const u=h},3272:(e,t,i)=>{"use strict";i.d(t,{Z:()=>v});var n=i(1233),o=i(2069),r=i(6446),s=i(4122),a=i(3553),l=i(1969);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return h(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?h(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===c(o)?o:String(o)),n)}var o}function p(){return p="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},p.apply(this,arguments)}function f(e,t){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function m(e){return e instanceof r.ZP||e instanceof r.i2}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f(e,t)}(v,e);var t,i,a,h,g=(a=v,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_(a);if(h){var i=_(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function v(e,t,i){var n,o=i.emitter,r=i.toggleBlankClass;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,v),(n=g.call(this,e,t)).emitter=o,n.toggleBlankClass=r,n.batch=!1,n.optimize(),n.enable(),n.domNode.addEventListener("dragstart",(function(e){return n.handleDragStart(e)})),n}return t=v,i=[{key:"batchStart",value:function(){Array.isArray(this.batch)||(this.batch=[])}},{key:"batchEnd",value:function(){var e=this.batch;this.batch=!1,this.update(e)}},{key:"emitMount",value:function(e){this.emitter.emit(o.Z.events.SCROLL_BLOT_MOUNT,e)}},{key:"emitUnmount",value:function(e){this.emitter.emit(o.Z.events.SCROLL_BLOT_UNMOUNT,e)}},{key:"deleteAt",value:function(e,t){var i=d(this.line(e),2),n=i[0],o=i[1],a=d(this.line(e+t),1)[0];if(p(_(v.prototype),"deleteAt",this).call(this,e,t),null!=a&&n!==a&&o>0){var c=(n instanceof l.zW||a instanceof l.zW)&&n.parent!==a.parent;if(!(n instanceof r.i2||a instanceof r.i2||c)){var h=a.children.head instanceof s.Z?null:a.children.head;n.moveChildren(a,h),n.remove()}}this.optimize()}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",e)}},{key:"formatAt",value:function(e,t,i,n){p(_(v.prototype),"formatAt",this).call(this,e,t,i,n),this.optimize()}},{key:"handleDragStart",value:function(e){e.preventDefault()}},{key:"insertAt",value:function(e,t,i){if(e>=this.length())if(null==i||null==this.scroll.query(t,n.Scope.BLOCK)){var o=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(o),null==i&&t.endsWith("\n")?o.insertAt(0,t.slice(0,-1),i):o.insertAt(0,t,i)}else{var r=this.scroll.create(t,i);this.appendChild(r)}else p(_(v.prototype),"insertAt",this).call(this,e,t,i);this.optimize()}},{key:"insertBefore",value:function(e,t){if(e.statics.scope===n.Scope.INLINE_BLOT){var i=this.scroll.create(this.statics.defaultChild.blotName);i.appendChild(e),p(_(v.prototype),"insertBefore",this).call(this,i,t)}else p(_(v.prototype),"insertBefore",this).call(this,e,t)}},{key:"isEnabled",value:function(){return"true"===this.domNode.getAttribute("contenteditable")}},{key:"leaf",value:function(e){return this.path(e).pop()||[null,-1]}},{key:"line",value:function(e){return e===this.length()?this.line(e-1):this.descendant(m,e)}},{key:"lines",value:function(){return function e(t,i,o){var r=[],s=o;return t.children.forEachAt(i,o,(function(t,i,o){m(t)?r.push(t):t instanceof n.ContainerBlot&&(r=r.concat(e(t,i,s))),s-=o})),r}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(p(_(v.prototype),"optimize",this).call(this,e,t),e.length>0&&this.emitter.emit(o.Z.events.SCROLL_OPTIMIZE,e,t))}},{key:"path",value:function(e){return p(_(v.prototype),"path",this).call(this,e).slice(1)}},{key:"remove",value:function(){}},{key:"update",value:function(e){var t=this;if(this.batch)Array.isArray(e)&&(this.batch=this.batch.concat(e),this.toggleBlankClass());else{var i=o.Z.sources.USER;"string"==typeof e&&(i=e),Array.isArray(e)||(e=this.observer.takeRecords()),(e=e.filter((function(e){var i=e.target,n=t.find(i,!0);return n&&n.scroll===t}))).length>0&&this.emitter.emit(o.Z.events.SCROLL_BEFORE_UPDATE,i,e),p(_(v.prototype),"update",this).call(this,e.concat([])),e.length>0&&this.emitter.emit(o.Z.events.SCROLL_UPDATE,i,e)}}}],i&&u(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),v}(n.ScrollBlot);g.blotName="scroll",g.className="ql-editor",g.tagName="DIV",g.defaultChild=r.ZP,g.allowedChildren=[r.ZP,r.i2,a.Z];const v=g},8222:(e,t,i)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},o(e,t)}function r(e){return r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r(e)}i.d(t,{Z:()=>s,b:()=>a});var s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&o(e,t)}(l,e);var t,i,s,a=(i=l,s=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=r(i);if(s){var o=r(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function l(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),a.apply(this,arguments)}return t=l,Object.defineProperty(t,"prototype",{writable:!1}),t}(i(1233).TextBlot);function a(e){return e.replace(/[&<>"']/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[e]}))}},2432:(e,t,i)=>{"use strict";i.d(t,{default:()=>g});var n=i(281),o=i(6446),r=i(4122),s=i(3553),a=i(3657),l=i(7452),c=i(6603),d=i(3272),h=i(8222),u=i(5635),p=i(2613),f=i(3071),_=i(3859),m=i(990);n.ZP.register({"blots/block":o.ZP,"blots/block/embed":o.i2,"blots/break":r.Z,"blots/container":s.Z,"blots/cursor":a.Z,"blots/embed":l.Z,"blots/inline":c.Z,"blots/scroll":d.Z,"blots/text":h.Z,"modules/clipboard":u.ZP,"modules/history":p.Z,"modules/keyboard":f.ZP,"modules/uploader":_.Z,"modules/input":m.Z});const g=n.ZP},6229:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=i(7452),o=i(2069);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function s(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==r(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===r(o)?o:String(o)),n)}var o}const a=function(){function e(t,i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.emitter=i,this.isComposing=!1,t.domNode.addEventListener("compositionstart",(function(e){n.isComposing||n.handleCompositionStart(e)})),t.domNode.addEventListener("compositionend",(function(e){n.isComposing&&n.handleCompositionEnd(e)}))}var t,i;return t=e,(i=[{key:"isCompositionInProgress",value:function(){return this.isComposing}},{key:"handleCompositionStart",value:function(e){var t=e.target instanceof Node?this.scroll.find(e.target,!0):null;!t||t instanceof n.Z||(this.emitter.emit(o.Z.events.COMPOSITION_BEFORE_START,e),this.scroll.batchStart(),this.emitter.emit(o.Z.events.COMPOSITION_START,e),this.isComposing=!0)}},{key:"handleCompositionEnd",value:function(e){this.emitter.emit(o.Z.events.COMPOSITION_BEFORE_END,e),this.scroll.batchEnd(),this.emitter.emit(o.Z.events.COMPOSITION_END,e),this.isComposing=!1}}])&&s(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}()},2861:(e,t,i)=>{"use strict";i.d(t,{Z:()=>$});var n=i(8805),o=i.n(n),r=i(2722),s=i.n(r),a=i(732),l=i.n(a),c=i(9098),d=i.n(c),h=i(1233),u=i(7800),p=i(3657),f=i(6446),_=i(4122),m=i(8222),g=i(5874);function v(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function b(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?v(Object(i),!0).forEach((function(t){y(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function y(e,t,i){return(t=O(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function w(e,t){return k(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||S(e,t)||x()}function x(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function S(e,t){if(e){if("string"==typeof e)return I(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function k(e){if(Array.isArray(e))return e}function E(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,O(n.key),n)}}function O(e){var t=function(e,t){if("object"!==C(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===C(t)?t:String(t)}var T=/^[ -~]*$/,D=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scroll=t,this.delta=this.getDelta(),this.immediateFormats=new Set}var t,i;return t=e,i=[{key:"addImmediateFormat",value:function(e){this.immediateFormats.add(e)}},{key:"applyDelta",value:function(e){var t=this;this.scroll.update();var i=this.scroll.length();this.scroll.batchStart();var n=function(e){return e.reduce((function(e,t){if("string"==typeof t.insert){var i=t.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return e.insert(i,t.attributes)}return e.push(t)}),new(d()))}(e),o=new(d());return n.reduce((function(e,n){var r=c.Op.length(n),s=n.attributes||{},a=!1;if(null!=n.insert){if(o.retain(r),"string"==typeof n.insert){var d=n.insert;a=!d.endsWith("\n")&&(i<=e||t.scroll.descendant(f.i2,e)[0]),t.scroll.insertAt(e,d);var u=w(t.scroll.line(e),2),p=u[0],_=u[1],m=l()({},(0,f.E2)(p));if(p instanceof f.ZP){var g=w(p.descendant(h.LeafBlot,_),1)[0];m=l()(m,(0,f.E2)(g))}s=c.AttributeMap.diff(m,s)||{}}else if("object"===C(n.insert)){var v=Object.keys(n.insert)[0];if(null==v)return e;a=null!=t.scroll.query(v,h.Scope.INLINE)&&(i<=e||t.scroll.descendant(f.i2,e)[0]),t.scroll.insertAt(e,v,n.insert[v])}i+=r}else o.push(n);var b=Object.keys(s);t.immediateFormats.forEach((function(i){b.indexOf(i)>-1&&(t.scroll.formatAt(e,r,i,s[i]),delete s[i])})),Object.keys(s).forEach((function(i){t.scroll.formatAt(e,r,i,s[i])}));var y=a?1:0;return i+=y,o.delete(y),e+r+y}),0),o.reduce((function(e,i){return"number"==typeof i.delete?(t.scroll.deleteAt(e,i.delete),e):e+c.Op.length(i)}),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(n)}},{key:"deleteText",value:function(e,t){return this.scroll.deleteAt(e,t),this.update((new(d())).retain(e).delete(t))}},{key:"formatLine",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(n).forEach((function(o){i.scroll.lines(e,Math.max(t,1)).forEach((function(e){e.format(o,n[o])}))})),this.scroll.optimize();var r=(new(d())).retain(e).retain(t,o()(n));return this.update(r)}},{key:"formatText",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(n).forEach((function(o){i.scroll.formatAt(e,t,o,n[o])}));var r=(new(d())).retain(e).retain(t,o()(n));return this.update(r)}},{key:"getContents",value:function(e,t){return this.delta.slice(e,e+t)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(e,t){return e.concat(t.delta())}),new(d()))}},{key:"getFormat",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=[],n=[];0===t?this.scroll.path(e).forEach((function(e){var t=w(e,1)[0];t instanceof f.ZP?i.push(t):t instanceof h.LeafBlot&&n.push(t)})):(i=this.scroll.lines(e,t),n=this.scroll.descendants(h.LeafBlot,e,t));var o=w([i,n].map((function(e){if(0===e.length)return{};for(var t=(0,f.E2)(e.shift());Object.keys(t).length>0;){var i=e.shift();if(null==i)return t;t=P((0,f.E2)(i),t)}return t})),2);return i=o[0],n=o[1],b(b({},i),n)}},{key:"getHTML",value:function(e,t){var i=w(this.scroll.line(e),2),n=i[0],o=i[1];return n.length()>o+t?A(n,o,t,!0):A(this.scroll,e,t,!0)}},{key:"getText",value:function(e,t){return this.getContents(e,t).filter((function(e){return"string"==typeof e.insert})).map((function(e){return e.insert})).join("")}},{key:"insertEmbed",value:function(e,t,i){return this.scroll.insertAt(e,t,i),this.update((new(d())).retain(e).insert(y({},t,i)))}},{key:"insertText",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t=t.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(e,t),Object.keys(n).forEach((function(o){i.scroll.formatAt(e,t.length,o,n[o])})),this.update((new(d())).retain(e).insert(t,o()(n)))}},{key:"isBlank",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===this.scroll.children.length)return!0;if(e)return!1;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;return t.statics.blotName===f.ZP.blotName&&!(t.children.length>1)&&t.children.head instanceof _.Z}},{key:"removeFormat",value:function(e,t){var i=this.getText(e,t),n=w(this.scroll.line(e+t),2),o=n[0],r=n[1],s=0,a=new(d());null!=o&&(s=o.length()-r,a=o.delta().slice(r,r+s-1).insert("\n"));var l=this.getContents(e,t+s).diff((new(d())).insert(i).concat(a)),c=(new(d())).retain(e).concat(l);return this.applyDelta(c)}},{key:"update",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,n=this.delta;if(1===t.length&&"characterData"===t[0].type&&t[0].target.data.match(T)&&this.scroll.find(t[0].target)){var o=this.scroll.find(t[0].target),r=(0,f.E2)(o),a=o.offset(this.scroll),l=t[0].oldValue.replace(p.Z.CONTENTS,""),c=(new(d())).insert(l),h=(new(d())).insert(o.value()),u=i&&{oldRange:R(i.oldRange,-a),newRange:R(i.newRange,-a)};e=(new(d())).retain(a).concat(c.diff(h,u)).reduce((function(e,t){return t.insert?e.insert(t.insert,r):e.push(t)}),new(d())),this.delta=n.compose(e)}else this.delta=this.getDelta(),e&&s()(n.compose(e),this.delta)||this.deltaContainsRetain(n)||(e=n.diff(this.delta,i));return e}},{key:"deltaContainsRetain",value:function(e){return e.ops.some((function(e){return(0,g.Z)(e.retain)}))}}],i&&E(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e,t,i){if(0===e.length){var n=w(M(i.pop()),1)[0];return t<=0?"</li></".concat(n,">"):"</li></".concat(n,">").concat(B([],t-1,i))}var o,r=k(o=e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(o)||S(o)||x(),s=r[0],a=s.child,l=s.offset,c=s.length,d=s.indent,h=s.type,u=r.slice(1),p=w(M(h,a),2),f=p[0],_=p[1];if(d>t)return i.push(h),d===t+1?"<".concat(f,"><li").concat(_,">").concat(A(a,l,c)).concat(B(u,d,i)):"<".concat(f,"><li>").concat(B(e,t+1,i));var m=i[i.length-1];if(d===t&&h===m)return"</li><li".concat(_,">").concat(A(a,l,c)).concat(B(u,d,i));var g=w(M(i.pop()),1)[0];return"</li></".concat(g,">").concat(B(e,t-1,i))}function A(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("function"==typeof e.html)return e.html(t,i);if(e instanceof m.Z)return(0,m.b)(e.value().slice(t,t+i));if(e.children){if("list-container"===e.statics.blotName){var o=[];return e.children.forEachAt(t,i,(function(e,t,i){var n=e.formats();o.push({child:e,offset:t,length:i,indent:n.indent||0,type:n.list})})),B(o,-1,[])}var r=[];if(e.children.forEachAt(t,i,(function(e,t,i){r.push(A(e,t,i))})),function(e,t){1===e.length&&e.head instanceof _.Z&&t.push("<br>")}(e.children,r),n||"list"===e.statics.blotName)return r.join("");var s=function(e){var t=e.domNode.cloneNode(!0);return function(e,t){var i,n;return["tableCellLine","tableHeaderCellLine","tableCell","tableHeaderCell"].includes(e.statics.blotName)&&(i=t,n=e.statics.className,i.classList.remove(n),0===i.classList.length&&i.removeAttribute("class")),t}(e,t)}(e),a=s.outerHTML,l=s.innerHTML,c=w(a.split(">".concat(l,"<")),2),d=c[0],h=c[1];return 0===d.indexOf("<table")?"".concat(d.replace(/(\sdata-.+?=["'].*?["'])/g,""),">").concat(r.join("").replace(/(\sdata-table.+?=["'].*?["'])/g,""),"<").concat(h):"".concat(d,">").concat(r.join(""),"<").concat(h)}return e.domNode.outerHTML}function P(e,t){return Object.keys(t).reduce((function(i,n){return null==e[n]||(t[n]===e[n]?i[n]=t[n]:Array.isArray(t[n])?t[n].indexOf(e[n])<0&&(i[n]=t[n].concat([e[n]])):i[n]=[t[n],e[n]]),i}),{})}function M(e,t){var i="ordered"===e?"ol":"ul",n=t?"".concat(function(e){var t=e.domNode;if(!t.hasAttributes())return"";for(var i=t.attributes,n=" ",o=0;o<i.length;o+=1){var r=i[o].name,s=i[o].value;"class"===r&&(s=s.replace(/ql-indent-\d/g,"").trim()),s.length&&-1===r.indexOf("data-")&&(n+="".concat(r,'="').concat(s,'"'))}return n.length>1?n:""}(t)):"";switch(e){case"checked":return[i,"".concat(n,' data-list="checked"')];case"unchecked":return[i,"".concat(n,' data-list="unchecked"')];default:return[i,n]}}function R(e,t){var i=e.index,n=e.length;return new u.e(i+t,n)}const $=D},2069:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var n=i(3034),o=i.n(n),r=i(8034),s=i(2598);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}function c(){return c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},c.apply(this,arguments)}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var u=(0,i(3122).Z)("quill:events");(0,r.Z)()&&["selectionchange","mousedown","mouseup","click"].forEach((function(e){document.addEventListener(e,(function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];Array.from(document.querySelectorAll(".ql-container")).forEach((function(e){var i,n=s.Z.get(e);n&&n.emitter&&(i=n.emitter).handleDOM.apply(i,t)}))}))}));var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(s,e);var t,i,n,o,r=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(o){var i=h(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(e=r.call(this)).listeners={},e.on("error",u.error),e}return t=s,i=[{key:"emit",value:function(){for(var e,t,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];(e=u.log).call.apply(e,[u].concat(n)),(t=c(h(s.prototype),"emit",this)).call.apply(t,[this].concat(n))}},{key:"handleDOM",value:function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];(this.listeners[e.type]||[]).forEach((function(t){var n=t.node,o=t.handler;(e.target===n||n.contains(e.target))&&o.apply(void 0,[e].concat(i))}))}},{key:"listenDOM",value:function(e,t,i){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({node:t,handler:i})}}],i&&l(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(o());p.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",CONTENT_SETTED:"content-setted",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"},p.sources={API:"api",SILENT:"silent",USER:"user"};const f=p},2598:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n=new WeakMap},3122:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=["error","warn","log","info"],o="warn";function r(e){if(n.indexOf(e)<=n.indexOf(o)){for(var t,i=arguments.length,r=new Array(i>1?i-1:0),s=1;s<i;s++)r[s-1]=arguments[s];(t=console)[e].apply(t,r)}}function s(e){return n.reduce((function(t,i){return t[i]=r.bind(console,i,e),t}),{})}s.level=function(e){o=e},r.level=s.level;const a=s},7094:(e,t,i)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}var r}function r(e,t,i){return t&&o(e.prototype,t),i&&o(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}i.d(t,{Z:()=>a});var s=r((function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=i}));s.DEFAULTS={};const a=s},281:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>O});var n=i(9098),o=i.n(n),r=i(8805),s=i.n(r),a=i(732),l=i.n(a),c=i(1233),d=i(2861),h=i(2069),u=i(7094),p=i(7800),f=i(2598),_=i(3122),m=i(1690),g=i(5874),v=i(6229);function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(e,t,i){return(t=S(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return w(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?w(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function x(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,S(n.key),n)}}function S(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===b(t)?t:String(t)}var I=(0,_.Z)("quill"),k="style-data-key",E=new c.Registry;c.ParentBlot.uiClass="ql-ui";var O=function(){function e(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=T(t,n),this.container=this.options.container,null==this.container)return I.error("Invalid Quill container",t);this.options.debug&&e.debug(this.options.debug);var o=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",f.Z.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new h.Z;var r=this.options.registry.query(c.ScrollBlot.blotName);this.scroll=new r(this.options.registry,this.root,{emitter:this.emitter,toggleBlankClass:this.toggleBlankClass.bind(this)}),this.editor=new d.Z(this.scroll),this.composition=new v.Z(this.scroll,this.emitter),this.selection=new p.Z(this.scroll,this.emitter,this.composition),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.init(),this.emitter.on(h.Z.events.EDITOR_CHANGE,(function(e){e===h.Z.events.TEXT_CHANGE&&i.toggleBlankClass()})),this.emitter.on(h.Z.events.SCROLL_UPDATE,(function(e,t){var n=i.selection.lastRange,o=C(i.selection.getRange(),1)[0],r=n&&o?{oldRange:n,newRange:o}:void 0;D.call(i,(function(){return i.editor.update(null,t,r)}),e)})),this.setContents(this.getInitialContent(o)),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}var t,i,n;return t=e,i=[{key:"getInitialContent",value:function(e){return this.clipboard.convert({html:"".concat(e,"<p><br></p>"),text:"\n"})}},{key:"toggleBlankClass",value:function(){var e=this.composition.isCompositionInProgress();this.root.classList.toggle("ql-blank",this.editor.isBlank(e))}},{key:"addContainer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof e){var i=e;(e=document.createElement("div")).classList.add(i)}return this.container.insertBefore(e,t),e}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(e,t,i){var n=this,o=C(B(e,t,i),4);return e=o[0],t=o[1],i=o[3],D.call(this,(function(){return n.editor.deleteText(e,t)}),i,e,-1*t)}},{key:"disable",value:function(){this.enable(!1)}},{key:"editReadOnly",value:function(e){this.allowReadOnlyEdits=!0;var t=e();return this.allowReadOnlyEdits=!1,t}},{key:"enable",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(e),this.container.classList.toggle("ql-disabled",!e)}},{key:"focus",value:function(){var e=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=e,this.scrollIntoView()}},{key:"format",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.Z.sources.API;return this.applyCompositionChanges(),D.call(this,(function(){var n=i.getSelection(!0),r=new(o());if(null==n)return r;if(i.scroll.query(e,c.Scope.BLOCK))r=i.editor.formatLine(n.index,n.length,y({},e,t));else{if(0===n.length)return i.selection.format(e,t),r;r=i.editor.formatText(n.index,n.length,y({},e,t))}return i.setSelection(n,h.Z.sources.SILENT),r}),n)}},{key:"formatLine",value:function(e,t,i,n,o){var r,s=this,a=C(B(e,t,i,n,o),4);return e=a[0],t=a[1],r=a[2],o=a[3],D.call(this,(function(){return s.editor.formatLine(e,t,r)}),o,e,0)}},{key:"formatText",value:function(e,t,i,n,o){var r,s=this,a=C(B(e,t,i,n,o),4);return e=a[0],t=a[1],r=a[2],o=a[3],D.call(this,(function(){return s.editor.formatText(e,t,r)}),o,e,0)}},{key:"getBounds",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;t="number"==typeof e?this.selection.getBounds(e,i):this.selection.getBounds(e.index,e.length);var n=this.container.getBoundingClientRect();return{bottom:t.bottom-n.top,height:t.height,left:t.left-n.left,right:t.right-n.left,top:t.top-n.top,width:t.width}}},{key:"getContents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,i=C(B(e,t),2);return e=i[0],t=i[1],this.editor.getContents(e,t)}},{key:"getFormat",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return(0,g.Z)(e)?"number"==typeof e?this.editor.getFormat(e,t):this.editor.getFormat(e.index,e.length):{}}},{key:"getIndex",value:function(e){return e.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(e){return this.scroll.leaf(e)}},{key:"getLine",value:function(e){return this.scroll.line(e)}},{key:"getLines",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof e?this.scroll.lines(e.index,e.length):this.scroll.lines(e,t)}},{key:"getModule",value:function(e){return this.theme.modules[e]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getSemanticHTML",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,i=C(B(e,t),2);return e=i[0],t=i[1],this.editor.getHTML(e,t)}},{key:"getText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-e,i=C(B(e,t),2);return e=i[0],t=i[1],this.editor.getText(e,t)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(t,i,n){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.sources.API;return D.call(this,(function(){return o.editor.insertEmbed(t,i,n)}),r,t)}},{key:"insertText",value:function(e,t,i,n,o){var r,s=this,a=C(B(e,0,i,n,o),4);return e=a[0],r=a[2],o=a[3],D.call(this,(function(){return s.editor.insertText(e,t,r)}),o,e,t.length)}},{key:"isEnabled",value:function(){return this.scroll.isEnabled()}},{key:"off",value:function(){var e;return(e=this.emitter).off.apply(e,arguments)}},{key:"on",value:function(){var e;return(e=this.emitter).on.apply(e,arguments)}},{key:"once",value:function(){var e;return(e=this.emitter).once.apply(e,arguments)}},{key:"removeFormat",value:function(e,t,i){var n=this,o=C(B(e,t,i),4);return e=o[0],t=o[1],i=o[3],D.call(this,(function(){return n.editor.removeFormat(e,t)}),i,e)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.Z.sources.API;return D.call(this,(function(){t=new(o())(t);var n=i.getLength(),r=i.editor.deleteText(0,n),s=i.editor.applyDelta(t),a=i.editor.deleteText(i.getLength()-1,1);return i.emitter.emit(e.events.CONTENT_SETTED),r.compose(s).compose(a)}),n)}},{key:"setSelection",value:function(t,i,n){if(null==t)this.selection.setRange(null,i||e.sources.API);else{var o=C(B(t,i,n),4);t=o[0],i=o[1],n=o[3],this.selection.setRange(new p.e(Math.max(0,t),i),n),n!==h.Z.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.Z.sources.API,i=(new(o())).insert(e);return this.setContents(i,t)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h.Z.sources.USER,t=this.scroll.update(e);return this.selection.update(e),t}},{key:"updateContents",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.Z.sources.API;return D.call(this,(function(){return e=new(o())(e),t.editor.applyDelta(e,i)}),i,!0)}},{key:"applyCompositionChanges",value:function(){this.composition.handleCompositionEnd({})}}],n=[{key:"debug",value:function(e){!0===e&&(e="log"),_.Z.level(e)}},{key:"find",value:function(e){return f.Z.get(e)||E.find(e)}},{key:"import",value:function(e){return null==this.imports[e]&&I.error("Cannot import ".concat(e,". Are you sure it was registered?")),this.imports[e]}},{key:"register",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof e){var o=e.attrName||e.blotName;"string"==typeof o?this.register("formats/".concat(o),e,t):Object.keys(e).forEach((function(n){i.register(n,e[n],t)}))}else null==this.imports[e]||n||I.warn("Overwriting ".concat(e," with"),t),this.imports[e]=t,0!==e.indexOf("blots/")&&0!==e.indexOf("formats/")||"abstract"===t.blotName||E.register(t),"function"==typeof t.register&&t.register(E)}}],i&&x(t.prototype,i),n&&x(t,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e,t){if((t=l()({container:e,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0}},t)).theme&&t.theme!==O.DEFAULTS.theme){if(t.theme=O.import("themes/".concat(t.theme)),null==t.theme)throw new Error("Invalid theme ".concat(t.theme,". Did you register it?"))}else t.theme=m.Z;var i=s()(t.theme.DEFAULTS);[i,t].forEach((function(e){e.modules=e.modules||{},Object.keys(e.modules).forEach((function(t){!0===e.modules[t]&&(e.modules[t]={})}))}));var n=Object.keys(i.modules).concat(Object.keys(t.modules)).reduce((function(e,t){var i=O.import("modules/".concat(t));return null==i?I.error("Cannot load ".concat(t," module. Are you sure you registered it?")):e[t]=i.DEFAULTS||{},e}),{});return null!=t.modules&&t.modules.toolbar&&t.modules.toolbar.constructor!==Object&&(t.modules.toolbar={container:t.modules.toolbar}),t=l()({},O.DEFAULTS,{modules:n},i,t),["bounds","container","scrollingContainer"].forEach((function(e){"string"==typeof t[e]&&(t[e]=document.querySelector(t[e]))})),t.modules=Object.keys(t.modules).reduce((function(e,i){return t.modules[i]&&(e[i]=t.modules[i]),e}),{}),t}function D(e,t,i,n){if(!this.isEnabled()&&t===h.Z.sources.USER&&!this.allowReadOnlyEdits)return new(o());var r=null==i?null:this.getSelection(),s=this.editor.delta,a=e();if(null!=r&&(!0===i&&(i=r.index),null==n?r=A(r,a,t):0!==n&&(r=A(r,i,n,t)),this.setSelection(r,h.Z.sources.SILENT)),a.length()>0){var l,c,d=[h.Z.events.TEXT_CHANGE,a,s,t];(l=this.emitter).emit.apply(l,[h.Z.events.EDITOR_CHANGE].concat(d)),t!==h.Z.sources.SILENT&&(c=this.emitter).emit.apply(c,d)}return a}function B(e,t,i,n,o){var r={};return"number"==typeof e.index&&"number"==typeof e.length?"number"!=typeof t?(o=n,n=i,i=t,t=e.length,e=e.index):(t=e.length,e=e.index):"number"!=typeof t&&(o=n,n=i,i=t,t=0),"object"===b(i)?(r=i,o=n):"string"==typeof i&&(null!=n?r[i]=n:o=i),[e,t,r,o=o||h.Z.sources.API]}function A(e,t,i,n){if(null==e)return null;var r,s;if(t instanceof o()){var a=C([e.index,e.index+e.length].map((function(e){return t.transformPosition(e,n!==h.Z.sources.USER)})),2);r=a[0],s=a[1]}else{var l=C([e.index,e.index+e.length].map((function(e){return e<t||e===t&&n===h.Z.sources.USER?e:i>=0?e+i:Math.max(t,e+i)})),2);r=l[0],s=l[1]}return new p.e(r,s-r)}O.DEFAULTS={bounds:null,modules:{},placeholder:"",readOnly:!1,registry:E,scrollingContainer:null,theme:"default"},O.events=h.Z.events,O.sources=h.Z.sources,O.version="1.7.0",O.MS_LIST_DATA_KEY="mso-list-data",O.replaceStyleAttribute=function(e){return e.replace(/(?:(<[a-z0-9]+\s*))([\s\S]*?)(>|\/>)/gi,(function(e,t,i,n){return t+i.replace(/style\s*=/gi,"".concat(k,"="))+n}))},O.restoreStyleAttribute=function(e){e.querySelectorAll("[".concat(k,"]")).forEach((function(e){var t=e.getAttribute(k);e.style=t,e.setAttribute(O.MS_LIST_DATA_KEY,t),e.removeAttribute(k)}))},O.imports={delta:o(),parchment:c,"core/module":u.Z,"core/theme":m.Z}},7800:(e,t,i)=>{"use strict";i.d(t,{Z:()=>y,e:()=>b});var n=i(1233),o=i(8805),r=i.n(o),s=i(2722),a=i.n(s),l=i(2069);function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function d(e){return function(e){if(Array.isArray(e))return p(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return p(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==c(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==c(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===c(o)?o:String(o)),n)}var o}function _(e,t,i){return t&&f(e.prototype,t),i&&f(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var g=(0,i(3122).Z)("quill:selection");function v(e){return e<0?0:e}var b=_((function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;m(this,e),this.index=t,this.length=i})),y=function(){function e(t,i,n){var o=this;m(this,e),this.emitter=i,this.scroll=t,this.composition=n,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new b(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){o.mouseDown||o.composition.isCompositionInProgress()||setTimeout(o.update.bind(o,l.Z.sources.USER),1)})),this.emitter.on(l.Z.events.SCROLL_BEFORE_UPDATE,(function(){if(o.hasFocus()){var e=o.getNativeRange();null!=e&&e.start.node!==o.cursor.textNode&&o.emitter.once(l.Z.events.SCROLL_UPDATE,(function(){try{o.root.contains(e.start.node)&&o.root.contains(e.end.node)&&o.setNativeRange(e.start.node,e.start.offset,e.end.node,e.end.offset),o.update(l.Z.sources.SILENT)}catch(e){}}))}})),this.emitter.on(l.Z.events.SCROLL_OPTIMIZE,(function(e,t){if(t.range){var i=t.range,n=i.startNode,r=i.startOffset,s=i.endNode,a=i.endOffset;o.setNativeRange(n,r,s,a),o.update(l.Z.sources.SILENT)}})),this.update(l.Z.sources.SILENT)}return _(e,[{key:"handleDragging",value:function(){var e=this;this.emitter.listenDOM("mousedown",document.body,(function(){e.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){e.mouseDown=!1,e.update(l.Z.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(e,t){this.scroll.update();var i=this.getNativeRange();if(null!=i&&i.native.collapsed&&!this.scroll.query(e,n.Scope.BLOCK)){if(i.start.node!==this.cursor.textNode){var o=this.scroll.find(i.start.node,!1);if(null==o)return;if(o instanceof n.LeafBlot){var r=o.split(i.start.offset);o.parent.insertBefore(this.cursor,r)}else o.insertBefore(this.cursor,i.start.node);this.cursor.attach()}this.cursor.format(e,t),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}},{key:"getBounds",value:function(e){var t,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scroll.length();e=Math.min(e,n-1),i=Math.min(e+i,n-1)-e;var o=h(this.scroll.leaf(e),2),r=o[0],s=o[1];if(null==r)return null;var a=h(this.getPositionData(r,s,!0),2);t=a[0],s=a[1];var l=document.createRange();if(i>0){l.setStart(t,s);var c=h(this.scroll.leaf(e+i),2);if(r=c[0],s=c[1],null==r)return null;var d=h(this.getPositionData(r,s,!0),2);return t=d[0],s=d[1],l.setEnd(t,s),l.getBoundingClientRect()}var u,p="left";if(t instanceof Text){if(s<t.data.length)l.setStart(t,s),l.setEnd(t,s+1);else{var f=v(s-1);l.setStart(t,f),l.setEnd(t,s),p="right"}u=l.getBoundingClientRect()}else u=r.domNode.getBoundingClientRect(),s>0&&(p="right");return{bottom:u.top+u.height,height:u.height,left:u[p],right:u[p],top:u.top,width:0}}},{key:"getNativeRange",value:function(){var e,t,i=this.root.getRootNode(),n=null!==(e=null===(t=i.getSelection)||void 0===t?void 0:t.call(i))&&void 0!==e?e:document.getSelection();if(null==n||n.rangeCount<=0)return null;var o=n.getRangeAt(0);if(null==o)return null;var r=this.normalizeNative(o);return g.info("getNativeRange",r),r}},{key:"getRange",value:function(){var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){var e=this.root.getRootNode();return e.activeElement===this.root||C(this.root,e.activeElement)}},{key:"normalizedToRange",value:function(e){var t=this,i=[[e.start.node,e.start.offset]];e.native.collapsed||i.push([e.end.node,e.end.offset]);var o=i.map((function(e){var i=h(e,2),o=i[0],r=i[1],s=t.scroll.find(o,!0),a=s.offset(t.scroll);return 0===r?a:s instanceof n.LeafBlot?a+s.index(o,r):a+s.length()})),r=Math.min(Math.max.apply(Math,d(o)),this.scroll.length()-1),s=Math.min.apply(Math,[r].concat(d(o)));return new b(s,r-s)}},{key:"normalizeNative",value:function(e){if(!C(this.root,e.startContainer)||!e.collapsed&&!C(this.root,e.endContainer))return null;var t={start:{node:e.startContainer,offset:e.startOffset},end:{node:e.endContainer,offset:e.endOffset},native:e};return[t.start,t.end].forEach((function(e){for(var t=e.node,i=e.offset;!(t instanceof Text)&&t.childNodes.length>0;)if(t.childNodes.length>i)t=t.childNodes[i],i=0;else{if(t.childNodes.length!==i)break;i=(t=t.lastChild)instanceof Text?t.data.length:t.childNodes.length>0?t.childNodes.length:t.childNodes.length+1}e.node=t,e.offset=i})),t}},{key:"rangeToNative",value:function(e){var t=this,i=e.collapsed?[e.index]:[e.index,e.index+e.length],n=[],o=this.scroll.length();return i.forEach((function(e,i){e=Math.min(o-1,e);var r=h(t.scroll.leaf(e),2),s=r[0],a=r[1],l=h(t.getPositionData(s,a,0!==i),2),c=l[0],d=l[1];n.push(c,d)})),n.length<2?n.concat(n):n}},{key:"getPositionData",value:function(e,t,i){return e instanceof n.LeafBlot?e.position(t,i):[e.domNode,t]}},{key:"scrollIntoView",value:function(e){var t=this.lastRange;if(null!=t){var i=this.getBounds(t.index,t.length);if(null!=i){var n=this.scroll.length()-1,o=h(this.scroll.line(Math.min(t.index,n)),1)[0],r=o;if(t.length>0&&(r=h(this.scroll.line(Math.min(t.index+t.length,n)),1)[0]),null!=o&&null!=r){var s=e.getBoundingClientRect();i.top<s.top?e.scrollTop-=s.top-i.top:i.bottom>s.bottom&&(e.scrollTop+=i.bottom-s.bottom)}}}}},{key:"setNativeRange",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(g.info("setNativeRange",e,t,i,n),null==e||null!=this.root.parentNode&&null!=e.parentNode&&null!=i.parentNode){var r=document.getSelection();if(null!=r)if(null!=e){this.hasFocus()||this.root.focus();var s=(this.getNativeRange()||{}).native;if(null==s||o||e!==s.startContainer||t!==s.startOffset||i!==s.endContainer||n!==s.endOffset){"BR"===e.tagName&&(t=Array.from(e.parentNode.childNodes).indexOf(e),e=e.parentNode),"BR"===i.tagName&&(n=Array.from(i.parentNode.childNodes).indexOf(i),i=i.parentNode);var a=document.createRange();t=v(t),n=v(n),a.setStart(e,t),a.setEnd(i,n),r.removeAllRanges(),r.addRange(a)}}else r.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.Z.sources.API;if("string"==typeof t&&(i=t,t=!1),g.info("setRange",e),null!=e){var n=this.rangeToNative(e);this.setNativeRange.apply(this,d(n).concat([t]))}else this.setNativeRange(null);this.update(i)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:l.Z.sources.USER,t=this.lastRange,i=h(this.getRange(),2),n=i[0],o=i[1];if(this.lastRange=n,this.lastNative=o,null!=this.lastRange&&(this.savedRange=this.lastRange),!a()(t,this.lastRange)){var s;if(!this.composition.isCompositionInProgress()&&null!=o&&o.native.collapsed&&o.start.node!==this.cursor.textNode){var c=this.cursor.restore();c&&this.setNativeRange(c.startNode,c.startOffset,c.endNode,c.endOffset)}var d,u=[l.Z.events.SELECTION_CHANGE,r()(this.lastRange),r()(t),e];(s=this.emitter).emit.apply(s,[l.Z.events.EDITOR_CHANGE].concat(u)),e!==l.Z.sources.SILENT&&(d=this.emitter).emit.apply(d,u)}}}]),e}();function C(e,t){try{t.parentNode}catch(e){return!1}return t instanceof Text&&(t=t.parentNode),e.contains(t)}},1690:(e,t,i)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}var r}i.d(t,{Z:()=>s});var r=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.quill=t,this.options=i,this.modules={}}var t,i;return t=e,(i=[{key:"init",value:function(){var e=this;Object.keys(this.options.modules).forEach((function(t){null==e.modules[t]&&e.addModule(t)}))}},{key:"addModule",value:function(e){var t=this.quill.constructor.import("modules/".concat(e));return this.modules[e]=new t(this.quill,this.options.modules[e]||{}),this.modules[e]}}])&&o(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();r.DEFAULTS={modules:{}},r.themes={default:r};const s=r},715:(e,t,i)=>{"use strict";i.d(t,{HE:()=>a,dk:()=>s,if:()=>r});var n=i(1233),o={scope:n.Scope.BLOCK,whitelist:["right","center","justify"]},r=new n.Attributor("align","align",o),s=new n.ClassAttributor("align","ql-align",o),a=new n.StyleAttributor("align","text-align",o)},7898:(e,t,i)=>{"use strict";i.d(t,{Y:()=>r,w:()=>s});var n=i(1233),o=i(6039),r=new n.ClassAttributor("background","ql-bg",{scope:n.Scope.INLINE}),s=new o.OO("background","background-color",{scope:n.Scope.INLINE})},3991:(e,t,i)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}var r}function r(){return r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},r.apply(this,arguments)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}i.d(t,{Z:()=>c});var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(u,e);var t,i,l,c,d,h=(c=u,d=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(c);if(d){var i=a(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function u(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),h.apply(this,arguments)}return t=u,l=[{key:"create",value:function(){return r(a(u),"create",this).call(this)}},{key:"formats",value:function(){return!0}}],(i=[{key:"optimize",value:function(e){r(a(u.prototype),"optimize",this).call(this,e),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}])&&o(t.prototype,i),l&&o(t,l),Object.defineProperty(t,"prototype",{writable:!1}),u}(i(6603).Z);l.blotName="bold",l.tagName=["STRONG","B"];const c=l},7309:(e,t,i)=>{"use strict";i.d(t,{EK:()=>C,ZP:()=>y,se:()=>b});var n=i(6446),o=i(4122),r=i(3657),s=i(6603),a=i(8222),l=i(3553),c=i(281);function d(e){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(e)}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==d(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==d(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===d(o)?o:String(o)),n)}var o}function p(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function f(){return f="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=v(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},f.apply(this,arguments)}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&m(e,t)}function m(e,t){return m=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},m(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=v(e);if(t){var o=v(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===d(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function v(e){return v=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},v(e)}var b=function(e){_(i,e);var t=g(i);function i(){return h(this,i),t.apply(this,arguments)}return p(i,[{key:"code",value:function(e,t){var i=this.children.map((function(e){return e.length()<=1?"":e.domNode.textContent})).join("\n").slice(e,e+t);return(0,a.b)(i)}},{key:"html",value:function(e,t){return"<pre>\n".concat(this.code(e,t),"\n</pre>")}}],[{key:"create",value:function(e){var t=f(v(i),"create",this).call(this,e);return t.setAttribute("spellcheck",!1),t}}]),i}(l.Z),y=function(e){_(i,e);var t=g(i);function i(){return h(this,i),t.apply(this,arguments)}return p(i,null,[{key:"register",value:function(){c.ZP.register(b)}}]),i}(n.ZP),C=function(e){_(i,e);var t=g(i);function i(){return h(this,i),t.apply(this,arguments)}return p(i)}(s.Z);C.blotName="code",C.tagName="CODE",y.blotName="code-block",y.className="ql-code-block",y.tagName="DIV",b.blotName="code-block-container",b.className="ql-code-block-container",b.tagName="DIV",b.allowedChildren=[y],y.allowedChildren=[a.Z,o.Z,r.Z],y.requiredContainer=b,y.TAB="  "},6039:(e,t,i)=>{"use strict";i.d(t,{HQ:()=>h,Hn:()=>d,OO:()=>c});var n=i(1233);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==o(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===o(r)?r:String(r)),n)}var r}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},s.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var c=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(h,e);var t,i,n,c,d=(n=h,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(n);if(c){var i=l(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function h(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),d.apply(this,arguments)}return t=h,(i=[{key:"value",value:function(e){var t=s(l(h.prototype),"value",this).call(this,e);if(0!==t.indexOf("rgb("))return t;var i=(t=t.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map((function(e){return"00".concat(parseInt(e,10).toString(16)).slice(-2)})).join("");return"#".concat(i)}}])&&r(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),h}(n.StyleAttributor),d=new n.ClassAttributor("color","ql-color",{scope:n.Scope.INLINE}),h=new c("color","color",{scope:n.Scope.INLINE})},4048:(e,t,i)=>{"use strict";i.d(t,{H8:()=>a,IF:()=>r,hY:()=>s});var n=i(1233),o={scope:n.Scope.BLOCK,whitelist:["rtl"]},r=new n.Attributor("direction","dir",o),s=new n.ClassAttributor("direction","ql-direction",o),a=new n.StyleAttributor("direction","direction",o)},5832:(e,t,i)=>{"use strict";i.d(t,{H:()=>u,_:()=>d});var n=i(1233);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==o(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===o(r)?r:String(r)),n)}var r}function s(){return s="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},s.apply(this,arguments)}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var c={scope:n.Scope.INLINE,whitelist:["serif","monospace"]},d=new n.ClassAttributor("font","ql-font",c),h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(h,e);var t,i,n,c,d=(n=h,c=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=l(n);if(c){var i=l(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function h(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),d.apply(this,arguments)}return t=h,(i=[{key:"value",value:function(e){return s(l(h.prototype),"value",this).call(this,e).replace(/["']/g,"")}}])&&r(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),h}(n.StyleAttributor),u=new h("font","font-family",c)},7256:(e,t,i)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,t){for(var i=0;i<t.length;i++){var o=t[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,(void 0,r=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var o=i.call(e,"string");if("object"!==n(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(o.key),"symbol"===n(r)?r:String(r)),o)}var r}function r(){return r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=a(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},r.apply(this,arguments)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function a(e){return a=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},a(e)}i.d(t,{N:()=>c,Z:()=>l});var l=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}(p,e);var t,i,l,d,h,u=(d=p,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=a(d);if(h){var i=a(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function p(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),u.apply(this,arguments)}return t=p,l=[{key:"create",value:function(e){var t=r(a(p),"create",this).call(this,e);return t.setAttribute("href",this.sanitize(e)),t.setAttribute("rel","noopener noreferrer"),t.setAttribute("target","_blank"),t}},{key:"formats",value:function(e){return e.getAttribute("href")}},{key:"sanitize",value:function(e){return c(e,this.PROTOCOL_WHITELIST)?e:this.SANITIZED_URL}}],(i=[{key:"format",value:function(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("href",this.constructor.sanitize(t)):r(a(p.prototype),"format",this).call(this,e,t)}}])&&o(t.prototype,i),l&&o(t,l),Object.defineProperty(t,"prototype",{writable:!1}),p}(i(6603).Z);function c(e,t){var i=document.createElement("a");i.href=e;var n=i.href.slice(0,i.href.indexOf(":"));return t.indexOf(n)>-1}l.blotName="link",l.tagName="A",l.SANITIZED_URL="about:blank",l.PROTOCOL_WHITELIST=["http","https","mailto","tel"]},1629:(e,t,i)=>{"use strict";i.d(t,{Z:()=>r,m:()=>o});var n=i(1233),o=new n.ClassAttributor("size","ql-size",{scope:n.Scope.INLINE,whitelist:["small","large","huge"]}),r=new n.StyleAttributor("size","font-size",{scope:n.Scope.INLINE,whitelist:["10px","18px","32px"]})},1342:(e,t,i)=>{"use strict";i.d(t,{Du:()=>d,h6:()=>h,kk:()=>c,yA:()=>l});var n=i(6062),o=i(1801),r=i(8252);function s(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var l=r.F1.map((function(e){return(0,n.Z)(r.Pw,e)})),c=r.Mu.map((function(e){return(0,o.Z)(r.Pw,e)})),d=c.reduce((function(e,t){return e[t.attrName]=t,e}),{}),h=[].concat(s(l),s(c)).reduce((function(e,t){return e[t.keyName]=t,e}),{})},8252:(e,t,i)=>{"use strict";i.d(t,{F1:()=>o,Mu:()=>r,Pw:()=>n,fU:()=>s});var n={name:"cell",allowedTags:["TH","TD","TR"]},o=["height","width"],r=["height","width","vertical-align","text-align","background-color","border","border-style","border-width","border-color","padding","padding-top","padding-right","padding-bottom","padding-left"],s=new Set([].concat(o,r))},6062:(e,t,i)=>{"use strict";i.d(t,{Z:()=>a});var n=i(1674),o=i(2141),r=i(3398),s=["name"];function a(e,t){var i=e.name,a=function(e,t){if(null==e)return{};var i,n,o=function(e,t){if(null==e)return{};var i,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}(e,s),l="".concat(i).concat((0,o.Z)(t)),c="".concat(r.WT.attribute).concat(i,"_").concat(t);return new n.Z(l,c,a)}},1801:(e,t,i)=>{"use strict";i.d(t,{Z:()=>l});var n=i(4569),o=i(2141),r=i(3398),s=["name","formatName"];function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function l(e,t){var i,l,c=e.name,d=e.formatName,h=function(e,t){if(null==e)return{};var i,n,o=function(e,t){if(null==e)return{};var i,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||(o[i]=e[i]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)i=r[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(o[i]=e[i])}return o}(e,s),u=(i=t.split("-"),l=2,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(i,l)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}(i,l)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=u[0],f=u[1],_="".concat(c).concat((0,o.Z)(null!=d?d:p)).concat(f?(0,o.Z)(f):""),m="".concat(r.WT.style).concat(c,"_").concat(t);return new n.Z(_,m,h)}},319:(e,t,i)=>{"use strict";i.d(t,{Qu:()=>l,VT:()=>c,Zt:()=>h,li:()=>d});var n=i(6062),o=i(1801),r=i(19);function s(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var l=r.N2.map((function(e){return(0,n.Z)(r.Sp,e)})),c=r.GX.map((function(e){return(0,o.Z)(r.Sp,e)})),d=c.reduce((function(e,t){return e[t.attrName]=t,e}),{}),h=[].concat(s(l),s(c)).reduce((function(e,t){return e[t.keyName]=t,e}),{})},19:(e,t,i)=>{"use strict";i.d(t,{GX:()=>r,N2:()=>o,Sp:()=>n,bc:()=>s});var n={name:"table",allowedTags:["TABLE"]},o=["height","width"],r=["height","width","text-align","background-color","border","border-style","border-width","border-color"],s=new Set([].concat(o,r))},8536:(e,t,i)=>{"use strict";function n(){return Math.random().toString(36).slice(2,6)}i.d(t,{Z:()=>n})},1969:(e,t,i)=>{"use strict";i.d(t,{KA:()=>P,Lv:()=>V,RM:()=>R,SC:()=>A,iD:()=>E,pj:()=>T,xD:()=>$,xJ:()=>N,xs:()=>D,zW:()=>k});var n=i(6446),o=i(4122),r=i(3553),s=i(5874),a=i(1342),l=i(319),c=i(8536),d=i(2795);function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return f(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==h(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==h(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===h(o)?o:String(o)),n)}var o}function g(e,t,i){return t&&m(e.prototype,t),i&&m(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function v(){return v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=w(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},v.apply(this,arguments)}function b(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&y(e,t)}function y(e,t){return y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},y(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=w(e);if(t){var o=w(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===h(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var x=["row","cell"],S="data-table-";function I(e,t,i){e.forEachAt(t,i,(function(e,t,i){e.deleteAt(t,i)}))}var k=function(e){b(i,e);var t=C(i);function i(){return _(this,i),t.apply(this,arguments)}return g(i,[{key:"optimize",value:function(){var e,t=this.domNode.getAttribute("".concat(S,"row"));if(this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)){var n=this.domNode,o={row:t};Object.keys(a.Du).forEach((function(e){var t=n.dataset[e.toLowerCase()];t&&(o[e]=t)})),this.wrap(this.statics.requiredContainer.blotName,o)}for(var r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];(e=v(w(i.prototype),"optimize",this)).call.apply(e,[this].concat(s))}},{key:"format",value:function(e,t){"tableCellLine"===e&&null===t&&(t=this.formats().tableCellLine);var n=x.indexOf(e)>-1;if(n||l.li[e]||a.Du[e]){var o,r,s="data-".concat(n?"table-":"").concat(e.toLowerCase());(0,d.Z)(this.domNode,s,t),a.Du[e]&&(null===(o=this.cell())||void 0===o||o.format(e,t)),l.li[e]&&(null===(r=this.cell())||void 0===r||null===(r=r.table())||void 0===r||r.format(e,t))}else v(w(i.prototype),"format",this).call(this,e,t)}},{key:"cell",value:function(){return"row"in this.parent?this.parent:null}}],[{key:"create",value:function(e){var t=v(w(i),"create",this).call(this,e);return x.forEach((function(i){var n,o="row"===i?V:F;t.setAttribute("".concat(S).concat(i),null!==(n=null==e?void 0:e[i])&&void 0!==n?n:o())})),t}},{key:"formats",value:function(e){return x.reduce((function(t,i){var n="".concat(S).concat(i);return e.hasAttribute(n)&&(t[i]=e.getAttribute(n)||void 0),t}),{})}}]),i}(n.ZP);k.blotName="tableCellLine",k.className="ql-table-cell-line",k.tagName="P";var E=function(e){b(i,e);var t=C(i);function i(){return _(this,i),t.apply(this,arguments)}return g(i)}(k);E.blotName="tableHeaderCellLine",E.className="ql-table-header-cell-line";var O=function(e){b(i,e);var t=C(i);function i(){return _(this,i),t.apply(this,arguments)}return g(i,[{key:"format",value:function(e,t){var i;null===(i=a.Du[e])||void 0===i||i.add(this.domNode,t)}},{key:"checkMerge",value:function(){if(v(w(i.prototype),"checkMerge",this).call(this)&&null!=this.next.children.head){var e=this.children.head.formats()[this.children.head.statics.blotName],t=this.children.tail.formats()[this.children.tail.statics.blotName],n=this.next.children.head.formats()[this.next.children.head.statics.blotName],o=this.next.children.tail.formats()[this.next.children.tail.statics.blotName];return e.cell===t.cell&&e.cell===n.cell&&e.cell===o.cell}return!1}},{key:"formats",value:function(){return i.cellFormats(this.domNode)}},{key:"cellOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"row",value:function(){return"table"in this.parent?this.parent:null}},{key:"rowOffset",value:function(){return this.row()?this.row().rowOffset():-1}},{key:"table",value:function(){var e;return null===(e=this.row())||void 0===e?void 0:e.table()}},{key:"optimize",value:function(){var e,t,n=null!==(e=this.domNode.getAttribute("".concat(S,"row")))&&void 0!==e?e:this.domNode.getAttribute("".concat(S,"header-row"));!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName,{row:n});for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];(t=v(w(i.prototype),"optimize",this)).call.apply(t,[this].concat(r))}},{key:"deleteAt",value:function(e,t){I(this.children,e,t)}}],[{key:"create",value:function(e){var t=v(w(i),"create",this).call(this,e);return e&&Object.keys(e).forEach((function(i){var n;null===(n=a.Du[i])||void 0===n||n.add(t,e[i])})),t}},{key:"cellFormats",value:function(e){var t,i={};return(e.hasAttribute("".concat(S,"row"))||e.hasAttribute("".concat(S,"header-row")))&&(i.row=null!==(t=e.getAttribute("".concat(S,"row")))&&void 0!==t?t:e.getAttribute("".concat(S,"header-row"))),Object.keys(a.Du).forEach((function(t){var n,o=null===(n=e.firstElementChild)||void 0===n?void 0:n.dataset[t.toLowerCase()];o&&(i[t]=o)})),i}}]),i}(r.Z);O.tagName=["TD","TH"];var T=function(e){b(i,e);var t=C(i);function i(){return _(this,i),t.apply(this,arguments)}return g(i,[{key:"format",value:function(e,t){"row"===e?(this.domNode.setAttribute("".concat(S).concat(e),t),this.children.forEach((function(i){i.format(e,t)}))):v(w(i.prototype),"format",this).call(this,e,t)}}],[{key:"create",value:function(e){var t=v(w(i),"create",this).call(this,e),n="".concat(S,"row");return null!=e&&e.row&&t.setAttribute(n,e.row),t}}]),i}(O);T.blotName="tableCell",T.className="ql-table-data-cell",T.dataAttribute="".concat(S,"row"),T.defaultChild=k;var D=function(e){b(i,e);var t=C(i);function i(){return _(this,i),t.apply(this,arguments)}return g(i,[{key:"format",value:function(e,t){"row"===e?(this.domNode.setAttribute("".concat(S).concat(e),t),this.children.forEach((function(i){i.format(e,t)}))):v(w(i.prototype),"format",this).call(this,e,t)}}],[{key:"create",value:function(e){var t=v(w(i),"create",this).call(this,e),n="".concat(S,"header-row");return e&&e.row&&t.setAttribute(n,e.row),t}}]),i}(O);D.tagName=["TH","TD"],D.className="ql-table-header-cell",D.blotName="tableHeaderCell",D.dataAttribute="".concat(S,"header-row"),D.defaultChild=E;var B=function(e){b(i,e);var t=C(i);function i(){return _(this,i),t.apply(this,arguments)}return g(i,[{key:"checkMerge",value:function(){if(v(w(i.prototype),"checkMerge",this).call(this)&&(0,s.Z)(this.next.children.head)){var e="row",t=this.children.head.formats(),n=this.children.tail.formats(),o=this.next.children.head.formats(),r=this.next.children.tail.formats();return t[e]===n[e]&&t[e]===o[e]&&t[e]===r[e]}return!1}},{key:"optimize",value:function(){for(var e,t=this,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];(e=v(w(i.prototype),"optimize",this)).call.apply(e,[this].concat(o));var a=this.childFormatName;this.children.forEach((function(e){if((0,s.Z)(e.next)){var i=e.formats(),n=e.next.formats();if(i[a]!==n[a]){var o=t.splitAfter(e);o&&o.optimize(),t.prev&&t.prev.optimize()}}}))}},{key:"rowOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"table",value:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.parent}},{key:"formats",value:function(){var e={},t="".concat(S,"row");return this.domNode.hasAttribute(t)&&(e[t]=this.domNode.getAttribute(t)),e}}],[{key:"create",value:function(e){var t=v(w(i),"create",this).call(this,e);return null!=e&&e.row&&t.setAttribute("".concat(S,"row"),e.row),t}}]),i}(r.Z);B.tagName="TR";var A=function(e){b(i,e);var t=C(i);function i(e,n){var o;return _(this,i),(o=t.call(this,e,n)).childFormatName="table",o}return g(i,[{key:"deleteAt",value:function(e,t){I(this.children,e,t)}}]),i}(B);A.blotName="tableRow";var P=function(e){b(i,e);var t=C(i);function i(e,n){var o;return _(this,i),(o=t.call(this,e,n)).childFormatName="tableHeaderCell",o}return g(i)}(B);P.blotName="tableHeaderRow";var M=function(e){b(i,e);var t=C(i);function i(){return _(this,i),t.apply(this,arguments)}return g(i,[{key:"optimize",value:function(){var e;if(this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)){var t,n=(null===(t=this.children.head.children.head.children)||void 0===t||null===(t=t.head)||void 0===t?void 0:t.domNode)||null,o={};n&&Object.keys(l.li).forEach((function(e){var t=n.dataset[e.toLowerCase()];t&&(o[e]=t)})),this.wrap(this.statics.requiredContainer.blotName,o)}for(var r=arguments.length,s=new Array(r),a=0;a<r;a++)s[a]=arguments[a];(e=v(w(i.prototype),"optimize",this)).call.apply(e,[this].concat(s))}}]),i}(r.Z),R=function(e){b(i,e);var t=C(i);function i(){return _(this,i),t.apply(this,arguments)}return g(i)}(M);R.blotName="tableBody",R.tagName="TBODY";var $=function(e){b(i,e);var t=C(i);function i(){return _(this,i),t.apply(this,arguments)}return g(i)}(M);$.blotName="tableHeader",$.tagName="THEAD";var N=function(e){b(i,e);var t=C(i);function i(){return _(this,i),t.apply(this,arguments)}return g(i,[{key:"balanceCells",value:function(){var e=this.descendants(P),t=this.descendants(A),i=this.getMaxTableColCount(e,t);this.balanceRows(i,e,D),this.balanceRows(i,t,T)}},{key:"getMaxTableColCount",value:function(e,t){return Math.max(this.getMaxRowColCount(e),this.getMaxRowColCount(t))}},{key:"getMaxRowColCount",value:function(e){return Math.max.apply(Math,function(e){if(Array.isArray(e))return f(e)}(t=e.map((function(e){return e.children.length})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||p(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var t}},{key:"balanceRows",value:function(e,t,i){var n=this;t.forEach((function(t){new Array(e-t.children.length).fill(0).forEach((function(){var e;(0,s.Z)(t.children.head)&&(e=i.cellFormats(t.children.head.domNode));var o=n.scroll.create(i.blotName,e),r=n.scroll.create(i.allowedChildren[0].blotName,e);o.appendChild(r),t.appendChild(o),o.optimize()}))}))}},{key:"cells",value:function(e){return this.rows().map((function(t){return t.children.at(e)}))}},{key:"deleteColumn",value:function(e){var t=this;[$,R].forEach((function(i){var n=u(t.descendants(i),1)[0];(0,s.Z)(n)&&(0,s.Z)(n.children.head)&&n.children.forEach((function(t){var i=t.children.at(e);(0,s.Z)(i)&&i.remove()}))}))}},{key:"insertColumn",value:function(e){var t=this;[$,R].forEach((function(i){var n=u(t.descendants(i),1)[0];if((0,s.Z)(n)&&(0,s.Z)(n.children.head)){var r=i===$?D:T,a=i===$?E:k;n.children.forEach((function(i){var n=i.children.at(e),s=a.formats(i.children.head.children.head.domNode),l=t.scroll.create(r.blotName,{row:s.row}),c=t.scroll.create(a.blotName,{row:s.row}),d=t.scroll.create(o.Z.blotName);c.appendChild(d),l.appendChild(c),i.insertBefore(l,n)}))}}))}},{key:"insertRow",value:function(e){var t=this,i=u(this.descendants(R),1)[0];if((0,s.Z)(i)&&(0,s.Z)(i.children.head)){var n=V(),r=this.scroll.create(A.blotName,{row:n});i.children.head.children.forEach((function(){var e=t.scroll.create(T.blotName,{row:n}),i=t.scroll.create(k.blotName,{row:n}),s=t.scroll.create(o.Z.blotName);i.appendChild(s),e.appendChild(i),r.appendChild(e)}));var a=i.children.at(e);i.insertBefore(r,a)}}},{key:"insertHeaderRow",value:function(){var e=this,t=u(this.descendants($),1)[0],i=u(this.descendants(R),1)[0];if(!(0,s.Z)(t)&&(0,s.Z)(i)&&(0,s.Z)(i.children.head)){var n=V(),r=this.scroll.create($.blotName),a=this.scroll.create(P.blotName),l=this.children.at(0);r.appendChild(a),i.children.head.children.forEach((function(){var t=e.scroll.create(D.blotName,{row:n}),i=e.scroll.create(E.blotName,{row:n}),r=e.scroll.create(o.Z.blotName);i.appendChild(r),t.appendChild(i),a.appendChild(t),t.optimize()})),this.insertBefore(r,l)}}},{key:"rows",value:function(){var e=this.children.head;return(0,s.Z)(e)?e.children.map((function(e){return e})):[]}},{key:"formats",value:function(){var e={},t=this.cells()[0].domNode.firstElementChild;return Object.keys(l.li).forEach((function(i){var n=null==t?void 0:t.dataset[i.toLowerCase()];n&&(e[i]=n)})),e}},{key:"format",value:function(e,t){var i=l.li[e];if(i){var n="data-".concat(e.toLowerCase());this.cells().forEach((function(e){(0,d.Z)(e.children.head.domNode,n,t)})),i.add(this.domNode,t)}}}],[{key:"create",value:function(e){var t=v(w(i),"create",this).call(this,e);return e&&Object.keys(e).forEach((function(i){var n;null===(n=l.li[i])||void 0===n||n.add(t,e[i])})),t}}]),i}(r.Z);function V(){return"row-".concat((0,c.Z)())}function F(){return"cell-".concat((0,c.Z)())}N.blotName="tableContainer",N.tagName="TABLE",N.allowedChildren=[$,R],R.requiredContainer=N,$.requiredContainer=N,R.allowedChildren=[A],A.requiredContainer=R,A.allowedChildren=[T],T.requiredContainer=A,k.requiredContainer=T,T.allowedChildren=[k],$.allowedChildren=[P],P.requiredContainer=$,E.requiredContainer=D,D.allowedChildren=[E],P.allowedChildren=[D],D.requiredContainer=P},2795:(e,t,i)=>{"use strict";function n(e,t,i){i?e.setAttribute(t,i):e.removeAttribute(t)}i.d(t,{Z:()=>n})},5635:(e,t,i)=>{"use strict";i.d(t,{HI:()=>$,PF:()=>N,ZP:()=>R,fw:()=>H});var n=i(9098),o=i.n(n),r=i(1233),s=i(6446),a=i(281),l=i(3122),c=i(7094),d=i(715),h=i(7898),u=i(7309),p=i(6039),f=i(4048),_=i(5832),m=i(1629),g=i(3071),v=i(2141);function b(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function y(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?b(Object(i),!0).forEach((function(t){w(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):b(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function w(e,t,i){return(t=k(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function I(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,k(n.key),n)}}function k(e){var t=function(e,t){if("object"!==C(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==C(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===C(t)?t:String(t)}function E(e,t){return E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},E(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return T=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T(e)}var D=(0,l.Z)("quill:clipboard"),B=[[3,W],[3,j],["br",function(e,t){return N(t,"\n")||t.insert("\n"),t}],[1,j],[1,function(e,t,i){var n=i.query(e);if(null==n)return t;if(n.prototype instanceof r.EmbedBlot){var s={},a=n.value(e);if(null!=a)return s[n.blotName]=a,(new(o())).insert(s,n.formats(e,i))}else if(n.prototype instanceof r.BlockBlot&&!N(t,"\n")&&t.insert("\n"),"function"==typeof n.formats)return $(t,n.blotName,n.formats(e,i));return t}],[1,function(e,t,i){if(-1===["TD","TH","TR","TABLE"].indexOf(e.tagName)){var n=r.Attributor.keys(e),o=r.ClassAttributor.keys(e),s=r.StyleAttributor.keys(e),a={};if(n.concat(o).concat(s).forEach((function(t){var n=i.query(t,r.Scope.ATTRIBUTE);null!=n&&(a[n.attrName]=n.value(e),a[n.attrName])||(null==(n=P[t])||n.attrName!==t&&n.keyName!==t||(a[n.attrName]=n.value(e)||void 0),null==(n=M[t])||n.attrName!==t&&n.keyName!==t||(n=M[t],a[n.attrName]=n.value(e)||void 0))})),Object.keys(a).length>0)return $(t,a)}return t}],[1,function(e,t){var i={},n=e.style||{};return["height","width"].forEach((function(t){var o=-1!==["TD","TH"].indexOf(e.tagName),r="TABLE"===e.tagName;if((o||r)&&n[t]){var s="".concat(r?"table":"cell").concat((0,v.Z)(t));i[s]=n[t]}})),"italic"===n.fontStyle&&(i.italic=!0),-1!==n.textDecoration.indexOf("underline")&&(i.underline=!0),-1!==n.textDecoration.indexOf("line-through")&&(i.strike=!0),(0===n.fontWeight.indexOf("bold")||parseInt(n.fontWeight,10)>=700)&&(i.bold=!0),Object.keys(i).length>0&&(t=$(t,i)),parseFloat(n.textIndent||0)>0?(new(o())).insert("\t").concat(t):t}],["li",function(e,t,i){var n=i.query(e);if(null==n||"list"!==n.blotName||!N(t,"\n"))return t;for(var r=-1,s=e.parentNode;null!=s;)-1!==["OL","UL"].indexOf(s.tagName)&&(r+=1),s=s.parentNode;return r<=0?t:t.reduce((function(e,t){return t.attributes&&"number"==typeof t.attributes.indent?e.push(t):e.insert(t.insert,y({indent:r},t.attributes||{}))}),new(o()))}],["ol, ul",function(e,t){return $(t,"list","OL"===e.tagName?"ordered":"bullet")}],["pre",function(e,t,i){var n=i.query("code-block");return $(t,"code-block",!n||n.formats(e,i))}],["b",L.bind(L,"bold")],["i",L.bind(L,"italic")],["strike",L.bind(L,"strike")],["style",function(){return new(o())}]],A=[W,j],P=[d.if,f.IF].reduce((function(e,t){return e[t.keyName]=t,e}),{}),M=[d.HE,h.w,p.HQ,f.H8,_.H,m.Z].reduce((function(e,t){return e[t.keyName]=t,e}),{}),R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&E(e,t)}(l,e);var t,i,n,r,s=(n=l,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=T(n);if(r){var i=T(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===C(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}(this,e)});function l(e,t){var i,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),(n=s.call(this,e,t)).quill.root.addEventListener("copy",(function(e){return n.onCaptureCopy(e,!1)})),n.quill.root.addEventListener("cut",(function(e){return n.onCaptureCopy(e,!0)})),n.quill.root.addEventListener("paste",n.onCapturePaste.bind(O(n))),n.matchers=[],n.tableBlots=null!==(i=t.tableBlots)&&void 0!==i?i:[],n.multilineParagraph=!1,B.concat(n.options.matchers).forEach((function(e){var t=x(e,2),i=t[0],o=t[1];n.addMatcher(i,o)})),n}return t=l,i=[{key:"addMatcher",value:function(e,t){this.matchers.push([e,t])}},{key:"addTableBlot",value:function(e){this.tableBlots.push(e)}},{key:"convert",value:function(e){var t=e.html,i=e.text,n=e.keepLastNewLine,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return r[u.ZP.blotName]?(new(o())).insert(i,w({},u.ZP.blotName,r[u.ZP.blotName])):t?this.applyMatchers(t,n,r):this.applyTextMatchers(i)}},{key:"applyTextMatchers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(0===t.length)return new(o());var i=this.prepareTextMatching(),n=this.quill.root.ownerDocument.createElement("div");n.textContent=t;var r=n.childNodes[0];return i.reduce((function(t,i){return i(r,t,e.quill.scroll)}),new(o()))}},{key:"applyMatchers",value:function(e,t){var i=this,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=a.ZP.replaceStyleAttribute(e),s=(new DOMParser).parseFromString(r,"text/html");a.ZP.restoreStyleAttribute(s);var l=s.body,c=new WeakMap,d=x(this.prepareMatching(l,c),2),h=d[0],u=d[1],p=H(this.quill.scroll,l,h,u,c,this.multilineParagraph);return t||!N(p,"\n")||null!=p.ops[p.ops.length-1].attributes&&!Object.values(n).some((function(e){return i.tableBlots.includes(e)}))?p:p.compose((new(o())).retain(p.length()-1).delete(1))}},{key:"dangerouslyPasteHTML",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.ZP.sources.API;if("string"==typeof e){var n=this.convert({html:e,text:""});this.quill.setContents(n,t),this.quill.setSelection(0,a.ZP.sources.SILENT)}else{var r=this.convert({html:t,text:""});this.quill.updateContents((new(o())).retain(e).concat(r),i),this.quill.setSelection(e+r.length(),a.ZP.sources.SILENT)}}},{key:"onCaptureCopy",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.defaultPrevented&&e.clipboardData){e.preventDefault();var i=x(this.quill.selection.getRange(),1)[0];if(null!=i){var n=this.onCopy(i,t),o=n.html,r=n.text;e.clipboardData.setData("text/plain",r),e.clipboardData.setData("text/html",o),t&&(this.raiseCallback("onCut",e),(0,g.WQ)({range:i,quill:this.quill}))}}}},{key:"onCapturePaste",value:function(e){if(!e.defaultPrevented&&this.quill.isEnabled()&&(this.raiseCallback("onPaste",e),e.clipboardData)){e.preventDefault();var t=this.quill.getSelection(!0);if(null!=t){var i=e.clipboardData.getData("text/html"),n=Array.from(e.clipboardData.files||[]);if(!i&&n.length>0)this.quill.uploader.upload(t,n);else{if(i&&n.length>0){var o=(new DOMParser).parseFromString(i,"text/html").body;if(1===o.childElementCount&&"IMG"===o.firstElementChild.tagName)return void this.quill.uploader.upload(t,n)}var r=e.clipboardData.getData("text/plain");this.onPaste(t,{html:i,text:r,keepLastNewLine:!0})}}}}},{key:"raiseCallback",value:function(e,t){var i=this.options[e];i&&"function"==typeof i&&i(t)}},{key:"onCopy",value:function(e){var t=e.index,i=e.length,n=this.quill.getText(t,i);return{html:this.quill.getSemanticHTML(t,i),text:n}}},{key:"onPaste",value:function(e,t){var i=t.text,n=t.html,r=t.keepLastNewLine,s=this.quill.getFormat(e.index),l=this.convert({text:i,html:n,keepLastNewLine:r},s);D.log("onPaste",l,{text:i,html:n});var c=(new(o())).retain(e.index).delete(e.length).concat(l);this.quill.updateContents(c,a.ZP.sources.USER),this.quill.setSelection(c.length()-e.length,a.ZP.sources.SILENT),this.quill.scrollIntoView()}},{key:"prepareMatching",value:function(e,t){var i=[],n=[];return this.matchers.forEach((function(o){var r=x(o,2),s=r[0],a=r[1];switch(s){case 3:n.push(a);break;case 1:i.push(a);break;default:Array.from(e.querySelectorAll(s)).forEach((function(e){t.has(e)?t.get(e).push(a):t.set(e,[a])}))}})),[i,n]}},{key:"prepareTextMatching",value:function(){var e=[z];return this.matchers.forEach((function(t){var i=x(t,2),n=i[0],o=i[1];-1===A.indexOf(o)&&3===n&&e.push(o)})),e}}],i&&I(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),l}(c.Z);function $(e,t,i){return"object"===C(t)?Object.keys(t).reduce((function(e,i){return $(e,i,t[i])}),e):e.reduce((function(e,n){if(n.attributes&&n.attributes[t])return e.push(n);var o=i?w({},t,i):{};return e.insert(n.insert,y(y({},o),n.attributes))}),new(o()))}function N(e,t){for(var i="",n=e.ops.length-1;n>=0&&i.length<t.length;--n){var o=e.ops[n];if("string"!=typeof o.insert)break;i=o.insert+i}return i.slice(-1*t.length)===t}function V(e){return 0!==e.childNodes.length&&-1!==["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].indexOf(e.tagName.toLowerCase())}R.DEFAULTS={matchers:[]};var F=new WeakMap;function Z(e){return null!=e&&(F.has(e)||("PRE"===e.tagName?F.set(e,!0):F.set(e,Z(e.parentNode))),F.get(e))}function H(e,t,i,n,r,s){return t.nodeType===t.TEXT_NODE?n.reduce((function(i,n){return n(t,i,e)}),new(o())):t.nodeType===t.ELEMENT_NODE?Array.from(t.childNodes||[]).reduce((function(o,a,l,c){var d=H(e,a,i,n,r,s),h=l<c.length-1&&c[l+1],u=h&&h.nodeType===t.ELEMENT_NODE&&["ul","ol"].indexOf(h.tagName.toLowerCase())>-1;a.nodeType===t.ELEMENT_NODE&&(s="br"===a.tagName.toLowerCase(),d=i.reduce((function(t,i){return i(a,t,e)}),d),d=(r.get(a)||[]).reduce((function(t,i){return i(a,t,e)}),d));var p=o.concat(d);return s&&u&&p.insert("\n"),p}),new(o())):new(o())}function L(e,t,i){return $(i,e,!0)}function j(e,t,i){if(!N(t,"\n")){if(V(e))return t.insert("\n");if(t.length()>0&&e.nextSibling)for(var n=e.nextSibling;null!=n;){if(V(n))return t.insert("\n");var o=i.query(n);if((null==o?void 0:o.prototype)instanceof s.i2)return t.insert("\n");n=n.firstChild}}return t}function z(e,t){var i=e.data||"";return i=i.replace(/\r\n/g,"\n"),t.insert(i)}function W(e,t){var i=e.data;if("O:P"===e.parentNode.tagName)return t.insert(i.trim());if(0===i.trim().length&&-1!==i.indexOf("\n"))return t;if(!Z(e)){var n=function(e,t){var i=t.replace(/[^\u00a0]/g,"");return i.length<1&&e?" ":i};i=(i=i.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,n.bind(n,!0)),(null==e.previousSibling&&V(e.parentNode)||null!=e.previousSibling&&V(e.previousSibling))&&(i=i.replace(/^\s+/,n.bind(n,!1))),(null==e.nextSibling&&V(e.parentNode)||null!=e.nextSibling&&V(e.nextSibling))&&(i=i.replace(/\s+$/,n.bind(n,!1)))}return t.insert(i)}},2613:(e,t,i)=>{"use strict";i.d(t,{Z:()=>u});var n=i(1233),o=i(281),r=i(7094),s=i(8034);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==a(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===a(o)?o:String(o)),n)}var o}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(_,e);var t,i,r,u,f=(r=_,u=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(r);if(u){var i=h(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===a(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d(e)}(this,e)});function _(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,_),(i=f.call(this,e,t)).lastRecorded=0,i.ignoreChange=!1,i.clear(),i.quill.on(o.ZP.events.EDITOR_CHANGE,(function(e,t,n,r){e!==o.ZP.events.TEXT_CHANGE||i.ignoreChange||(i.options.userOnly&&r!==o.ZP.sources.USER?i.transform(t):i.record(t,n))})),i.quill.keyboard.addBinding({key:"z",shortKey:!0},i.undo.bind(d(i))),i.quill.keyboard.addBinding({key:"z",shortKey:!0,shiftKey:!0},i.redo.bind(d(i))),(0,s.Z)()&&/Win/i.test(navigator.platform)&&i.quill.keyboard.addBinding({key:"y",shortKey:!0},i.redo.bind(d(i))),i.quill.root.addEventListener("beforeinput",(function(e){"historyUndo"===e.inputType?(i.undo(),e.preventDefault()):"historyRedo"===e.inputType&&(i.redo(),e.preventDefault())})),i}return t=_,(i=[{key:"change",value:function(e,t){if(0!==this.stack[e].length){var i=this.stack[e].pop(),r=this.quill.getContents(),s=i.invert(r);this.stack[t].push(s),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(i,o.ZP.sources.USER),this.ignoreChange=!1;var a=function(e,t){var i=t.reduce((function(e,t){return e+(t.delete||0)}),0),o=t.length()-i;return function(e,t){var i=t.ops[t.ops.length-1];return null!=i&&(null!=i.insert?"string"==typeof i.insert&&i.insert.endsWith("\n"):null!=i.attributes&&Object.keys(i.attributes).some((function(t){return null!=e.query(t,n.Scope.BLOCK)})))}(e,t)&&(o-=1),o}(this.quill.scroll,i);this.quill.setSelection(a)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(e,t){if(0!==e.ops.length){this.stack.redo=[];var i=e.invert(t),n=Date.now();if(this.lastRecorded+this.options.delay>n&&this.stack.undo.length>0){var o=this.stack.undo.pop();i=i.compose(o)}else this.lastRecorded=n;0!==i.length()&&(this.stack.undo.push(i),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(e){p(this.stack.undo,e),p(this.stack.redo,e)}},{key:"undo",value:function(){this.change("undo","redo")}}])&&l(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),_}(r.Z);function p(e,t){for(var i=t,n=e.length-1;n>=0;n-=1){var o=e[n];e[n]=i.transform(o,!0),i=o.transform(i),0===e[n].length()&&e.splice(n,1)}}u.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1}},990:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var n=i(9098),o=i.n(n),r=i(7094),s=i(281),a=i(3071);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==l(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===l(o)?o:String(o)),n)}var o}function d(e,t){return d=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},d(e,t)}function h(e){return h=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h(e)}var u=["insertText","insertReplacementText"],p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&d(e,t)}(f,e);var t,i,n,r,p=(n=f,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=h(n);if(r){var i=h(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function f(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),i=p.call(this,e,t),e.root.addEventListener("beforeinput",(function(e){i.handleBeforeInput(e)})),/Android/i.test(navigator.userAgent)||e.on(s.ZP.events.COMPOSITION_BEFORE_START,(function(){i.handleCompositionStart()})),i}return t=f,i=[{key:"deleteRange",value:function(e){(0,a.WQ)({range:e,quill:this.quill})}},{key:"replaceText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===e.length)return!1;if(t){var i=this.quill.getFormat(e.index,1);this.deleteRange(e),this.quill.updateContents((new(o())).retain(e.index).insert(t,i),s.ZP.sources.USER)}else this.deleteRange(e);return this.quill.setSelection(e.index+t.length,0,s.ZP.sources.SILENT),!0}},{key:"handleBeforeInput",value:function(e){if(!this.quill.composition.isCompositionInProgress()&&!e.defaultPrevented&&u.includes(e.inputType)){var t=e.getTargetRanges?e.getTargetRanges()[0]:null;if(t&&!0!==t.collapsed){var i=function(e){var t;return"string"==typeof e.data?e.data:null!==(t=e.dataTransfer)&&void 0!==t&&t.types.includes("text/plain")?e.dataTransfer.getData("text/plain"):null}(e);if(null!=i){var n=this.quill.selection.normalizeNative(t),o=n?this.quill.selection.normalizedToRange(n):null;o&&this.replaceText(o,i)&&e.preventDefault()}}}}},{key:"handleCompositionStart",value:function(){var e=this.quill.getSelection();e&&this.replaceText(e)}}],i&&c(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),f}(r.Z);const f=p},3071:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>O,WQ:()=>A});var n=i(8805),o=i.n(n),r=i(2722),s=i.n(r),a=i(9098),l=i.n(a),c=i(1233),d=i(281),h=i(3122),u=i(7094),p=i(8034);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function g(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function v(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?g(Object(i),!0).forEach((function(t){b(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):g(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function b(e,t,i){return(t=C(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function C(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==f(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===f(t)?t:String(t)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var S=(0,h.Z)("quill:keyboard"),I={backspace:"backspace",tab:"tab",enter:"enter",escape:"escape",pageup:"pageUp",pagedown:"pageDown",end:"end",home:"home",arrowleft:"leftArrow",arrowup:"upArrow",arrowright:"rightArrow",arrowdown:"downArrow",delete:"del"," ":"space","*":"asterisk","-":"minus",alt:"alt",control:"control",shift:"shift",left:"leftArrow",up:"upArrow",right:"rightArrow",down:"downArrow",multiply:"asterisk",spacebar:"space",del:"del",subtract:"minus",esc:"escape"},k={8:"backspace",9:"tab",13:"enter",27:"escape",33:"pageUp",34:"pageDown",35:"end",36:"home",37:"leftArrow",38:"upArrow",39:"rightArrow",40:"downArrow",46:"del",32:"space",106:"asterisk",109:"minus",189:"minus",173:"minus",16:"shift",17:"control",18:"alt"},E=(0,p.Z)()&&/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(m,e);var t,i,n,r,h,u=(r=m,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(h){var i=x(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function m(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),(i=u.call(this,e,t)).bindings={},Object.keys(i.options.bindings).forEach((function(e){i.options.bindings[e]&&i.addBinding(i.options.bindings[e])})),i.addInternalBindings(),i.listen(),i}return t=m,i=[{key:"addInternalBindings",value:function(){var e=this;this.quill.once(d.ZP.events.CONTENT_SETTED,(function(){e.addBinding({key:"enter",shiftKey:null},e.handleEnter),e.addBinding({key:"enter",metaKey:null,ctrlKey:null,altKey:null},(function(){})),(0,p.Z)()&&/Firefox/i.test(navigator.userAgent)?(e.addBinding({key:"backspace"},{collapsed:!0},e.handleBackspace),e.addBinding({key:"del"},{collapsed:!0},e.handleDelete)):(e.addBinding({key:"backspace"},{collapsed:!0,prefix:/^.?$/},e.handleBackspace),e.addBinding({key:"del"},{collapsed:!0,suffix:/^.?$/},e.handleDelete)),e.addBinding({key:"backspace"},{collapsed:!1},e.handleDeleteRange),e.addBinding({key:"del"},{collapsed:!1},e.handleDeleteRange),e.addBinding({key:"backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},e.handleBackspace)}))}},{key:"addBinding",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=function(e){if("string"==typeof e||"number"==typeof e)e={key:e};else{if("object"!==f(e))return null;e=o()(e)}return e.shortKey&&(e[E]=e.shortKey,delete e.shortKey),e}(e);if(null!=r){"function"==typeof i&&(i={handler:i}),"function"==typeof n&&(n={handler:n});var s=r.which?"which":"key";(Array.isArray(r[s])?r[s]:[r[s]]).forEach((function(e){var o=v(v(v({},r),{},{key:e},i),n);t.bindings[o.key]=t.bindings[o.key]||[],t.bindings[o.key].push(o)}))}else S.warn("Attempted to add invalid keyboard binding",r)}},{key:"listen",value:function(){var e=this;this.quill.root.addEventListener("keydown",(function(t){if(!t.defaultPrevented&&!t.isComposing){e.raiseOnKeydownCallback(t);var i=m.normalizeKeyName(t),n=(e.bindings[i]||[]).concat(e.bindings[t.which]||[]).filter((function(e){return m.match(t,e)}));if(0!==n.length){var o=e.quill.getSelection();if(null!=o&&e.quill.hasFocus()){var r=_(e.quill.getLine(o.index),2),a=r[0],l=r[1],d=_(e.quill.getLeaf(o.index),2),h=d[0],u=d[1],p=_(0===o.length?[h,u]:e.quill.getLeaf(o.index+o.length),2),g=p[0],v=p[1],b=h instanceof c.TextBlot?h.value().slice(0,u):"",y=g instanceof c.TextBlot?g.value().slice(v):"",C={collapsed:0===o.length,empty:0===o.length&&a.length()<=1,format:e.quill.getFormat(o),line:a,offset:l,prefix:b,suffix:y,event:t},w=!1;n.some((function(t){if(null!=t.collapsed&&t.collapsed!==C.collapsed)return!1;if(null!=t.empty&&t.empty!==C.empty)return!1;if(null!=t.offset&&t.offset!==C.offset)return!1;if(Array.isArray(t.format)){if(t.format.every((function(e){return null==C.format[e]})))return!1}else if("object"===f(t.format)&&!Object.keys(t.format).every((function(e){return!0===t.format[e]?null!=C.format[e]:!1===t.format[e]?null==C.format[e]:s()(t.format[e],C.format[e])})))return!1;if(null!=t.prefix&&!t.prefix.test(C.prefix))return!1;if(null!=t.suffix&&!t.suffix.test(C.suffix))return!1;var i=t.handler.call(e,o,C,t),n=null==i?void 0:i.preventAfterAllMatches;return(w=!0!==i||n)&&!n})),w&&t.preventDefault()}}}}))}},{key:"raiseOnKeydownCallback",value:function(e){var t=this.options.onKeydown;t&&"function"==typeof t&&t(e)}},{key:"handleBackspace",value:function(e,t){var i=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(t.prefix)?2:1;if(!(0===e.index||this.quill.getLength()<=1)){var n={},o=_(this.quill.getLine(e.index),1)[0],r=(new(l())).retain(e.index-i).delete(i);if(0===t.offset){var s=_(this.quill.getLine(e.index-1),1)[0];if(s){var c="block"===s.statics.blotName&&s.length()<=1,h=s.statics.blotName.startsWith("table"),u="block"===o.statics.blotName&&o.length()<=1;if(h&&(u&&o.remove(),this.quill.setSelection(e.index-1)),!c&&!h){var p=o.formats(),f=this.quill.getFormat(e.index-1,1);if(n=a.AttributeMap.diff(p,f)||{},Object.keys(n).length>0){var m=(new(l())).retain(e.index+o.length()-2).retain(1,n);r=r.compose(m)}}}}this.quill.updateContents(r,d.ZP.sources.USER),this.quill.focus()}}},{key:"handleDelete",value:function(e,t){var i=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(t.suffix)?2:1;if(!(e.index>=this.quill.getLength()-i)){var n={},o=_(this.quill.getLine(e.index),1)[0],r=(new(l())).retain(e.index).delete(i);if(t.offset>=o.length()-1){var s=_(this.quill.getLine(e.index+1),1)[0];if(s){var c=o.formats(),h=this.quill.getFormat(e.index,1);n=a.AttributeMap.diff(c,h)||{},Object.keys(n).length>0&&(r=r.retain(s.length()-1).retain(1,n))}}this.quill.updateContents(r,d.ZP.sources.USER),this.quill.focus()}}},{key:"handleDeleteRange",value:function(e,t){this.raiseOnKeydownCallback(t.event),A({range:e,quill:this.quill}),this.quill.focus()}},{key:"handleEnter",value:function(e,t){var i=this,n=Object.keys(t.format).reduce((function(e,n){return i.quill.scroll.query(n,c.Scope.BLOCK)&&!Array.isArray(t.format[n])&&(e[n]=t.format[n]),e}),{}),o=(new(l())).retain(e.index).delete(e.length).insert("\n",n);this.quill.updateContents(o,d.ZP.sources.USER),this.quill.setSelection(e.index+1,d.ZP.sources.SILENT),this.quill.focus();var r,s,a,h,u,p=_(this.quill.getLine(e.index+1),1)[0],f=(r=p.domNode,s=window.innerHeight,h=(a=r.getBoundingClientRect()).y,u=a.bottom,h<0||!(u>=s)&&null);null!==f&&p.domNode.scrollIntoView(f),Object.keys(t.format).forEach((function(e){null==n[e]&&(Array.isArray(t.format[e])||"code"!==e&&"link"!==e&&(i.raiseOnKeydownCallback(t.event),i.quill.format(e,t.format[e],d.ZP.sources.USER)))}))}}],n=[{key:"match",value:function(e,t){return!["altKey","ctrlKey","metaKey","shiftKey"].some((function(i){return!!t[i]!==e[i]&&null!==t[i]}))&&(t.key===m.normalizeKeyName(e)||t.key===e.which)}},{key:"normalizeKeyName",value:function(e){var t=e.key,i=e.which,n=!!t,o=n?t:i;return o&&(o=n?I[o.toLowerCase()]||o:k[o]||String.fromCharCode(o)),o}}],i&&y(t.prototype,i),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),m}(u.Z);function T(e){return{key:"tab",shiftKey:!e,format:{"code-block":!0},handler:function(t){var i=this.quill.scroll.query("code-block"),n=0===t.length?this.quill.getLines(t.index,1):this.quill.getLines(t),o=t.index,r=t.length;n.forEach((function(t,n){e?(t.insertAt(0,i.TAB),0===n?o+=i.TAB.length:r+=i.TAB.length):0===t.domNode.textContent.indexOf(i.TAB)&&(t.deleteAt(0,i.TAB.length),0===n?o-=i.TAB.length:r-=i.TAB.length)})),this.quill.update(d.ZP.sources.USER),this.quill.setSelection(o,r,d.ZP.sources.SILENT)}}}function D(e,t){return b(b({key:e,shiftKey:t,altKey:null},"leftArrow"===e?"prefix":"suffix",/^$/),"handler",(function(i){var n=i.index;return"rightArrow"===e&&(n+=i.length+1),!(_(this.quill.getLeaf(n),1)[0]instanceof c.EmbedBlot&&("leftArrow"===e?t?this.quill.setSelection(i.index-1,i.length+1,d.ZP.sources.USER):this.quill.setSelection(i.index-1,d.ZP.sources.USER):t?this.quill.setSelection(i.index,i.length+1,d.ZP.sources.USER):this.quill.setSelection(i.index+i.length+1,d.ZP.sources.USER),1))}))}function B(e,t){return{key:e[0],which:t,shortKey:!0,handler:function(t,i){return this.quill.format(e,!i.format[e],d.ZP.sources.USER),{preventAfterAllMatches:!0}}}}function A(e){var t=e.quill,i=e.range,n=t.getLines(i),o={};if(n.length>1){var r=n[0].formats(),s=n[n.length-1].formats();o=a.AttributeMap.diff(s,r)||{}}t.deleteText(i,d.ZP.sources.USER),Object.keys(o).length>0&&t.formatLine(i.index,1,o,d.ZP.sources.USER),t.setSelection(i.index,d.ZP.sources.SILENT)}O.DEFAULTS={bindings:{bold:B("bold",66),italic:B("italic",73),underline:B("underline",85),indent:{key:"tab",format:["blockquote","indent","list"],handler:function(e,t){return!(!t.collapsed||0===t.offset)||(this.quill.format("indent","+1",d.ZP.sources.USER),!1)}},outdent:{key:"tab",shiftKey:!0,format:["blockquote","indent","list"],handler:function(e,t){return!(!t.collapsed||0===t.offset)||(this.quill.format("indent","-1",d.ZP.sources.USER),!1)}},"outdent backspace":{key:"backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(e,t){null!=t.format.indent?this.quill.format("indent","-1",d.ZP.sources.USER):null!=t.format.list&&this.quill.format("list",!1,d.ZP.sources.USER)}},"indent code-block":T(!0),"outdent code-block":T(!1),"remove tab":{key:"tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(e){this.quill.deleteText(e.index-1,1,d.ZP.sources.USER)}},tab:{key:"tab",handler:function(e,t){var i=t.format;if(i.tableCellLine||i.tableHeaderCellLine||i.tableHeaderCell||i.table)return!0;this.quill.history.cutoff();var n=(new(l())).retain(e.index).delete(e.length).insert("\t");return this.quill.updateContents(n,d.ZP.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index+1,d.ZP.sources.SILENT),!1}},"blockquote empty enter":{key:"enter",collapsed:!0,format:["blockquote"],empty:!0,handler:function(){this.quill.format("blockquote",!1,d.ZP.sources.USER)}},"list empty enter":{key:"enter",collapsed:!0,format:["list"],empty:!0,handler:function(e,t){var i={list:!1};t.format.indent&&(i.indent=!1),this.quill.formatLine(e.index,e.length,i,d.ZP.sources.USER)}},"checklist enter":{key:"enter",collapsed:!0,format:{list:"checked"},handler:function(e){var t=_(this.quill.getLine(e.index),2),i=t[0],n=t[1],o=v(v({},i.formats()),{},{list:"checked"}),r=(new(l())).retain(e.index).insert("\n",o).retain(i.length()-n-1).retain(1,{list:"unchecked"});this.quill.updateContents(r,d.ZP.sources.USER),this.quill.setSelection(e.index+1,d.ZP.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:"enter",collapsed:!0,format:["header"],suffix:/^$/,handler:function(e,t){var i=_(this.quill.getLine(e.index),2),n=i[0],o=i[1],r=(new(l())).retain(e.index).insert("\n",t.format).retain(n.length()-o-1).retain(1,{header:null});this.quill.updateContents(r,d.ZP.sources.USER),this.quill.setSelection(e.index+1,d.ZP.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:"space",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(e,t){if(null==this.quill.scroll.query("list"))return!0;var i,n=t.prefix.length,o=_(this.quill.getLine(e.index),2),r=o[0],s=o[1];if(s>n)return!0;switch(t.prefix.trim()){case"[]":case"[ ]":i="unchecked";break;case"[x]":i="checked";break;case"-":case"*":i="bullet";break;default:i="ordered"}this.quill.insertText(e.index," ",d.ZP.sources.USER),this.quill.history.cutoff();var a=(new(l())).retain(e.index-s).delete(n+1).retain(r.length()-2-s).retain(1,{list:i});return this.raiseOnKeydownCallback(t.event),this.quill.updateContents(a,d.ZP.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(e.index-n,d.ZP.sources.SILENT),!1}},"code exit":{key:"enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler:function(e){for(var t=_(this.quill.getLine(e.index),2),i=t[0],n=t[1],o=2,r=i;null!=r&&r.length()<=1&&r.formats()["code-block"];)if(r=r.prev,(o-=1)<=0){var s=(new(l())).retain(e.index+i.length()-n-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,d.ZP.sources.USER),this.quill.setSelection(e.index-1,d.ZP.sources.SILENT),!1}return!0}},"embed left":D("leftArrow",!1),"embed left shift":D("leftArrow",!0),"embed right":D("rightArrow",!1),"embed right shift":D("rightArrow",!0)}}},9072:(e,t,i)=>{"use strict";i.d(t,{ZP:()=>P});var n=i(9098),o=i.n(n),r=i(1233),s=i(6603),a=i(281),l=i(7094),c=i(6446),d=i(4122),h=i(3657),u=i(8222),p=i(7309),f=i(5635),_=i(8034);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t,i){return(t=w(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,w(n.key),n)}}function C(e,t,i){return t&&y(e.prototype,t),i&&y(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function w(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===m(t)?t:String(t)}function x(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&S(e,t)}function S(e,t){return S=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},S(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=O(e);if(t){var o=O(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}(this,i)}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(){return E="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=O(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},E.apply(this,arguments)}function O(e){return O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},O(e)}var T=new r.ClassAttributor("code-token","hljs",{scope:r.Scope.INLINE}),D=function(e){x(i,e);var t=I(i);function i(e,n,o){var r;return b(this,i),r=t.call(this,e,n,o),T.add(r.domNode,o),r}return C(i,[{key:"format",value:function(e,t){e!==i.blotName?E(O(i.prototype),"format",this).call(this,e,t):t?T.add(this.domNode,t):(T.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}},{key:"optimize",value:function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];(e=E(O(i.prototype),"optimize",this)).call.apply(e,[this].concat(n)),T.value(this.domNode)||this.unwrap()}}],[{key:"formats",value:function(e,t){for(;null!=e&&e!==t.domNode;){if(e.classList&&e.classList.contains(p.ZP.className))return E(O(i),"formats",this).call(this,e,t);e=e.parentNode}}}]),i}(s.Z);D.blotName="code-token",D.className="ql-token";var B=function(e){x(i,e);var t=I(i);function i(){return b(this,i),t.apply(this,arguments)}return C(i,[{key:"format",value:function(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-language",t):E(O(i.prototype),"format",this).call(this,e,t)}},{key:"replaceWith",value:function(e,t){return this.formatAt(0,this.length(),D.blotName,!1),E(O(i.prototype),"replaceWith",this).call(this,e,t)}}],[{key:"create",value:function(e){var t=E(O(i),"create",this).call(this,e);return"string"==typeof e&&t.setAttribute("data-language",e),t}},{key:"formats",value:function(e){return e.getAttribute("data-language")||"plain"}},{key:"register",value:function(){}}]),i}(p.ZP),A=function(e){x(i,e);var t=I(i);function i(){return b(this,i),t.apply(this,arguments)}return C(i,[{key:"attach",value:function(){E(O(i.prototype),"attach",this).call(this),this.forceNext=!1,this.scroll.emitMount(this)}},{key:"format",value:function(e,t){e===B.blotName&&(this.forceNext=!0,this.children.forEach((function(i){i.format(e,t)})))}},{key:"formatAt",value:function(e,t,n,o){n===B.blotName&&(this.forceNext=!0),E(O(i.prototype),"formatAt",this).call(this,e,t,n,o)}},{key:"highlight",value:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=this.children.head){var n=Array.from(this.domNode.childNodes).filter((function(e){return e!==t.uiNode})),r="".concat(n.map((function(e){return e.textContent})).join("\n"),"\n"),s=B.formats(this.children.head.domNode);if(i||this.forceNext||this.cachedText!==r){if(r.trim().length>0||null==this.cachedText){var a=this.children.reduce((function(e,t){return e.concat((0,c.qz)(t,!1))}),new(o())),l=e(r,s);a.diff(l).reduce((function(e,i){var n=i.retain,o=i.attributes;return n?(o&&Object.keys(o).forEach((function(i){-1!==[B.blotName,D.blotName].indexOf(i)&&t.formatAt(e,n,i,o[i])})),e+n):e}),0)}this.cachedText=r,this.forceNext=!1}}}},{key:"html",value:function(e,t){var i,n,o=(i=this.children.find(e),n=1,function(e){if(Array.isArray(e))return e}(i)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(i,n)||function(e,t){if(e){if("string"==typeof e)return v(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?v(e,t):void 0}}(i,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],r=o?B.formats(o.domNode):"plain";return'<pre data-language="'.concat(r,'">\n').concat(this.code(e,t),"\n</pre>")}},{key:"optimize",value:function(e){if(E(O(i.prototype),"optimize",this).call(this,e),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){var t=B.formats(this.children.head.domNode);t!==this.uiNode.value&&(this.uiNode.value=t)}}}]),i}(p.se);A.allowedChildren=[B],B.requiredContainer=A,B.allowedChildren=[D,h.Z,u.Z,d.Z];var P=function(e){x(i,e);var t=I(i);function i(e,n){var o;if(b(this,i),null==(o=t.call(this,e,n)).options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");return o.languages=o.options.languages.reduce((function(e,t){return e[t.key]=!0,e}),{}),o.highlightBlot=o.highlightBlot.bind(k(o)),o.initListener(),o.initTimer(),o}return C(i,[{key:"initListener",value:function(){var e=this;this.quill.on(a.ZP.events.SCROLL_BLOT_MOUNT,(function(t){if(t instanceof A){var i=e.quill.root.ownerDocument.createElement("select");e.options.languages.forEach((function(e){var t=e.key,n=e.label,o=i.ownerDocument.createElement("option");o.textContent=n,o.setAttribute("value",t),i.appendChild(o)})),i.addEventListener("change",(function(){t.format(B.blotName,i.value),e.quill.root.focus(),e.highlight(t,!0)})),null==t.uiNode&&(t.attachUI(i),t.children.head&&(i.value=B.formats(t.children.head.domNode)))}}))}},{key:"initTimer",value:function(){var e=this,t=null;this.quill.on(a.ZP.events.SCROLL_OPTIMIZE,(function(){clearTimeout(t),t=setTimeout((function(){e.highlight(),t=null}),e.options.interval)}))}},{key:"highlight",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.quill.selection.composing){this.quill.update(a.ZP.sources.USER);var n=this.quill.getSelection();(null==t?this.quill.scroll.descendants(A):[t]).forEach((function(t){t.highlight(e.highlightBlot,i)})),this.quill.update(a.ZP.sources.SILENT),null!=n&&this.quill.setSelection(n,a.ZP.sources.SILENT)}}},{key:"highlightBlot",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if("plain"===(t=this.languages[t]?t:"plain"))return(0,u.b)(e).split("\n").reduce((function(e,i,n){return 0!==n&&e.insert("\n",g({},p.ZP.blotName,t)),e.insert(i)}),new(o()));var i=this.quill.root.ownerDocument.createElement("div");return i.classList.add(p.ZP.className),i.innerHTML=this.options.hljs.highlight(t,e).value,(0,f.fw)(this.quill.scroll,i,[function(e,t){var i=T.value(e);return i?t.compose((new(o())).retain(t.length(),g({},D.blotName,i))):t}],[function(e,i){return e.data.split("\n").reduce((function(e,i,n){return 0!==n&&e.insert("\n",g({},p.ZP.blotName,t)),e.insert(i)}),i)}],new WeakMap)}}],[{key:"register",value:function(){a.ZP.register(D,!0),a.ZP.register(B,!0),a.ZP.register(A,!0)}}]),i}(l.Z);P.DEFAULTS={hljs:(0,_.Z)()?window.hljs:null,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"Javascript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]}},867:(e,t,i)=>{"use strict";i.d(t,{Z:()=>E});var n=i(9098),o=i.n(n),r=i(1233),s=i(281),a=i(7094),l=i(1969),c=i(5874),d=i(5635),h=i(9466),u=i(7896),p=i(319),f=i(1342),_=i(2480);function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function g(e,t,i){return(t=C(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,C(n.key),n)}}function C(e){var t=function(e,t){if("object"!==m(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==m(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===m(t)?t:String(t)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function x(e){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},x(e)}var S=[null,null,null,-1],I=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(h,e);var t,i,n,r,a,d=(r=h,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=x(r);if(a){var i=x(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===m(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function h(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return(e=d.call.apply(d,[this].concat(i))).tableBlots=[l.zW.blotName,l.iD.blotName],e.tableBlots.forEach((function(t){e.quill.editor.addImmediateFormat(t)})),e.integrateClipboard(),e.addKeyboardHandlers(),e.listenBalanceCells(),e}return t=h,i=[{key:"integrateClipboard",value:function(){var e=this;this.tableBlots.forEach((function(t){e.quill.clipboard.addTableBlot(t)})),this.quill.clipboard.addMatcher("td, th",k),this.quill.clipboard.addMatcher("table",(0,u.F)(p.Zt)),this.quill.clipboard.addMatcher("td, th",(0,u.a)(f.h6))}},{key:"addKeyboardHandlers",value:function(){var e=this,t=h.keyboardBindings;Object.keys(t).forEach((function(i){t[i]&&e.quill.keyboard.addBinding(t[i])}))}},{key:"balanceTables",value:function(){this.quill.scroll.descendants(l.xJ).forEach((function(e){e.balanceCells()}))}},{key:"deleteColumn",value:function(){var e=v(this.getTable(),3),t=e[0],i=e[2];(0,c.Z)(i)&&(t.deleteColumn(i.cellOffset()),this.quill.update(s.ZP.sources.USER))}},{key:"deleteRow",value:function(){var e=v(this.getTable(),2)[1];(0,c.Z)(e)&&(e.remove(),this.quill.update(s.ZP.sources.USER))}},{key:"deleteTable",value:function(){var e=v(this.getTable(),1)[0];if((0,c.Z)(e)){var t=e.offset();e.remove(),this.quill.update(s.ZP.sources.USER),this.quill.setSelection(t,s.ZP.sources.SILENT)}}},{key:"getTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(!(0,c.Z)(e))return S;var t=v(this.quill.getLine(e.index),2),i=t[0],n=t[1];if(!(0,c.Z)(i)||-1===this.tableBlots.indexOf(i.statics.blotName))return S;var o=i.parent,r=o.parent;return[r.parent.parent,r,o,n]}},{key:"insertColumn",value:function(e){var t=this.quill.getSelection(),i=v(this.getTable(t),3),n=i[0],o=i[1],r=i[2];if((0,c.Z)(r)){var a=r.cellOffset();n.insertColumn(a+e),this.quill.update(s.ZP.sources.USER);var l=o.rowOffset();0===e&&(l+=1),this.quill.setSelection(t.index+l,t.length,s.ZP.sources.SILENT)}}},{key:"insertColumnLeft",value:function(){this.insertColumn(0)}},{key:"insertColumnRight",value:function(){this.insertColumn(1)}},{key:"insertRow",value:function(e){var t=this.quill.getSelection(),i=v(this.getTable(t),3),n=i[0],o=i[1],r=i[2];if((0,c.Z)(r)){var a=o.rowOffset();n.insertRow(a+e),this.quill.update(s.ZP.sources.USER),e>0?this.quill.setSelection(t,s.ZP.sources.SILENT):this.quill.setSelection(t.index+o.children.length,t.length,s.ZP.sources.SILENT)}}},{key:"insertRowAbove",value:function(){this.insertRow(0)}},{key:"insertRowBelow",value:function(){this.insertRow(1)}},{key:"insertHeaderRow",value:function(){var e=this.quill.getSelection(),t=v(this.getTable(e),3),i=t[0],n=t[2];(0,c.Z)(n)&&(i.insertHeaderRow(),this.quill.update(s.ZP.sources.USER))}},{key:"insertTable",value:function(e,t){var i=this.quill.getSelection();if((0,c.Z)(i)){var n=new Array(e).fill(0).reduce((function(e){var i=(0,l.Lv)();return new Array(t).fill("\n").forEach((function(t){e.insert(t,{tableCellLine:{row:i,cell:(0,l.Lv)()}})})),e}),(new(o())).retain(i.index));this.quill.updateContents(n,s.ZP.sources.USER),this.quill.setSelection(i.index,s.ZP.sources.SILENT),this.balanceTables()}}},{key:"tableFormats",value:function(){return this.tableBlots}},{key:"listenBalanceCells",value:function(){var e=this;this.quill.on(s.ZP.events.SCROLL_OPTIMIZE,(function(t){t.some((function(t){return-1!==["TD","TH","TR","TBODY","THEAD","TABLE"].indexOf(t.target.tagName)&&(e.quill.once(s.ZP.events.TEXT_CHANGE,(function(t,i,n){n===s.ZP.sources.USER&&e.balanceTables()})),!0)}))})),this.quill.on(s.ZP.events.CONTENT_SETTED,(function(){e.quill.once(s.ZP.events.TEXT_CHANGE,(function(){e.balanceTables()}))}))}}],n=[{key:"register",value:function(){s.ZP.register(l.zW,!0),s.ZP.register(l.iD,!0),s.ZP.register(l.xs,!0),s.ZP.register(l.pj,!0),s.ZP.register(l.KA,!0),s.ZP.register(l.SC,!0),s.ZP.register(l.RM,!0),s.ZP.register(l.xD,!0),s.ZP.register(l.xJ,!0),[p.li,f.Du].forEach((function(e){Object.keys(e).forEach((function(t){s.ZP.register(g({},"formats/".concat(t),e[t]),!0)}))}))}}],i&&y(t.prototype,i),n&&y(t,n),Object.defineProperty(t,"prototype",{writable:!1}),h}(a.Z);function k(e,t){var i=e.parentNode,n="TABLE"===i.parentNode.tagName?i.parentNode:i.parentNode.parentNode,r="THEAD"===i.parentNode.tagName||null,s=Array.from(n.querySelectorAll("tr")),a=Array.from(i.querySelectorAll("th,td")),l=s.indexOf(i)+1,c=a.indexOf(e)+1,h=r?"tableHeaderCellLine":"tableCellLine";return 0===t.length()?t=(new(o())).insert("\n",g({},h,{row:l,cell:c})):((0,d.PF)(t,"\n")||t.insert("\n"),(0,d.HI)(t,h,{row:l,cell:c}))}I.keyboardBindings={"table backspace":{key:"backspace",format:["tableCellLine","tableHeaderCellLine"],collapsed:!0,offset:0,handler:function(e){var t=v(this.quill.getLine(e.index),1)[0];return!(!t.prev||-1===["tableCellLine","tableHeaderCellLine"].indexOf(t.prev.statics.blotName))}},"table delete":{key:"del",format:["tableCellLine","tableHeaderCellLine"],collapsed:!0,suffix:/^$/,handler:function(){}},"table enter":{key:"enter",shiftKey:null,format:["tableCellLine","tableHeaderCellLine"],handler:function(e,t){var i,n,o=this,a=this.quill.getModule("table");if(a){var l=this.quill,c=v(a.getTable(e),1)[0];if(1===(null===(i=this.quill.selection)||void 0===i?void 0:i.lastNative.native.endContainer.nodeType)){var d=c.offset();(0,_.Z)({quill:l,index:d,table:c})}else if(null===(n=this.quill.selection)||void 0===n||!n.composing){e.length>0&&this.quill.scroll.deleteAt(e.index,e.length);var h=Object.keys(t.format).reduce((function(e,i){return o.quill.scroll.query(i,r.Scope.BLOCK)&&!Array.isArray(t.format[i])&&(e[i]=t.format[i]),e}),{});this.quill.insertText(e.index,"\n",h.tableCellLine,s.ZP.sources.USER),this.quill.setSelection(e.index+1,s.ZP.sources.SILENT),this.quill.focus(),Object.keys(t.format).forEach((function(e){null==h[e]&&(Array.isArray(t.format[e])||"link"!==e&&o.quill.format(e,t.format[e],s.ZP.sources.USER))}))}}}},"table tab":{key:"tab",shiftKey:null,format:["tableCellLine","tableHeaderCellLine"],handler:function(e,t){var i=t.event,n=t.line,o=n.offset(this.quill.scroll);i.shiftKey?this.quill.setSelection(o-1,s.ZP.sources.USER):this.quill.setSelection(o+n.length(),s.ZP.sources.USER)}},"table down":(0,h.Z)(!1,["tableCellLine","tableHeaderCellLine"]),"table up":(0,h.Z)(!0,["tableCellLine","tableHeaderCellLine"])};const E=I},6054:(e,t,i)=>{"use strict";i.d(t,{Z:()=>ee});var n=i(9098),o=i.n(n),r=i(281),s=i(7094),a=i(6446),l=i(3553),c=i(5874),d=i(319),h=i(8536),u=i(2795);function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return m(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==p(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===p(o)?o:String(o)),n)}var o}function b(e,t,i){return t&&v(e.prototype,t),i&&v(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(){return y="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=S(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},y.apply(this,arguments)}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=S(e);if(t){var o=S(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===p(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function S(e){return S=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},S(e)}var I="data-tablelite-",k=function(e){C(i,e);var t=x(i);function i(){return g(this,i),t.apply(this,arguments)}return b(i,[{key:"format",value:function(e,t){if(d.li[e]){var n,o="data-".concat(e.toLowerCase());(0,u.Z)(this.domNode,o,t),null===(n=this.row())||void 0===n||null===(n=n.table())||void 0===n||n.format(e,t)}else y(S(i.prototype),"format",this).call(this,e,t)}},{key:"cellOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"row",value:function(){return"table"in this.parent?this.parent:null}},{key:"rowOffset",value:function(){return this.row()?this.row().rowOffset():-1}},{key:"table",value:function(){var e;return null===(e=this.row())||void 0===e?void 0:e.table()}}],[{key:"create",value:function(e){var t=y(S(i),"create",this).call(this),n=this.dataAttribute;return(0,u.Z)(t,n,null!=e?e:$()),t}},{key:"formats",value:function(e){var t=this.dataAttribute;if(e.hasAttribute(t))return e.getAttribute(t)}}]),i}(a.ZP);k.tagName=["TD","TH"];var E=function(e){C(i,e);var t=x(i);function i(){return g(this,i),t.apply(this,arguments)}return b(i,[{key:"format",value:function(e,t){e===i.blotName&&t?this.domNode.setAttribute(i.dataAttribute,t):y(S(i.prototype),"format",this).call(this,e,t)}}]),i}(k);E.blotName="table",E.dataAttribute="".concat(I,"row");var O=function(e){C(i,e);var t=x(i);function i(){return g(this,i),t.apply(this,arguments)}return b(i,[{key:"format",value:function(e,t){e===i.blotName&&t?this.domNode.setAttribute(i.dataAttribute,t):y(S(i.prototype),"format",this).call(this,e,t)}}]),i}(k);O.tagName=["TH","TD"],O.blotName="tableHeaderCell",O.dataAttribute="".concat(I,"header-row");var T=function(e){C(i,e);var t=x(i);function i(){return g(this,i),t.apply(this,arguments)}return b(i,[{key:"checkMerge",value:function(){if(y(S(i.prototype),"checkMerge",this).call(this)&&(0,c.Z)(this.next.children.head)){var e=this.childFormatName,t=this.children.head.formats(),n=this.children.tail.formats(),o=this.next.children.head.formats(),r=this.next.children.tail.formats();return t[e]===n[e]&&t[e]===o[e]&&t[e]===r[e]}return!1}},{key:"optimize",value:function(){for(var e,t=this,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];(e=y(S(i.prototype),"optimize",this)).call.apply(e,[this].concat(o));var s=this.childFormatName;this.children.forEach((function(e){if((0,c.Z)(e.next)){var i=e.formats(),n=e.next.formats();if(i[s]!==n[s]){var o=t.splitAfter(e);o&&o.optimize(),t.prev&&t.prev.optimize()}}}))}},{key:"rowOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"table",value:function(){var e;return null===(e=this.parent)||void 0===e?void 0:e.parent}}]),i}(l.Z);T.tagName="TR";var D=function(e){C(i,e);var t=x(i);function i(e,n){var o;return g(this,i),(o=t.call(this,e,n)).childFormatName="table",o}return b(i)}(T);D.blotName="tableRow";var B=function(e){C(i,e);var t=x(i);function i(e,n){var o;return g(this,i),(o=t.call(this,e,n)).childFormatName="tableHeaderCell",o}return b(i)}(T);B.blotName="tableHeaderRow";var A=function(e){C(i,e);var t=x(i);function i(){return g(this,i),t.apply(this,arguments)}return b(i,[{key:"optimize",value:function(){var e;if(this.statics.requiredContainer&&!(this.parent instanceof this.statics.requiredContainer)){var t=this.children.head.children.head.domNode,n={};Object.keys(d.li).forEach((function(e){var i=t.dataset[e.toLowerCase()];i&&(n[e]=i)})),this.wrap(this.statics.requiredContainer.blotName,n)}for(var o=arguments.length,r=new Array(o),s=0;s<o;s++)r[s]=arguments[s];(e=y(S(i.prototype),"optimize",this)).call.apply(e,[this].concat(r))}}]),i}(l.Z),P=function(e){C(i,e);var t=x(i);function i(){return g(this,i),t.apply(this,arguments)}return b(i)}(A);P.blotName="tableBody",P.tagName=["TBODY"];var M=function(e){C(i,e);var t=x(i);function i(){return g(this,i),t.apply(this,arguments)}return b(i)}(A);M.blotName="tableHeader",M.tagName=["THEAD"];var R=function(e){C(i,e);var t=x(i);function i(){return g(this,i),t.apply(this,arguments)}return b(i,[{key:"balanceCells",value:function(){var e=this.descendants(B),t=this.descendants(D),i=this.getMaxTableColCount(e,t);this.balanceRows(i,e,O),this.balanceRows(i,t,E)}},{key:"getMaxTableColCount",value:function(e,t){return Math.max(this.getMaxRowColCount(e),this.getMaxRowColCount(t))}},{key:"getMaxRowColCount",value:function(e){return Math.max.apply(Math,function(e){if(Array.isArray(e))return m(e)}(t=e.map((function(e){return e.children.length})))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||_(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());var t}},{key:"balanceRows",value:function(e,t,i){var n=this;t.forEach((function(t){new Array(e-t.children.length).fill(0).forEach((function(){var e;(0,c.Z)(t.children.head)&&(e=i.formats(t.children.head.domNode));var o=n.scroll.create(i.blotName,e);t.appendChild(o),o.optimize()}))}))}},{key:"cells",value:function(e){return this.rows().map((function(t){return t.children.at(e)}))}},{key:"deleteColumn",value:function(e){var t=this;[M,P].forEach((function(i){var n=f(t.descendants(i),1)[0];(0,c.Z)(n)&&(0,c.Z)(n.children.head)&&n.children.forEach((function(t){var i=t.children.at(e);(0,c.Z)(i)&&i.remove()}))}))}},{key:"insertColumn",value:function(e){var t=this;[M,P].forEach((function(i){var n=f(t.descendants(i),1)[0];if((0,c.Z)(n)&&(0,c.Z)(n.children.head)){var o=i===M?O:E;n.children.forEach((function(i){var n=i.children.at(e),r=o.formats(i.children.head.domNode),s=t.scroll.create(o.blotName,r);i.insertBefore(s,n)}))}}))}},{key:"insertRow",value:function(e){var t=this,i=f(this.descendants(P),1)[0];if((0,c.Z)(i)&&(0,c.Z)(i.children.head)){var n=$(),o=this.scroll.create(D.blotName);i.children.head.children.forEach((function(){var e=t.scroll.create(E.blotName,n);o.appendChild(e)}));var r=i.children.at(e);i.insertBefore(o,r)}}},{key:"insertHeaderRow",value:function(){var e=this,t=f(this.descendants(M),1)[0],i=f(this.descendants(P),1)[0];if(!(0,c.Z)(t)&&(0,c.Z)(i)&&(0,c.Z)(i.children.head)){var n=$(),o=this.scroll.create(M.blotName),r=this.scroll.create(B.blotName),s=this.children.at(0);o.appendChild(r),i.children.head.children.forEach((function(){var t=e.scroll.create(O.blotName,n);r.appendChild(t),t.optimize()})),this.insertBefore(o,s)}}},{key:"rows",value:function(){var e=this.children.head;return(0,c.Z)(e)?e.children.map((function(e){return e})):[]}},{key:"formats",value:function(){var e={},t=this.cells()[0].domNode;return Object.keys(d.li).forEach((function(i){var n=t.dataset[i.toLowerCase()];n&&(e[i]=n)})),e}},{key:"format",value:function(e,t){var i=d.li[e];if(i){var n="data-".concat(e.toLowerCase());this.cells().forEach((function(e){(0,u.Z)(e.domNode,n,t)})),i.add(this.domNode,t)}}}],[{key:"create",value:function(e){var t=y(S(i),"create",this).call(this,e);return e&&Object.keys(e).forEach((function(i){var n;null===(n=d.li[i])||void 0===n||n.add(t,e[i])})),t}}]),i}(l.Z);function $(){return"row-".concat((0,h.Z)())}R.blotName="tableContainer",R.tagName="TABLE",R.allowedChildren=[M,P],P.requiredContainer=R,M.requiredContainer=R,P.allowedChildren=[D],D.requiredContainer=P,D.allowedChildren=[E],E.requiredContainer=D,M.allowedChildren=[B],B.requiredContainer=M,B.allowedChildren=[O],O.requiredContainer=B;var N=i(5635),V=i(9466);function F(e){var t=e.quill,i=e.index,n=e.range,s=i-1,a=(new(o())).retain(s).insert("\n");t.updateContents(a,r.ZP.sources.USER),t.setSelection(n.index+1,n.length,r.ZP.sources.SILENT)}var Z=i(2480);function H(e,t,i){return null==e.prev&&null==e.next?null==t.prev&&null==t.next?0===i?-1:1:null==t.prev?-1:1:null==e.prev?-1:null==e.next?1:null}var L=i(7896),j=i(1342);function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}function W(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var n,o,r,s,a=[],l=!0,c=!1;try{if(r=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(n=r.call(i)).done)&&(a.push(n.value),a.length!==t);l=!0);}catch(e){c=!0,o=e}finally{try{if(!l&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(c)throw o}}return a}}(e,t)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?K(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function q(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,U(n.key),n)}}function U(e){var t=function(e,t){if("object"!==z(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==z(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===z(t)?t:String(t)}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function Y(e){return Y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Y(e)}var Q=[null,null,null,-1],X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(h,e);var t,i,n,s,a,l=(s=h,a=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Y(s);if(a){var i=Y(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===z(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function h(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h);for(var t=arguments.length,i=new Array(t),n=0;n<t;n++)i[n]=arguments[n];return(e=l.call.apply(l,[this].concat(i))).tableBlots=[E.blotName,O.blotName],e.tableBlots.forEach((function(t){e.quill.editor.addImmediateFormat(t)})),e.integrateClipboard(),e.addKeyboardHandlers(),e.listenBalanceCells(),e}return t=h,i=[{key:"integrateClipboard",value:function(){var e=this;this.tableBlots.forEach((function(t){return e.quill.clipboard.addTableBlot(t)})),this.quill.clipboard.addMatcher("tr",J),this.quill.clipboard.addMatcher("table",(0,L.F)(d.Zt)),this.quill.clipboard.addMatcher("td, th",(0,L.a)(j.h6))}},{key:"addKeyboardHandlers",value:function(){var e=this,t=h.keyboardBindings;Object.keys(t).forEach((function(i){t[i]&&e.quill.keyboard.addBinding(t[i])}))}},{key:"balanceTables",value:function(){this.quill.scroll.descendants(R).forEach((function(e){e.balanceCells()}))}},{key:"deleteColumn",value:function(){var e=W(this.getTable(),3),t=e[0],i=e[2];(0,c.Z)(i)&&(t.deleteColumn(i.cellOffset()),this.quill.update(r.ZP.sources.USER))}},{key:"deleteRow",value:function(){var e=W(this.getTable(),2)[1];(0,c.Z)(e)&&(e.remove(),this.quill.update(r.ZP.sources.USER))}},{key:"deleteTable",value:function(){var e=W(this.getTable(),1)[0];if((0,c.Z)(e)){var t=e.offset();e.remove(),this.quill.update(r.ZP.sources.USER),this.quill.setSelection(t,r.ZP.sources.SILENT)}}},{key:"getTable",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(!(0,c.Z)(e))return Q;var t=W(this.quill.getLine(e.index),2),i=t[0],n=t[1];if(!(0,c.Z)(i)||-1===this.tableBlots.indexOf(i.statics.blotName))return Q;var o=i.parent;return[o.parent.parent,o,i,n]}},{key:"insertColumn",value:function(e){var t=this.quill.getSelection(),i=W(this.getTable(t),3),n=i[0],o=i[1],s=i[2];if((0,c.Z)(s)){var a=s.cellOffset();n.insertColumn(a+e),this.quill.update(r.ZP.sources.USER);var l=o.rowOffset();0===e&&(l+=1),this.quill.setSelection(t.index+l,t.length,r.ZP.sources.SILENT)}}},{key:"insertColumnLeft",value:function(){this.insertColumn(0)}},{key:"insertColumnRight",value:function(){this.insertColumn(1)}},{key:"insertRow",value:function(e){var t=this.quill.getSelection(),i=W(this.getTable(t),3),n=i[0],o=i[1],s=i[2];if((0,c.Z)(s)){var a=o.rowOffset();n.insertRow(a+e),this.quill.update(r.ZP.sources.USER),e>0?this.quill.setSelection(t,r.ZP.sources.SILENT):this.quill.setSelection(t.index+o.children.length,t.length,r.ZP.sources.SILENT)}}},{key:"insertRowAbove",value:function(){this.insertRow(0)}},{key:"insertRowBelow",value:function(){this.insertRow(1)}},{key:"insertHeaderRow",value:function(){var e=this.quill.getSelection(),t=W(this.getTable(e),3),i=t[0],n=t[2];(0,c.Z)(n)&&(i.insertHeaderRow(),this.quill.update(r.ZP.sources.USER))}},{key:"insertTable",value:function(e,t){var i=this.quill.getSelection();if((0,c.Z)(i)){var n=new Array(e).fill(0).reduce((function(e){var i=new Array(t).fill("\n").join("");return e.insert(i,{table:$()})}),(new(o())).retain(i.index));this.quill.updateContents(n,r.ZP.sources.USER),this.quill.setSelection(i.index,r.ZP.sources.SILENT),this.balanceTables()}}},{key:"tableFormats",value:function(){return this.tableBlots}},{key:"listenBalanceCells",value:function(){var e=this;this.quill.on(r.ZP.events.SCROLL_OPTIMIZE,(function(t){t.some((function(t){return-1!==["TD","TH","TR","TBODY","THEAD","TABLE"].indexOf(t.target.tagName)&&(e.quill.once(r.ZP.events.TEXT_CHANGE,(function(t,i,n){n===r.ZP.sources.USER&&e.balanceTables()})),!0)}))})),this.quill.on(r.ZP.events.CONTENT_SETTED,(function(){e.quill.once(r.ZP.events.TEXT_CHANGE,(function(){e.balanceTables()}))}))}}],n=[{key:"register",value:function(){r.ZP.register(O,!0),r.ZP.register(E,!0),r.ZP.register(B,!0),r.ZP.register(D,!0),r.ZP.register(P,!0),r.ZP.register(M,!0),r.ZP.register(R,!0),[d.li,j.Du].forEach((function(e){Object.keys(e).forEach((function(t){var i,n,o;r.ZP.register((i={},n="formats/".concat(t),o=e[t],(n=U(n))in i?Object.defineProperty(i,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):i[n]=o,i),!0)}))}))}}],i&&q(t.prototype,i),n&&q(t,n),Object.defineProperty(t,"prototype",{writable:!1}),h}(s.Z);function J(e,t){var i="TABLE"===e.parentNode.tagName?e.parentNode:e.parentNode.parentNode,n="THEAD"===e.parentNode.tagName||null,o=Array.from(i.querySelectorAll("tr")).indexOf(e)+1;return(0,N.HI)(t,n?"tableHeaderCell":"table",o)}X.keyboardBindings={"table backspace":{key:"backspace",format:["table","tableHeaderCell"],collapsed:!0,offset:0,handler:function(){}},"table delete":{key:"del",format:["table","tableHeaderCell"],collapsed:!0,suffix:/^$/,handler:function(){}},"table enter":{key:"enter",shiftKey:null,format:["table"],handler:function(e){var t=this.quill.getModule("table");if(t){var i=this.quill,n=W(t.getTable(e),4),o=n[0],r=H(n[1],n[2],n[3]),s=o.children.length>1&&o.children.head;if(null==r||r<0&&s)return;var a=o.offset();r<0?F({quill:i,index:a,range:e}):(0,Z.Z)({quill:i,index:a,table:o})}}},"table header enter":{key:"enter",shiftKey:null,format:["tableHeaderCell"],handler:function(e){var t=this.quill.getModule("table");if(t){var i=this.quill,n=W(t.getTable(e),4),o=n[0],r=H(n[1],n[2],n[3]);if(null==r)return;var s=o.offset(),a=o.children.length>1&&o.children.tail;r<0||r>0&&a?F({quill:i,index:s,range:e}):(0,Z.Z)({quill:i,index:s,table:o})}}},"table tab":{key:"tab",shiftKey:null,format:["table","tableHeaderCell"],handler:function(e,t){var i=t.event,n=t.line,o=n.offset(this.quill.scroll);i.shiftKey?this.quill.setSelection(o-1,r.ZP.sources.USER):this.quill.setSelection(o+n.length(),r.ZP.sources.USER)}},"table down":(0,V.Z)(!1,["table","tableHeaderCell"]),"table up":(0,V.Z)(!0,["table","tableHeaderCell"])};const ee=X},2480:(e,t,i)=>{"use strict";i.d(t,{Z:()=>s});var n=i(9098),o=i.n(n),r=i(281);function s(e){var t=e.quill,i=e.index+e.table.length(),n=(new(o())).retain(i).insert("\n");t.updateContents(n,r.ZP.sources.USER),t.setSelection(i,r.ZP.sources.USER)}},9466:(e,t,i)=>{"use strict";i.d(t,{Z:()=>o});var n=i(281);function o(e,t){return{key:e?"upArrow":"downArrow",collapsed:!0,format:t,handler:function(t,i){var o=e?"prev":"next",r=i.line,s=r.statics.blotName.indexOf("Line")>-1?r.parent:r,a=s.parent.parent[o],l=s.parent[o]||(null==a?void 0:a.children.head);if(null!=l){if("tableRow"===l.statics.blotName||"tableHeaderRow"===l.statics.blotName){for(var c=l.children.head,d=s;null!=d.prev;)d=d.prev,c=c.next;var h=c.offset(this.quill.scroll)+Math.min(i.offset,c.length()-1);this.quill.setSelection(h,0,n.ZP.sources.USER)}}else{var u=s.table()[o];null!=u&&(e?this.quill.setSelection(u.offset(this.quill.scroll)+u.length()-1,0,n.ZP.sources.USER):this.quill.setSelection(u.offset(this.quill.scroll),0,n.ZP.sources.USER))}return!1}}}},7896:(e,t,i)=>{"use strict";i.d(t,{F:()=>u,a:()=>p});var n=i(1233),o=i(1674),r=i(4569),s=i(5635);function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function c(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){var n,o,r;n=e,o=t,r=i[t],(o=function(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==a(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===a(t)?t:String(t)}(o))in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function d(e,t,i,n){e[t]=!n&&e[t]?e[t]:i}function h(e,t,i,o,r,s){return e.filter((function(e){return!!e})).forEach((function(e){var a=i.query(e,n.Scope.ATTRIBUTE);if(null!==a){var l=a.value(t);if(l)return void d(r,a.attrName,l,s)}var c=o[e];if(null!=c&&(c.attrName===e||c.keyName===e)){var h=c.value(t)||void 0;d(r,c.attrName,h,s)}})),r}function u(e){return function(t,i,n){var a=o.Z.keys(t),l=r.Z.keys(t),d=c(c({},h(a,t,n,e,{},!0)),h(l,t,n,e,{},!0));return Object.keys(d).length>0?(0,s.HI)(i,d):i}}function p(e){return function(t,i,n){var a,l=o.Z.keys(t),d=r.Z.keys(t),u="TR"===(null===(a=t.parentNode)||void 0===a?void 0:a.tagName)?t.parentNode:void 0,p=c(c({},h(l,t,n,e,{},!0)),h(d,t,n,e,{},!0));return u&&(p=h(r.Z.keys(u),u,n,e,p,!1)),Object.keys(p).length>0?(0,s.HI)(i,p):i}}},3859:(e,t,i)=>{"use strict";i.d(t,{Z:()=>f});var n=i(9098),o=i.n(n),r=i(2069),s=i(7094),a=i(8034);function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function c(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,d(n.key),n)}}function d(e){var t=function(e,t){if("object"!==l(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===l(t)?t:String(t)}function h(e,t){return h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},h(e,t)}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&h(e,t)}(s,e);var t,i,n,o,r=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=u(n);if(o){var i=u(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===l(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(e,t){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(i=r.call(this,e,t)).preventImageUploading(!1),i.addDragOverHandler(),i.addDropHandler(),i}return t=s,(i=[{key:"addDragOverHandler",value:function(){if((0,a.Z)()){var e=window.navigator.userAgent.toLowerCase();(-1!==e.indexOf("msie ")||-1!==e.indexOf("trident/")||-1!==e.indexOf("edge/"))&&this.quill.root.addEventListener("dragover",(function(e){e.preventDefault()}))}}},{key:"addDropHandler",value:function(){var e=this;this.quill.root.addEventListener("drop",(function(t){var i=0===t.dataTransfer.files.length,n=e.options.onDrop;if(n&&"function"==typeof n&&n(t),!i&&!e.preventImageUpload){var o;if(t.preventDefault(),document.caretRangeFromPoint)o=document.caretRangeFromPoint(t.clientX,t.clientY);else{if(!document.caretPositionFromPoint)return;var r=document.caretPositionFromPoint(t.clientX,t.clientY);(o=document.createRange()).setStart(r.offsetNode,r.offset),o.setEnd(r.offsetNode,r.offset)}var s=e.quill.selection.normalizeNative(o),a=e.quill.selection.normalizedToRange(s);e.upload(a,t.dataTransfer.files)}}))}},{key:"preventImageUploading",value:function(e){return void 0!==e&&(this.preventImageUpload=e),this.preventImageUpload}},{key:"upload",value:function(e,t,i){var n=this;if(!this.preventImageUpload||i){var o=[];Array.from(t).forEach((function(e){e&&-1!==n.options.mimetypes.indexOf(e.type)&&o.push(e)})),o.length>0&&this.options.handler.call(this,e,o,this.options.imageBlot)}}}])&&c(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(s.Z);p.DEFAULTS={mimetypes:["image/png","image/jpeg","image/pjpeg","image/gif","image/webp","image/bmp","image/svg+xml","image/vnd.microsoft.icon"],imageBlot:"image",handler:function(e,t,i){var n=this,s=t.map((function(e){return new Promise((function(t){var i=new FileReader;i.onload=function(e){t(e.target.result)},i.readAsDataURL(e)}))}));Promise.all(s).then((function(t){var s=t.reduce((function(e,t){return e.insert((n={},r=t,(o=d(o=i))in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r,n));var n,o,r}),(new(o())).retain(e.index).delete(e.length));n.quill.updateContents(s,r.Z.sources.USER),n.quill.setSelection(e.index+t.length,r.Z.sources.SILENT)}))}};const f=p},2141:(e,t,i)=>{"use strict";function n(e){return e?e.substring(0,1).toUpperCase()+e.substring(1):""}i.d(t,{Z:()=>n})},8034:(e,t,i)=>{"use strict";i.d(t,{Z:()=>n});const n=function(){return"undefined"!=typeof window}},5874:(e,t,i)=>{"use strict";function n(e){return null!=e}i.d(t,{Z:()=>n})},1233:(e,t,i)=>{"use strict";var n;i.r(t),i.d(t,{Attributor:()=>w,AttributorStore:()=>B,BlockBlot:()=>N,ClassAttributor:()=>k,ContainerBlot:()=>v,EmbedBlot:()=>Z,InlineBlot:()=>M,LeafBlot:()=>C,ParentBlot:()=>_,Registry:()=>h,Scope:()=>o,ScrollBlot:()=>z,StyleAttributor:()=>D,TextBlot:()=>K}),function(e){e[e.TYPE=3]="TYPE",e[e.LEVEL=12]="LEVEL",e[e.ATTRIBUTE=13]="ATTRIBUTE",e[e.BLOT=14]="BLOT",e[e.INLINE=7]="INLINE",e[e.BLOCK=11]="BLOCK",e[e.BLOCK_BLOT=10]="BLOCK_BLOT",e[e.INLINE_BLOT=6]="INLINE_BLOT",e[e.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",e[e.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",e[e.ANY=15]="ANY"}(n||(n={}));const o=n;var r=function(){function e(){this.head=null,this.tail=null,this.length=0}return e.prototype.append=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(this.insertBefore(e[0],null),e.length>1){var i=e.slice(1);this.append.apply(this,i)}},e.prototype.at=function(e){for(var t=this.iterator(),i=t();i&&e>0;)e-=1,i=t();return i},e.prototype.contains=function(e){for(var t=this.iterator(),i=t();i;){if(i===e)return!0;i=t()}return!1},e.prototype.indexOf=function(e){for(var t=this.iterator(),i=t(),n=0;i;){if(i===e)return n;n+=1,i=t()}return-1},e.prototype.insertBefore=function(e,t){null!=e&&(this.remove(e),e.next=t,null!=t?(e.prev=t.prev,null!=t.prev&&(t.prev.next=e),t.prev=e,t===this.head&&(this.head=e)):null!=this.tail?(this.tail.next=e,e.prev=this.tail,this.tail=e):(e.prev=null,this.head=this.tail=e),this.length+=1)},e.prototype.offset=function(e){for(var t=0,i=this.head;null!=i;){if(i===e)return t;t+=i.length(),i=i.next}return-1},e.prototype.remove=function(e){this.contains(e)&&(null!=e.prev&&(e.prev.next=e.next),null!=e.next&&(e.next.prev=e.prev),e===this.head&&(this.head=e.next),e===this.tail&&(this.tail=e.prev),this.length-=1)},e.prototype.iterator=function(e){return void 0===e&&(e=this.head),function(){var t=e;return null!=e&&(e=e.next),t}},e.prototype.find=function(e,t){void 0===t&&(t=!1);for(var i=this.iterator(),n=i();n;){var o=n.length();if(e<o||t&&e===o&&(null==n.next||0!==n.next.length()))return[n,e];e-=o,n=i()}return[null,0]},e.prototype.forEach=function(e){for(var t=this.iterator(),i=t();i;)e(i),i=t()},e.prototype.forEachAt=function(e,t,i){if(!(t<=0))for(var n=this.find(e),o=n[0],r=e-n[1],s=this.iterator(o),a=s();a&&r<e+t;){var l=a.length();e>r?i(a,e-r,Math.min(t,r+l-e)):i(a,0,Math.min(l,e+t-r)),r+=l,a=s()}},e.prototype.map=function(e){return this.reduce((function(t,i){return t.push(e(i)),t}),[])},e.prototype.reduce=function(e,t){for(var i=this.iterator(),n=i();n;)t=e(t,n),n=i();return t},e}();const s=r;var a,l=(a=function(e,t){return a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},a(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function i(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(i.prototype=t.prototype,new i)});const c=function(e){function t(t){var i=this;return t="[Parchment] "+t,(i=e.call(this,t)||this).message=t,i.name=i.constructor.name,i}return l(t,e),t}(Error);var d=function(){function e(){this.attributes={},this.classes={},this.tags={},this.types={}}return e.find=function(e,t){if(void 0===t&&(t=!1),null==e)return null;if(this.blots.has(e))return this.blots.get(e)||null;if(t){var i=null;try{i=e.parentNode}catch(e){return null}return this.find(i,t)}return null},e.prototype.create=function(t,i,n){var o=this.query(i);if(null==o)throw new c("Unable to create ".concat(i," blot"));var r=o,s=i instanceof Node||i.nodeType===Node.TEXT_NODE?i:r.create(n),a=new r(t,s,n);return e.blots.set(a.domNode,a),a},e.prototype.find=function(t,i){return void 0===i&&(i=!1),e.find(t,i)},e.prototype.query=function(e,t){var i,n=this;return void 0===t&&(t=o.ANY),"string"==typeof e?i=this.types[e]||this.attributes[e]:e instanceof Text||e.nodeType===Node.TEXT_NODE?i=this.types.text:"number"==typeof e?e&o.LEVEL&o.BLOCK?i=this.types.block:e&o.LEVEL&o.INLINE&&(i=this.types.inline):e instanceof Element&&((e.getAttribute("class")||"").split(/\s+/).some((function(e){return!!(i=n.classes[e])})),i=i||this.tags[e.tagName]),null==i?null:t&o.LEVEL&i.scope&&t&o.TYPE&i.scope?i:null},e.prototype.register=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];if(t.length>1)return t.map((function(t){return e.register(t)}));var n=t[0];if("string"!=typeof n.blotName&&"string"!=typeof n.attrName)throw new c("Invalid definition");if("abstract"===n.blotName)throw new c("Cannot register abstract class");return this.types[n.blotName||n.attrName]=n,"string"==typeof n.keyName?this.attributes[n.keyName]=n:(null!=n.className&&(this.classes[n.className]=n),null!=n.tagName&&(Array.isArray(n.tagName)?n.tagName=n.tagName.map((function(e){return e.toUpperCase()})):n.tagName=n.tagName.toUpperCase(),(Array.isArray(n.tagName)?n.tagName:[n.tagName]).forEach((function(t){null!=e.tags[t]&&null!=n.className||(e.tags[t]=n)})))),n},e.blots=new WeakMap,e}();const h=d,u=function(){function e(e,t){this.scroll=e,this.domNode=t,h.blots.set(t,this),this.prev=null,this.next=null}return e.create=function(e){if(null==this.tagName)throw new c("Blot definition missing tagName");var t;return Array.isArray(this.tagName)?("string"==typeof e&&(e=e.toUpperCase(),parseInt(e,10).toString()===e&&(e=parseInt(e,10))),t="number"==typeof e?document.createElement(this.tagName[e-1]):this.tagName.indexOf(e)>-1?document.createElement(e):document.createElement(this.tagName[0])):t=document.createElement(this.tagName),this.className&&t.classList.add(this.className),t},Object.defineProperty(e.prototype,"statics",{get:function(){return this.constructor},enumerable:!1,configurable:!0}),e.prototype.attach=function(){},e.prototype.clone=function(){var e=this.domNode.cloneNode(!1);return this.scroll.create(e)},e.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),h.blots.delete(this.domNode)},e.prototype.deleteAt=function(e,t){this.isolate(e,t).remove()},e.prototype.formatAt=function(e,t,i,n){var r=this.isolate(e,t);if(null!=this.scroll.query(i,o.BLOT)&&n)r.wrap(i,n);else if(null!=this.scroll.query(i,o.ATTRIBUTE)){var s=this.scroll.create(this.statics.scope);r.wrap(s),s.format(i,n)}},e.prototype.insertAt=function(e,t,i){var n=null==i?this.scroll.create("text",t):this.scroll.create(t,i),o=this.split(e);this.parent.insertBefore(n,o||void 0)},e.prototype.isolate=function(e,t){var i=this.split(e);if(null==i)throw new Error("Attempt to isolate at end");return i.split(t),i},e.prototype.length=function(){return 1},e.prototype.offset=function(e){return void 0===e&&(e=this.parent),null==this.parent||this===e?0:this.parent.children.offset(this)+this.parent.offset(e)},e.prototype.optimize=function(e){!this.statics.requiredContainer||this.parent instanceof this.statics.requiredContainer||this.wrap(this.statics.requiredContainer.blotName)},e.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},e.prototype.replaceWith=function(e,t){var i="string"==typeof e?this.scroll.create(e,t):e;return null!=this.parent&&(this.parent.insertBefore(i,this.next||void 0),this.remove()),i},e.prototype.split=function(e,t){return 0===e?this:this.next},e.prototype.update=function(e,t){},e.prototype.wrap=function(e,t){var i="string"==typeof e?this.scroll.create(e,t):e;if(null!=this.parent&&this.parent.insertBefore(i,this.next||void 0),"function"!=typeof i.appendChild)throw new c("Cannot wrap ".concat(e));return i.appendChild(this),i},e.blotName="abstract",e}();var p=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function f(e,t){var i=t.find(e);if(null==i)try{i=t.create(e)}catch(n){i=t.create(o.INLINE),Array.from(e.childNodes).forEach((function(e){i.domNode.appendChild(e)})),e.parentNode&&e.parentNode.replaceChild(i.domNode,e),i.attach()}return i}const _=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.uiNode=null,n.build(),n}return p(t,e),t.prototype.appendChild=function(e){this.insertBefore(e)},t.prototype.attach=function(){e.prototype.attach.call(this),this.children.forEach((function(e){e.attach()}))},t.prototype.attachUI=function(e){null!=this.uiNode&&this.uiNode.remove(),this.uiNode=e,t.uiClass&&this.uiNode.classList.add(t.uiClass),this.uiNode.setAttribute("contenteditable","false"),this.domNode.insertBefore(this.uiNode,this.domNode.firstChild)},t.prototype.build=function(){var e=this;this.children=new s,Array.from(this.domNode.childNodes).filter((function(t){return t!==e.uiNode})).reverse().forEach((function(t){try{var i=f(t,e.scroll);e.insertBefore(i,e.children.head||void 0)}catch(e){if(e instanceof c)return;throw e}}))},t.prototype.deleteAt=function(e,t){if(0===e&&t===this.length())return this.remove();this.children.forEachAt(e,t,(function(e,t,i){e.deleteAt(t,i)}))},t.prototype.descendant=function(e,i){void 0===i&&(i=0);var n=this.children.find(i),o=n[0],r=n[1];return null==e.blotName&&e(o)||null!=e.blotName&&o instanceof e?[o,r]:o instanceof t?o.descendant(e,r):[null,-1]},t.prototype.descendants=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=Number.MAX_VALUE);var o=[],r=n;return this.children.forEachAt(i,n,(function(i,n,s){(null==e.blotName&&e(i)||null!=e.blotName&&i instanceof e)&&o.push(i),i instanceof t&&(o=o.concat(i.descendants(e,n,r))),r-=s})),o},t.prototype.detach=function(){this.children.forEach((function(e){e.detach()})),e.prototype.detach.call(this)},t.prototype.enforceAllowedChildren=function(){var e=this,i=!1;this.children.forEach((function(n){i||e.statics.allowedChildren.some((function(e){return n instanceof e}))||(n.statics.scope===o.BLOCK_BLOT?(null!=n.next&&e.splitAfter(n),null!=n.prev&&e.splitAfter(n.prev),n.parent.unwrap(),i=!0):n instanceof t?n.unwrap():n.remove())}))},t.prototype.formatAt=function(e,t,i,n){this.children.forEachAt(e,t,(function(e,t,o){e.formatAt(t,o,i,n)}))},t.prototype.insertAt=function(e,t,i){var n=this.children.find(e),o=n[0],r=n[1];if(o)o.insertAt(r,t,i);else{var s=null==i?this.scroll.create("text",t):this.scroll.create(t,i);this.appendChild(s)}},t.prototype.insertBefore=function(e,t){null!=e.parent&&e.parent.children.remove(e);var i=null;this.children.insertBefore(e,t||null),e.parent=this,null!=t&&(i=t.domNode),this.domNode.parentNode===e.domNode&&this.domNode.nextSibling===i||this.domNode.insertBefore(e.domNode,i),e.attach()},t.prototype.length=function(){return this.children.reduce((function(e,t){return e+t.length()}),0)},t.prototype.moveChildren=function(e,t){this.children.forEach((function(i){e.insertBefore(i,t)}))},t.prototype.optimize=function(t){if(e.prototype.optimize.call(this,t),this.enforceAllowedChildren(),null!=this.uiNode&&this.uiNode!==this.domNode.firstChild&&this.domNode.insertBefore(this.uiNode,this.domNode.firstChild),0===this.children.length)if(null!=this.statics.defaultChild){var i=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(i)}else this.remove()},t.prototype.path=function(e,i){void 0===i&&(i=!1);var n=this.children.find(e,i),o=n[0],r=n[1],s=[[this,e]];return o instanceof t?s.concat(o.path(r,i)):(null!=o&&s.push([o,r]),s)},t.prototype.removeChild=function(e){this.children.remove(e)},t.prototype.replaceWith=function(i,n){var o="string"==typeof i?this.scroll.create(i,n):i;return o instanceof t&&this.moveChildren(o),e.prototype.replaceWith.call(this,o)},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var i=this.clone();return this.parent&&this.parent.insertBefore(i,this.next||void 0),this.children.forEachAt(e,this.length(),(function(e,n,o){var r=e.split(n,t);null!=r&&i.appendChild(r)})),i},t.prototype.splitAfter=function(e){for(var t=this.clone();null!=e.next;)t.appendChild(e.next);return this.parent&&this.parent.insertBefore(t,this.next||void 0),t},t.prototype.unwrap=function(){this.parent&&this.moveChildren(this.parent,this.next||void 0),this.remove()},t.prototype.update=function(e,t){var i=this,n=[],o=[];e.forEach((function(e){e.target===i.domNode&&"childList"===e.type&&(n.push.apply(n,e.addedNodes),o.push.apply(o,e.removedNodes))})),o.forEach((function(e){if(!(null!=e.parentNode&&"IFRAME"!==e.tagName&&document.body.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var t=i.scroll.find(e);null!=t&&(null!=t.domNode.parentNode&&t.domNode.parentNode!==i.domNode||t.detach())}})),n.filter((function(e){return e.parentNode===i.domNode||e===i.uiNode})).sort((function(e,t){return e===t?0:e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(e){var t=null;null!=e.nextSibling&&(t=i.scroll.find(e.nextSibling));var n=f(e,i.scroll);n.next===t&&null!=n.next||(null!=n.parent&&n.parent.removeChild(i),i.insertBefore(n,t||void 0))})),this.enforceAllowedChildren()},t.uiClass="",t}(u);var m=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),g=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return m(t,e),t.prototype.checkMerge=function(){return null!==this.next&&this.next.statics.blotName===this.statics.blotName},t.prototype.deleteAt=function(t,i){e.prototype.deleteAt.call(this,t,i),this.enforceAllowedChildren()},t.prototype.formatAt=function(t,i,n,o){e.prototype.formatAt.call(this,t,i,n,o),this.enforceAllowedChildren()},t.prototype.insertAt=function(t,i,n){e.prototype.insertAt.call(this,t,i,n),this.enforceAllowedChildren()},t.prototype.optimize=function(t){e.prototype.optimize.call(this,t),this.children.length>0&&null!=this.next&&this.checkMerge()&&(this.next.moveChildren(this),this.next.remove())},t.blotName="container",t.scope=o.BLOCK_BLOT,t}(_);const v=g;var b=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return b(t,e),t.value=function(e){return!0},t.prototype.index=function(e,t){return this.domNode===e||this.domNode.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(t,1):-1},t.prototype.position=function(e,t){var i=Array.from(this.parent.domNode.childNodes).indexOf(this.domNode);return e>0&&(i+=1),[this.parent.domNode,i]},t.prototype.value=function(){var e;return(e={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,e},t.scope=o.INLINE_BLOT,t}(u);const C=y,w=function(){function e(e,t,i){void 0===i&&(i={}),this.attrName=e,this.keyName=t;var n=o.TYPE&o.ATTRIBUTE;this.scope=null!=i.scope?i.scope&o.LEVEL|n:o.ATTRIBUTE,null!=i.whitelist&&(this.whitelist=i.whitelist)}return e.keys=function(e){return Array.from(e.attributes).map((function(e){return e.name}))},e.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.setAttribute(this.keyName,t),!0)},e.prototype.canAdd=function(e,t){return null==this.whitelist||("string"==typeof t?this.whitelist.indexOf(t.replace(/["']/g,""))>-1:this.whitelist.indexOf(t)>-1)},e.prototype.remove=function(e){e.removeAttribute(this.keyName)},e.prototype.value=function(e){var t=e.getAttribute(this.keyName);return this.canAdd(e,t)&&t?t:""},e}();var x=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function S(e,t){return(e.getAttribute("class")||"").split(/\s+/).filter((function(e){return 0===e.indexOf("".concat(t,"-"))}))}var I=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return x(t,e),t.keys=function(e){return(e.getAttribute("class")||"").split(/\s+/).map((function(e){return e.split("-").slice(0,-1).join("-")}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(this.remove(e),e.classList.add("".concat(this.keyName,"-").concat(t)),!0)},t.prototype.remove=function(e){S(e,this.keyName).forEach((function(t){e.classList.remove(t)})),0===e.classList.length&&e.removeAttribute("class")},t.prototype.value=function(e){var t=(S(e,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(e,t)?t:""},t}(w);const k=I;var E=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();function O(e){var t=e.split("-"),i=t.slice(1).map((function(e){return e[0].toUpperCase()+e.slice(1)})).join("");return t[0]+i}var T=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return E(t,e),t.keys=function(e){return(e.getAttribute("style")||"").split(";").map((function(e){return e.split(":")[0].trim()}))},t.prototype.add=function(e,t){return!!this.canAdd(e,t)&&(e.style[O(this.keyName)]=t,!0)},t.prototype.remove=function(e){e.style[O(this.keyName)]="",e.getAttribute("style")||e.removeAttribute("style")},t.prototype.value=function(e){var t=e.style[O(this.keyName)];return this.canAdd(e,t)?t:""},t}(w);const D=T,B=function(){function e(e){this.attributes={},this.domNode=e,this.build()}return e.prototype.attribute=function(e,t){t?e.add(this.domNode,t)&&(null!=e.value(this.domNode)?this.attributes[e.attrName]=e:delete this.attributes[e.attrName]):(e.remove(this.domNode),delete this.attributes[e.attrName])},e.prototype.build=function(){var e=this;this.attributes={};var t=h.find(this.domNode);if(null!=t){var i=w.keys(this.domNode),n=k.keys(this.domNode),r=D.keys(this.domNode);i.concat(n).concat(r).forEach((function(i){var n=t.scroll.query(i,o.ATTRIBUTE);n instanceof w&&(e.attributes[n.attrName]=n)}))}},e.prototype.copy=function(e){var t=this;Object.keys(this.attributes).forEach((function(i){var n=t.attributes[i].value(t.domNode);e.format(i,n)}))},e.prototype.move=function(e){var t=this;this.copy(e),Object.keys(this.attributes).forEach((function(e){t.attributes[e].remove(t.domNode)})),this.attributes={}},e.prototype.values=function(){var e=this;return Object.keys(this.attributes).reduce((function(t,i){return t[i]=e.attributes[i].value(e.domNode),t}),{})},e}();var A=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),P=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.attributes=new B(n.domNode),n}return A(t,e),t.formats=function(e,i){var n=i.query(t.blotName);if(null==n||e.tagName!==n.tagName)return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,i){var n=this;if(e!==this.statics.blotName||i){var r=this.scroll.query(e,o.INLINE);if(null==r)return;r instanceof w?this.attributes.attribute(r,i):!i||e===this.statics.blotName&&this.formats()[e]===i||this.replaceWith(e,i)}else this.children.forEach((function(e){e instanceof t||(e=e.wrap(t.blotName,!0)),n.attributes.copy(e)})),this.unwrap()},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.formatAt=function(t,i,n,r){null!=this.formats()[n]||this.scroll.query(n,o.ATTRIBUTE)?this.isolate(t,i).format(n,r):e.prototype.formatAt.call(this,t,i,n,r)},t.prototype.optimize=function(i){e.prototype.optimize.call(this,i);var n=this.formats();if(0===Object.keys(n).length)return this.unwrap();var o=this.next;o instanceof t&&o.prev===this&&function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var i in e)if(e[i]!==t[i])return!1;return!0}(n,o.formats())&&(o.moveChildren(this),o.remove())},t.prototype.replaceWith=function(t,i){var n=e.prototype.replaceWith.call(this,t,i);return this.attributes.copy(n),n},t.prototype.update=function(t,i){var n=this;e.prototype.update.call(this,t,i),t.some((function(e){return e.target===n.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.prototype.wrap=function(i,n){var o=e.prototype.wrap.call(this,i,n);return o instanceof t&&this.attributes.move(o),o},t.allowedChildren=[t,C],t.blotName="inline",t.scope=o.INLINE_BLOT,t.tagName="SPAN",t}(_);const M=P;var R=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),$=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.attributes=new B(n.domNode),n}return R(t,e),t.formats=function(e,i){var n=i.query(t.blotName);if(null==n||e.tagName!==n.tagName)return"string"==typeof this.tagName||(Array.isArray(this.tagName)?e.tagName.toLowerCase():void 0)},t.prototype.format=function(e,i){var n=this.scroll.query(e,o.BLOCK);null!=n&&(n instanceof w?this.attributes.attribute(n,i):e!==this.statics.blotName||i?!i||e===this.statics.blotName&&this.formats()[e]===i||this.replaceWith(e,i):this.replaceWith(t.blotName))},t.prototype.formats=function(){var e=this.attributes.values(),t=this.statics.formats(this.domNode,this.scroll);return null!=t&&(e[this.statics.blotName]=t),e},t.prototype.formatAt=function(t,i,n,r){null!=this.scroll.query(n,o.BLOCK)?this.format(n,r):e.prototype.formatAt.call(this,t,i,n,r)},t.prototype.insertAt=function(t,i,n){if(null==n||null!=this.scroll.query(i,o.INLINE))e.prototype.insertAt.call(this,t,i,n);else{var r=this.split(t);if(null==r)throw new Error("Attempt to insertAt after block boundaries");var s=this.scroll.create(i,n);r.parent.insertBefore(s,r)}},t.prototype.replaceWith=function(t,i){var n=e.prototype.replaceWith.call(this,t,i);return this.attributes.copy(n),n},t.prototype.update=function(t,i){var n=this;e.prototype.update.call(this,t,i),t.some((function(e){return e.target===n.domNode&&"attributes"===e.type}))&&this.attributes.build()},t.blotName="block",t.scope=o.BLOCK_BLOT,t.tagName="P",t.allowedChildren=[M,t,C],t}(_);const N=$;var V=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),F=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return V(t,e),t.formats=function(e,t){},t.prototype.format=function(t,i){e.prototype.formatAt.call(this,0,this.length(),t,i)},t.prototype.formatAt=function(t,i,n,o){0===t&&i===this.length()?this.format(n,o):e.prototype.formatAt.call(this,t,i,n,o)},t.prototype.formats=function(){return this.statics.formats(this.domNode,this.scroll)},t}(C);const Z=F;var H=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),L={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},j=function(e){function t(t,i){var n=e.call(this,null,i)||this;return n.registry=t,n.scroll=n,n.build(),n.observer=new MutationObserver((function(e){n.update(e)})),n.observer.observe(n.domNode,L),n.attach(),n}return H(t,e),t.prototype.create=function(e,t){return this.registry.create(this,e,t)},t.prototype.find=function(e,t){void 0===t&&(t=!1);var i=this.registry.find(e,t);return i?i.scroll===this?i:t?this.find(i.scroll.domNode.parentNode,!0):null:null},t.prototype.query=function(e,t){return void 0===t&&(t=o.ANY),this.registry.query(e,t)},t.prototype.register=function(){for(var e,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(e=this.registry).register.apply(e,t)},t.prototype.build=function(){null!=this.scroll&&e.prototype.build.call(this)},t.prototype.detach=function(){e.prototype.detach.call(this),this.observer.disconnect()},t.prototype.deleteAt=function(t,i){this.update(),0===t&&i===this.length()?this.children.forEach((function(e){e.remove()})):e.prototype.deleteAt.call(this,t,i)},t.prototype.formatAt=function(t,i,n,o){this.update(),e.prototype.formatAt.call(this,t,i,n,o)},t.prototype.insertAt=function(t,i,n){this.update(),e.prototype.insertAt.call(this,t,i,n)},t.prototype.optimize=function(t,i){var n=this;void 0===t&&(t=[]),void 0===i&&(i={}),e.prototype.optimize.call(this,i);for(var o=i.mutationsMap||new WeakMap,r=Array.from(this.observer.takeRecords());r.length>0;)t.push(r.pop());for(var s=function e(t,i){void 0===i&&(i=!0),null!=t&&t!==n&&null!=t.domNode.parentNode&&(o.has(t.domNode)||o.set(t.domNode,[]),i&&e(t.parent))},a=function e(t){o.has(t.domNode)&&(t instanceof _&&t.children.forEach(e),o.delete(t.domNode),t.optimize(i))},l=t,c=0;l.length>0;c+=1){if(c>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(l.forEach((function(e){var t=n.find(e.target,!0);null!=t&&(t.domNode===e.target&&("childList"===e.type?(s(n.find(e.previousSibling,!1)),Array.from(e.addedNodes).forEach((function(e){var t=n.find(e,!1);s(t,!1),t instanceof _&&t.children.forEach((function(e){s(e,!1)}))}))):"attributes"===e.type&&s(t.prev)),s(t))})),this.children.forEach(a),r=(l=Array.from(this.observer.takeRecords())).slice();r.length>0;)t.push(r.pop())}},t.prototype.update=function(t,i){var n=this;void 0===i&&(i={}),t=t||this.observer.takeRecords();var o=new WeakMap;t.map((function(e){var t=n.find(e.target,!0);return null==t?null:o.has(t.domNode)?(o.get(t.domNode).push(e),null):(o.set(t.domNode,[e]),t)})).forEach((function(e){null!=e&&e!==n&&o.has(e.domNode)&&e.update(o.get(e.domNode)||[],i)})),i.mutationsMap=o,o.has(this.domNode)&&e.prototype.update.call(this,o.get(this.domNode),i),this.optimize(t,i)},t.blotName="scroll",t.defaultChild=N,t.allowedChildren=[N,v],t.scope=o.BLOCK_BLOT,t.tagName="DIV",t}(_);const z=j;var W=function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();const K=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.text=n.statics.value(n.domNode),n}return W(t,e),t.create=function(e){return document.createTextNode(e)},t.value=function(e){return e.data},t.prototype.deleteAt=function(e,t){this.domNode.data=this.text=this.text.slice(0,e)+this.text.slice(e+t)},t.prototype.index=function(e,t){return this.domNode===e?t:-1},t.prototype.insertAt=function(t,i,n){null==n?(this.text=this.text.slice(0,t)+i+this.text.slice(t),this.domNode.data=this.text):e.prototype.insertAt.call(this,t,i,n)},t.prototype.length=function(){return this.text.length},t.prototype.optimize=function(i){e.prototype.optimize.call(this,i),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof t&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},t.prototype.position=function(e,t){return void 0===t&&(t=!1),[this.domNode,e]},t.prototype.split=function(e,t){if(void 0===t&&(t=!1),!t){if(0===e)return this;if(e===this.length())return this.next}var i=this.scroll.create(this.domNode.splitText(e));return this.parent.insertBefore(i,this.next||void 0),this.text=this.statics.value(this.domNode),i},t.prototype.update=function(e,t){var i=this;e.some((function(e){return"characterData"===e.type&&e.target===i.domNode}))&&(this.text=this.statics.value(this.domNode))},t.prototype.value=function(){return this.text},t.blotName="text",t.scope=o.INLINE_BLOT,t}(C)},3034:function(e,t){"use strict";var i=Object.prototype.hasOwnProperty,n="~";function o(){}function r(e,t,i){this.fn=e,this.context=t,this.once=i||!1}function s(e,t,i,o,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var a=new r(i,o||e,s),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],a]:e._events[l].push(a):(e._events[l]=a,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new o:delete e._events[t]}function l(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),l.prototype.eventNames=function(){var e,t,o=[];if(0===this._eventsCount)return o;for(t in e=this._events)i.call(e,t)&&o.push(n?t.slice(1):t);return Object.getOwnPropertySymbols?o.concat(Object.getOwnPropertySymbols(e)):o},l.prototype.listeners=function(e){var t=n?n+e:e,i=this._events[t];if(!i)return[];if(i.fn)return[i.fn];for(var o=0,r=i.length,s=new Array(r);o<r;o++)s[o]=i[o].fn;return s},l.prototype.listenerCount=function(e){var t=n?n+e:e,i=this._events[t];return i?i.fn?1:i.length:0},l.prototype.emit=function(e,t,i,o,r,s){var a=n?n+e:e;if(!this._events[a])return!1;var l,c,d=this._events[a],h=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),h){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,i),!0;case 4:return d.fn.call(d.context,t,i,o),!0;case 5:return d.fn.call(d.context,t,i,o,r),!0;case 6:return d.fn.call(d.context,t,i,o,r,s),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var u,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),h){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,i);break;case 4:d[c].fn.call(d[c].context,t,i,o);break;default:if(!l)for(u=1,l=new Array(h-1);u<h;u++)l[u-1]=arguments[u];d[c].fn.apply(d[c].context,l)}}return!0},l.prototype.on=function(e,t,i){return s(this,e,t,i,!1)},l.prototype.once=function(e,t,i){return s(this,e,t,i,!0)},l.prototype.removeListener=function(e,t,i,o){var r=n?n+e:e;if(!this._events[r])return this;if(!t)return a(this,r),this;var s=this._events[r];if(s.fn)s.fn!==t||o&&!s.once||i&&s.context!==i||a(this,r);else{for(var l=0,c=[],d=s.length;l<d;l++)(s[l].fn!==t||o&&!s[l].once||i&&s[l].context!==i)&&c.push(s[l]);c.length?this._events[r]=1===c.length?c[0]:c:a(this,r)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new o,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,void 0!==e&&(e.exports=l)},1456:e=>{var t=-1,i=1,n=0;function o(e,c,d,h){if(e===c)return e?[[n,e]]:[];if(null!=d){var u=function(e,t,i){var n="number"==typeof i?{index:i,length:0}:i.oldRange,o="number"==typeof i?null:i.newRange,r=e.length,s=t.length;if(0===n.length&&(null===o||0===o.length)){var a=n.index,l=e.slice(0,a),c=e.slice(a),d=o?o.index:null,h=a+s-r;if((null===d||d===h)&&!(h<0||h>s)){var u=t.slice(0,h);if((m=t.slice(h))===c){var f=Math.min(a,h);if((v=l.slice(0,f))===(y=u.slice(0,f)))return p(v,l.slice(f),u.slice(f),c)}}if(null===d||d===a){var _=a,m=(u=t.slice(0,_),t.slice(_));if(u===l){var g=Math.min(r-_,s-_);if((b=c.slice(c.length-g))===(C=m.slice(m.length-g)))return p(l,c.slice(0,c.length-g),m.slice(0,m.length-g),b)}}}if(n.length>0&&o&&0===o.length){var v=e.slice(0,n.index),b=e.slice(n.index+n.length);if(!(s<(f=v.length)+(g=b.length))){var y=t.slice(0,f),C=t.slice(s-g);if(v===y&&b===C)return p(v,e.slice(f,r-g),t.slice(f,s-g),b)}}return null}(e,c,d);if(u)return u}var f=s(e,c),_=e.substring(0,f);f=a(e=e.substring(f),c=c.substring(f));var m=e.substring(e.length-f),g=function(e,l){var c;if(!e)return[[i,l]];if(!l)return[[t,e]];var d=e.length>l.length?e:l,h=e.length>l.length?l:e,u=d.indexOf(h);if(-1!==u)return c=[[i,d.substring(0,u)],[n,h],[i,d.substring(u+h.length)]],e.length>l.length&&(c[0][0]=c[2][0]=t),c;if(1===h.length)return[[t,e],[i,l]];var p=function(e,t){var i=e.length>t.length?e:t,n=e.length>t.length?t:e;if(i.length<4||2*n.length<i.length)return null;function o(e,t,i){for(var n,o,r,l,c=e.substring(i,i+Math.floor(e.length/4)),d=-1,h="";-1!==(d=t.indexOf(c,d+1));){var u=s(e.substring(i),t.substring(d)),p=a(e.substring(0,i),t.substring(0,d));h.length<p+u&&(h=t.substring(d-p,d)+t.substring(d,d+u),n=e.substring(0,i-p),o=e.substring(i+u),r=t.substring(0,d-p),l=t.substring(d+u))}return 2*h.length>=e.length?[n,o,r,l,h]:null}var r,l,c,d,h,u=o(i,n,Math.ceil(i.length/4)),p=o(i,n,Math.ceil(i.length/2));return u||p?(r=p?u&&u[4].length>p[4].length?u:p:u,e.length>t.length?(l=r[0],c=r[1],d=r[2],h=r[3]):(d=r[0],h=r[1],l=r[2],c=r[3]),[l,c,d,h,r[4]]):null}(e,l);if(p){var f=p[0],_=p[1],m=p[2],g=p[3],v=p[4],b=o(f,m),y=o(_,g);return b.concat([[n,v]],y)}return function(e,n){for(var o=e.length,s=n.length,a=Math.ceil((o+s)/2),l=a,c=2*a,d=new Array(c),h=new Array(c),u=0;u<c;u++)d[u]=-1,h[u]=-1;d[l+1]=0,h[l+1]=0;for(var p=o-s,f=p%2!=0,_=0,m=0,g=0,v=0,b=0;b<a;b++){for(var y=-b+_;y<=b-m;y+=2){for(var C=l+y,w=(E=y===-b||y!==b&&d[C-1]<d[C+1]?d[C+1]:d[C-1]+1)-y;E<o&&w<s&&e.charAt(E)===n.charAt(w);)E++,w++;if(d[C]=E,E>o)m+=2;else if(w>s)_+=2;else if(f&&(I=l+p-y)>=0&&I<c&&-1!==h[I]&&E>=(S=o-h[I]))return r(e,n,E,w)}for(var x=-b+g;x<=b-v;x+=2){for(var S,I=l+x,k=(S=x===-b||x!==b&&h[I-1]<h[I+1]?h[I+1]:h[I-1]+1)-x;S<o&&k<s&&e.charAt(o-S-1)===n.charAt(s-k-1);)S++,k++;if(h[I]=S,S>o)v+=2;else if(k>s)g+=2;else if(!f){var E;if((C=l+p-x)>=0&&C<c&&-1!==d[C]&&(w=l+(E=d[C])-C,E>=(S=o-S)))return r(e,n,E,w)}}}return[[t,e],[i,n]]}(e,l)}(e=e.substring(0,e.length-f),c=c.substring(0,c.length-f));return _&&g.unshift([n,_]),m&&g.push([n,m]),l(g,h),g}function r(e,t,i,n){var r=e.substring(0,i),s=t.substring(0,n),a=e.substring(i),l=t.substring(n),c=o(r,s),d=o(a,l);return c.concat(d)}function s(e,t){if(!e||!t||e.charAt(0)!==t.charAt(0))return 0;for(var i=0,n=Math.min(e.length,t.length),o=n,r=0;i<o;)e.substring(r,o)==t.substring(r,o)?r=i=o:n=o,o=Math.floor((n-i)/2+i);return c(e.charCodeAt(o-1))&&o--,o}function a(e,t){if(!e||!t||e.slice(-1)!==t.slice(-1))return 0;for(var i=0,n=Math.min(e.length,t.length),o=n,r=0;i<o;)e.substring(e.length-o,e.length-r)==t.substring(t.length-o,t.length-r)?r=i=o:n=o,o=Math.floor((n-i)/2+i);return d(e.charCodeAt(e.length-o))&&o--,o}function l(e,o){e.push([n,""]);for(var r,c=0,d=0,p=0,f="",_="";c<e.length;)if(c<e.length-1&&!e[c][1])e.splice(c,1);else switch(e[c][0]){case i:p++,_+=e[c][1],c++;break;case t:d++,f+=e[c][1],c++;break;case n:var m=c-p-d-1;if(o){if(m>=0&&u(e[m][1])){var g=e[m][1].slice(-1);if(e[m][1]=e[m][1].slice(0,-1),f=g+f,_=g+_,!e[m][1]){e.splice(m,1),c--;var v=m-1;e[v]&&e[v][0]===i&&(p++,_=e[v][1]+_,v--),e[v]&&e[v][0]===t&&(d++,f=e[v][1]+f,v--),m=v}}h(e[c][1])&&(g=e[c][1].charAt(0),e[c][1]=e[c][1].slice(1),f+=g,_+=g)}if(c<e.length-1&&!e[c][1]){e.splice(c,1);break}if(f.length>0||_.length>0){f.length>0&&_.length>0&&(0!==(r=s(_,f))&&(m>=0?e[m][1]+=_.substring(0,r):(e.splice(0,0,[n,_.substring(0,r)]),c++),_=_.substring(r),f=f.substring(r)),0!==(r=a(_,f))&&(e[c][1]=_.substring(_.length-r)+e[c][1],_=_.substring(0,_.length-r),f=f.substring(0,f.length-r)));var b=p+d;0===f.length&&0===_.length?(e.splice(c-b,b),c-=b):0===f.length?(e.splice(c-b,b,[i,_]),c=c-b+1):0===_.length?(e.splice(c-b,b,[t,f]),c=c-b+1):(e.splice(c-b,b,[t,f],[i,_]),c=c-b+2)}0!==c&&e[c-1][0]===n?(e[c-1][1]+=e[c][1],e.splice(c,1)):c++,p=0,d=0,f="",_=""}""===e[e.length-1][1]&&e.pop();var y=!1;for(c=1;c<e.length-1;)e[c-1][0]===n&&e[c+1][0]===n&&(e[c][1].substring(e[c][1].length-e[c-1][1].length)===e[c-1][1]?(e[c][1]=e[c-1][1]+e[c][1].substring(0,e[c][1].length-e[c-1][1].length),e[c+1][1]=e[c-1][1]+e[c+1][1],e.splice(c-1,1),y=!0):e[c][1].substring(0,e[c+1][1].length)==e[c+1][1]&&(e[c-1][1]+=e[c+1][1],e[c][1]=e[c][1].substring(e[c+1][1].length)+e[c+1][1],e.splice(c+1,1),y=!0)),c++;y&&l(e,o)}function c(e){return e>=55296&&e<=56319}function d(e){return e>=56320&&e<=57343}function h(e){return d(e.charCodeAt(0))}function u(e){return c(e.charCodeAt(e.length-1))}function p(e,o,r,s){return u(e)||h(s)?null:function(e){for(var t=[],i=0;i<e.length;i++)e[i][1].length>0&&t.push(e[i]);return t}([[n,e],[t,o],[i,r],[n,s]])}function f(e,t,i){return o(e,t,i,!0)}f.INSERT=i,f.DELETE=t,f.EQUAL=n,e.exports=f},8805:(e,t,i)=>{e=i.nmd(e);var n="__lodash_hash_undefined__",o=9007199254740991,r="[object Arguments]",s="[object Boolean]",a="[object Date]",l="[object Function]",c="[object GeneratorFunction]",d="[object Map]",h="[object Number]",u="[object Object]",p="[object Promise]",f="[object RegExp]",_="[object Set]",m="[object String]",g="[object Symbol]",v="[object WeakMap]",b="[object ArrayBuffer]",y="[object DataView]",C="[object Float32Array]",w="[object Float64Array]",x="[object Int8Array]",S="[object Int16Array]",I="[object Int32Array]",k="[object Uint8Array]",E="[object Uint8ClampedArray]",O="[object Uint16Array]",T="[object Uint32Array]",D=/\w*$/,B=/^\[object .+?Constructor\]$/,A=/^(?:0|[1-9]\d*)$/,P={};P[r]=P["[object Array]"]=P[b]=P[y]=P[s]=P[a]=P[C]=P[w]=P[x]=P[S]=P[I]=P[d]=P[h]=P[u]=P[f]=P[_]=P[m]=P[g]=P[k]=P[E]=P[O]=P[T]=!0,P["[object Error]"]=P[l]=P[v]=!1;var M="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,R="object"==typeof self&&self&&self.Object===Object&&self,$=M||R||Function("return this")(),N=t&&!t.nodeType&&t,V=N&&e&&!e.nodeType&&e,F=V&&V.exports===N;function Z(e,t){return e.set(t[0],t[1]),e}function H(e,t){return e.add(t),e}function L(e,t,i,n){var o=-1,r=e?e.length:0;for(n&&r&&(i=e[++o]);++o<r;)i=t(i,e[o],o,e);return i}function j(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function z(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}function W(e,t){return function(i){return e(t(i))}}function K(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}var q,U=Array.prototype,G=Function.prototype,Y=Object.prototype,Q=$["__core-js_shared__"],X=(q=/[^.]+$/.exec(Q&&Q.keys&&Q.keys.IE_PROTO||""))?"Symbol(src)_1."+q:"",J=G.toString,ee=Y.hasOwnProperty,te=Y.toString,ie=RegExp("^"+J.call(ee).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ne=F?$.Buffer:void 0,oe=$.Symbol,re=$.Uint8Array,se=W(Object.getPrototypeOf,Object),ae=Object.create,le=Y.propertyIsEnumerable,ce=U.splice,de=Object.getOwnPropertySymbols,he=ne?ne.isBuffer:void 0,ue=W(Object.keys,Object),pe=$e($,"DataView"),fe=$e($,"Map"),_e=$e($,"Promise"),me=$e($,"Set"),ge=$e($,"WeakMap"),ve=$e(Object,"create"),be=He(pe),ye=He(fe),Ce=He(_e),we=He(me),xe=He(ge),Se=oe?oe.prototype:void 0,Ie=Se?Se.valueOf:void 0;function ke(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Ee(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Oe(e){var t=-1,i=e?e.length:0;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Te(e){this.__data__=new Ee(e)}function De(e,t,i){var n=e[t];ee.call(e,t)&&Le(n,i)&&(void 0!==i||t in e)||(e[t]=i)}function Be(e,t){for(var i=e.length;i--;)if(Le(e[i][0],t))return i;return-1}function Ae(e,t,i,n,o,p,v){var B;if(n&&(B=p?n(e,o,p,v):n(e)),void 0!==B)return B;if(!qe(e))return e;var A=je(e);if(A){if(B=function(e){var t=e.length,i=e.constructor(t);return t&&"string"==typeof e[0]&&ee.call(e,"index")&&(i.index=e.index,i.input=e.input),i}(e),!t)return function(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}(e,B)}else{var M=Ve(e),R=M==l||M==c;if(We(e))return function(e,t){if(t)return e.slice();var i=new e.constructor(e.length);return e.copy(i),i}(e,t);if(M==u||M==r||R&&!p){if(j(e))return p?e:{};if(B=function(e){return"function"!=typeof e.constructor||Ze(e)?{}:qe(t=se(e))?ae(t):{};var t}(R?{}:e),!t)return function(e,t){return Me(e,Ne(e),t)}(e,function(e,t){return e&&Me(t,Ue(t),e)}(B,e))}else{if(!P[M])return p?e:{};B=function(e,t,i,n){var o,r=e.constructor;switch(t){case b:return Pe(e);case s:case a:return new r(+e);case y:return function(e,t){var i=t?Pe(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}(e,n);case C:case w:case x:case S:case I:case k:case E:case O:case T:return function(e,t){var i=t?Pe(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}(e,n);case d:return function(e,t,i){return L(t?i(z(e),!0):z(e),Z,new e.constructor)}(e,n,i);case h:case m:return new r(e);case f:return function(e){var t=new e.constructor(e.source,D.exec(e));return t.lastIndex=e.lastIndex,t}(e);case _:return function(e,t,i){return L(t?i(K(e),!0):K(e),H,new e.constructor)}(e,n,i);case g:return o=e,Ie?Object(Ie.call(o)):{}}}(e,M,Ae,t)}}v||(v=new Te);var $=v.get(e);if($)return $;if(v.set(e,B),!A)var N=i?function(e){return function(e,t,i){var n=t(e);return je(e)?n:function(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;)e[o+i]=t[i];return e}(n,i(e))}(e,Ue,Ne)}(e):Ue(e);return function(e,t){for(var i=-1,n=e?e.length:0;++i<n&&!1!==t(e[i],i););}(N||e,(function(o,r){N&&(o=e[r=o]),De(B,r,Ae(o,t,i,n,r,e,v))})),B}function Pe(e){var t=new e.constructor(e.byteLength);return new re(t).set(new re(e)),t}function Me(e,t,i,n){i||(i={});for(var o=-1,r=t.length;++o<r;){var s=t[o],a=n?n(i[s],e[s],s,i,e):void 0;De(i,s,void 0===a?e[s]:a)}return i}function Re(e,t){var i,n,o=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?o["string"==typeof t?"string":"hash"]:o.map}function $e(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!qe(e)||(t=e,X&&X in t))&&(Ke(e)||j(e)?ie:B).test(He(e));var t}(i)?i:void 0}ke.prototype.clear=function(){this.__data__=ve?ve(null):{}},ke.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},ke.prototype.get=function(e){var t=this.__data__;if(ve){var i=t[e];return i===n?void 0:i}return ee.call(t,e)?t[e]:void 0},ke.prototype.has=function(e){var t=this.__data__;return ve?void 0!==t[e]:ee.call(t,e)},ke.prototype.set=function(e,t){return this.__data__[e]=ve&&void 0===t?n:t,this},Ee.prototype.clear=function(){this.__data__=[]},Ee.prototype.delete=function(e){var t=this.__data__,i=Be(t,e);return!(i<0||(i==t.length-1?t.pop():ce.call(t,i,1),0))},Ee.prototype.get=function(e){var t=this.__data__,i=Be(t,e);return i<0?void 0:t[i][1]},Ee.prototype.has=function(e){return Be(this.__data__,e)>-1},Ee.prototype.set=function(e,t){var i=this.__data__,n=Be(i,e);return n<0?i.push([e,t]):i[n][1]=t,this},Oe.prototype.clear=function(){this.__data__={hash:new ke,map:new(fe||Ee),string:new ke}},Oe.prototype.delete=function(e){return Re(this,e).delete(e)},Oe.prototype.get=function(e){return Re(this,e).get(e)},Oe.prototype.has=function(e){return Re(this,e).has(e)},Oe.prototype.set=function(e,t){return Re(this,e).set(e,t),this},Te.prototype.clear=function(){this.__data__=new Ee},Te.prototype.delete=function(e){return this.__data__.delete(e)},Te.prototype.get=function(e){return this.__data__.get(e)},Te.prototype.has=function(e){return this.__data__.has(e)},Te.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Ee){var n=i.__data__;if(!fe||n.length<199)return n.push([e,t]),this;i=this.__data__=new Oe(n)}return i.set(e,t),this};var Ne=de?W(de,Object):function(){return[]},Ve=function(e){return te.call(e)};function Fe(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||A.test(e))&&e>-1&&e%1==0&&e<t}function Ze(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Y)}function He(e){if(null!=e){try{return J.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Le(e,t){return e===t||e!=e&&t!=t}(pe&&Ve(new pe(new ArrayBuffer(1)))!=y||fe&&Ve(new fe)!=d||_e&&Ve(_e.resolve())!=p||me&&Ve(new me)!=_||ge&&Ve(new ge)!=v)&&(Ve=function(e){var t=te.call(e),i=t==u?e.constructor:void 0,n=i?He(i):void 0;if(n)switch(n){case be:return y;case ye:return d;case Ce:return p;case we:return _;case xe:return v}return t});var je=Array.isArray;function ze(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}(e.length)&&!Ke(e)}var We=he||function(){return!1};function Ke(e){var t=qe(e)?te.call(e):"";return t==l||t==c}function qe(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Ue(e){return ze(e)?function(e,t){var i=je(e)||function(e){return function(e){return function(e){return!!e&&"object"==typeof e}(e)&&ze(e)}(e)&&ee.call(e,"callee")&&(!le.call(e,"callee")||te.call(e)==r)}(e)?function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}(e.length,String):[],n=i.length,o=!!n;for(var s in e)!t&&!ee.call(e,s)||o&&("length"==s||Fe(s,n))||i.push(s);return i}(e):function(e){if(!Ze(e))return ue(e);var t=[];for(var i in Object(e))ee.call(e,i)&&"constructor"!=i&&t.push(i);return t}(e)}e.exports=function(e){return Ae(e,!0,!0)}},2722:(e,t,i)=>{e=i.nmd(e);var n="__lodash_hash_undefined__",o=1,r=2,s=9007199254740991,a="[object Arguments]",l="[object Array]",c="[object AsyncFunction]",d="[object Boolean]",h="[object Date]",u="[object Error]",p="[object Function]",f="[object GeneratorFunction]",_="[object Map]",m="[object Number]",g="[object Null]",v="[object Object]",b="[object Promise]",y="[object Proxy]",C="[object RegExp]",w="[object Set]",x="[object String]",S="[object Undefined]",I="[object WeakMap]",k="[object ArrayBuffer]",E="[object DataView]",O=/^\[object .+?Constructor\]$/,T=/^(?:0|[1-9]\d*)$/,D={};D["[object Float32Array]"]=D["[object Float64Array]"]=D["[object Int8Array]"]=D["[object Int16Array]"]=D["[object Int32Array]"]=D["[object Uint8Array]"]=D["[object Uint8ClampedArray]"]=D["[object Uint16Array]"]=D["[object Uint32Array]"]=!0,D[a]=D[l]=D[k]=D[d]=D[E]=D[h]=D[u]=D[p]=D[_]=D[m]=D[v]=D[C]=D[w]=D[x]=D[I]=!1;var B="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,A="object"==typeof self&&self&&self.Object===Object&&self,P=B||A||Function("return this")(),M=t&&!t.nodeType&&t,R=M&&e&&!e.nodeType&&e,$=R&&R.exports===M,N=$&&B.process,V=function(){try{return N&&N.binding&&N.binding("util")}catch(e){}}(),F=V&&V.isTypedArray;function Z(e,t){for(var i=-1,n=null==e?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}function H(e){var t=-1,i=Array(e.size);return e.forEach((function(e,n){i[++t]=[n,e]})),i}function L(e){var t=-1,i=Array(e.size);return e.forEach((function(e){i[++t]=e})),i}var j,z,W,K=Array.prototype,q=Function.prototype,U=Object.prototype,G=P["__core-js_shared__"],Y=q.toString,Q=U.hasOwnProperty,X=(j=/[^.]+$/.exec(G&&G.keys&&G.keys.IE_PROTO||""))?"Symbol(src)_1."+j:"",J=U.toString,ee=RegExp("^"+Y.call(Q).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),te=$?P.Buffer:void 0,ie=P.Symbol,ne=P.Uint8Array,oe=U.propertyIsEnumerable,re=K.splice,se=ie?ie.toStringTag:void 0,ae=Object.getOwnPropertySymbols,le=te?te.isBuffer:void 0,ce=(z=Object.keys,W=Object,function(e){return z(W(e))}),de=Re(P,"DataView"),he=Re(P,"Map"),ue=Re(P,"Promise"),pe=Re(P,"Set"),fe=Re(P,"WeakMap"),_e=Re(Object,"create"),me=Fe(de),ge=Fe(he),ve=Fe(ue),be=Fe(pe),ye=Fe(fe),Ce=ie?ie.prototype:void 0,we=Ce?Ce.valueOf:void 0;function xe(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Se(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function Ie(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function ke(e){var t=-1,i=null==e?0:e.length;for(this.__data__=new Ie;++t<i;)this.add(e[t])}function Ee(e){var t=this.__data__=new Se(e);this.size=t.size}function Oe(e,t){for(var i=e.length;i--;)if(Ze(e[i][0],t))return i;return-1}function Te(e){return null==e?void 0===e?S:g:se&&se in Object(e)?function(e){var t=Q.call(e,se),i=e[se];try{e[se]=void 0;var n=!0}catch(e){}var o=J.call(e);return n&&(t?e[se]=i:delete e[se]),o}(e):function(e){return J.call(e)}(e)}function De(e){return qe(e)&&Te(e)==a}function Be(e,t,i,n,s){return e===t||(null==e||null==t||!qe(e)&&!qe(t)?e!=e&&t!=t:function(e,t,i,n,s,c){var p=Le(e),f=Le(t),g=p?l:Ne(e),b=f?l:Ne(t),y=(g=g==a?v:g)==v,S=(b=b==a?v:b)==v,I=g==b;if(I&&je(e)){if(!je(t))return!1;p=!0,y=!1}if(I&&!y)return c||(c=new Ee),p||Ue(e)?Ae(e,t,i,n,s,c):function(e,t,i,n,s,a,l){switch(i){case E:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case k:return!(e.byteLength!=t.byteLength||!a(new ne(e),new ne(t)));case d:case h:case m:return Ze(+e,+t);case u:return e.name==t.name&&e.message==t.message;case C:case x:return e==t+"";case _:var c=H;case w:var p=n&o;if(c||(c=L),e.size!=t.size&&!p)return!1;var f=l.get(e);if(f)return f==t;n|=r,l.set(e,t);var g=Ae(c(e),c(t),n,s,a,l);return l.delete(e),g;case"[object Symbol]":if(we)return we.call(e)==we.call(t)}return!1}(e,t,g,i,n,s,c);if(!(i&o)){var O=y&&Q.call(e,"__wrapped__"),T=S&&Q.call(t,"__wrapped__");if(O||T){var D=O?e.value():e,B=T?t.value():t;return c||(c=new Ee),s(D,B,i,n,c)}}return!!I&&(c||(c=new Ee),function(e,t,i,n,r,s){var a=i&o,l=Pe(e),c=l.length;if(c!=Pe(t).length&&!a)return!1;for(var d=c;d--;){var h=l[d];if(!(a?h in t:Q.call(t,h)))return!1}var u=s.get(e);if(u&&s.get(t))return u==t;var p=!0;s.set(e,t),s.set(t,e);for(var f=a;++d<c;){var _=e[h=l[d]],m=t[h];if(n)var g=a?n(m,_,h,t,e,s):n(_,m,h,e,t,s);if(!(void 0===g?_===m||r(_,m,i,n,s):g)){p=!1;break}f||(f="constructor"==h)}if(p&&!f){var v=e.constructor,b=t.constructor;v==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof v&&v instanceof v&&"function"==typeof b&&b instanceof b||(p=!1)}return s.delete(e),s.delete(t),p}(e,t,i,n,s,c))}(e,t,i,n,Be,s))}function Ae(e,t,i,n,s,a){var l=i&o,c=e.length,d=t.length;if(c!=d&&!(l&&d>c))return!1;var h=a.get(e);if(h&&a.get(t))return h==t;var u=-1,p=!0,f=i&r?new ke:void 0;for(a.set(e,t),a.set(t,e);++u<c;){var _=e[u],m=t[u];if(n)var g=l?n(m,_,u,t,e,a):n(_,m,u,e,t,a);if(void 0!==g){if(g)continue;p=!1;break}if(f){if(!Z(t,(function(e,t){if(o=t,!f.has(o)&&(_===e||s(_,e,i,n,a)))return f.push(t);var o}))){p=!1;break}}else if(_!==m&&!s(_,m,i,n,a)){p=!1;break}}return a.delete(e),a.delete(t),p}function Pe(e){return function(e,t,i){var n=t(e);return Le(e)?n:function(e,t){for(var i=-1,n=t.length,o=e.length;++i<n;)e[o+i]=t[i];return e}(n,i(e))}(e,Ge,$e)}function Me(e,t){var i,n,o=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?o["string"==typeof t?"string":"hash"]:o.map}function Re(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Ke(e)||function(e){return!!X&&X in e}(e))&&(ze(e)?ee:O).test(Fe(e))}(i)?i:void 0}xe.prototype.clear=function(){this.__data__=_e?_e(null):{},this.size=0},xe.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},xe.prototype.get=function(e){var t=this.__data__;if(_e){var i=t[e];return i===n?void 0:i}return Q.call(t,e)?t[e]:void 0},xe.prototype.has=function(e){var t=this.__data__;return _e?void 0!==t[e]:Q.call(t,e)},xe.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=_e&&void 0===t?n:t,this},Se.prototype.clear=function(){this.__data__=[],this.size=0},Se.prototype.delete=function(e){var t=this.__data__,i=Oe(t,e);return!(i<0||(i==t.length-1?t.pop():re.call(t,i,1),--this.size,0))},Se.prototype.get=function(e){var t=this.__data__,i=Oe(t,e);return i<0?void 0:t[i][1]},Se.prototype.has=function(e){return Oe(this.__data__,e)>-1},Se.prototype.set=function(e,t){var i=this.__data__,n=Oe(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this},Ie.prototype.clear=function(){this.size=0,this.__data__={hash:new xe,map:new(he||Se),string:new xe}},Ie.prototype.delete=function(e){var t=Me(this,e).delete(e);return this.size-=t?1:0,t},Ie.prototype.get=function(e){return Me(this,e).get(e)},Ie.prototype.has=function(e){return Me(this,e).has(e)},Ie.prototype.set=function(e,t){var i=Me(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this},ke.prototype.add=ke.prototype.push=function(e){return this.__data__.set(e,n),this},ke.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.clear=function(){this.__data__=new Se,this.size=0},Ee.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},Ee.prototype.get=function(e){return this.__data__.get(e)},Ee.prototype.has=function(e){return this.__data__.has(e)},Ee.prototype.set=function(e,t){var i=this.__data__;if(i instanceof Se){var n=i.__data__;if(!he||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Ie(n)}return i.set(e,t),this.size=i.size,this};var $e=ae?function(e){return null==e?[]:(e=Object(e),function(t,i){for(var n=-1,o=null==t?0:t.length,r=0,s=[];++n<o;){var a=t[n];l=a,oe.call(e,l)&&(s[r++]=a)}var l;return s}(ae(e)))}:function(){return[]},Ne=Te;function Ve(e,t){return!!(t=null==t?s:t)&&("number"==typeof e||T.test(e))&&e>-1&&e%1==0&&e<t}function Fe(e){if(null!=e){try{return Y.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function Ze(e,t){return e===t||e!=e&&t!=t}(de&&Ne(new de(new ArrayBuffer(1)))!=E||he&&Ne(new he)!=_||ue&&Ne(ue.resolve())!=b||pe&&Ne(new pe)!=w||fe&&Ne(new fe)!=I)&&(Ne=function(e){var t=Te(e),i=t==v?e.constructor:void 0,n=i?Fe(i):"";if(n)switch(n){case me:return E;case ge:return _;case ve:return b;case be:return w;case ye:return I}return t});var He=De(function(){return arguments}())?De:function(e){return qe(e)&&Q.call(e,"callee")&&!oe.call(e,"callee")},Le=Array.isArray,je=le||function(){return!1};function ze(e){if(!Ke(e))return!1;var t=Te(e);return t==p||t==f||t==c||t==y}function We(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Ke(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function qe(e){return null!=e&&"object"==typeof e}var Ue=F?function(e){return function(t){return e(t)}}(F):function(e){return qe(e)&&We(e.length)&&!!D[Te(e)]};function Ge(e){return null!=(t=e)&&We(t.length)&&!ze(t)?function(e,t){var i=Le(e),n=!i&&He(e),o=!i&&!n&&je(e),r=!i&&!n&&!o&&Ue(e),s=i||n||o||r,a=s?function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}(e.length,String):[],l=a.length;for(var c in e)!t&&!Q.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||Ve(c,l))||a.push(c);return a}(e):function(e){if(i=(t=e)&&t.constructor,t!==("function"==typeof i&&i.prototype||U))return ce(e);var t,i,n=[];for(var o in Object(e))Q.call(e,o)&&"constructor"!=o&&n.push(o);return n}(e);var t}e.exports=function(e,t){return Be(e,t)}},732:(e,t,i)=>{e=i.nmd(e);var n="__lodash_hash_undefined__",o=9007199254740991,r="[object Arguments]",s="[object AsyncFunction]",a="[object Function]",l="[object GeneratorFunction]",c="[object Null]",d="[object Object]",h="[object Proxy]",u="[object Undefined]",p=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,_={};_["[object Float32Array]"]=_["[object Float64Array]"]=_["[object Int8Array]"]=_["[object Int16Array]"]=_["[object Int32Array]"]=_["[object Uint8Array]"]=_["[object Uint8ClampedArray]"]=_["[object Uint16Array]"]=_["[object Uint32Array]"]=!0,_[r]=_["[object Array]"]=_["[object ArrayBuffer]"]=_["[object Boolean]"]=_["[object DataView]"]=_["[object Date]"]=_["[object Error]"]=_[a]=_["[object Map]"]=_["[object Number]"]=_[d]=_["[object RegExp]"]=_["[object Set]"]=_["[object String]"]=_["[object WeakMap]"]=!1;var m,g,v,b="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,y="object"==typeof self&&self&&self.Object===Object&&self,C=b||y||Function("return this")(),w=t&&!t.nodeType&&t,x=w&&e&&!e.nodeType&&e,S=x&&x.exports===w,I=S&&b.process,k=function(){try{return x&&x.require&&x.require("util").types||I&&I.binding&&I.binding("util")}catch(e){}}(),E=k&&k.isTypedArray,O=Array.prototype,T=Function.prototype,D=Object.prototype,B=C["__core-js_shared__"],A=T.toString,P=D.hasOwnProperty,M=(m=/[^.]+$/.exec(B&&B.keys&&B.keys.IE_PROTO||""))?"Symbol(src)_1."+m:"",R=D.toString,$=A.call(Object),N=RegExp("^"+A.call(P).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),V=S?C.Buffer:void 0,F=C.Symbol,Z=C.Uint8Array,H=(V&&V.allocUnsafe,g=Object.getPrototypeOf,v=Object,function(e){return g(v(e))}),L=Object.create,j=D.propertyIsEnumerable,z=O.splice,W=F?F.toStringTag:void 0,K=function(){try{var e=ue(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),q=V?V.isBuffer:void 0,U=Math.max,G=Date.now,Y=ue(C,"Map"),Q=ue(Object,"create"),X=function(){function e(){}return function(t){if(!Se(t))return{};if(L)return L(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();function J(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function ee(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function te(e){var t=-1,i=null==e?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}function ie(e){var t=this.__data__=new ee(e);this.size=t.size}function ne(e,t,i){(void 0!==i&&!ge(e[t],i)||void 0===i&&!(t in e))&&se(e,t,i)}function oe(e,t,i){var n=e[t];P.call(e,t)&&ge(n,i)&&(void 0!==i||t in e)||se(e,t,i)}function re(e,t){for(var i=e.length;i--;)if(ge(e[i][0],t))return i;return-1}function se(e,t,i){"__proto__"==t&&K?K(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}J.prototype.clear=function(){this.__data__=Q?Q(null):{},this.size=0},J.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},J.prototype.get=function(e){var t=this.__data__;if(Q){var i=t[e];return i===n?void 0:i}return P.call(t,e)?t[e]:void 0},J.prototype.has=function(e){var t=this.__data__;return Q?void 0!==t[e]:P.call(t,e)},J.prototype.set=function(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=Q&&void 0===t?n:t,this},ee.prototype.clear=function(){this.__data__=[],this.size=0},ee.prototype.delete=function(e){var t=this.__data__,i=re(t,e);return!(i<0||(i==t.length-1?t.pop():z.call(t,i,1),--this.size,0))},ee.prototype.get=function(e){var t=this.__data__,i=re(t,e);return i<0?void 0:t[i][1]},ee.prototype.has=function(e){return re(this.__data__,e)>-1},ee.prototype.set=function(e,t){var i=this.__data__,n=re(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this},te.prototype.clear=function(){this.size=0,this.__data__={hash:new J,map:new(Y||ee),string:new J}},te.prototype.delete=function(e){var t=he(this,e).delete(e);return this.size-=t?1:0,t},te.prototype.get=function(e){return he(this,e).get(e)},te.prototype.has=function(e){return he(this,e).has(e)},te.prototype.set=function(e,t){var i=he(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this},ie.prototype.clear=function(){this.__data__=new ee,this.size=0},ie.prototype.delete=function(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i},ie.prototype.get=function(e){return this.__data__.get(e)},ie.prototype.has=function(e){return this.__data__.has(e)},ie.prototype.set=function(e,t){var i=this.__data__;if(i instanceof ee){var n=i.__data__;if(!Y||n.length<199)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new te(n)}return i.set(e,t),this.size=i.size,this};function ae(e){return null==e?void 0===e?u:c:W&&W in Object(e)?function(e){var t=P.call(e,W),i=e[W];try{e[W]=void 0;var n=!0}catch(e){}var o=R.call(e);return n&&(t?e[W]=i:delete e[W]),o}(e):function(e){return R.call(e)}(e)}function le(e){return Ie(e)&&ae(e)==r}function ce(e,t,i,n,o){e!==t&&function(e,t,i){for(var n=-1,o=Object(e),r=i(e),s=r.length;s--;){var a=r[++n];if(!1===t(o[a],a,o))break}}(t,(function(r,s){if(o||(o=new ie),Se(r))!function(e,t,i,n,o,r,s){var a=_e(e,i),l=_e(t,i),c=s.get(l);if(c)ne(e,i,c);else{var h,u,p,f,_,m=r?r(a,l,i+"",e,t,s):void 0,g=void 0===m;if(g){var v=be(l),b=!v&&Ce(l),y=!v&&!b&&ke(l);m=l,v||b||y?be(a)?m=a:Ie(_=a)&&ye(_)?m=function(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}(a):b?(g=!1,m=function(e,t){return e.slice()}(l)):y?(g=!1,f=new(p=(h=l).buffer).constructor(p.byteLength),new Z(f).set(new Z(p)),u=f,m=new h.constructor(u,h.byteOffset,h.length)):m=[]:function(e){if(!Ie(e)||ae(e)!=d)return!1;var t=H(e);if(null===t)return!0;var i=P.call(t,"constructor")&&t.constructor;return"function"==typeof i&&i instanceof i&&A.call(i)==$}(l)||ve(l)?(m=a,ve(a)?m=function(e){return function(e,t,i,n){var o=!i;i||(i={});for(var r=-1,s=t.length;++r<s;){var a=t[r],l=void 0;void 0===l&&(l=e[a]),o?se(i,a,l):oe(i,a,l)}return i}(e,Ee(e))}(a):Se(a)&&!we(a)||(m=function(e){return"function"!=typeof e.constructor||fe(e)?{}:X(H(e))}(l))):g=!1}g&&(s.set(l,m),o(m,l,n,r,s),s.delete(l)),ne(e,i,m)}}(e,t,s,i,ce,n,o);else{var a=n?n(_e(e,s),r,s+"",e,t,o):void 0;void 0===a&&(a=r),ne(e,s,a)}}),Ee)}var de=K?function(e,t){return K(e,"toString",{configurable:!0,enumerable:!1,value:(i=t,function(){return i}),writable:!0});var i}:De;function he(e,t){var i,n,o=e.__data__;return("string"==(n=typeof(i=t))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==i:null===i)?o["string"==typeof t?"string":"hash"]:o.map}function ue(e,t){var i=function(e,t){return null==e?void 0:e[t]}(e,t);return function(e){return!(!Se(e)||function(e){return!!M&&M in e}(e))&&(we(e)?N:p).test(function(e){if(null!=e){try{return A.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}(i)?i:void 0}function pe(e,t){var i=typeof e;return!!(t=null==t?o:t)&&("number"==i||"symbol"!=i&&f.test(e))&&e>-1&&e%1==0&&e<t}function fe(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||D)}function _e(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]}var me=function(e){var t=0,i=0;return function(){var n=G(),o=16-(n-i);if(i=n,o>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}(de);function ge(e,t){return e===t||e!=e&&t!=t}var ve=le(function(){return arguments}())?le:function(e){return Ie(e)&&P.call(e,"callee")&&!j.call(e,"callee")},be=Array.isArray;function ye(e){return null!=e&&xe(e.length)&&!we(e)}var Ce=q||function(){return!1};function we(e){if(!Se(e))return!1;var t=ae(e);return t==a||t==l||t==s||t==h}function xe(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=o}function Se(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Ie(e){return null!=e&&"object"==typeof e}var ke=E?function(e){return function(t){return e(t)}}(E):function(e){return Ie(e)&&xe(e.length)&&!!_[ae(e)]};function Ee(e){return ye(e)?function(e,t){var i=be(e),n=!i&&ve(e),o=!i&&!n&&Ce(e),r=!i&&!n&&!o&&ke(e),s=i||n||o||r,a=s?function(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}(e.length,String):[],l=a.length;for(var c in e)!t&&!P.call(e,c)||s&&("length"==c||o&&("offset"==c||"parent"==c)||r&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||pe(c,l))||a.push(c);return a}(e,!0):function(e){if(!Se(e))return function(e){var t=[];if(null!=e)for(var i in Object(e))t.push(i);return t}(e);var t=fe(e),i=[];for(var n in e)("constructor"!=n||!t&&P.call(e,n))&&i.push(n);return i}(e)}var Oe,Te=(Oe=function(e,t,i){ce(e,t,i)},function(e,t){return me(function(e,t,i){return t=U(void 0===t?e.length-1:t,0),function(){for(var n=arguments,o=-1,r=U(n.length-t,0),s=Array(r);++o<r;)s[o]=n[t+o];o=-1;for(var a=Array(t+1);++o<t;)a[o]=n[o];return a[t]=i(s),function(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}(e,this,a)}}(e,t,De),e+"")}((function(e,t){var i=-1,n=t.length,o=n>1?t[n-1]:void 0,r=n>2?t[2]:void 0;for(o=Oe.length>3&&"function"==typeof o?(n--,o):void 0,r&&function(e,t,i){if(!Se(i))return!1;var n=typeof t;return!!("number"==n?ye(i)&&pe(t,i.length):"string"==n&&t in i)&&ge(i[t],e)}(t[0],t[1],r)&&(o=n<3?void 0:o,n=1),e=Object(e);++i<n;){var s=t[i];s&&Oe(e,s,i)}return e})));function De(e){return e}e.exports=Te},5143:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(8805),o=i(2722);var r;!function(e){e.compose=function(e={},t={},i=!1){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});let o=n(t);i||(o=Object.keys(o).reduce(((e,t)=>(null!=o[t]&&(e[t]=o[t]),e)),{}));for(const i in e)void 0!==e[i]&&void 0===t[i]&&(o[i]=e[i]);return Object.keys(o).length>0?o:void 0},e.diff=function(e={},t={}){"object"!=typeof e&&(e={}),"object"!=typeof t&&(t={});const i=Object.keys(e).concat(Object.keys(t)).reduce(((i,n)=>(o(e[n],t[n])||(i[n]=void 0===t[n]?null:t[n]),i)),{});return Object.keys(i).length>0?i:void 0},e.invert=function(e={},t={}){e=e||{};const i=Object.keys(t).reduce(((i,n)=>(t[n]!==e[n]&&void 0!==e[n]&&(i[n]=t[n]),i)),{});return Object.keys(e).reduce(((i,n)=>(e[n]!==t[n]&&void 0===t[n]&&(i[n]=null),i)),i)},e.transform=function(e,t,i=!1){if("object"!=typeof e)return t;if("object"!=typeof t)return;if(!i)return t;const n=Object.keys(t).reduce(((i,n)=>(void 0===e[n]&&(i[n]=t[n]),i)),{});return Object.keys(n).length>0?n:void 0}}(r||(r={})),t.default=r},9098:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AttributeMap=t.OpIterator=t.Op=void 0;const n=i(1456),o=i(8805),r=i(2722),s=i(5143);t.AttributeMap=s.default;const a=i(6237);t.Op=a.default;const l=i(2849);t.OpIterator=l.default;const c=String.fromCharCode(0),d=(e,t)=>{if("object"!=typeof e||null===e)throw new Error("cannot retain a "+typeof e);if("object"!=typeof t||null===t)throw new Error("cannot retain a "+typeof t);const i=Object.keys(e)[0];if(!i||i!==Object.keys(t)[0])throw new Error(`embed types not matched: ${i} != ${Object.keys(t)[0]}`);return[i,e[i],t[i]]};class h{constructor(e){Array.isArray(e)?this.ops=e:null!=e&&Array.isArray(e.ops)?this.ops=e.ops:this.ops=[]}static registerEmbed(e,t){this.handlers[e]=t}static unregisterEmbed(e){delete this.handlers[e]}static getHandler(e){const t=this.handlers[e];if(!t)throw new Error(`no handlers for embed type "${e}"`);return t}insert(e,t){const i={};return"string"==typeof e&&0===e.length?this:(i.insert=e,null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(i.attributes=t),this.push(i))}delete(e){return e<=0?this:this.push({delete:e})}retain(e,t){if("number"==typeof e&&e<=0)return this;const i={retain:e};return null!=t&&"object"==typeof t&&Object.keys(t).length>0&&(i.attributes=t),this.push(i)}push(e){let t=this.ops.length,i=this.ops[t-1];if(e=o(e),"object"==typeof i){if("number"==typeof e.delete&&"number"==typeof i.delete)return this.ops[t-1]={delete:i.delete+e.delete},this;if("number"==typeof i.delete&&null!=e.insert&&(t-=1,i=this.ops[t-1],"object"!=typeof i))return this.ops.unshift(e),this;if(r(e.attributes,i.attributes)){if("string"==typeof e.insert&&"string"==typeof i.insert)return this.ops[t-1]={insert:i.insert+e.insert},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this;if("number"==typeof e.retain&&"number"==typeof i.retain)return this.ops[t-1]={retain:i.retain+e.retain},"object"==typeof e.attributes&&(this.ops[t-1].attributes=e.attributes),this}}return t===this.ops.length?this.ops.push(e):this.ops.splice(t,0,e),this}chop(){const e=this.ops[this.ops.length-1];return e&&"number"==typeof e.retain&&!e.attributes&&this.ops.pop(),this}filter(e){return this.ops.filter(e)}forEach(e){this.ops.forEach(e)}map(e){return this.ops.map(e)}partition(e){const t=[],i=[];return this.forEach((n=>{(e(n)?t:i).push(n)})),[t,i]}reduce(e,t){return this.ops.reduce(e,t)}changeLength(){return this.reduce(((e,t)=>t.insert?e+a.default.length(t):t.delete?e-t.delete:e),0)}length(){return this.reduce(((e,t)=>e+a.default.length(t)),0)}slice(e=0,t=1/0){const i=[],n=new l.default(this.ops);let o=0;for(;o<t&&n.hasNext();){let r;o<e?r=n.next(e-o):(r=n.next(t-o),i.push(r)),o+=a.default.length(r)}return new h(i)}compose(e){const t=new l.default(this.ops),i=new l.default(e.ops),n=[],o=i.peek();if(null!=o&&"number"==typeof o.retain&&null==o.attributes){let e=o.retain;for(;"insert"===t.peekType()&&t.peekLength()<=e;)e-=t.peekLength(),n.push(t.next());o.retain-e>0&&i.next(o.retain-e)}const a=new h(n);for(;t.hasNext()||i.hasNext();)if("insert"===i.peekType())a.push(i.next());else if("delete"===t.peekType())a.push(t.next());else{const e=Math.min(t.peekLength(),i.peekLength()),n=t.next(e),o=i.next(e);if(o.retain){const l={};if("number"==typeof n.retain)l.retain="number"==typeof o.retain?e:o.retain;else if("number"==typeof o.retain)null==n.retain?l.insert=n.insert:l.retain=n.retain;else{const e=null==n.retain?"insert":"retain",[t,i,r]=d(n[e],o.retain),s=h.getHandler(t);l[e]={[t]:s.compose(i,r,"retain"===e)}}const c=s.default.compose(n.attributes,o.attributes,"number"==typeof n.retain);if(c&&(l.attributes=c),a.push(l),!i.hasNext()&&r(a.ops[a.ops.length-1],l)){const e=new h(t.rest());return a.concat(e).chop()}}else"number"==typeof o.delete&&("number"==typeof n.retain||"object"==typeof n.retain&&null!==n.retain)&&a.push(o)}return a.chop()}concat(e){const t=new h(this.ops.slice());return e.ops.length>0&&(t.push(e.ops[0]),t.ops=t.ops.concat(e.ops.slice(1))),t}diff(e,t){if(this.ops===e.ops)return new h;const i=[this,e].map((t=>t.map((i=>{if(null!=i.insert)return"string"==typeof i.insert?i.insert:c;throw new Error("diff() called "+(t===e?"on":"with")+" non-document")})).join(""))),o=new h,a=n(i[0],i[1],t),d=new l.default(this.ops),u=new l.default(e.ops);return a.forEach((e=>{let t=e[1].length;for(;t>0;){let i=0;switch(e[0]){case n.INSERT:i=Math.min(u.peekLength(),t),o.push(u.next(i));break;case n.DELETE:i=Math.min(t,d.peekLength()),d.next(i),o.delete(i);break;case n.EQUAL:i=Math.min(d.peekLength(),u.peekLength(),t);const e=d.next(i),a=u.next(i);r(e.insert,a.insert)?o.retain(i,s.default.diff(e.attributes,a.attributes)):o.push(a).delete(i)}t-=i}})),o.chop()}eachLine(e,t="\n"){const i=new l.default(this.ops);let n=new h,o=0;for(;i.hasNext();){if("insert"!==i.peekType())return;const r=i.peek(),s=a.default.length(r)-i.peekLength(),l="string"==typeof r.insert?r.insert.indexOf(t,s)-s:-1;if(l<0)n.push(i.next());else if(l>0)n.push(i.next(l));else{if(!1===e(n,i.next(1).attributes||{},o))return;o+=1,n=new h}}n.length()>0&&e(n,{},o)}invert(e){const t=new h;return this.reduce(((i,n)=>{if(n.insert)t.delete(a.default.length(n));else{if("number"==typeof n.retain&&null==n.attributes)return t.retain(n.retain),i+n.retain;if(n.delete||"number"==typeof n.retain){const o=n.delete||n.retain;return e.slice(i,i+o).forEach((e=>{n.delete?t.push(e):n.retain&&n.attributes&&t.retain(a.default.length(e),s.default.invert(n.attributes,e.attributes))})),i+o}if("object"==typeof n.retain&&null!==n.retain){const o=e.slice(i,i+1),r=new l.default(o.ops).next(),[a,c,u]=d(n.retain,r.insert),p=h.getHandler(a);return t.retain({[a]:p.invert(c,u)},s.default.invert(n.attributes,r.attributes)),i+1}}return i}),0),t.chop()}transform(e,t=!1){if(t=!!t,"number"==typeof e)return this.transformPosition(e,t);const i=e,n=new l.default(this.ops),o=new l.default(i.ops),r=new h;for(;n.hasNext()||o.hasNext();)if("insert"!==n.peekType()||!t&&"insert"===o.peekType())if("insert"===o.peekType())r.push(o.next());else{const e=Math.min(n.peekLength(),o.peekLength()),i=n.next(e),a=o.next(e);if(i.delete)continue;if(a.delete)r.push(a);else{const n=i.retain,o=a.retain;let l="object"==typeof o&&null!==o?o:e;if("object"==typeof n&&null!==n&&"object"==typeof o&&null!==o){const e=Object.keys(n)[0];if(e===Object.keys(o)[0]){const i=h.getHandler(e);i&&(l={[e]:i.transform(n[e],o[e],t)})}}r.retain(l,s.default.transform(i.attributes,a.attributes,t))}}else r.retain(a.default.length(n.next()));return r.chop()}transformPosition(e,t=!1){t=!!t;const i=new l.default(this.ops);let n=0;for(;i.hasNext()&&n<=e;){const o=i.peekLength(),r=i.peekType();i.next(),"delete"!==r?("insert"===r&&(n<e||!t)&&(e+=o),n+=o):e-=Math.min(o,e-n)}return e}}h.Op=a.default,h.OpIterator=l.default,h.AttributeMap=s.default,h.handlers={},t.default=h,e.exports=h,e.exports.default=h},6237:(e,t)=>{"use strict";var i;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.length=function(e){return"number"==typeof e.delete?e.delete:"number"==typeof e.retain?e.retain:"object"==typeof e.retain&&null!==e.retain?1:"string"==typeof e.insert?e.insert.length:1}}(i||(i={})),t.default=i},2849:(e,t,i)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=i(6237);t.default=class{constructor(e){this.ops=e,this.index=0,this.offset=0}hasNext(){return this.peekLength()<1/0}next(e){e||(e=1/0);const t=this.ops[this.index];if(t){const i=this.offset,o=n.default.length(t);if(e>=o-i?(e=o-i,this.index+=1,this.offset=0):this.offset+=e,"number"==typeof t.delete)return{delete:e};{const n={};return t.attributes&&(n.attributes=t.attributes),"number"==typeof t.retain?n.retain=e:"object"==typeof t.retain&&null!==t.retain?n.retain=t.retain:"string"==typeof t.insert?n.insert=t.insert.substr(i,e):n.insert=t.insert,n}}return{retain:1/0}}peek(){return this.ops[this.index]}peekLength(){return this.ops[this.index]?n.default.length(this.ops[this.index])-this.offset:1/0}peekType(){const e=this.ops[this.index];return e?"number"==typeof e.delete?"delete":"number"==typeof e.retain||"object"==typeof e.retain&&null!==e.retain?"retain":"insert":"retain"}rest(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);{const e=this.offset,t=this.index,i=this.next(),n=this.ops.slice(this.index);return this.offset=e,this.index=t,[i].concat(n)}}return[]}}},1863:(e,t,i)=>{"use strict";var n=i(9731);e.exports=n},6572:(e,t,i)=>{"use strict";var n=i(4401);e.exports=n},2318:(e,t,i)=>{"use strict";var n=i(3661);e.exports=n},576:(e,t,i)=>{"use strict";var n=i(5606);e.exports=n},2327:(e,t,i)=>{"use strict";i(5445);var n=i(6731);e.exports=n("Array","fill")},3274:(e,t,i)=>{"use strict";i(9477),i(6272);var n=i(577);e.exports=n.Array.from},5339:(e,t,i)=>{"use strict";i(2947);var n=i(577);e.exports=n.Object.values},1189:(e,t,i)=>{"use strict";i(538);var n=i(6731);e.exports=n("String","endsWith")},5142:(e,t,i)=>{"use strict";i(297)},1019:(e,t,i)=>{"use strict";i(4660)},1183:(e,t,i)=>{"use strict";i(5275)},2570:(e,t,i)=>{"use strict";i(2839)},297:(e,t,i)=>{"use strict";var n=i(1863);e.exports=n},4660:(e,t,i)=>{"use strict";var n=i(6572);e.exports=n},5275:(e,t,i)=>{"use strict";var n=i(2318);e.exports=n},2839:(e,t,i)=>{"use strict";var n=i(576);e.exports=n},6324:(e,t,i)=>{"use strict";var n=i(2539),o=i(7471),r=TypeError;e.exports=function(e){if(n(e))return e;throw new r(o(e)+" is not a function")}},2162:(e,t,i)=>{"use strict";var n=i(2539),o=String,r=TypeError;e.exports=function(e){if("object"==typeof e||n(e))return e;throw new r("Can't set "+o(e)+" as a prototype")}},2572:(e,t,i)=>{"use strict";var n=i(5485),o=i(3830),r=i(8503).f,s=n("unscopables"),a=Array.prototype;void 0===a[s]&&r(a,s,{configurable:!0,value:o(null)}),e.exports=function(e){a[s][e]=!0}},8874:(e,t,i)=>{"use strict";var n=i(3988),o=String,r=TypeError;e.exports=function(e){if(n(e))return e;throw new r(o(e)+" is not an object")}},9236:(e,t,i)=>{"use strict";var n=i(6015),o=i(7234),r=i(3235);e.exports=function(e){for(var t=n(this),i=r(t),s=arguments.length,a=o(s>1?arguments[1]:void 0,i),l=s>2?arguments[2]:void 0,c=void 0===l?i:o(l,i);c>a;)t[a++]=e;return t}},8459:(e,t,i)=>{"use strict";var n=i(9794),o=i(2977),r=i(6015),s=i(9154),a=i(7024),l=i(6467),c=i(3235),d=i(3003),h=i(2387),u=i(7874),p=Array;e.exports=function(e){var t=r(e),i=l(this),f=arguments.length,_=f>1?arguments[1]:void 0,m=void 0!==_;m&&(_=n(_,f>2?arguments[2]:void 0));var g,v,b,y,C,w,x=u(t),S=0;if(!x||this===p&&a(x))for(g=c(t),v=i?new this(g):p(g);g>S;S++)w=m?_(t[S],S):t[S],d(v,S,w);else for(C=(y=h(t,x)).next,v=i?new this:[];!(b=o(C,y)).done;S++)w=m?s(y,_,[b.value,S],!0):b.value,d(v,S,w);return v.length=S,v}},5644:(e,t,i)=>{"use strict";var n=i(7625),o=i(7234),r=i(3235),s=function(e){return function(t,i,s){var a,l=n(t),c=r(l),d=o(s,c);if(e&&i!=i){for(;c>d;)if((a=l[d++])!=a)return!0}else for(;c>d;d++)if((e||d in l)&&l[d]===i)return e||d||0;return!e&&-1}};e.exports={includes:s(!0),indexOf:s(!1)}},9154:(e,t,i)=>{"use strict";var n=i(8874),o=i(8880);e.exports=function(e,t,i,r){try{return r?t(n(i)[0],i[1]):t(i)}catch(t){o(e,"throw",t)}}},3346:(e,t,i)=>{"use strict";var n=i(5485)("iterator"),o=!1;try{var r=0,s={next:function(){return{done:!!r++}},return:function(){o=!0}};s[n]=function(){return this},Array.from(s,(function(){throw 2}))}catch(e){}e.exports=function(e,t){try{if(!t&&!o)return!1}catch(e){return!1}var i=!1;try{var r={};r[n]=function(){return{next:function(){return{done:i=!0}}}},e(r)}catch(e){}return i}},4545:(e,t,i)=>{"use strict";var n=i(4038),o=n({}.toString),r=n("".slice);e.exports=function(e){return r(o(e),8,-1)}},2702:(e,t,i)=>{"use strict";var n=i(1923),o=i(2539),r=i(4545),s=i(5485)("toStringTag"),a=Object,l="Arguments"===r(function(){return arguments}());e.exports=n?r:function(e){var t,i,n;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(i=function(e,t){try{return e[t]}catch(e){}}(t=a(e),s))?i:l?r(t):"Object"===(n=r(t))&&o(t.callee)?"Arguments":n}},1358:(e,t,i)=>{"use strict";var n=i(2623),o=i(3054),r=i(3037),s=i(8503);e.exports=function(e,t,i){for(var a=o(t),l=s.f,c=r.f,d=0;d<a.length;d++){var h=a[d];n(e,h)||i&&n(i,h)||l(e,h,c(t,h))}}},6775:(e,t,i)=>{"use strict";var n=i(5485)("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(i){try{return t[n]=!1,"/./"[e](t)}catch(e){}}return!1}},6141:(e,t,i)=>{"use strict";var n=i(5202);e.exports=!n((function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}))},3585:e=>{"use strict";e.exports=function(e,t){return{value:e,done:t}}},8868:(e,t,i)=>{"use strict";var n=i(5007),o=i(8503),r=i(4238);e.exports=n?function(e,t,i){return o.f(e,t,r(1,i))}:function(e,t,i){return e[t]=i,e}},4238:e=>{"use strict";e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},3003:(e,t,i)=>{"use strict";var n=i(3164),o=i(8503),r=i(4238);e.exports=function(e,t,i){var s=n(t);s in e?o.f(e,s,r(0,i)):e[s]=i}},916:(e,t,i)=>{"use strict";var n=i(2539),o=i(8503),r=i(6614),s=i(2136);e.exports=function(e,t,i,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:t;if(n(i)&&r(i,c,a),a.global)l?e[t]=i:s(t,i);else{try{a.unsafe?e[t]&&(l=!0):delete e[t]}catch(e){}l?e[t]=i:o.f(e,t,{value:i,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return e}},2136:(e,t,i)=>{"use strict";var n=i(730),o=Object.defineProperty;e.exports=function(e,t){try{o(n,e,{value:t,configurable:!0,writable:!0})}catch(i){n[e]=t}return t}},5007:(e,t,i)=>{"use strict";var n=i(5202);e.exports=!n((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},8629:e=>{"use strict";var t="object"==typeof document&&document.all,i=void 0===t&&void 0!==t;e.exports={all:t,IS_HTMLDDA:i}},2215:(e,t,i)=>{"use strict";var n=i(730),o=i(3988),r=n.document,s=o(r)&&o(r.createElement);e.exports=function(e){return s?r.createElement(e):{}}},932:e=>{"use strict";e.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7626:(e,t,i)=>{"use strict";var n,o,r=i(730),s=i(932),a=r.process,l=r.Deno,c=a&&a.versions||l&&l.version,d=c&&c.v8;d&&(o=(n=d.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&s&&(!(n=s.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=s.match(/Chrome\/(\d+)/))&&(o=+n[1]),e.exports=o},6731:(e,t,i)=>{"use strict";var n=i(730),o=i(4038);e.exports=function(e,t){return o(n[e].prototype[t])}},8552:e=>{"use strict";e.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},2189:(e,t,i)=>{"use strict";var n=i(730),o=i(3037).f,r=i(8868),s=i(916),a=i(2136),l=i(1358),c=i(3455);e.exports=function(e,t){var i,d,h,u,p,f=e.target,_=e.global,m=e.stat;if(i=_?n:m?n[f]||a(f,{}):(n[f]||{}).prototype)for(d in t){if(u=t[d],h=e.dontCallGetSet?(p=o(i,d))&&p.value:i[d],!c(_?d:f+(m?".":"#")+d,e.forced)&&void 0!==h){if(typeof u==typeof h)continue;l(u,h)}(e.sham||h&&h.sham)&&r(u,"sham",!0),s(i,d,u,e)}}},5202:e=>{"use strict";e.exports=function(e){try{return!!e()}catch(e){return!0}}},9794:(e,t,i)=>{"use strict";var n=i(6192),o=i(6324),r=i(2865),s=n(n.bind);e.exports=function(e,t){return o(e),void 0===t?e:r?s(e,t):function(){return e.apply(t,arguments)}}},2865:(e,t,i)=>{"use strict";var n=i(5202);e.exports=!n((function(){var e=function(){}.bind();return"function"!=typeof e||e.hasOwnProperty("prototype")}))},2977:(e,t,i)=>{"use strict";var n=i(2865),o=Function.prototype.call;e.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},9895:(e,t,i)=>{"use strict";var n=i(5007),o=i(2623),r=Function.prototype,s=n&&Object.getOwnPropertyDescriptor,a=o(r,"name"),l=a&&"something"===function(){}.name,c=a&&(!n||n&&s(r,"name").configurable);e.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},6589:(e,t,i)=>{"use strict";var n=i(4038),o=i(6324);e.exports=function(e,t,i){try{return n(o(Object.getOwnPropertyDescriptor(e,t)[i]))}catch(e){}}},6192:(e,t,i)=>{"use strict";var n=i(4545),o=i(4038);e.exports=function(e){if("Function"===n(e))return o(e)}},4038:(e,t,i)=>{"use strict";var n=i(2865),o=Function.prototype,r=o.call,s=n&&o.bind.bind(r,r);e.exports=n?s:function(e){return function(){return r.apply(e,arguments)}}},7300:(e,t,i)=>{"use strict";var n=i(730),o=i(2539);e.exports=function(e,t){return arguments.length<2?(i=n[e],o(i)?i:void 0):n[e]&&n[e][t];var i}},7874:(e,t,i)=>{"use strict";var n=i(2702),o=i(3923),r=i(2219),s=i(7817),a=i(5485)("iterator");e.exports=function(e){if(!r(e))return o(e,a)||o(e,"@@iterator")||s[n(e)]}},2387:(e,t,i)=>{"use strict";var n=i(2977),o=i(6324),r=i(8874),s=i(7471),a=i(7874),l=TypeError;e.exports=function(e,t){var i=arguments.length<2?a(e):t;if(o(i))return r(n(i,e));throw new l(s(e)+" is not iterable")}},3923:(e,t,i)=>{"use strict";var n=i(6324),o=i(2219);e.exports=function(e,t){var i=e[t];return o(i)?void 0:n(i)}},730:function(e,t,i){"use strict";var n=function(e){return e&&e.Math===Math&&e};e.exports=n("object"==typeof globalThis&&globalThis)||n("object"==typeof window&&window)||n("object"==typeof self&&self)||n("object"==typeof i.g&&i.g)||n("object"==typeof this&&this)||function(){return this}()||Function("return this")()},2623:(e,t,i)=>{"use strict";var n=i(4038),o=i(6015),r=n({}.hasOwnProperty);e.exports=Object.hasOwn||function(e,t){return r(o(e),t)}},7467:e=>{"use strict";e.exports={}},845:(e,t,i)=>{"use strict";var n=i(7300);e.exports=n("document","documentElement")},2470:(e,t,i)=>{"use strict";var n=i(5007),o=i(5202),r=i(2215);e.exports=!n&&!o((function(){return 7!==Object.defineProperty(r("div"),"a",{get:function(){return 7}}).a}))},6854:(e,t,i)=>{"use strict";var n=i(4038),o=i(5202),r=i(4545),s=Object,a=n("".split);e.exports=o((function(){return!s("z").propertyIsEnumerable(0)}))?function(e){return"String"===r(e)?a(e,""):s(e)}:s},7821:(e,t,i)=>{"use strict";var n=i(4038),o=i(2539),r=i(6838),s=n(Function.toString);o(r.inspectSource)||(r.inspectSource=function(e){return s(e)}),e.exports=r.inspectSource},5378:(e,t,i)=>{"use strict";var n,o,r,s=i(2543),a=i(730),l=i(3988),c=i(8868),d=i(2623),h=i(6838),u=i(3511),p=i(7467),f="Object already initialized",_=a.TypeError,m=a.WeakMap;if(s||h.state){var g=h.state||(h.state=new m);g.get=g.get,g.has=g.has,g.set=g.set,n=function(e,t){if(g.has(e))throw new _(f);return t.facade=e,g.set(e,t),t},o=function(e){return g.get(e)||{}},r=function(e){return g.has(e)}}else{var v=u("state");p[v]=!0,n=function(e,t){if(d(e,v))throw new _(f);return t.facade=e,c(e,v,t),t},o=function(e){return d(e,v)?e[v]:{}},r=function(e){return d(e,v)}}e.exports={set:n,get:o,has:r,enforce:function(e){return r(e)?o(e):n(e,{})},getterFor:function(e){return function(t){var i;if(!l(t)||(i=o(t)).type!==e)throw new _("Incompatible receiver, "+e+" required");return i}}}},7024:(e,t,i)=>{"use strict";var n=i(5485),o=i(7817),r=n("iterator"),s=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||s[r]===e)}},2539:(e,t,i)=>{"use strict";var n=i(8629),o=n.all;e.exports=n.IS_HTMLDDA?function(e){return"function"==typeof e||e===o}:function(e){return"function"==typeof e}},6467:(e,t,i)=>{"use strict";var n=i(4038),o=i(5202),r=i(2539),s=i(2702),a=i(7300),l=i(7821),c=function(){},d=[],h=a("Reflect","construct"),u=/^\s*(?:class|function)\b/,p=n(u.exec),f=!u.test(c),_=function(e){if(!r(e))return!1;try{return h(c,d,e),!0}catch(e){return!1}},m=function(e){if(!r(e))return!1;switch(s(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return f||!!p(u,l(e))}catch(e){return!0}};m.sham=!0,e.exports=!h||o((function(){var e;return _(_.call)||!_(Object)||!_((function(){e=!0}))||e}))?m:_},3455:(e,t,i)=>{"use strict";var n=i(5202),o=i(2539),r=/#|\.prototype\./,s=function(e,t){var i=l[a(e)];return i===d||i!==c&&(o(t)?n(t):!!t)},a=s.normalize=function(e){return String(e).replace(r,".").toLowerCase()},l=s.data={},c=s.NATIVE="N",d=s.POLYFILL="P";e.exports=s},2219:e=>{"use strict";e.exports=function(e){return null==e}},3988:(e,t,i)=>{"use strict";var n=i(2539),o=i(8629),r=o.all;e.exports=o.IS_HTMLDDA?function(e){return"object"==typeof e?null!==e:n(e)||e===r}:function(e){return"object"==typeof e?null!==e:n(e)}},4708:e=>{"use strict";e.exports=!1},184:(e,t,i)=>{"use strict";var n=i(3988),o=i(4545),r=i(5485)("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[r])?!!t:"RegExp"===o(e))}},8820:(e,t,i)=>{"use strict";var n=i(7300),o=i(2539),r=i(7676),s=i(3713),a=Object;e.exports=s?function(e){return"symbol"==typeof e}:function(e){var t=n("Symbol");return o(t)&&r(t.prototype,a(e))}},8880:(e,t,i)=>{"use strict";var n=i(2977),o=i(8874),r=i(3923);e.exports=function(e,t,i){var s,a;o(e);try{if(!(s=r(e,"return"))){if("throw"===t)throw i;return i}s=n(s,e)}catch(e){a=!0,s=e}if("throw"===t)throw i;if(a)throw s;return o(s),i}},3450:(e,t,i)=>{"use strict";var n=i(344).IteratorPrototype,o=i(3830),r=i(4238),s=i(3506),a=i(7817),l=function(){return this};e.exports=function(e,t,i,c){var d=t+" Iterator";return e.prototype=o(n,{next:r(+!c,i)}),s(e,d,!1,!0),a[d]=l,e}},3174:(e,t,i)=>{"use strict";var n=i(2189),o=i(2977),r=i(4708),s=i(9895),a=i(2539),l=i(3450),c=i(8059),d=i(5502),h=i(3506),u=i(8868),p=i(916),f=i(5485),_=i(7817),m=i(344),g=s.PROPER,v=s.CONFIGURABLE,b=m.IteratorPrototype,y=m.BUGGY_SAFARI_ITERATORS,C=f("iterator"),w="keys",x="values",S="entries",I=function(){return this};e.exports=function(e,t,i,s,f,m,k){l(i,t,s);var E,O,T,D=function(e){if(e===f&&R)return R;if(!y&&e&&e in P)return P[e];switch(e){case w:case x:case S:return function(){return new i(this,e)}}return function(){return new i(this)}},B=t+" Iterator",A=!1,P=e.prototype,M=P[C]||P["@@iterator"]||f&&P[f],R=!y&&M||D(f),$="Array"===t&&P.entries||M;if($&&(E=c($.call(new e)))!==Object.prototype&&E.next&&(r||c(E)===b||(d?d(E,b):a(E[C])||p(E,C,I)),h(E,B,!0,!0),r&&(_[B]=I)),g&&f===x&&M&&M.name!==x&&(!r&&v?u(P,"name",x):(A=!0,R=function(){return o(M,this)})),f)if(O={values:D(x),keys:m?R:D(w),entries:D(S)},k)for(T in O)(y||A||!(T in P))&&p(P,T,O[T]);else n({target:t,proto:!0,forced:y||A},O);return r&&!k||P[C]===R||p(P,C,R,{name:f}),_[t]=R,O}},344:(e,t,i)=>{"use strict";var n,o,r,s=i(5202),a=i(2539),l=i(3988),c=i(3830),d=i(8059),h=i(916),u=i(5485),p=i(4708),f=u("iterator"),_=!1;[].keys&&("next"in(r=[].keys())?(o=d(d(r)))!==Object.prototype&&(n=o):_=!0),!l(n)||s((function(){var e={};return n[f].call(e)!==e}))?n={}:p&&(n=c(n)),a(n[f])||h(n,f,(function(){return this})),e.exports={IteratorPrototype:n,BUGGY_SAFARI_ITERATORS:_}},7817:e=>{"use strict";e.exports={}},3235:(e,t,i)=>{"use strict";var n=i(3627);e.exports=function(e){return n(e.length)}},6614:(e,t,i)=>{"use strict";var n=i(4038),o=i(5202),r=i(2539),s=i(2623),a=i(5007),l=i(9895).CONFIGURABLE,c=i(7821),d=i(5378),h=d.enforce,u=d.get,p=String,f=Object.defineProperty,_=n("".slice),m=n("".replace),g=n([].join),v=a&&!o((function(){return 8!==f((function(){}),"length",{value:8}).length})),b=String(String).split("String"),y=e.exports=function(e,t,i){"Symbol("===_(p(t),0,7)&&(t="["+m(p(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),i&&i.getter&&(t="get "+t),i&&i.setter&&(t="set "+t),(!s(e,"name")||l&&e.name!==t)&&(a?f(e,"name",{value:t,configurable:!0}):e.name=t),v&&i&&s(i,"arity")&&e.length!==i.arity&&f(e,"length",{value:i.arity});try{i&&s(i,"constructor")&&i.constructor?a&&f(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(e){}var n=h(e);return s(n,"source")||(n.source=g(b,"string"==typeof t?t:"")),e};Function.prototype.toString=y((function(){return r(this)&&u(this).source||c(this)}),"toString")},3041:e=>{"use strict";var t=Math.ceil,i=Math.floor;e.exports=Math.trunc||function(e){var n=+e;return(n>0?i:t)(n)}},50:(e,t,i)=>{"use strict";var n=i(184),o=TypeError;e.exports=function(e){if(n(e))throw new o("The method doesn't accept regular expressions");return e}},3830:(e,t,i)=>{"use strict";var n,o=i(8874),r=i(3944),s=i(8552),a=i(7467),l=i(845),c=i(2215),d=i(3511),h="prototype",u="script",p=d("IE_PROTO"),f=function(){},_=function(e){return"<"+u+">"+e+"</"+u+">"},m=function(e){e.write(_("")),e.close();var t=e.parentWindow.Object;return e=null,t},g=function(){try{n=new ActiveXObject("htmlfile")}catch(e){}var e,t,i;g="undefined"!=typeof document?document.domain&&n?m(n):(t=c("iframe"),i="java"+u+":",t.style.display="none",l.appendChild(t),t.src=String(i),(e=t.contentWindow.document).open(),e.write(_("document.F=Object")),e.close(),e.F):m(n);for(var o=s.length;o--;)delete g[h][s[o]];return g()};a[p]=!0,e.exports=Object.create||function(e,t){var i;return null!==e?(f[h]=o(e),i=new f,f[h]=null,i[p]=e):i=g(),void 0===t?i:r.f(i,t)}},3944:(e,t,i)=>{"use strict";var n=i(5007),o=i(2268),r=i(8503),s=i(8874),a=i(7625),l=i(4254);t.f=n&&!o?Object.defineProperties:function(e,t){s(e);for(var i,n=a(t),o=l(t),c=o.length,d=0;c>d;)r.f(e,i=o[d++],n[i]);return e}},8503:(e,t,i)=>{"use strict";var n=i(5007),o=i(2470),r=i(2268),s=i(8874),a=i(3164),l=TypeError,c=Object.defineProperty,d=Object.getOwnPropertyDescriptor,h="enumerable",u="configurable",p="writable";t.f=n?r?function(e,t,i){if(s(e),t=a(t),s(i),"function"==typeof e&&"prototype"===t&&"value"in i&&p in i&&!i[p]){var n=d(e,t);n&&n[p]&&(e[t]=i.value,i={configurable:u in i?i[u]:n[u],enumerable:h in i?i[h]:n[h],writable:!1})}return c(e,t,i)}:c:function(e,t,i){if(s(e),t=a(t),s(i),o)try{return c(e,t,i)}catch(e){}if("get"in i||"set"in i)throw new l("Accessors not supported");return"value"in i&&(e[t]=i.value),e}},3037:(e,t,i)=>{"use strict";var n=i(5007),o=i(2977),r=i(6251),s=i(4238),a=i(7625),l=i(3164),c=i(2623),d=i(2470),h=Object.getOwnPropertyDescriptor;t.f=n?h:function(e,t){if(e=a(e),t=l(t),d)try{return h(e,t)}catch(e){}if(c(e,t))return s(!o(r.f,e,t),e[t])}},5974:(e,t,i)=>{"use strict";var n=i(7862),o=i(8552).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return n(e,o)}},1526:(e,t)=>{"use strict";t.f=Object.getOwnPropertySymbols},8059:(e,t,i)=>{"use strict";var n=i(2623),o=i(2539),r=i(6015),s=i(3511),a=i(6141),l=s("IE_PROTO"),c=Object,d=c.prototype;e.exports=a?c.getPrototypeOf:function(e){var t=r(e);if(n(t,l))return t[l];var i=t.constructor;return o(i)&&t instanceof i?i.prototype:t instanceof c?d:null}},7676:(e,t,i)=>{"use strict";var n=i(4038);e.exports=n({}.isPrototypeOf)},7862:(e,t,i)=>{"use strict";var n=i(4038),o=i(2623),r=i(7625),s=i(5644).indexOf,a=i(7467),l=n([].push);e.exports=function(e,t){var i,n=r(e),c=0,d=[];for(i in n)!o(a,i)&&o(n,i)&&l(d,i);for(;t.length>c;)o(n,i=t[c++])&&(~s(d,i)||l(d,i));return d}},4254:(e,t,i)=>{"use strict";var n=i(7862),o=i(8552);e.exports=Object.keys||function(e){return n(e,o)}},6251:(e,t)=>{"use strict";var i={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!i.call({1:2},1);t.f=o?function(e){var t=n(this,e);return!!t&&t.enumerable}:i},5502:(e,t,i)=>{"use strict";var n=i(6589),o=i(8874),r=i(2162);e.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var e,t=!1,i={};try{(e=n(Object.prototype,"__proto__","set"))(i,[]),t=i instanceof Array}catch(e){}return function(i,n){return o(i),r(n),t?e(i,n):i.__proto__=n,i}}():void 0)},7830:(e,t,i)=>{"use strict";var n=i(5007),o=i(5202),r=i(4038),s=i(8059),a=i(4254),l=i(7625),c=r(i(6251).f),d=r([].push),h=n&&o((function(){var e=Object.create(null);return e[2]=2,!c(e,2)})),u=function(e){return function(t){for(var i,o=l(t),r=a(o),u=h&&null===s(o),p=r.length,f=0,_=[];p>f;)i=r[f++],n&&!(u?i in o:c(o,i))||d(_,e?[i,o[i]]:o[i]);return _}};e.exports={entries:u(!0),values:u(!1)}},532:(e,t,i)=>{"use strict";var n=i(2977),o=i(2539),r=i(3988),s=TypeError;e.exports=function(e,t){var i,a;if("string"===t&&o(i=e.toString)&&!r(a=n(i,e)))return a;if(o(i=e.valueOf)&&!r(a=n(i,e)))return a;if("string"!==t&&o(i=e.toString)&&!r(a=n(i,e)))return a;throw new s("Can't convert object to primitive value")}},3054:(e,t,i)=>{"use strict";var n=i(7300),o=i(4038),r=i(5974),s=i(1526),a=i(8874),l=o([].concat);e.exports=n("Reflect","ownKeys")||function(e){var t=r.f(a(e)),i=s.f;return i?l(t,i(e)):t}},577:(e,t,i)=>{"use strict";var n=i(730);e.exports=n},6373:(e,t,i)=>{"use strict";var n=i(2219),o=TypeError;e.exports=function(e){if(n(e))throw new o("Can't call method on "+e);return e}},3506:(e,t,i)=>{"use strict";var n=i(8503).f,o=i(2623),r=i(5485)("toStringTag");e.exports=function(e,t,i){e&&!i&&(e=e.prototype),e&&!o(e,r)&&n(e,r,{configurable:!0,value:t})}},3511:(e,t,i)=>{"use strict";var n=i(6568),o=i(2858),r=n("keys");e.exports=function(e){return r[e]||(r[e]=o(e))}},6838:(e,t,i)=>{"use strict";var n=i(730),o=i(2136),r="__core-js_shared__",s=n[r]||o(r,{});e.exports=s},6568:(e,t,i)=>{"use strict";var n=i(4708),o=i(6838);(e.exports=function(e,t){return o[e]||(o[e]=void 0!==t?t:{})})("versions",[]).push({version:"3.34.0",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.34.0/LICENSE",source:"https://github.com/zloirock/core-js"})},6365:(e,t,i)=>{"use strict";var n=i(4038),o=i(3550),r=i(2532),s=i(6373),a=n("".charAt),l=n("".charCodeAt),c=n("".slice),d=function(e){return function(t,i){var n,d,h=r(s(t)),u=o(i),p=h.length;return u<0||u>=p?e?"":void 0:(n=l(h,u))<55296||n>56319||u+1===p||(d=l(h,u+1))<56320||d>57343?e?a(h,u):n:e?c(h,u,u+2):d-56320+(n-55296<<10)+65536}};e.exports={codeAt:d(!1),charAt:d(!0)}},3370:(e,t,i)=>{"use strict";var n=i(7626),o=i(5202),r=i(730).String;e.exports=!!Object.getOwnPropertySymbols&&!o((function(){var e=Symbol("symbol detection");return!r(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&n&&n<41}))},7234:(e,t,i)=>{"use strict";var n=i(3550),o=Math.max,r=Math.min;e.exports=function(e,t){var i=n(e);return i<0?o(i+t,0):r(i,t)}},7625:(e,t,i)=>{"use strict";var n=i(6854),o=i(6373);e.exports=function(e){return n(o(e))}},3550:(e,t,i)=>{"use strict";var n=i(3041);e.exports=function(e){var t=+e;return t!=t||0===t?0:n(t)}},3627:(e,t,i)=>{"use strict";var n=i(3550),o=Math.min;e.exports=function(e){return e>0?o(n(e),9007199254740991):0}},6015:(e,t,i)=>{"use strict";var n=i(6373),o=Object;e.exports=function(e){return o(n(e))}},634:(e,t,i)=>{"use strict";var n=i(2977),o=i(3988),r=i(8820),s=i(3923),a=i(532),l=i(5485),c=TypeError,d=l("toPrimitive");e.exports=function(e,t){if(!o(e)||r(e))return e;var i,l=s(e,d);if(l){if(void 0===t&&(t="default"),i=n(l,e,t),!o(i)||r(i))return i;throw new c("Can't convert object to primitive value")}return void 0===t&&(t="number"),a(e,t)}},3164:(e,t,i)=>{"use strict";var n=i(634),o=i(8820);e.exports=function(e){var t=n(e,"string");return o(t)?t:t+""}},1923:(e,t,i)=>{"use strict";var n={};n[i(5485)("toStringTag")]="z",e.exports="[object z]"===String(n)},2532:(e,t,i)=>{"use strict";var n=i(2702),o=String;e.exports=function(e){if("Symbol"===n(e))throw new TypeError("Cannot convert a Symbol value to a string");return o(e)}},7471:e=>{"use strict";var t=String;e.exports=function(e){try{return t(e)}catch(e){return"Object"}}},2858:(e,t,i)=>{"use strict";var n=i(4038),o=0,r=Math.random(),s=n(1..toString);e.exports=function(e){return"Symbol("+(void 0===e?"":e)+")_"+s(++o+r,36)}},3713:(e,t,i)=>{"use strict";var n=i(3370);e.exports=n&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},2268:(e,t,i)=>{"use strict";var n=i(5007),o=i(5202);e.exports=n&&o((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},2543:(e,t,i)=>{"use strict";var n=i(730),o=i(2539),r=n.WeakMap;e.exports=o(r)&&/native code/.test(String(r))},5485:(e,t,i)=>{"use strict";var n=i(730),o=i(6568),r=i(2623),s=i(2858),a=i(3370),l=i(3713),c=n.Symbol,d=o("wks"),h=l?c.for||c:c&&c.withoutSetter||s;e.exports=function(e){return r(d,e)||(d[e]=a&&r(c,e)?c[e]:h("Symbol."+e)),d[e]}},5445:(e,t,i)=>{"use strict";var n=i(2189),o=i(9236),r=i(2572);n({target:"Array",proto:!0},{fill:o}),r("fill")},6272:(e,t,i)=>{"use strict";var n=i(2189),o=i(8459);n({target:"Array",stat:!0,forced:!i(3346)((function(e){Array.from(e)}))},{from:o})},2947:(e,t,i)=>{"use strict";var n=i(2189),o=i(7830).values;n({target:"Object",stat:!0},{values:function(e){return o(e)}})},538:(e,t,i)=>{"use strict";var n,o=i(2189),r=i(6192),s=i(3037).f,a=i(3627),l=i(2532),c=i(50),d=i(6373),h=i(6775),u=i(4708),p=r("".endsWith),f=r("".slice),_=Math.min,m=h("endsWith");o({target:"String",proto:!0,forced:!(!u&&!m&&(n=s(String.prototype,"endsWith"),n&&!n.writable)||m)},{endsWith:function(e){var t=l(d(this));c(e);var i=arguments.length>1?arguments[1]:void 0,n=t.length,o=void 0===i?n:_(a(i),n),r=l(e);return p?p(t,r,o):f(t,o-r.length,o)===r}})},9477:(e,t,i)=>{"use strict";var n=i(6365).charAt,o=i(2532),r=i(5378),s=i(3174),a=i(3585),l="String Iterator",c=r.set,d=r.getterFor(l);s(String,"String",(function(e){c(this,{type:l,string:o(e),index:0})}),(function(){var e,t=d(this),i=t.string,o=t.index;return o>=i.length?a(void 0,!0):(e=n(i,o),t.index+=e.length,a(e,!1))}))},9731:(e,t,i)=>{"use strict";var n=i(2327);e.exports=n},4401:(e,t,i)=>{"use strict";var n=i(3274);e.exports=n},3661:(e,t,i)=>{"use strict";var n=i(5339);e.exports=n},5606:(e,t,i)=>{"use strict";var n=i(1189);e.exports=n}},t={};function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={id:n,loaded:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.loaded=!0,r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e);var n={};return(()=>{"use strict";i.d(n,{default:()=>ht}),i(1019),i(5142),i(1183),i(2570);var e=i(2432),t=i(715),o=i(4048),r=i(1233);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function a(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==s(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==s(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===s(o)?o:String(o)),n)}var o}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},l.apply(this,arguments)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var h=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(h,e);var t,i,n,o,r=(n=h,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(n);if(o){var i=d(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===s(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function h(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),r.apply(this,arguments)}return t=h,i=[{key:"add",value:function(e,t){if("+1"===t||"-1"===t){var i=this.value(e)||0;t="+1"===t?i+1:i-1}return 0===t?(this.remove(e),!0):l(d(h.prototype),"add",this).call(this,e,t)}},{key:"canAdd",value:function(e,t){return l(d(h.prototype),"canAdd",this).call(this,e,t)||l(d(h.prototype),"canAdd",this).call(this,e,parseInt(t,10))}},{key:"value",value:function(e){return parseInt(l(d(h.prototype),"value",this).call(this,e),10)||void 0}}],i&&a(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),h}(r.ClassAttributor);const u=new h("indent","ql-indent",{scope:r.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});var p=i(6446);function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function _(e,t){return _=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_(e,t)}function m(e){return m=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},m(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_(e,t)}(r,e);var t,i,n,o=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=m(i);if(n){var o=m(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o.apply(this,arguments)}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}(p.ZP);g.blotName="blockquote",g.tagName="blockquote";const v=g;function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function y(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==b(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===b(o)?o:String(o)),n)}var o}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(s,e);var t,i,n,o,r=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=w(n);if(o){var i=w(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.apply(this,arguments)}return t=s,i=[{key:"formats",value:function(e){return this.tagName.indexOf(e.tagName)+1}}],null&&y(t.prototype,null),i&&y(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(p.ZP);x.blotName="header",x.tagName=["H1","H2","H3","H4","H5","H6"];const S=x;var I=i(3553),k=i(281);function E(e){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},E(e)}function O(){return O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=R(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},O.apply(this,arguments)}function T(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==E(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==E(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===E(o)?o:String(o)),n)}var o}function D(e,t,i){return t&&T(e.prototype,t),i&&T(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var i,n=R(e);if(t){var o=R(this).constructor;i=Reflect.construct(n,arguments,o)}else i=n.apply(this,arguments);return function(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,i)}}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}var $=function(e){A(i,e);var t=M(i);function i(){return B(this,i),t.apply(this,arguments)}return D(i)}(I.Z);$.blotName="list-container",$.tagName="OL";var N=function(e){A(i,e);var t=M(i);function i(e,n){var o;B(this,i),o=t.call(this,e,n);var r=n.ownerDocument.createElement("span"),s=function(t){if(e.isEnabled()){var i=o.statics.formats(n,e);"checked"===i?(o.format("list","unchecked"),t.preventDefault()):"unchecked"===i&&(o.format("list","checked"),t.preventDefault())}};return r.addEventListener("mousedown",s),r.addEventListener("touchstart",s),o.attachUI(r),o}return D(i,[{key:"format",value:function(e,t){e===this.statics.blotName&&t?this.domNode.setAttribute("data-list",t):O(R(i.prototype),"format",this).call(this,e,t)}}],[{key:"create",value:function(e){var t=O(R(i),"create",this).call(this);return t.setAttribute("data-list",e),t}},{key:"formats",value:function(e){return e.getAttribute("data-list")||void 0}},{key:"register",value:function(){k.ZP.register($)}}]),i}(p.ZP);N.blotName="list",N.tagName="LI",$.allowedChildren=[N],N.requiredContainer=$;var V=i(7898),F=i(6039),Z=i(5832),H=i(1629),L=i(3991);function j(e){return j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},j(e)}function z(e,t){return z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},z(e,t)}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}var K=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&z(e,t)}(r,e);var t,i,n,o=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(i);if(n){var o=W(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===j(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o.apply(this,arguments)}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}(L.Z);K.blotName="italic",K.tagName=["EM","I"];const q=K;var U=i(7256),G=i(6603);function Y(e){return Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y(e)}function Q(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==Y(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==Y(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===Y(o)?o:String(o)),n)}var o}function X(){return X="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ee(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},X.apply(this,arguments)}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function ee(e){return ee=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ee(e)}var te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(s,e);var t,i,n,o,r=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ee(n);if(o){var i=ee(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function s(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),r.apply(this,arguments)}return t=s,i=[{key:"create",value:function(e){return"super"===e?document.createElement("sup"):"sub"===e?document.createElement("sub"):X(ee(s),"create",this).call(this,e)}},{key:"formats",value:function(e){return"SUB"===e.tagName?"sub":"SUP"===e.tagName?"super":void 0}}],null&&Q(t.prototype,null),i&&Q(t,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(G.Z);te.blotName="script",te.tagName=["SUB","SUP"];const ie=te;function ne(e){return ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(e)}function oe(e,t){return oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},oe(e,t)}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oe(e,t)}(r,e);var t,i,n,o=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=re(i);if(n){var o=re(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===ne(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o.apply(this,arguments)}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}(L.Z);se.blotName="strike",se.tagName=["S","STRIKE"];const ae=se;function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function ce(e,t){return ce=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ce(e,t)}function de(e){return de=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},de(e)}var he=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ce(e,t)}(r,e);var t,i,n,o=(i=r,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=de(i);if(n){var o=de(this).constructor;e=Reflect.construct(t,arguments,o)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),o.apply(this,arguments)}return t=r,Object.defineProperty(t,"prototype",{writable:!1}),t}(G.Z);he.blotName="underline",he.tagName="U";const ue=he;var pe=i(7452),fe=i(8034);function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function me(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==_e(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==_e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===_e(o)?o:String(o)),n)}var o}function ge(){return ge="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=be(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},ge.apply(this,arguments)}function ve(e,t){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ve(e,t)}function be(e){return be=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},be(e)}var ye=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}(a,e);var t,i,n,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(o);if(r){var i=be(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===_e(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.apply(this,arguments)}return t=a,i=[{key:"html",value:function(){var e=this.value().formula;return"<span>".concat(e,"</span>")}}],n=[{key:"create",value:function(e){var t=null;if((0,fe.Z)()&&(t=window.katex),null==t)throw new Error("Formula module requires KaTeX.");var i=ge(be(a),"create",this).call(this,e);return"string"==typeof e&&(t.render(e,i,{throwOnError:!1,errorColor:"#f00"}),i.setAttribute("data-value",e)),i}},{key:"value",value:function(e){return e.getAttribute("data-value")}}],i&&me(t.prototype,i),n&&me(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(pe.Z);ye.blotName="formula",ye.className="ql-formula",ye.tagName="SPAN";const Ce=ye;function we(e){return we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},we(e)}function xe(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==we(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==we(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===we(o)?o:String(o)),n)}var o}function Se(){return Se="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ke(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},Se.apply(this,arguments)}function Ie(e,t){return Ie=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ie(e,t)}function ke(e){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ke(e)}var Ee=["alt","height","width"],Oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ie(e,t)}(a,e);var t,i,n,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=ke(o);if(r){var i=ke(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===we(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.apply(this,arguments)}return t=a,n=[{key:"create",value:function(e){var t=Se(ke(a),"create",this).call(this,e);return"string"==typeof e&&t.setAttribute("src",this.sanitize(e)),t}},{key:"formats",value:function(e){return Ee.reduce((function(t,i){return e.hasAttribute(i)&&(t[i]=e.getAttribute(i)),t}),{})}},{key:"match",value:function(e){return/\.(jpe?g|gif|png)$/.test(e)||/^data:image\/.+;base64/.test(e)}},{key:"register",value:function(){(0,fe.Z)()&&/Firefox/i.test(navigator.userAgent)&&setTimeout((function(){document.execCommand("enableObjectResizing",!1,!1)}),1)}},{key:"sanitize",value:function(e){return(0,U.N)(e,["http","https","data"])?e:"//:0"}},{key:"value",value:function(e){return e.getAttribute("src")}}],(i=[{key:"format",value:function(e,t){Ee.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):Se(ke(a.prototype),"format",this).call(this,e,t)}}])&&xe(t.prototype,i),n&&xe(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.EmbedBlot);Oe.blotName="image",Oe.tagName="IMG";const Te=Oe;function De(e){return De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},De(e)}function Be(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==De(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==De(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===De(o)?o:String(o)),n)}var o}function Ae(){return Ae="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,i){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Me(e)););return e}(e,t);if(n){var o=Object.getOwnPropertyDescriptor(n,t);return o.get?o.get.call(arguments.length<3?e:i):o.value}},Ae.apply(this,arguments)}function Pe(e,t){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pe(e,t)}function Me(e){return Me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Me(e)}var Re=["height","width"],$e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}(a,e);var t,i,n,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Me(o);if(r){var i=Me(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===De(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.apply(this,arguments)}return t=a,i=[{key:"format",value:function(e,t){Re.indexOf(e)>-1?t?this.domNode.setAttribute(e,t):this.domNode.removeAttribute(e):Ae(Me(a.prototype),"format",this).call(this,e,t)}},{key:"html",value:function(){var e=this.value().video;return'<a href="'.concat(e,'">').concat(e,"</a>")}}],n=[{key:"create",value:function(e){var t=Ae(Me(a),"create",this).call(this,e);return t.setAttribute("frameborder","0"),t.setAttribute("allowfullscreen",!0),t.setAttribute("src",this.sanitize(e)),t}},{key:"formats",value:function(e){return Re.reduce((function(t,i){return e.hasAttribute(i)&&(t[i]=e.getAttribute(i)),t}),{})}},{key:"sanitize",value:function(e){return U.Z.sanitize(e)}},{key:"value",value:function(e){return e.getAttribute("src")}}],i&&Be(t.prototype,i),n&&Be(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(p.i2);$e.blotName="video",$e.className="ql-video",$e.tagName="IFRAME";const Ne=$e;var Ve=i(7309),Fe=i(9072),Ze=i(867),He=i(9098),Le=i.n(He);function je(e){return je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},je(e)}function ze(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,(void 0,o=function(e,t){if("object"!==je(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==je(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(n.key),"symbol"===je(o)?o:String(o)),n)}var o}function We(e,t){return We=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},We(e,t)}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ke(e)}var qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&We(e,t)}(a,e);var t,i,n,o,r,s=(o=a,r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ke(o);if(r){var i=Ke(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===je(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,e)});function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.apply(this,arguments)}return t=a,n=[{key:"value",value:function(){return"\n"}}],(i=[{key:"length",value:function(){return 1}},{key:"value",value:function(){return"\n"}},{key:"optimize",value:function(){this.prev||this.next||this.remove()}}])&&ze(t.prototype,i),n&&ze(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.EmbedBlot);qe.blotName="multilineBreak",qe.tagName="BR";const Ue=qe;function Ge(e){return Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ge(e)}function Ye(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Qe(n.key),n)}}function Qe(e){var t=function(e,t){if("object"!==Ge(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==Ge(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===Ge(t)?t:String(t)}function Xe(e,t){return Xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Xe(e,t)}function Je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function et(e){return et=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},et(e)}function tt(e){return e.nextSibling||e.previousSibling?(new(Le())).insert({multilineBreak:""}):(new(Le())).insert("\n")}var it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xe(e,t)}(s,e);var t,i,n,o,r=(n=s,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=et(n);if(o){var i=et(this).constructor;e=Reflect.construct(t,arguments,i)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===Ge(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Je(e)}(this,e)});function s(e,t){var i,n,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),i=r.call(this,e,t),k.ZP.register((n={},a=Ue,(o=Qe(o="blots/multilineBreak"))in n?Object.defineProperty(n,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[o]=a,n),!0),e.keyboard.addBinding({key:"enter",shiftKey:!0},i.enterHandler.bind(Je(i))),e.keyboard.bindings.enter.unshift(e.keyboard.bindings.enter.pop()),e.clipboard.addMatcher("BR",tt),i}return t=s,(i=[{key:"enterHandler",value:function(e){var t=this.quill.getLeaf(e.index)[0],i=this.quill.getLeaf(e.index+1)[0];this.quill.insertEmbed(e.index,"multilineBreak",!0,"user"),null!==i&&t.parent===i.parent||this.quill.insertEmbed(e.index,"multilineBreak",!0,"user"),this.quill.setSelection(e.index+1,k.ZP.sources.SILENT)}}])&&Ye(t.prototype,i),Object.defineProperty(t,"prototype",{writable:!1}),s}(i(7094).Z);const nt=it;var ot=i(6054),rt=i(1342),st=i(319);function at(e){return at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},at(e)}function lt(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function ct(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?lt(Object(i),!0).forEach((function(t){var n,o,r;n=e,o=t,r=i[t],(o=function(e){var t=function(e,t){if("object"!==at(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var n=i.call(e,"string");if("object"!==at(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===at(t)?t:String(t)}(o))in n?Object.defineProperty(n,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[o]=r})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):lt(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function dt(e,t){return t.reduce((function(t,i){return t["".concat(e).concat(i.attrName)]=i,t}),{})}e.default.register(ct(ct(ct(ct({"attributors/attribute/direction":o.IF},dt("attributors/attribute/",st.Qu)),dt("attributors/attribute/",rt.yA)),{},{"attributors/class/align":t.dk,"attributors/class/background":V.Y,"attributors/class/color":F.Hn,"attributors/class/direction":o.hY,"attributors/class/font":Z._,"attributors/class/size":H.m,"attributors/style/align":t.HE,"attributors/style/background":V.w,"attributors/style/color":F.HQ,"attributors/style/direction":o.H8,"attributors/style/font":Z.H,"attributors/style/size":H.Z},dt("attributors/style/",st.VT)),dt("attributors/style/",rt.kk)),!0),e.default.register({"formats/align":t.dk,"formats/direction":o.hY,"formats/indent":u,"formats/background":V.w,"formats/color":F.HQ,"formats/font":Z._,"formats/size":H.m,"formats/blockquote":v,"formats/code-block":Ve.ZP,"formats/header":S,"formats/list":N,"formats/bold":L.Z,"formats/code":Ve.EK,"formats/italic":q,"formats/link":U.Z,"formats/script":ie,"formats/strike":ae,"formats/underline":ue,"formats/formula":Ce,"formats/image":Te,"formats/video":Ne,"tableModules/lite":ot.Z,"tableModules/main":Ze.Z,"modules/syntax":Fe.ZP,"modules/multiline":nt,"modules/table":Ze.Z},!0);const ht=e.default})(),n.default})(),e.exports=t()},3787:function(e,t,i){var n;(function(){function o(e){"use strict";var t={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:"Remove only spaces, ' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,describe:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,describe:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,describe:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,describe:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,describe:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",describe:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,describe:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,describe:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,describe:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"},emoji:{defaultValue:!1,describe:"Enable emoji support. Ex: `this is a :smile: emoji`",type:"boolean"},underline:{defaultValue:!1,describe:"Enable support for underline. Syntax is double or triple underscores: `__underline word__`. With this option enabled, underscores no longer parses into `<em>` and `<strong>`",type:"boolean"},ellipsis:{defaultValue:!0,describe:"Replaces three dots with the ellipsis unicode character",type:"boolean"},completeHTMLDocument:{defaultValue:!1,describe:"Outputs a complete html document, including `<html>`, `<head>` and `<body>` tags",type:"boolean"},metadata:{defaultValue:!1,describe:"Enable support for document metadata (defined at the top of the document between `«««` and `»»»` or between `---` and `---`).",type:"boolean"},splitAdjacentBlockquotes:{defaultValue:!1,describe:"Split adjacent blockquote blocks",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(t));var i={};for(var n in t)t.hasOwnProperty(n)&&(i[n]=t[n].defaultValue);return i}var r={},s={},a={},l=o(!0),c="vanilla",d={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0,emoji:!0,splitAdjacentBlockquotes:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:o(!0),allOn:function(){"use strict";var e=o(!0),t={};for(var i in e)e.hasOwnProperty(i)&&(t[i]=!0);return t}()};function h(e,t){"use strict";var i=t?"Error in "+t+" extension->":"Error in unnamed extension",n={valid:!0,error:""};r.helper.isArray(e)||(e=[e]);for(var o=0;o<e.length;++o){var s=i+" sub-extension "+o+": ",a=e[o];if("object"!=typeof a)return n.valid=!1,n.error=s+"must be an object, but "+typeof a+" given",n;if(!r.helper.isString(a.type))return n.valid=!1,n.error=s+'property "type" must be a string, but '+typeof a.type+" given",n;var l=a.type=a.type.toLowerCase();if("language"===l&&(l=a.type="lang"),"html"===l&&(l=a.type="output"),"lang"!==l&&"output"!==l&&"listener"!==l)return n.valid=!1,n.error=s+"type "+l+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',n;if("listener"===l){if(r.helper.isUndefined(a.listeners))return n.valid=!1,n.error=s+'. Extensions of type "listener" must have a property called "listeners"',n}else if(r.helper.isUndefined(a.filter)&&r.helper.isUndefined(a.regex))return n.valid=!1,n.error=s+l+' extensions must define either a "regex" property or a "filter" method',n;if(a.listeners){if("object"!=typeof a.listeners)return n.valid=!1,n.error=s+'"listeners" property must be an object but '+typeof a.listeners+" given",n;for(var c in a.listeners)if(a.listeners.hasOwnProperty(c)&&"function"!=typeof a.listeners[c])return n.valid=!1,n.error=s+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+c+" must be a function but "+typeof a.listeners[c]+" given",n}if(a.filter){if("function"!=typeof a.filter)return n.valid=!1,n.error=s+'"filter" must be a function, but '+typeof a.filter+" given",n}else if(a.regex){if(r.helper.isString(a.regex)&&(a.regex=new RegExp(a.regex,"g")),!(a.regex instanceof RegExp))return n.valid=!1,n.error=s+'"regex" property must either be a string or a RegExp object, but '+typeof a.regex+" given",n;if(r.helper.isUndefined(a.replace))return n.valid=!1,n.error=s+'"regex" extensions must implement a replace string or function',n}}return n}function u(e,t){"use strict";return"¨E"+t.charCodeAt(0)+"E"}r.helper={},r.extensions={},r.setOption=function(e,t){"use strict";return l[e]=t,this},r.getOption=function(e){"use strict";return l[e]},r.getOptions=function(){"use strict";return l},r.resetOptions=function(){"use strict";l=o(!0)},r.setFlavor=function(e){"use strict";if(!d.hasOwnProperty(e))throw Error(e+" flavor was not found");r.resetOptions();var t=d[e];for(var i in c=e,t)t.hasOwnProperty(i)&&(l[i]=t[i])},r.getFlavor=function(){"use strict";return c},r.getFlavorOptions=function(e){"use strict";if(d.hasOwnProperty(e))return d[e]},r.getDefaultOptions=function(e){"use strict";return o(e)},r.subParser=function(e,t){"use strict";if(r.helper.isString(e)){if(void 0===t){if(s.hasOwnProperty(e))return s[e];throw Error("SubParser named "+e+" not registered!")}s[e]=t}},r.extension=function(e,t){"use strict";if(!r.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=r.helper.stdExtName(e),r.helper.isUndefined(t)){if(!a.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return a[e]}"function"==typeof t&&(t=t()),r.helper.isArray(t)||(t=[t]);var i=h(t,e);if(!i.valid)throw Error(i.error);a[e]=t},r.getAllExtensions=function(){"use strict";return a},r.removeExtension=function(e){"use strict";delete a[e]},r.resetExtensions=function(){"use strict";a={}},r.validateExtension=function(e){"use strict";var t=h(e,null);return!!t.valid||(console.warn(t.error),!1)},r.hasOwnProperty("helper")||(r.helper={}),r.helper.isString=function(e){"use strict";return"string"==typeof e||e instanceof String},r.helper.isFunction=function(e){"use strict";return e&&"[object Function]"==={}.toString.call(e)},r.helper.isArray=function(e){"use strict";return Array.isArray(e)},r.helper.isUndefined=function(e){"use strict";return void 0===e},r.helper.forEach=function(e,t){"use strict";if(r.helper.isUndefined(e))throw new Error("obj param is required");if(r.helper.isUndefined(t))throw new Error("callback param is required");if(!r.helper.isFunction(t))throw new Error("callback param must be a function/closure");if("function"==typeof e.forEach)e.forEach(t);else if(r.helper.isArray(e))for(var i=0;i<e.length;i++)t(e[i],i,e);else{if("object"!=typeof e)throw new Error("obj does not seem to be an array or an iterable object");for(var n in e)e.hasOwnProperty(n)&&t(e[n],n,e)}},r.helper.stdExtName=function(e){"use strict";return e.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},r.helper.escapeCharactersCallback=u,r.helper.escapeCharacters=function(e,t,i){"use strict";var n="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";i&&(n="\\\\"+n);var o=new RegExp(n,"g");return e.replace(o,u)},r.helper.unescapeHTMLEntities=function(e){"use strict";return e.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var p=function(e,t,i,n){"use strict";var o,r,s,a,l,c=n||"",d=c.indexOf("g")>-1,h=new RegExp(t+"|"+i,"g"+c.replace(/g/g,"")),u=new RegExp(t,c.replace(/g/g,"")),p=[];do{for(o=0;s=h.exec(e);)if(u.test(s[0]))o++||(a=(r=h.lastIndex)-s[0].length);else if(o&&! --o){l=s.index+s[0].length;var f={left:{start:a,end:r},match:{start:r,end:s.index},right:{start:s.index,end:l},wholeMatch:{start:a,end:l}};if(p.push(f),!d)return p}}while(o&&(h.lastIndex=r));return p};r.helper.matchRecursiveRegExp=function(e,t,i,n){"use strict";for(var o=p(e,t,i,n),r=[],s=0;s<o.length;++s)r.push([e.slice(o[s].wholeMatch.start,o[s].wholeMatch.end),e.slice(o[s].match.start,o[s].match.end),e.slice(o[s].left.start,o[s].left.end),e.slice(o[s].right.start,o[s].right.end)]);return r},r.helper.replaceRecursiveRegExp=function(e,t,i,n,o){"use strict";if(!r.helper.isFunction(t)){var s=t;t=function(){return s}}var a=p(e,i,n,o),l=e,c=a.length;if(c>0){var d=[];0!==a[0].wholeMatch.start&&d.push(e.slice(0,a[0].wholeMatch.start));for(var h=0;h<c;++h)d.push(t(e.slice(a[h].wholeMatch.start,a[h].wholeMatch.end),e.slice(a[h].match.start,a[h].match.end),e.slice(a[h].left.start,a[h].left.end),e.slice(a[h].right.start,a[h].right.end))),h<c-1&&d.push(e.slice(a[h].wholeMatch.end,a[h+1].wholeMatch.start));a[c-1].wholeMatch.end<e.length&&d.push(e.slice(a[c-1].wholeMatch.end)),l=d.join("")}return l},r.helper.regexIndexOf=function(e,t,i){"use strict";if(!r.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(t instanceof RegExp==0)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var n=e.substring(i||0).search(t);return n>=0?n+(i||0):n},r.helper.splitAtIndex=function(e,t){"use strict";if(!r.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[e.substring(0,t),e.substring(t)]},r.helper.encodeEmailAddress=function(e){"use strict";var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e.replace(/./g,(function(e){if("@"===e)e=t[Math.floor(2*Math.random())](e);else{var i=Math.random();e=i>.9?t[2](e):i>.45?t[1](e):t[0](e)}return e}))},r.helper.padEnd=function(e,t,i){"use strict";return t>>=0,i=String(i||" "),e.length>t?String(e):((t-=e.length)>i.length&&(i+=i.repeat(t/i.length)),String(e)+i.slice(0,t))},"undefined"==typeof console&&(console={warn:function(e){"use strict";alert(e)},log:function(e){"use strict";alert(e)},error:function(e){"use strict";throw e}}),r.helper.regexes={asteriskDashAndColon:/([*_:~])/g},r.helper.emojis={"+1":"👍","-1":"👎",100:"💯",1234:"🔢","1st_place_medal":"🥇","2nd_place_medal":"🥈","3rd_place_medal":"🥉","8ball":"🎱",a:"🅰️",ab:"🆎",abc:"🔤",abcd:"🔡",accept:"🉑",aerial_tramway:"🚡",airplane:"✈️",alarm_clock:"⏰",alembic:"⚗️",alien:"👽",ambulance:"🚑",amphora:"🏺",anchor:"⚓️",angel:"👼",anger:"💢",angry:"😠",anguished:"😧",ant:"🐜",apple:"🍎",aquarius:"♒️",aries:"♈️",arrow_backward:"◀️",arrow_double_down:"⏬",arrow_double_up:"⏫",arrow_down:"⬇️",arrow_down_small:"🔽",arrow_forward:"▶️",arrow_heading_down:"⤵️",arrow_heading_up:"⤴️",arrow_left:"⬅️",arrow_lower_left:"↙️",arrow_lower_right:"↘️",arrow_right:"➡️",arrow_right_hook:"↪️",arrow_up:"⬆️",arrow_up_down:"↕️",arrow_up_small:"🔼",arrow_upper_left:"↖️",arrow_upper_right:"↗️",arrows_clockwise:"🔃",arrows_counterclockwise:"🔄",art:"🎨",articulated_lorry:"🚛",artificial_satellite:"🛰",astonished:"😲",athletic_shoe:"👟",atm:"🏧",atom_symbol:"⚛️",avocado:"🥑",b:"🅱️",baby:"👶",baby_bottle:"🍼",baby_chick:"🐤",baby_symbol:"🚼",back:"🔙",bacon:"🥓",badminton:"🏸",baggage_claim:"🛄",baguette_bread:"🥖",balance_scale:"⚖️",balloon:"🎈",ballot_box:"🗳",ballot_box_with_check:"☑️",bamboo:"🎍",banana:"🍌",bangbang:"‼️",bank:"🏦",bar_chart:"📊",barber:"💈",baseball:"⚾️",basketball:"🏀",basketball_man:"⛹️",basketball_woman:"⛹️&zwj;♀️",bat:"🦇",bath:"🛀",bathtub:"🛁",battery:"🔋",beach_umbrella:"🏖",bear:"🐻",bed:"🛏",bee:"🐝",beer:"🍺",beers:"🍻",beetle:"🐞",beginner:"🔰",bell:"🔔",bellhop_bell:"🛎",bento:"🍱",biking_man:"🚴",bike:"🚲",biking_woman:"🚴&zwj;♀️",bikini:"👙",biohazard:"☣️",bird:"🐦",birthday:"🎂",black_circle:"⚫️",black_flag:"🏴",black_heart:"🖤",black_joker:"🃏",black_large_square:"⬛️",black_medium_small_square:"◾️",black_medium_square:"◼️",black_nib:"✒️",black_small_square:"▪️",black_square_button:"🔲",blonde_man:"👱",blonde_woman:"👱&zwj;♀️",blossom:"🌼",blowfish:"🐡",blue_book:"📘",blue_car:"🚙",blue_heart:"💙",blush:"😊",boar:"🐗",boat:"⛵️",bomb:"💣",book:"📖",bookmark:"🔖",bookmark_tabs:"📑",books:"📚",boom:"💥",boot:"👢",bouquet:"💐",bowing_man:"🙇",bow_and_arrow:"🏹",bowing_woman:"🙇&zwj;♀️",bowling:"🎳",boxing_glove:"🥊",boy:"👦",bread:"🍞",bride_with_veil:"👰",bridge_at_night:"🌉",briefcase:"💼",broken_heart:"💔",bug:"🐛",building_construction:"🏗",bulb:"💡",bullettrain_front:"🚅",bullettrain_side:"🚄",burrito:"🌯",bus:"🚌",business_suit_levitating:"🕴",busstop:"🚏",bust_in_silhouette:"👤",busts_in_silhouette:"👥",butterfly:"🦋",cactus:"🌵",cake:"🍰",calendar:"📆",call_me_hand:"🤙",calling:"📲",camel:"🐫",camera:"📷",camera_flash:"📸",camping:"🏕",cancer:"♋️",candle:"🕯",candy:"🍬",canoe:"🛶",capital_abcd:"🔠",capricorn:"♑️",car:"🚗",card_file_box:"🗃",card_index:"📇",card_index_dividers:"🗂",carousel_horse:"🎠",carrot:"🥕",cat:"🐱",cat2:"🐈",cd:"💿",chains:"⛓",champagne:"🍾",chart:"💹",chart_with_downwards_trend:"📉",chart_with_upwards_trend:"📈",checkered_flag:"🏁",cheese:"🧀",cherries:"🍒",cherry_blossom:"🌸",chestnut:"🌰",chicken:"🐔",children_crossing:"🚸",chipmunk:"🐿",chocolate_bar:"🍫",christmas_tree:"🎄",church:"⛪️",cinema:"🎦",circus_tent:"🎪",city_sunrise:"🌇",city_sunset:"🌆",cityscape:"🏙",cl:"🆑",clamp:"🗜",clap:"👏",clapper:"🎬",classical_building:"🏛",clinking_glasses:"🥂",clipboard:"📋",clock1:"🕐",clock10:"🕙",clock1030:"🕥",clock11:"🕚",clock1130:"🕦",clock12:"🕛",clock1230:"🕧",clock130:"🕜",clock2:"🕑",clock230:"🕝",clock3:"🕒",clock330:"🕞",clock4:"🕓",clock430:"🕟",clock5:"🕔",clock530:"🕠",clock6:"🕕",clock630:"🕡",clock7:"🕖",clock730:"🕢",clock8:"🕗",clock830:"🕣",clock9:"🕘",clock930:"🕤",closed_book:"📕",closed_lock_with_key:"🔐",closed_umbrella:"🌂",cloud:"☁️",cloud_with_lightning:"🌩",cloud_with_lightning_and_rain:"⛈",cloud_with_rain:"🌧",cloud_with_snow:"🌨",clown_face:"🤡",clubs:"♣️",cocktail:"🍸",coffee:"☕️",coffin:"⚰️",cold_sweat:"😰",comet:"☄️",computer:"💻",computer_mouse:"🖱",confetti_ball:"🎊",confounded:"😖",confused:"😕",congratulations:"㊗️",construction:"🚧",construction_worker_man:"👷",construction_worker_woman:"👷&zwj;♀️",control_knobs:"🎛",convenience_store:"🏪",cookie:"🍪",cool:"🆒",policeman:"👮",copyright:"©️",corn:"🌽",couch_and_lamp:"🛋",couple:"👫",couple_with_heart_woman_man:"💑",couple_with_heart_man_man:"👨&zwj;❤️&zwj;👨",couple_with_heart_woman_woman:"👩&zwj;❤️&zwj;👩",couplekiss_man_man:"👨&zwj;❤️&zwj;💋&zwj;👨",couplekiss_man_woman:"💏",couplekiss_woman_woman:"👩&zwj;❤️&zwj;💋&zwj;👩",cow:"🐮",cow2:"🐄",cowboy_hat_face:"🤠",crab:"🦀",crayon:"🖍",credit_card:"💳",crescent_moon:"🌙",cricket:"🏏",crocodile:"🐊",croissant:"🥐",crossed_fingers:"🤞",crossed_flags:"🎌",crossed_swords:"⚔️",crown:"👑",cry:"😢",crying_cat_face:"😿",crystal_ball:"🔮",cucumber:"🥒",cupid:"💘",curly_loop:"➰",currency_exchange:"💱",curry:"🍛",custard:"🍮",customs:"🛃",cyclone:"🌀",dagger:"🗡",dancer:"💃",dancing_women:"👯",dancing_men:"👯&zwj;♂️",dango:"🍡",dark_sunglasses:"🕶",dart:"🎯",dash:"💨",date:"📅",deciduous_tree:"🌳",deer:"🦌",department_store:"🏬",derelict_house:"🏚",desert:"🏜",desert_island:"🏝",desktop_computer:"🖥",male_detective:"🕵️",diamond_shape_with_a_dot_inside:"💠",diamonds:"♦️",disappointed:"😞",disappointed_relieved:"😥",dizzy:"💫",dizzy_face:"😵",do_not_litter:"🚯",dog:"🐶",dog2:"🐕",dollar:"💵",dolls:"🎎",dolphin:"🐬",door:"🚪",doughnut:"🍩",dove:"🕊",dragon:"🐉",dragon_face:"🐲",dress:"👗",dromedary_camel:"🐪",drooling_face:"🤤",droplet:"💧",drum:"🥁",duck:"🦆",dvd:"📀","e-mail":"📧",eagle:"🦅",ear:"👂",ear_of_rice:"🌾",earth_africa:"🌍",earth_americas:"🌎",earth_asia:"🌏",egg:"🥚",eggplant:"🍆",eight_pointed_black_star:"✴️",eight_spoked_asterisk:"✳️",electric_plug:"🔌",elephant:"🐘",email:"✉️",end:"🔚",envelope_with_arrow:"📩",euro:"💶",european_castle:"🏰",european_post_office:"🏤",evergreen_tree:"🌲",exclamation:"❗️",expressionless:"😑",eye:"👁",eye_speech_bubble:"👁&zwj;🗨",eyeglasses:"👓",eyes:"👀",face_with_head_bandage:"🤕",face_with_thermometer:"🤒",fist_oncoming:"👊",factory:"🏭",fallen_leaf:"🍂",family_man_woman_boy:"👪",family_man_boy:"👨&zwj;👦",family_man_boy_boy:"👨&zwj;👦&zwj;👦",family_man_girl:"👨&zwj;👧",family_man_girl_boy:"👨&zwj;👧&zwj;👦",family_man_girl_girl:"👨&zwj;👧&zwj;👧",family_man_man_boy:"👨&zwj;👨&zwj;👦",family_man_man_boy_boy:"👨&zwj;👨&zwj;👦&zwj;👦",family_man_man_girl:"👨&zwj;👨&zwj;👧",family_man_man_girl_boy:"👨&zwj;👨&zwj;👧&zwj;👦",family_man_man_girl_girl:"👨&zwj;👨&zwj;👧&zwj;👧",family_man_woman_boy_boy:"👨&zwj;👩&zwj;👦&zwj;👦",family_man_woman_girl:"👨&zwj;👩&zwj;👧",family_man_woman_girl_boy:"👨&zwj;👩&zwj;👧&zwj;👦",family_man_woman_girl_girl:"👨&zwj;👩&zwj;👧&zwj;👧",family_woman_boy:"👩&zwj;👦",family_woman_boy_boy:"👩&zwj;👦&zwj;👦",family_woman_girl:"👩&zwj;👧",family_woman_girl_boy:"👩&zwj;👧&zwj;👦",family_woman_girl_girl:"👩&zwj;👧&zwj;👧",family_woman_woman_boy:"👩&zwj;👩&zwj;👦",family_woman_woman_boy_boy:"👩&zwj;👩&zwj;👦&zwj;👦",family_woman_woman_girl:"👩&zwj;👩&zwj;👧",family_woman_woman_girl_boy:"👩&zwj;👩&zwj;👧&zwj;👦",family_woman_woman_girl_girl:"👩&zwj;👩&zwj;👧&zwj;👧",fast_forward:"⏩",fax:"📠",fearful:"😨",feet:"🐾",female_detective:"🕵️&zwj;♀️",ferris_wheel:"🎡",ferry:"⛴",field_hockey:"🏑",file_cabinet:"🗄",file_folder:"📁",film_projector:"📽",film_strip:"🎞",fire:"🔥",fire_engine:"🚒",fireworks:"🎆",first_quarter_moon:"🌓",first_quarter_moon_with_face:"🌛",fish:"🐟",fish_cake:"🍥",fishing_pole_and_fish:"🎣",fist_raised:"✊",fist_left:"🤛",fist_right:"🤜",flags:"🎏",flashlight:"🔦",fleur_de_lis:"⚜️",flight_arrival:"🛬",flight_departure:"🛫",floppy_disk:"💾",flower_playing_cards:"🎴",flushed:"😳",fog:"🌫",foggy:"🌁",football:"🏈",footprints:"👣",fork_and_knife:"🍴",fountain:"⛲️",fountain_pen:"🖋",four_leaf_clover:"🍀",fox_face:"🦊",framed_picture:"🖼",free:"🆓",fried_egg:"🍳",fried_shrimp:"🍤",fries:"🍟",frog:"🐸",frowning:"😦",frowning_face:"☹️",frowning_man:"🙍&zwj;♂️",frowning_woman:"🙍",middle_finger:"🖕",fuelpump:"⛽️",full_moon:"🌕",full_moon_with_face:"🌝",funeral_urn:"⚱️",game_die:"🎲",gear:"⚙️",gem:"💎",gemini:"♊️",ghost:"👻",gift:"🎁",gift_heart:"💝",girl:"👧",globe_with_meridians:"🌐",goal_net:"🥅",goat:"🐐",golf:"⛳️",golfing_man:"🏌️",golfing_woman:"🏌️&zwj;♀️",gorilla:"🦍",grapes:"🍇",green_apple:"🍏",green_book:"📗",green_heart:"💚",green_salad:"🥗",grey_exclamation:"❕",grey_question:"❔",grimacing:"😬",grin:"😁",grinning:"😀",guardsman:"💂",guardswoman:"💂&zwj;♀️",guitar:"🎸",gun:"🔫",haircut_woman:"💇",haircut_man:"💇&zwj;♂️",hamburger:"🍔",hammer:"🔨",hammer_and_pick:"⚒",hammer_and_wrench:"🛠",hamster:"🐹",hand:"✋",handbag:"👜",handshake:"🤝",hankey:"💩",hatched_chick:"🐥",hatching_chick:"🐣",headphones:"🎧",hear_no_evil:"🙉",heart:"❤️",heart_decoration:"💟",heart_eyes:"😍",heart_eyes_cat:"😻",heartbeat:"💓",heartpulse:"💗",hearts:"♥️",heavy_check_mark:"✔️",heavy_division_sign:"➗",heavy_dollar_sign:"💲",heavy_heart_exclamation:"❣️",heavy_minus_sign:"➖",heavy_multiplication_x:"✖️",heavy_plus_sign:"➕",helicopter:"🚁",herb:"🌿",hibiscus:"🌺",high_brightness:"🔆",high_heel:"👠",hocho:"🔪",hole:"🕳",honey_pot:"🍯",horse:"🐴",horse_racing:"🏇",hospital:"🏥",hot_pepper:"🌶",hotdog:"🌭",hotel:"🏨",hotsprings:"♨️",hourglass:"⌛️",hourglass_flowing_sand:"⏳",house:"🏠",house_with_garden:"🏡",houses:"🏘",hugs:"🤗",hushed:"😯",ice_cream:"🍨",ice_hockey:"🏒",ice_skate:"⛸",icecream:"🍦",id:"🆔",ideograph_advantage:"🉐",imp:"👿",inbox_tray:"📥",incoming_envelope:"📨",tipping_hand_woman:"💁",information_source:"ℹ️",innocent:"😇",interrobang:"⁉️",iphone:"📱",izakaya_lantern:"🏮",jack_o_lantern:"🎃",japan:"🗾",japanese_castle:"🏯",japanese_goblin:"👺",japanese_ogre:"👹",jeans:"👖",joy:"😂",joy_cat:"😹",joystick:"🕹",kaaba:"🕋",key:"🔑",keyboard:"⌨️",keycap_ten:"🔟",kick_scooter:"🛴",kimono:"👘",kiss:"💋",kissing:"😗",kissing_cat:"😽",kissing_closed_eyes:"😚",kissing_heart:"😘",kissing_smiling_eyes:"😙",kiwi_fruit:"🥝",koala:"🐨",koko:"🈁",label:"🏷",large_blue_circle:"🔵",large_blue_diamond:"🔷",large_orange_diamond:"🔶",last_quarter_moon:"🌗",last_quarter_moon_with_face:"🌜",latin_cross:"✝️",laughing:"😆",leaves:"🍃",ledger:"📒",left_luggage:"🛅",left_right_arrow:"↔️",leftwards_arrow_with_hook:"↩️",lemon:"🍋",leo:"♌️",leopard:"🐆",level_slider:"🎚",libra:"♎️",light_rail:"🚈",link:"🔗",lion:"🦁",lips:"👄",lipstick:"💄",lizard:"🦎",lock:"🔒",lock_with_ink_pen:"🔏",lollipop:"🍭",loop:"➿",loud_sound:"🔊",loudspeaker:"📢",love_hotel:"🏩",love_letter:"💌",low_brightness:"🔅",lying_face:"🤥",m:"Ⓜ️",mag:"🔍",mag_right:"🔎",mahjong:"🀄️",mailbox:"📫",mailbox_closed:"📪",mailbox_with_mail:"📬",mailbox_with_no_mail:"📭",man:"👨",man_artist:"👨&zwj;🎨",man_astronaut:"👨&zwj;🚀",man_cartwheeling:"🤸&zwj;♂️",man_cook:"👨&zwj;🍳",man_dancing:"🕺",man_facepalming:"🤦&zwj;♂️",man_factory_worker:"👨&zwj;🏭",man_farmer:"👨&zwj;🌾",man_firefighter:"👨&zwj;🚒",man_health_worker:"👨&zwj;⚕️",man_in_tuxedo:"🤵",man_judge:"👨&zwj;⚖️",man_juggling:"🤹&zwj;♂️",man_mechanic:"👨&zwj;🔧",man_office_worker:"👨&zwj;💼",man_pilot:"👨&zwj;✈️",man_playing_handball:"🤾&zwj;♂️",man_playing_water_polo:"🤽&zwj;♂️",man_scientist:"👨&zwj;🔬",man_shrugging:"🤷&zwj;♂️",man_singer:"👨&zwj;🎤",man_student:"👨&zwj;🎓",man_teacher:"👨&zwj;🏫",man_technologist:"👨&zwj;💻",man_with_gua_pi_mao:"👲",man_with_turban:"👳",tangerine:"🍊",mans_shoe:"👞",mantelpiece_clock:"🕰",maple_leaf:"🍁",martial_arts_uniform:"🥋",mask:"😷",massage_woman:"💆",massage_man:"💆&zwj;♂️",meat_on_bone:"🍖",medal_military:"🎖",medal_sports:"🏅",mega:"📣",melon:"🍈",memo:"📝",men_wrestling:"🤼&zwj;♂️",menorah:"🕎",mens:"🚹",metal:"🤘",metro:"🚇",microphone:"🎤",microscope:"🔬",milk_glass:"🥛",milky_way:"🌌",minibus:"🚐",minidisc:"💽",mobile_phone_off:"📴",money_mouth_face:"🤑",money_with_wings:"💸",moneybag:"💰",monkey:"🐒",monkey_face:"🐵",monorail:"🚝",moon:"🌔",mortar_board:"🎓",mosque:"🕌",motor_boat:"🛥",motor_scooter:"🛵",motorcycle:"🏍",motorway:"🛣",mount_fuji:"🗻",mountain:"⛰",mountain_biking_man:"🚵",mountain_biking_woman:"🚵&zwj;♀️",mountain_cableway:"🚠",mountain_railway:"🚞",mountain_snow:"🏔",mouse:"🐭",mouse2:"🐁",movie_camera:"🎥",moyai:"🗿",mrs_claus:"🤶",muscle:"💪",mushroom:"🍄",musical_keyboard:"🎹",musical_note:"🎵",musical_score:"🎼",mute:"🔇",nail_care:"💅",name_badge:"📛",national_park:"🏞",nauseated_face:"🤢",necktie:"👔",negative_squared_cross_mark:"❎",nerd_face:"🤓",neutral_face:"😐",new:"🆕",new_moon:"🌑",new_moon_with_face:"🌚",newspaper:"📰",newspaper_roll:"🗞",next_track_button:"⏭",ng:"🆖",no_good_man:"🙅&zwj;♂️",no_good_woman:"🙅",night_with_stars:"🌃",no_bell:"🔕",no_bicycles:"🚳",no_entry:"⛔️",no_entry_sign:"🚫",no_mobile_phones:"📵",no_mouth:"😶",no_pedestrians:"🚷",no_smoking:"🚭","non-potable_water":"🚱",nose:"👃",notebook:"📓",notebook_with_decorative_cover:"📔",notes:"🎶",nut_and_bolt:"🔩",o:"⭕️",o2:"🅾️",ocean:"🌊",octopus:"🐙",oden:"🍢",office:"🏢",oil_drum:"🛢",ok:"🆗",ok_hand:"👌",ok_man:"🙆&zwj;♂️",ok_woman:"🙆",old_key:"🗝",older_man:"👴",older_woman:"👵",om:"🕉",on:"🔛",oncoming_automobile:"🚘",oncoming_bus:"🚍",oncoming_police_car:"🚔",oncoming_taxi:"🚖",open_file_folder:"📂",open_hands:"👐",open_mouth:"😮",open_umbrella:"☂️",ophiuchus:"⛎",orange_book:"📙",orthodox_cross:"☦️",outbox_tray:"📤",owl:"🦉",ox:"🐂",package:"📦",page_facing_up:"📄",page_with_curl:"📃",pager:"📟",paintbrush:"🖌",palm_tree:"🌴",pancakes:"🥞",panda_face:"🐼",paperclip:"📎",paperclips:"🖇",parasol_on_ground:"⛱",parking:"🅿️",part_alternation_mark:"〽️",partly_sunny:"⛅️",passenger_ship:"🛳",passport_control:"🛂",pause_button:"⏸",peace_symbol:"☮️",peach:"🍑",peanuts:"🥜",pear:"🍐",pen:"🖊",pencil2:"✏️",penguin:"🐧",pensive:"😔",performing_arts:"🎭",persevere:"😣",person_fencing:"🤺",pouting_woman:"🙎",phone:"☎️",pick:"⛏",pig:"🐷",pig2:"🐖",pig_nose:"🐽",pill:"💊",pineapple:"🍍",ping_pong:"🏓",pisces:"♓️",pizza:"🍕",place_of_worship:"🛐",plate_with_cutlery:"🍽",play_or_pause_button:"⏯",point_down:"👇",point_left:"👈",point_right:"👉",point_up:"☝️",point_up_2:"👆",police_car:"🚓",policewoman:"👮&zwj;♀️",poodle:"🐩",popcorn:"🍿",post_office:"🏣",postal_horn:"📯",postbox:"📮",potable_water:"🚰",potato:"🥔",pouch:"👝",poultry_leg:"🍗",pound:"💷",rage:"😡",pouting_cat:"😾",pouting_man:"🙎&zwj;♂️",pray:"🙏",prayer_beads:"📿",pregnant_woman:"🤰",previous_track_button:"⏮",prince:"🤴",princess:"👸",printer:"🖨",purple_heart:"💜",purse:"👛",pushpin:"📌",put_litter_in_its_place:"🚮",question:"❓",rabbit:"🐰",rabbit2:"🐇",racehorse:"🐎",racing_car:"🏎",radio:"📻",radio_button:"🔘",radioactive:"☢️",railway_car:"🚃",railway_track:"🛤",rainbow:"🌈",rainbow_flag:"🏳️&zwj;🌈",raised_back_of_hand:"🤚",raised_hand_with_fingers_splayed:"🖐",raised_hands:"🙌",raising_hand_woman:"🙋",raising_hand_man:"🙋&zwj;♂️",ram:"🐏",ramen:"🍜",rat:"🐀",record_button:"⏺",recycle:"♻️",red_circle:"🔴",registered:"®️",relaxed:"☺️",relieved:"😌",reminder_ribbon:"🎗",repeat:"🔁",repeat_one:"🔂",rescue_worker_helmet:"⛑",restroom:"🚻",revolving_hearts:"💞",rewind:"⏪",rhinoceros:"🦏",ribbon:"🎀",rice:"🍚",rice_ball:"🍙",rice_cracker:"🍘",rice_scene:"🎑",right_anger_bubble:"🗯",ring:"💍",robot:"🤖",rocket:"🚀",rofl:"🤣",roll_eyes:"🙄",roller_coaster:"🎢",rooster:"🐓",rose:"🌹",rosette:"🏵",rotating_light:"🚨",round_pushpin:"📍",rowing_man:"🚣",rowing_woman:"🚣&zwj;♀️",rugby_football:"🏉",running_man:"🏃",running_shirt_with_sash:"🎽",running_woman:"🏃&zwj;♀️",sa:"🈂️",sagittarius:"♐️",sake:"🍶",sandal:"👡",santa:"🎅",satellite:"📡",saxophone:"🎷",school:"🏫",school_satchel:"🎒",scissors:"✂️",scorpion:"🦂",scorpius:"♏️",scream:"😱",scream_cat:"🙀",scroll:"📜",seat:"💺",secret:"㊙️",see_no_evil:"🙈",seedling:"🌱",selfie:"🤳",shallow_pan_of_food:"🥘",shamrock:"☘️",shark:"🦈",shaved_ice:"🍧",sheep:"🐑",shell:"🐚",shield:"🛡",shinto_shrine:"⛩",ship:"🚢",shirt:"👕",shopping:"🛍",shopping_cart:"🛒",shower:"🚿",shrimp:"🦐",signal_strength:"📶",six_pointed_star:"🔯",ski:"🎿",skier:"⛷",skull:"💀",skull_and_crossbones:"☠️",sleeping:"😴",sleeping_bed:"🛌",sleepy:"😪",slightly_frowning_face:"🙁",slightly_smiling_face:"🙂",slot_machine:"🎰",small_airplane:"🛩",small_blue_diamond:"🔹",small_orange_diamond:"🔸",small_red_triangle:"🔺",small_red_triangle_down:"🔻",smile:"😄",smile_cat:"😸",smiley:"😃",smiley_cat:"😺",smiling_imp:"😈",smirk:"😏",smirk_cat:"😼",smoking:"🚬",snail:"🐌",snake:"🐍",sneezing_face:"🤧",snowboarder:"🏂",snowflake:"❄️",snowman:"⛄️",snowman_with_snow:"☃️",sob:"😭",soccer:"⚽️",soon:"🔜",sos:"🆘",sound:"🔉",space_invader:"👾",spades:"♠️",spaghetti:"🍝",sparkle:"❇️",sparkler:"🎇",sparkles:"✨",sparkling_heart:"💖",speak_no_evil:"🙊",speaker:"🔈",speaking_head:"🗣",speech_balloon:"💬",speedboat:"🚤",spider:"🕷",spider_web:"🕸",spiral_calendar:"🗓",spiral_notepad:"🗒",spoon:"🥄",squid:"🦑",stadium:"🏟",star:"⭐️",star2:"🌟",star_and_crescent:"☪️",star_of_david:"✡️",stars:"🌠",station:"🚉",statue_of_liberty:"🗽",steam_locomotive:"🚂",stew:"🍲",stop_button:"⏹",stop_sign:"🛑",stopwatch:"⏱",straight_ruler:"📏",strawberry:"🍓",stuck_out_tongue:"😛",stuck_out_tongue_closed_eyes:"😝",stuck_out_tongue_winking_eye:"😜",studio_microphone:"🎙",stuffed_flatbread:"🥙",sun_behind_large_cloud:"🌥",sun_behind_rain_cloud:"🌦",sun_behind_small_cloud:"🌤",sun_with_face:"🌞",sunflower:"🌻",sunglasses:"😎",sunny:"☀️",sunrise:"🌅",sunrise_over_mountains:"🌄",surfing_man:"🏄",surfing_woman:"🏄&zwj;♀️",sushi:"🍣",suspension_railway:"🚟",sweat:"😓",sweat_drops:"💦",sweat_smile:"😅",sweet_potato:"🍠",swimming_man:"🏊",swimming_woman:"🏊&zwj;♀️",symbols:"🔣",synagogue:"🕍",syringe:"💉",taco:"🌮",tada:"🎉",tanabata_tree:"🎋",taurus:"♉️",taxi:"🚕",tea:"🍵",telephone_receiver:"📞",telescope:"🔭",tennis:"🎾",tent:"⛺️",thermometer:"🌡",thinking:"🤔",thought_balloon:"💭",ticket:"🎫",tickets:"🎟",tiger:"🐯",tiger2:"🐅",timer_clock:"⏲",tipping_hand_man:"💁&zwj;♂️",tired_face:"😫",tm:"™️",toilet:"🚽",tokyo_tower:"🗼",tomato:"🍅",tongue:"👅",top:"🔝",tophat:"🎩",tornado:"🌪",trackball:"🖲",tractor:"🚜",traffic_light:"🚥",train:"🚋",train2:"🚆",tram:"🚊",triangular_flag_on_post:"🚩",triangular_ruler:"📐",trident:"🔱",triumph:"😤",trolleybus:"🚎",trophy:"🏆",tropical_drink:"🍹",tropical_fish:"🐠",truck:"🚚",trumpet:"🎺",tulip:"🌷",tumbler_glass:"🥃",turkey:"🦃",turtle:"🐢",tv:"📺",twisted_rightwards_arrows:"🔀",two_hearts:"💕",two_men_holding_hands:"👬",two_women_holding_hands:"👭",u5272:"🈹",u5408:"🈴",u55b6:"🈺",u6307:"🈯️",u6708:"🈷️",u6709:"🈶",u6e80:"🈵",u7121:"🈚️",u7533:"🈸",u7981:"🈲",u7a7a:"🈳",umbrella:"☔️",unamused:"😒",underage:"🔞",unicorn:"🦄",unlock:"🔓",up:"🆙",upside_down_face:"🙃",v:"✌️",vertical_traffic_light:"🚦",vhs:"📼",vibration_mode:"📳",video_camera:"📹",video_game:"🎮",violin:"🎻",virgo:"♍️",volcano:"🌋",volleyball:"🏐",vs:"🆚",vulcan_salute:"🖖",walking_man:"🚶",walking_woman:"🚶&zwj;♀️",waning_crescent_moon:"🌘",waning_gibbous_moon:"🌖",warning:"⚠️",wastebasket:"🗑",watch:"⌚️",water_buffalo:"🐃",watermelon:"🍉",wave:"👋",wavy_dash:"〰️",waxing_crescent_moon:"🌒",wc:"🚾",weary:"😩",wedding:"💒",weight_lifting_man:"🏋️",weight_lifting_woman:"🏋️&zwj;♀️",whale:"🐳",whale2:"🐋",wheel_of_dharma:"☸️",wheelchair:"♿️",white_check_mark:"✅",white_circle:"⚪️",white_flag:"🏳️",white_flower:"💮",white_large_square:"⬜️",white_medium_small_square:"◽️",white_medium_square:"◻️",white_small_square:"▫️",white_square_button:"🔳",wilted_flower:"🥀",wind_chime:"🎐",wind_face:"🌬",wine_glass:"🍷",wink:"😉",wolf:"🐺",woman:"👩",woman_artist:"👩&zwj;🎨",woman_astronaut:"👩&zwj;🚀",woman_cartwheeling:"🤸&zwj;♀️",woman_cook:"👩&zwj;🍳",woman_facepalming:"🤦&zwj;♀️",woman_factory_worker:"👩&zwj;🏭",woman_farmer:"👩&zwj;🌾",woman_firefighter:"👩&zwj;🚒",woman_health_worker:"👩&zwj;⚕️",woman_judge:"👩&zwj;⚖️",woman_juggling:"🤹&zwj;♀️",woman_mechanic:"👩&zwj;🔧",woman_office_worker:"👩&zwj;💼",woman_pilot:"👩&zwj;✈️",woman_playing_handball:"🤾&zwj;♀️",woman_playing_water_polo:"🤽&zwj;♀️",woman_scientist:"👩&zwj;🔬",woman_shrugging:"🤷&zwj;♀️",woman_singer:"👩&zwj;🎤",woman_student:"👩&zwj;🎓",woman_teacher:"👩&zwj;🏫",woman_technologist:"👩&zwj;💻",woman_with_turban:"👳&zwj;♀️",womans_clothes:"👚",womans_hat:"👒",women_wrestling:"🤼&zwj;♀️",womens:"🚺",world_map:"🗺",worried:"😟",wrench:"🔧",writing_hand:"✍️",x:"❌",yellow_heart:"💛",yen:"💴",yin_yang:"☯️",yum:"😋",zap:"⚡️",zipper_mouth_face:"🤐",zzz:"💤",octocat:'<img alt=":octocat:" height="20" width="20" align="absmiddle" src="https://assets-cdn.github.com/images/icons/emoji/octocat.png">',showdown:"<span style=\"font-family: 'Anonymous Pro', monospace; text-decoration: underline; text-decoration-style: dashed; text-decoration-color: #3e8b8a;text-underline-position: under;\">S</span>"},r.Converter=function(e){"use strict";var t={},i=[],n=[],o={},s=c,u={parsed:{},raw:"",format:""};function p(e,t){if(t=t||null,r.helper.isString(e)){if(t=e=r.helper.stdExtName(e),r.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void function(e,t){"function"==typeof e&&(e=e(new r.Converter)),r.helper.isArray(e)||(e=[e]);var o=h(e,t);if(!o.valid)throw Error(o.error);for(var s=0;s<e.length;++s)switch(e[s].type){case"lang":i.push(e[s]);break;case"output":n.push(e[s]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}(r.extensions[e],e);if(r.helper.isUndefined(a[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=a[e]}"function"==typeof e&&(e=e()),r.helper.isArray(e)||(e=[e]);var o=h(e,t);if(!o.valid)throw Error(o.error);for(var s=0;s<e.length;++s){switch(e[s].type){case"lang":i.push(e[s]);break;case"output":n.push(e[s])}if(e[s].hasOwnProperty("listeners"))for(var l in e[s].listeners)e[s].listeners.hasOwnProperty(l)&&f(l,e[s].listeners[l])}}function f(e,t){if(!r.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof e+" given");if("function"!=typeof t)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof t+" given");o.hasOwnProperty(e)||(o[e]=[]),o[e].push(t)}!function(){for(var i in e=e||{},l)l.hasOwnProperty(i)&&(t[i]=l[i]);if("object"!=typeof e)throw Error("Converter expects the passed parameter to be an object, but "+typeof e+" was passed instead.");for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);t.extensions&&r.helper.forEach(t.extensions,p)}(),this._dispatch=function(e,t,i,n){if(o.hasOwnProperty(e))for(var r=0;r<o[e].length;++r){var s=o[e][r](e,t,this,i,n);s&&void 0!==s&&(t=s)}return t},this.listen=function(e,t){return f(e,t),this},this.makeHtml=function(e){if(!e)return e;var o={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:i,outputModifiers:n,converter:this,ghCodeBlocks:[],metadata:{parsed:{},raw:"",format:""}};return e=(e=(e=(e=(e=e.replace(/¨/g,"¨T")).replace(/\$/g,"¨D")).replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/\u00A0/g,"&nbsp;"),t.smartIndentationFix&&(e=function(e){var t=e.match(/^\s*/)[0].length,i=new RegExp("^\\s{0,"+t+"}","gm");return e.replace(i,"")}(e)),e="\n\n"+e+"\n\n",e=(e=r.subParser("detab")(e,t,o)).replace(/^[ \t]+$/gm,""),r.helper.forEach(i,(function(i){e=r.subParser("runExtension")(i,e,t,o)})),e=r.subParser("metadata")(e,t,o),e=r.subParser("hashPreCodeTags")(e,t,o),e=r.subParser("githubCodeBlocks")(e,t,o),e=r.subParser("hashHTMLBlocks")(e,t,o),e=r.subParser("hashCodeTags")(e,t,o),e=r.subParser("stripLinkDefinitions")(e,t,o),e=r.subParser("blockGamut")(e,t,o),e=r.subParser("unhashHTMLSpans")(e,t,o),e=(e=(e=r.subParser("unescapeSpecialChars")(e,t,o)).replace(/¨D/g,"$$")).replace(/¨T/g,"¨"),e=r.subParser("completeHTMLDocument")(e,t,o),r.helper.forEach(n,(function(i){e=r.subParser("runExtension")(i,e,t,o)})),u=o.metadata,e},this.makeMarkdown=this.makeMd=function(e,t){if(e=(e=(e=e.replace(/\r\n/g,"\n")).replace(/\r/g,"\n")).replace(/>[ \t]+</,">¨NBSP;<"),!t){if(!window||!window.document)throw new Error("HTMLParser is undefined. If in a webworker or nodejs environment, you need to provide a WHATWG DOM and HTML such as JSDOM");t=window.document}var i=t.createElement("div");i.innerHTML=e;var n={preList:function(e){for(var t=e.querySelectorAll("pre"),i=[],n=0;n<t.length;++n)if(1===t[n].childElementCount&&"code"===t[n].firstChild.tagName.toLowerCase()){var o=t[n].firstChild.innerHTML.trim(),s=t[n].firstChild.getAttribute("data-language")||"";if(""===s)for(var a=t[n].firstChild.className.split(" "),l=0;l<a.length;++l){var c=a[l].match(/^language-(.+)$/);if(null!==c){s=c[1];break}}o=r.helper.unescapeHTMLEntities(o),i.push(o),t[n].outerHTML='<precode language="'+s+'" precodenum="'+n.toString()+'"></precode>'}else i.push(t[n].innerHTML),t[n].innerHTML="",t[n].setAttribute("prenum",n.toString());return i}(i)};!function e(t){for(var i=0;i<t.childNodes.length;++i){var n=t.childNodes[i];3===n.nodeType?/\S/.test(n.nodeValue)||/^[ ]+$/.test(n.nodeValue)?(n.nodeValue=n.nodeValue.split("\n").join(" "),n.nodeValue=n.nodeValue.replace(/(\s)+/g,"$1")):(t.removeChild(n),--i):1===n.nodeType&&e(n)}}(i);for(var o=i.childNodes,s="",a=0;a<o.length;a++)s+=r.subParser("makeMarkdown.node")(o[a],n);return s},this.setOption=function(e,i){t[e]=i},this.getOption=function(e){return t[e]},this.getOptions=function(){return t},this.addExtension=function(e,t){p(e,t=t||null)},this.useExtension=function(e){p(e)},this.setFlavor=function(e){if(!d.hasOwnProperty(e))throw Error(e+" flavor was not found");var i=d[e];for(var n in s=e,i)i.hasOwnProperty(n)&&(t[n]=i[n])},this.getFlavor=function(){return s},this.removeExtension=function(e){r.helper.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t){for(var o=e[t],s=0;s<i.length;++s)i[s]===o&&i.splice(s,1);for(var a=0;a<n.length;++a)n[a]===o&&n.splice(a,1)}},this.getAllExtensions=function(){return{language:i,output:n}},this.getMetadata=function(e){return e?u.raw:u.parsed},this.getMetadataFormat=function(){return u.format},this._setMetadataPair=function(e,t){u.parsed[e]=t},this._setMetadataFormat=function(e){u.format=e},this._setMetadataRaw=function(e){u.raw=e}},r.subParser("anchors",(function(e,t,i){"use strict";var n=function(e,n,o,s,a,l,c){if(r.helper.isUndefined(c)&&(c=""),o=o.toLowerCase(),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)s="";else if(!s){if(o||(o=n.toLowerCase().replace(/ ?\n/g," ")),s="#"+o,r.helper.isUndefined(i.gUrls[o]))return e;s=i.gUrls[o],r.helper.isUndefined(i.gTitles[o])||(c=i.gTitles[o])}var d='<a href="'+(s=s.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback))+'"';return""!==c&&null!==c&&(d+=' title="'+(c=(c=c.replace(/"/g,"&quot;")).replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback))+'"'),t.openLinksInNewWindow&&!/^#/.test(s)&&(d+=' rel="noopener noreferrer" target="¨E95Eblank"'),d+">"+n+"</a>"};return e=(e=(e=(e=(e=i.converter._dispatch("anchors.before",e,t,i)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,n)).replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,n)).replace(/\[([^\[\]]+)]()()()()()/g,n),t.ghMentions&&(e=e.replace(/(^|\s)(\\)?(@([a-z\d]+(?:[a-z\d.-]+?[a-z\d]+)*))/gim,(function(e,i,n,o,s){if("\\"===n)return i+o;if(!r.helper.isString(t.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var a=t.ghMentionsLink.replace(/\{u}/g,s),l="";return t.openLinksInNewWindow&&(l=' rel="noopener noreferrer" target="¨E95Eblank"'),i+'<a href="'+a+'"'+l+">"+o+"</a>"}))),i.converter._dispatch("anchors.after",e,t,i)}));var f=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+?\.[^'">\s]+?)()(\1)?(?=\s|$)(?!["<>])/gi,_=/([*~_]+|\b)(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]])?(\1)?(?=\s|$)(?!["<>])/gi,m=/()<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>()/gi,g=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,v=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,b=function(e){"use strict";return function(t,i,n,o,s,a,l){var c=n=n.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback),d="",h="",u=i||"",p=l||"";return/^www\./i.test(n)&&(n=n.replace(/^www\./i,"http://www.")),e.excludeTrailingPunctuationFromURLs&&a&&(d=a),e.openLinksInNewWindow&&(h=' rel="noopener noreferrer" target="¨E95Eblank"'),u+'<a href="'+n+'"'+h+">"+c+"</a>"+d+p}},y=function(e,t){"use strict";return function(i,n,o){var s="mailto:";return n=n||"",o=r.subParser("unescapeSpecialChars")(o,e,t),e.encodeEmails?(s=r.helper.encodeEmailAddress(s+o),o=r.helper.encodeEmailAddress(o)):s+=o,n+'<a href="'+s+'">'+o+"</a>"}};r.subParser("autoLinks",(function(e,t,i){"use strict";return e=(e=(e=i.converter._dispatch("autoLinks.before",e,t,i)).replace(m,b(t))).replace(v,y(t,i)),i.converter._dispatch("autoLinks.after",e,t,i)})),r.subParser("simplifiedAutoLinks",(function(e,t,i){"use strict";return t.simplifiedAutoLink?(e=i.converter._dispatch("simplifiedAutoLinks.before",e,t,i),e=(e=t.excludeTrailingPunctuationFromURLs?e.replace(_,b(t)):e.replace(f,b(t))).replace(g,y(t,i)),e=i.converter._dispatch("simplifiedAutoLinks.after",e,t,i)):e})),r.subParser("blockGamut",(function(e,t,i){"use strict";return e=i.converter._dispatch("blockGamut.before",e,t,i),e=r.subParser("blockQuotes")(e,t,i),e=r.subParser("headers")(e,t,i),e=r.subParser("horizontalRule")(e,t,i),e=r.subParser("lists")(e,t,i),e=r.subParser("codeBlocks")(e,t,i),e=r.subParser("tables")(e,t,i),e=r.subParser("hashHTMLBlocks")(e,t,i),e=r.subParser("paragraphs")(e,t,i),i.converter._dispatch("blockGamut.after",e,t,i)})),r.subParser("blockQuotes",(function(e,t,i){"use strict";e=i.converter._dispatch("blockQuotes.before",e,t,i),e+="\n\n";var n=/(^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+/gm;return t.splitAdjacentBlockquotes&&(n=/^ {0,3}>[\s\S]*?(?:\n\n)/gm),e=e.replace(n,(function(e){return e=(e=(e=e.replace(/^[ \t]*>[ \t]?/gm,"")).replace(/¨0/g,"")).replace(/^[ \t]+$/gm,""),e=r.subParser("githubCodeBlocks")(e,t,i),e=(e=(e=r.subParser("blockGamut")(e,t,i)).replace(/(^|\n)/g,"$1  ")).replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,(function(e,t){var i=t;return(i=i.replace(/^  /gm,"¨0")).replace(/¨0/g,"")})),r.subParser("hashBlock")("<blockquote>\n"+e+"\n</blockquote>",t,i)})),i.converter._dispatch("blockQuotes.after",e,t,i)})),r.subParser("codeBlocks",(function(e,t,i){"use strict";return e=i.converter._dispatch("codeBlocks.before",e,t,i),e=(e=(e+="¨0").replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=¨0))/g,(function(e,n,o){var s=n,a=o,l="\n";return s=r.subParser("outdent")(s,t,i),s=r.subParser("encodeCode")(s,t,i),s=(s=(s=r.subParser("detab")(s,t,i)).replace(/^\n+/g,"")).replace(/\n+$/g,""),t.omitExtraWLInCodeBlocks&&(l=""),s="<pre><code>"+s+l+"</code></pre>",r.subParser("hashBlock")(s,t,i)+a}))).replace(/¨0/,""),i.converter._dispatch("codeBlocks.after",e,t,i)})),r.subParser("codeSpans",(function(e,t,i){"use strict";return void 0===(e=i.converter._dispatch("codeSpans.before",e,t,i))&&(e=""),e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,(function(e,n,o,s){var a=s;return a=(a=a.replace(/^([ \t]*)/g,"")).replace(/[ \t]*$/g,""),a=n+"<code>"+(a=r.subParser("encodeCode")(a,t,i))+"</code>",r.subParser("hashHTMLSpans")(a,t,i)})),i.converter._dispatch("codeSpans.after",e,t,i)})),r.subParser("completeHTMLDocument",(function(e,t,i){"use strict";if(!t.completeHTMLDocument)return e;e=i.converter._dispatch("completeHTMLDocument.before",e,t,i);var n="html",o="<!DOCTYPE HTML>\n",r="",s='<meta charset="utf-8">\n',a="",l="";for(var c in void 0!==i.metadata.parsed.doctype&&(o="<!DOCTYPE "+i.metadata.parsed.doctype+">\n","html"!==(n=i.metadata.parsed.doctype.toString().toLowerCase())&&"html5"!==n||(s='<meta charset="utf-8">')),i.metadata.parsed)if(i.metadata.parsed.hasOwnProperty(c))switch(c.toLowerCase()){case"doctype":break;case"title":r="<title>"+i.metadata.parsed.title+"</title>\n";break;case"charset":s="html"===n||"html5"===n?'<meta charset="'+i.metadata.parsed.charset+'">\n':'<meta name="charset" content="'+i.metadata.parsed.charset+'">\n';break;case"language":case"lang":a=' lang="'+i.metadata.parsed[c]+'"',l+='<meta name="'+c+'" content="'+i.metadata.parsed[c]+'">\n';break;default:l+='<meta name="'+c+'" content="'+i.metadata.parsed[c]+'">\n'}return e=o+"<html"+a+">\n<head>\n"+r+s+l+"</head>\n<body>\n"+e.trim()+"\n</body>\n</html>",i.converter._dispatch("completeHTMLDocument.after",e,t,i)})),r.subParser("detab",(function(e,t,i){"use strict";return e=(e=(e=(e=(e=(e=i.converter._dispatch("detab.before",e,t,i)).replace(/\t(?=\t)/g,"    ")).replace(/\t/g,"¨A¨B")).replace(/¨B(.+?)¨A/g,(function(e,t){for(var i=t,n=4-i.length%4,o=0;o<n;o++)i+=" ";return i}))).replace(/¨A/g,"    ")).replace(/¨B/g,""),i.converter._dispatch("detab.after",e,t,i)})),r.subParser("ellipsis",(function(e,t,i){"use strict";return t.ellipsis?(e=(e=i.converter._dispatch("ellipsis.before",e,t,i)).replace(/\.\.\./g,"…"),e=i.converter._dispatch("ellipsis.after",e,t,i)):e})),r.subParser("emoji",(function(e,t,i){"use strict";return t.emoji?(e=(e=i.converter._dispatch("emoji.before",e,t,i)).replace(/:([\S]+?):/g,(function(e,t){return r.helper.emojis.hasOwnProperty(t)?r.helper.emojis[t]:e})),i.converter._dispatch("emoji.after",e,t,i)):e})),r.subParser("encodeAmpsAndAngles",(function(e,t,i){"use strict";return e=(e=(e=(e=(e=i.converter._dispatch("encodeAmpsAndAngles.before",e,t,i)).replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;")).replace(/<(?![a-z\/?$!])/gi,"&lt;")).replace(/</g,"&lt;")).replace(/>/g,"&gt;"),i.converter._dispatch("encodeAmpsAndAngles.after",e,t,i)})),r.subParser("encodeBackslashEscapes",(function(e,t,i){"use strict";return e=(e=(e=i.converter._dispatch("encodeBackslashEscapes.before",e,t,i)).replace(/\\(\\)/g,r.helper.escapeCharactersCallback)).replace(/\\([`*_{}\[\]()>#+.!~=|:-])/g,r.helper.escapeCharactersCallback),i.converter._dispatch("encodeBackslashEscapes.after",e,t,i)})),r.subParser("encodeCode",(function(e,t,i){"use strict";return e=(e=i.converter._dispatch("encodeCode.before",e,t,i)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,r.helper.escapeCharactersCallback),i.converter._dispatch("encodeCode.after",e,t,i)})),r.subParser("escapeSpecialCharsWithinTagAttributes",(function(e,t,i){"use strict";return e=(e=(e=i.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",e,t,i)).replace(/<\/?[a-z\d_:-]+(?:[\s]+[\s\S]+?)?>/gi,(function(e){return e.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)}))).replace(/<!(--(?:(?:[^>-]|-[^>])(?:[^-]|-[^-])*)--)>/gi,(function(e){return e.replace(/([\\`*_~=|])/g,r.helper.escapeCharactersCallback)})),i.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",e,t,i)})),r.subParser("githubCodeBlocks",(function(e,t,i){"use strict";return t.ghCodeBlocks?(e=i.converter._dispatch("githubCodeBlocks.before",e,t,i),e=(e=(e+="¨0").replace(/(?:^|\n)(?: {0,3})(```+|~~~+)(?: *)([^\s`~]*)\n([\s\S]*?)\n(?: {0,3})\1/g,(function(e,n,o,s){var a=t.omitExtraWLInCodeBlocks?"":"\n";return s=r.subParser("encodeCode")(s,t,i),s="<pre><code"+(o?' class="'+o+" language-"+o+'"':"")+">"+(s=(s=(s=r.subParser("detab")(s,t,i)).replace(/^\n+/g,"")).replace(/\n+$/g,""))+a+"</code></pre>",s=r.subParser("hashBlock")(s,t,i),"\n\n¨G"+(i.ghCodeBlocks.push({text:e,codeblock:s})-1)+"G\n\n"}))).replace(/¨0/,""),i.converter._dispatch("githubCodeBlocks.after",e,t,i)):e})),r.subParser("hashBlock",(function(e,t,i){"use strict";return e=(e=i.converter._dispatch("hashBlock.before",e,t,i)).replace(/(^\n+|\n+$)/g,""),e="\n\n¨K"+(i.gHtmlBlocks.push(e)-1)+"K\n\n",i.converter._dispatch("hashBlock.after",e,t,i)})),r.subParser("hashCodeTags",(function(e,t,i){"use strict";return e=i.converter._dispatch("hashCodeTags.before",e,t,i),e=r.helper.replaceRecursiveRegExp(e,(function(e,n,o,s){var a=o+r.subParser("encodeCode")(n,t,i)+s;return"¨C"+(i.gHtmlSpans.push(a)-1)+"C"}),"<code\\b[^>]*>","</code>","gim"),i.converter._dispatch("hashCodeTags.after",e,t,i)})),r.subParser("hashElement",(function(e,t,i){"use strict";return function(e,t){var n=t;return n=(n=(n=n.replace(/\n\n/g,"\n")).replace(/^\n/,"")).replace(/\n+$/g,""),"\n\n¨K"+(i.gHtmlBlocks.push(n)-1)+"K\n\n"}})),r.subParser("hashHTMLBlocks",(function(e,t,i){"use strict";e=i.converter._dispatch("hashHTMLBlocks.before",e,t,i);var n=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],o=function(e,t,n,o){var r=e;return-1!==n.search(/\bmarkdown\b/)&&(r=n+i.converter.makeHtml(t)+o),"\n\n¨K"+(i.gHtmlBlocks.push(r)-1)+"K\n\n"};t.backslashEscapesHTMLTags&&(e=e.replace(/\\<(\/?[^>]+?)>/g,(function(e,t){return"&lt;"+t+"&gt;"})));for(var s=0;s<n.length;++s)for(var a,l=new RegExp("^ {0,3}(<"+n[s]+"\\b[^>]*>)","im"),c="<"+n[s]+"\\b[^>]*>",d="</"+n[s]+">";-1!==(a=r.helper.regexIndexOf(e,l));){var h=r.helper.splitAtIndex(e,a),u=r.helper.replaceRecursiveRegExp(h[1],o,c,d,"im");if(u===h[1])break;e=h[0].concat(u)}return e=e.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(e,t,i)),e=(e=r.helper.replaceRecursiveRegExp(e,(function(e){return"\n\n¨K"+(i.gHtmlBlocks.push(e)-1)+"K\n\n"}),"^ {0,3}\x3c!--","--\x3e","gm")).replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,r.subParser("hashElement")(e,t,i)),i.converter._dispatch("hashHTMLBlocks.after",e,t,i)})),r.subParser("hashHTMLSpans",(function(e,t,i){"use strict";function n(e){return"¨C"+(i.gHtmlSpans.push(e)-1)+"C"}return e=(e=(e=(e=(e=i.converter._dispatch("hashHTMLSpans.before",e,t,i)).replace(/<[^>]+?\/>/gi,(function(e){return n(e)}))).replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,(function(e){return n(e)}))).replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,(function(e){return n(e)}))).replace(/<[^>]+?>/gi,(function(e){return n(e)})),i.converter._dispatch("hashHTMLSpans.after",e,t,i)})),r.subParser("unhashHTMLSpans",(function(e,t,i){"use strict";e=i.converter._dispatch("unhashHTMLSpans.before",e,t,i);for(var n=0;n<i.gHtmlSpans.length;++n){for(var o=i.gHtmlSpans[n],r=0;/¨C(\d+)C/.test(o);){var s=RegExp.$1;if(o=o.replace("¨C"+s+"C",i.gHtmlSpans[s]),10===r){console.error("maximum nesting of 10 spans reached!!!");break}++r}e=e.replace("¨C"+n+"C",o)}return i.converter._dispatch("unhashHTMLSpans.after",e,t,i)})),r.subParser("hashPreCodeTags",(function(e,t,i){"use strict";return e=i.converter._dispatch("hashPreCodeTags.before",e,t,i),e=r.helper.replaceRecursiveRegExp(e,(function(e,n,o,s){var a=o+r.subParser("encodeCode")(n,t,i)+s;return"\n\n¨G"+(i.ghCodeBlocks.push({text:e,codeblock:a})-1)+"G\n\n"}),"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),i.converter._dispatch("hashPreCodeTags.after",e,t,i)})),r.subParser("headers",(function(e,t,i){"use strict";e=i.converter._dispatch("headers.before",e,t,i);var n=isNaN(parseInt(t.headerLevelStart))?1:parseInt(t.headerLevelStart),o=t.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,s=t.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;e=(e=e.replace(o,(function(e,o){var s=r.subParser("spanGamut")(o,t,i),a=t.noHeaderId?"":' id="'+l(o)+'"',c="<h"+n+a+">"+s+"</h"+n+">";return r.subParser("hashBlock")(c,t,i)}))).replace(s,(function(e,o){var s=r.subParser("spanGamut")(o,t,i),a=t.noHeaderId?"":' id="'+l(o)+'"',c=n+1,d="<h"+c+a+">"+s+"</h"+c+">";return r.subParser("hashBlock")(d,t,i)}));var a=t.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;function l(e){var n,o;if(t.customizedHeaderId){var s=e.match(/\{([^{]+?)}\s*$/);s&&s[1]&&(e=s[1])}return n=e,o=r.helper.isString(t.prefixHeaderId)?t.prefixHeaderId:!0===t.prefixHeaderId?"section-":"",t.rawPrefixHeaderId||(n=o+n),n=t.ghCompatibleHeaderId?n.replace(/ /g,"-").replace(/&amp;/g,"").replace(/¨T/g,"").replace(/¨D/g,"").replace(/[&+$,\/:;=?@"#{}|^¨~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():t.rawHeaderId?n.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/¨T/g,"¨").replace(/¨D/g,"$").replace(/["']/g,"-").toLowerCase():n.replace(/[^\w]/g,"").toLowerCase(),t.rawPrefixHeaderId&&(n=o+n),i.hashLinkCounts[n]?n=n+"-"+i.hashLinkCounts[n]++:i.hashLinkCounts[n]=1,n}return e=e.replace(a,(function(e,o,s){var a=s;t.customizedHeaderId&&(a=s.replace(/\s?\{([^{]+?)}\s*$/,""));var c=r.subParser("spanGamut")(a,t,i),d=t.noHeaderId?"":' id="'+l(s)+'"',h=n-1+o.length,u="<h"+h+d+">"+c+"</h"+h+">";return r.subParser("hashBlock")(u,t,i)})),i.converter._dispatch("headers.after",e,t,i)})),r.subParser("horizontalRule",(function(e,t,i){"use strict";e=i.converter._dispatch("horizontalRule.before",e,t,i);var n=r.subParser("hashBlock")("<hr />",t,i);return e=(e=(e=e.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,n)).replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,n)).replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,n),i.converter._dispatch("horizontalRule.after",e,t,i)})),r.subParser("images",(function(e,t,i){"use strict";function n(e,t,n,o,s,a,l,c){var d=i.gUrls,h=i.gTitles,u=i.gDimensions;if(n=n.toLowerCase(),c||(c=""),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)o="";else if(""===o||null===o){if(""!==n&&null!==n||(n=t.toLowerCase().replace(/ ?\n/g," ")),o="#"+n,r.helper.isUndefined(d[n]))return e;o=d[n],r.helper.isUndefined(h[n])||(c=h[n]),r.helper.isUndefined(u[n])||(s=u[n].width,a=u[n].height)}t=t.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback);var p='<img src="'+(o=o.replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback))+'" alt="'+t+'"';return c&&r.helper.isString(c)&&(p+=' title="'+(c=c.replace(/"/g,"&quot;").replace(r.helper.regexes.asteriskDashAndColon,r.helper.escapeCharactersCallback))+'"'),s&&a&&(p+=' width="'+(s="*"===s?"auto":s)+'"',p+=' height="'+(a="*"===a?"auto":a)+'"'),p+" />"}return e=(e=(e=(e=(e=(e=i.converter._dispatch("images.before",e,t,i)).replace(/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,n)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,(function(e,t,i,o,r,s,a,l){return n(e,t,i,o=o.replace(/\s/g,""),r,s,0,l)}))).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,n)).replace(/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,n)).replace(/!\[([^\[\]]+)]()()()()()/g,n),i.converter._dispatch("images.after",e,t,i)})),r.subParser("italicsAndBold",(function(e,t,i){"use strict";function n(e,t,i){return t+e+i}return e=i.converter._dispatch("italicsAndBold.before",e,t,i),e=t.literalMidWordUnderscores?(e=(e=e.replace(/\b___(\S[\s\S]*?)___\b/g,(function(e,t){return n(t,"<strong><em>","</em></strong>")}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(e,t){return n(t,"<strong>","</strong>")}))).replace(/\b_(\S[\s\S]*?)_\b/g,(function(e,t){return n(t,"<em>","</em>")})):(e=(e=e.replace(/___(\S[\s\S]*?)___/g,(function(e,t){return/\S$/.test(t)?n(t,"<strong><em>","</em></strong>"):e}))).replace(/__(\S[\s\S]*?)__/g,(function(e,t){return/\S$/.test(t)?n(t,"<strong>","</strong>"):e}))).replace(/_([^\s_][\s\S]*?)_/g,(function(e,t){return/\S$/.test(t)?n(t,"<em>","</em>"):e})),e=t.literalMidWordAsterisks?(e=(e=e.replace(/([^*]|^)\B\*\*\*(\S[\s\S]*?)\*\*\*\B(?!\*)/g,(function(e,t,i){return n(i,t+"<strong><em>","</em></strong>")}))).replace(/([^*]|^)\B\*\*(\S[\s\S]*?)\*\*\B(?!\*)/g,(function(e,t,i){return n(i,t+"<strong>","</strong>")}))).replace(/([^*]|^)\B\*(\S[\s\S]*?)\*\B(?!\*)/g,(function(e,t,i){return n(i,t+"<em>","</em>")})):(e=(e=e.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,(function(e,t){return/\S$/.test(t)?n(t,"<strong><em>","</em></strong>"):e}))).replace(/\*\*(\S[\s\S]*?)\*\*/g,(function(e,t){return/\S$/.test(t)?n(t,"<strong>","</strong>"):e}))).replace(/\*([^\s*][\s\S]*?)\*/g,(function(e,t){return/\S$/.test(t)?n(t,"<em>","</em>"):e})),i.converter._dispatch("italicsAndBold.after",e,t,i)})),r.subParser("lists",(function(e,t,i){"use strict";function n(e,n){i.gListLevel++,e=e.replace(/\n{2,}$/,"\n");var o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,s=/\n[ \t]*\n(?!¨0)/.test(e+="¨0");return t.disableForced4SpacesIndentedSublists&&(o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(¨0|\2([*+-]|\d+[.])[ \t]+))/gm),e=(e=e.replace(o,(function(e,n,o,a,l,c,d){d=d&&""!==d.trim();var h=r.subParser("outdent")(l,t,i),u="";return c&&t.tasklists&&(u=' class="task-list-item" style="list-style-type: none;"',h=h.replace(/^[ \t]*\[(x|X| )?]/m,(function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return d&&(e+=" checked"),e+">"}))),h=h.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,(function(e){return"¨A"+e})),n||h.search(/\n{2,}/)>-1?(h=r.subParser("githubCodeBlocks")(h,t,i),h=r.subParser("blockGamut")(h,t,i)):(h=(h=r.subParser("lists")(h,t,i)).replace(/\n$/,""),h=(h=r.subParser("hashHTMLBlocks")(h,t,i)).replace(/\n\n+/g,"\n\n"),h=s?r.subParser("paragraphs")(h,t,i):r.subParser("spanGamut")(h,t,i)),"<li"+u+">"+(h=h.replace("¨A",""))+"</li>\n"}))).replace(/¨0/g,""),i.gListLevel--,n&&(e=e.replace(/\s+$/,"")),e}function o(e,t){if("ol"===t){var i=e.match(/^ *(\d+)\./);if(i&&"1"!==i[1])return' start="'+i[1]+'"'}return""}function s(e,i,r){var s=t.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,a=t.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,l="ul"===i?s:a,c="";if(-1!==e.search(l))!function t(d){var h=d.search(l),u=o(e,i);-1!==h?(c+="\n\n<"+i+u+">\n"+n(d.slice(0,h),!!r)+"</"+i+">\n",l="ul"==(i="ul"===i?"ol":"ul")?s:a,t(d.slice(h))):c+="\n\n<"+i+u+">\n"+n(d,!!r)+"</"+i+">\n"}(e);else{var d=o(e,i);c="\n\n<"+i+d+">\n"+n(e,!!r)+"</"+i+">\n"}return c}return e=i.converter._dispatch("lists.before",e,t,i),e+="¨0",e=(e=i.gListLevel?e.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(e,t,i){return s(t,i.search(/[*+-]/g)>-1?"ul":"ol",!0)})):e.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(¨0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,(function(e,t,i,n){return s(i,n.search(/[*+-]/g)>-1?"ul":"ol",!1)}))).replace(/¨0/,""),i.converter._dispatch("lists.after",e,t,i)})),r.subParser("metadata",(function(e,t,i){"use strict";if(!t.metadata)return e;function n(e){i.metadata.raw=e,(e=(e=e.replace(/&/g,"&amp;").replace(/"/g,"&quot;")).replace(/\n {4}/g," ")).replace(/^([\S ]+): +([\s\S]+?)$/gm,(function(e,t,n){return i.metadata.parsed[t]=n,""}))}return e=(e=(e=(e=i.converter._dispatch("metadata.before",e,t,i)).replace(/^\s*«««+(\S*?)\n([\s\S]+?)\n»»»+\n/,(function(e,t,i){return n(i),"¨M"}))).replace(/^\s*---+(\S*?)\n([\s\S]+?)\n---+\n/,(function(e,t,o){return t&&(i.metadata.format=t),n(o),"¨M"}))).replace(/¨M/g,""),i.converter._dispatch("metadata.after",e,t,i)})),r.subParser("outdent",(function(e,t,i){"use strict";return e=(e=(e=i.converter._dispatch("outdent.before",e,t,i)).replace(/^(\t|[ ]{1,4})/gm,"¨0")).replace(/¨0/g,""),i.converter._dispatch("outdent.after",e,t,i)})),r.subParser("paragraphs",(function(e,t,i){"use strict";for(var n=(e=(e=(e=i.converter._dispatch("paragraphs.before",e,t,i)).replace(/^\n+/g,"")).replace(/\n+$/g,"")).split(/\n{2,}/g),o=[],s=n.length,a=0;a<s;a++){var l=n[a];l.search(/¨(K|G)(\d+)\1/g)>=0?o.push(l):l.search(/\S/)>=0&&(l=(l=r.subParser("spanGamut")(l,t,i)).replace(/^([ \t]*)/g,"<p>"),l+="</p>",o.push(l))}for(s=o.length,a=0;a<s;a++){for(var c="",d=o[a],h=!1;/¨(K|G)(\d+)\1/.test(d);){var u=RegExp.$1,p=RegExp.$2;c=(c="K"===u?i.gHtmlBlocks[p]:h?r.subParser("encodeCode")(i.ghCodeBlocks[p].text,t,i):i.ghCodeBlocks[p].codeblock).replace(/\$/g,"$$$$"),d=d.replace(/(\n\n)?¨(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(d)&&(h=!0)}o[a]=d}return e=(e=(e=o.join("\n")).replace(/^\n+/g,"")).replace(/\n+$/g,""),i.converter._dispatch("paragraphs.after",e,t,i)})),r.subParser("runExtension",(function(e,t,i,n){"use strict";if(e.filter)t=e.filter(t,n.converter,i);else if(e.regex){var o=e.regex;o instanceof RegExp||(o=new RegExp(o,"g")),t=t.replace(o,e.replace)}return t})),r.subParser("spanGamut",(function(e,t,i){"use strict";return e=i.converter._dispatch("spanGamut.before",e,t,i),e=r.subParser("codeSpans")(e,t,i),e=r.subParser("escapeSpecialCharsWithinTagAttributes")(e,t,i),e=r.subParser("encodeBackslashEscapes")(e,t,i),e=r.subParser("images")(e,t,i),e=r.subParser("anchors")(e,t,i),e=r.subParser("autoLinks")(e,t,i),e=r.subParser("simplifiedAutoLinks")(e,t,i),e=r.subParser("emoji")(e,t,i),e=r.subParser("underline")(e,t,i),e=r.subParser("italicsAndBold")(e,t,i),e=r.subParser("strikethrough")(e,t,i),e=r.subParser("ellipsis")(e,t,i),e=r.subParser("hashHTMLSpans")(e,t,i),e=r.subParser("encodeAmpsAndAngles")(e,t,i),t.simpleLineBreaks?/\n\n¨K/.test(e)||(e=e.replace(/\n+/g,"<br />\n")):e=e.replace(/  +\n/g,"<br />\n"),i.converter._dispatch("spanGamut.after",e,t,i)})),r.subParser("strikethrough",(function(e,t,i){"use strict";return t.strikethrough&&(e=(e=i.converter._dispatch("strikethrough.before",e,t,i)).replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,(function(e,n){return function(e){return t.simplifiedAutoLink&&(e=r.subParser("simplifiedAutoLinks")(e,t,i)),"<del>"+e+"</del>"}(n)})),e=i.converter._dispatch("strikethrough.after",e,t,i)),e})),r.subParser("stripLinkDefinitions",(function(e,t,i){"use strict";var n=function(n,o,s,a,l,c,d){return o=o.toLowerCase(),e.toLowerCase().split(o).length-1<2?n:(s.match(/^data:.+?\/.+?;base64,/)?i.gUrls[o]=s.replace(/\s/g,""):i.gUrls[o]=r.subParser("encodeAmpsAndAngles")(s,t,i),c?c+d:(d&&(i.gTitles[o]=d.replace(/"|'/g,"&quot;")),t.parseImgDimensions&&a&&l&&(i.gDimensions[o]={width:a,height:l}),""))};return e=(e=(e=(e+="¨0").replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=¨0)|(?=\n\[))/gm,n)).replace(/^ {0,3}\[([^\]]+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=¨0))/gm,n)).replace(/¨0/,"")})),r.subParser("tables",(function(e,t,i){"use strict";if(!t.tables)return e;function n(e,n){return"<td"+n+">"+r.subParser("spanGamut")(e,t,i)+"</td>\n"}function o(e){var o,s=e.split("\n");for(o=0;o<s.length;++o)/^ {0,3}\|/.test(s[o])&&(s[o]=s[o].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(s[o])&&(s[o]=s[o].replace(/\|[ \t]*$/,"")),s[o]=r.subParser("codeSpans")(s[o],t,i);var a,l,c,d,h=s[0].split("|").map((function(e){return e.trim()})),u=s[1].split("|").map((function(e){return e.trim()})),p=[],f=[],_=[],m=[];for(s.shift(),s.shift(),o=0;o<s.length;++o)""!==s[o].trim()&&p.push(s[o].split("|").map((function(e){return e.trim()})));if(h.length<u.length)return e;for(o=0;o<u.length;++o)_.push((a=u[o],/^:[ \t]*--*$/.test(a)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(a)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(a)?' style="text-align:center;"':""));for(o=0;o<h.length;++o)r.helper.isUndefined(_[o])&&(_[o]=""),f.push((l=h[o],c=_[o],d=void 0,d="",l=l.trim(),(t.tablesHeaderId||t.tableHeaderId)&&(d=' id="'+l.replace(/ /g,"_").toLowerCase()+'"'),"<th"+d+c+">"+(l=r.subParser("spanGamut")(l,t,i))+"</th>\n"));for(o=0;o<p.length;++o){for(var g=[],v=0;v<f.length;++v)r.helper.isUndefined(p[o][v]),g.push(n(p[o][v],_[v]));m.push(g)}return function(e,t){for(var i="<table>\n<thead>\n<tr>\n",n=e.length,o=0;o<n;++o)i+=e[o];for(i+="</tr>\n</thead>\n<tbody>\n",o=0;o<t.length;++o){i+="<tr>\n";for(var r=0;r<n;++r)i+=t[o][r];i+="</tr>\n"}return i+"</tbody>\n</table>\n"}(f,m)}return e=(e=(e=(e=i.converter._dispatch("tables.before",e,t,i)).replace(/\\(\|)/g,r.helper.escapeCharactersCallback)).replace(/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|¨0)/gm,o)).replace(/^ {0,3}\|.+\|[ \t]*\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*\n( {0,3}\|.+\|[ \t]*\n)*(?:\n|¨0)/gm,o),i.converter._dispatch("tables.after",e,t,i)})),r.subParser("underline",(function(e,t,i){"use strict";return t.underline?(e=i.converter._dispatch("underline.before",e,t,i),e=(e=t.literalMidWordUnderscores?(e=e.replace(/\b___(\S[\s\S]*?)___\b/g,(function(e,t){return"<u>"+t+"</u>"}))).replace(/\b__(\S[\s\S]*?)__\b/g,(function(e,t){return"<u>"+t+"</u>"})):(e=e.replace(/___(\S[\s\S]*?)___/g,(function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e}))).replace(/__(\S[\s\S]*?)__/g,(function(e,t){return/\S$/.test(t)?"<u>"+t+"</u>":e}))).replace(/(_)/g,r.helper.escapeCharactersCallback),e=i.converter._dispatch("underline.after",e,t,i)):e})),r.subParser("unescapeSpecialChars",(function(e,t,i){"use strict";return e=(e=i.converter._dispatch("unescapeSpecialChars.before",e,t,i)).replace(/¨E(\d+)E/g,(function(e,t){var i=parseInt(t);return String.fromCharCode(i)})),i.converter._dispatch("unescapeSpecialChars.after",e,t,i)})),r.subParser("makeMarkdown.blockquote",(function(e,t){"use strict";var i="";if(e.hasChildNodes())for(var n=e.childNodes,o=n.length,s=0;s<o;++s){var a=r.subParser("makeMarkdown.node")(n[s],t);""!==a&&(i+=a)}return"> "+(i=i.trim()).split("\n").join("\n> ")})),r.subParser("makeMarkdown.codeBlock",(function(e,t){"use strict";var i=e.getAttribute("language"),n=e.getAttribute("precodenum");return"```"+i+"\n"+t.preList[n]+"\n```"})),r.subParser("makeMarkdown.codeSpan",(function(e){"use strict";return"`"+e.innerHTML+"`"})),r.subParser("makeMarkdown.emphasis",(function(e,t){"use strict";var i="";if(e.hasChildNodes()){i+="*";for(var n=e.childNodes,o=n.length,s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],t);i+="*"}return i})),r.subParser("makeMarkdown.header",(function(e,t,i){"use strict";var n=new Array(i+1).join("#"),o="";if(e.hasChildNodes()){o=n+" ";for(var s=e.childNodes,a=s.length,l=0;l<a;++l)o+=r.subParser("makeMarkdown.node")(s[l],t)}return o})),r.subParser("makeMarkdown.hr",(function(){"use strict";return"---"})),r.subParser("makeMarkdown.image",(function(e){"use strict";var t="";return e.hasAttribute("src")&&(t+="!["+e.getAttribute("alt")+"](",t+="<"+e.getAttribute("src")+">",e.hasAttribute("width")&&e.hasAttribute("height")&&(t+=" ="+e.getAttribute("width")+"x"+e.getAttribute("height")),e.hasAttribute("title")&&(t+=' "'+e.getAttribute("title")+'"'),t+=")"),t})),r.subParser("makeMarkdown.links",(function(e,t){"use strict";var i="";if(e.hasChildNodes()&&e.hasAttribute("href")){var n=e.childNodes,o=n.length;i="[";for(var s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],t);i+="](",i+="<"+e.getAttribute("href")+">",e.hasAttribute("title")&&(i+=' "'+e.getAttribute("title")+'"'),i+=")"}return i})),r.subParser("makeMarkdown.list",(function(e,t,i){"use strict";var n="";if(!e.hasChildNodes())return"";for(var o=e.childNodes,s=o.length,a=e.getAttribute("start")||1,l=0;l<s;++l)void 0!==o[l].tagName&&"li"===o[l].tagName.toLowerCase()&&(n+=("ol"===i?a.toString()+". ":"- ")+r.subParser("makeMarkdown.listItem")(o[l],t),++a);return(n+="\n\x3c!-- --\x3e\n").trim()})),r.subParser("makeMarkdown.listItem",(function(e,t){"use strict";for(var i="",n=e.childNodes,o=n.length,s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],t);return/\n$/.test(i)?i=i.split("\n").join("\n    ").replace(/^ {4}$/gm,"").replace(/\n\n+/g,"\n\n"):i+="\n",i})),r.subParser("makeMarkdown.node",(function(e,t,i){"use strict";i=i||!1;var n="";if(3===e.nodeType)return r.subParser("makeMarkdown.txt")(e,t);if(8===e.nodeType)return"\x3c!--"+e.data+"--\x3e\n\n";if(1!==e.nodeType)return"";switch(e.tagName.toLowerCase()){case"h1":i||(n=r.subParser("makeMarkdown.header")(e,t,1)+"\n\n");break;case"h2":i||(n=r.subParser("makeMarkdown.header")(e,t,2)+"\n\n");break;case"h3":i||(n=r.subParser("makeMarkdown.header")(e,t,3)+"\n\n");break;case"h4":i||(n=r.subParser("makeMarkdown.header")(e,t,4)+"\n\n");break;case"h5":i||(n=r.subParser("makeMarkdown.header")(e,t,5)+"\n\n");break;case"h6":i||(n=r.subParser("makeMarkdown.header")(e,t,6)+"\n\n");break;case"p":i||(n=r.subParser("makeMarkdown.paragraph")(e,t)+"\n\n");break;case"blockquote":i||(n=r.subParser("makeMarkdown.blockquote")(e,t)+"\n\n");break;case"hr":i||(n=r.subParser("makeMarkdown.hr")(e,t)+"\n\n");break;case"ol":i||(n=r.subParser("makeMarkdown.list")(e,t,"ol")+"\n\n");break;case"ul":i||(n=r.subParser("makeMarkdown.list")(e,t,"ul")+"\n\n");break;case"precode":i||(n=r.subParser("makeMarkdown.codeBlock")(e,t)+"\n\n");break;case"pre":i||(n=r.subParser("makeMarkdown.pre")(e,t)+"\n\n");break;case"table":i||(n=r.subParser("makeMarkdown.table")(e,t)+"\n\n");break;case"code":n=r.subParser("makeMarkdown.codeSpan")(e,t);break;case"em":case"i":n=r.subParser("makeMarkdown.emphasis")(e,t);break;case"strong":case"b":n=r.subParser("makeMarkdown.strong")(e,t);break;case"del":n=r.subParser("makeMarkdown.strikethrough")(e,t);break;case"a":n=r.subParser("makeMarkdown.links")(e,t);break;case"img":n=r.subParser("makeMarkdown.image")(e,t);break;default:n=e.outerHTML+"\n\n"}return n})),r.subParser("makeMarkdown.paragraph",(function(e,t){"use strict";var i="";if(e.hasChildNodes())for(var n=e.childNodes,o=n.length,s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],t);return i.trim()})),r.subParser("makeMarkdown.pre",(function(e,t){"use strict";var i=e.getAttribute("prenum");return"<pre>"+t.preList[i]+"</pre>"})),r.subParser("makeMarkdown.strikethrough",(function(e,t){"use strict";var i="";if(e.hasChildNodes()){i+="~~";for(var n=e.childNodes,o=n.length,s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],t);i+="~~"}return i})),r.subParser("makeMarkdown.strong",(function(e,t){"use strict";var i="";if(e.hasChildNodes()){i+="**";for(var n=e.childNodes,o=n.length,s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],t);i+="**"}return i})),r.subParser("makeMarkdown.table",(function(e,t){"use strict";var i,n,o="",s=[[],[]],a=e.querySelectorAll("thead>tr>th"),l=e.querySelectorAll("tbody>tr");for(i=0;i<a.length;++i){var c=r.subParser("makeMarkdown.tableCell")(a[i],t),d="---";if(a[i].hasAttribute("style"))switch(a[i].getAttribute("style").toLowerCase().replace(/\s/g,"")){case"text-align:left;":d=":---";break;case"text-align:right;":d="---:";break;case"text-align:center;":d=":---:"}s[0][i]=c.trim(),s[1][i]=d}for(i=0;i<l.length;++i){var h=s.push([])-1,u=l[i].getElementsByTagName("td");for(n=0;n<a.length;++n){var p=" ";void 0!==u[n]&&(p=r.subParser("makeMarkdown.tableCell")(u[n],t)),s[h].push(p)}}var f=3;for(i=0;i<s.length;++i)for(n=0;n<s[i].length;++n){var _=s[i][n].length;_>f&&(f=_)}for(i=0;i<s.length;++i){for(n=0;n<s[i].length;++n)1===i?":"===s[i][n].slice(-1)?s[i][n]=r.helper.padEnd(s[i][n].slice(-1),f-1,"-")+":":s[i][n]=r.helper.padEnd(s[i][n],f,"-"):s[i][n]=r.helper.padEnd(s[i][n],f);o+="| "+s[i].join(" | ")+" |\n"}return o.trim()})),r.subParser("makeMarkdown.tableCell",(function(e,t){"use strict";var i="";if(!e.hasChildNodes())return"";for(var n=e.childNodes,o=n.length,s=0;s<o;++s)i+=r.subParser("makeMarkdown.node")(n[s],t,!0);return i.trim()})),r.subParser("makeMarkdown.txt",(function(e){"use strict";var t=e.nodeValue;return t=(t=t.replace(/ +/g," ")).replace(/¨NBSP;/g," "),(t=(t=(t=(t=(t=(t=(t=(t=r.helper.unescapeHTMLEntities(t)).replace(/([*_~|`])/g,"\\$1")).replace(/^(\s*)>/g,"\\$1>")).replace(/^#/gm,"\\#")).replace(/^(\s*)([-=]{3,})(\s*)$/,"$1\\$2$3")).replace(/^( {0,3}\d+)\./gm,"$1\\.")).replace(/^( {0,3})([+-])/gm,"$1\\$2")).replace(/]([\s]*)\(/g,"\\]$1\\(")).replace(/^ {0,3}\[([\S \t]*?)]:/gm,"\\[$1]:")})),void 0===(n=function(){"use strict";return r}.call(t,i,t,e))||(e.exports=n)}).call(this)}}]);